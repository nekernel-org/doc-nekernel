<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Photon: vendor/litehtml/containers/test/canvas_ity.hpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Photon<span id="projectnumber">&#160;1.0.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function() { init_codefold(0); });
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('canvas__ity_8hpp_source.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="headertitle"><div class="title">canvas_ity.hpp</div></div>
</div><!--header-->
<div class="contents">
<a href="canvas__ity_8hpp.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a id="l00001" name="l00001"></a><span class="lineno">    1</span><span class="comment">// canvas_ity v1.00 -- ISC license</span></div>
<div class="line"><a id="l00002" name="l00002"></a><span class="lineno">    2</span><span class="comment">// Copyright (c) 2022 Andrew Kensler</span></div>
<div class="line"><a id="l00003" name="l00003"></a><span class="lineno">    3</span><span class="comment">//</span></div>
<div class="line"><a id="l00004" name="l00004"></a><span class="lineno">    4</span><span class="comment">// Permission to use, copy, modify, and/or distribute this software for any</span></div>
<div class="line"><a id="l00005" name="l00005"></a><span class="lineno">    5</span><span class="comment">// purpose with or without fee is hereby granted, provided that the above</span></div>
<div class="line"><a id="l00006" name="l00006"></a><span class="lineno">    6</span><span class="comment">// copyright notice and this permission notice appear in all copies.</span></div>
<div class="line"><a id="l00007" name="l00007"></a><span class="lineno">    7</span><span class="comment">//</span></div>
<div class="line"><a id="l00008" name="l00008"></a><span class="lineno">    8</span><span class="comment">// THE SOFTWARE IS PROVIDED &quot;AS IS&quot; AND THE AUTHOR DISCLAIMS ALL WARRANTIES</span></div>
<div class="line"><a id="l00009" name="l00009"></a><span class="lineno">    9</span><span class="comment">// WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF</span></div>
<div class="line"><a id="l00010" name="l00010"></a><span class="lineno">   10</span><span class="comment">// MERCHANTABILITY AND FITNESS.  IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR</span></div>
<div class="line"><a id="l00011" name="l00011"></a><span class="lineno">   11</span><span class="comment">// ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES</span></div>
<div class="line"><a id="l00012" name="l00012"></a><span class="lineno">   12</span><span class="comment">// WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN</span></div>
<div class="line"><a id="l00013" name="l00013"></a><span class="lineno">   13</span><span class="comment">// ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF</span></div>
<div class="line"><a id="l00014" name="l00014"></a><span class="lineno">   14</span><span class="comment">// OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.</span></div>
<div class="line"><a id="l00015" name="l00015"></a><span class="lineno">   15</span> </div>
<div class="line"><a id="l00016" name="l00016"></a><span class="lineno">   16</span><span class="comment">// ======== ABOUT ========</span></div>
<div class="line"><a id="l00017" name="l00017"></a><span class="lineno">   17</span><span class="comment">//</span></div>
<div class="line"><a id="l00018" name="l00018"></a><span class="lineno">   18</span><span class="comment">// This is a tiny, single-header C++ library for rasterizing immediate-mode</span></div>
<div class="line"><a id="l00019" name="l00019"></a><span class="lineno">   19</span><span class="comment">// 2D vector graphics, closely modeled on the basic W3C (not WHATWG) HTML5 2D</span></div>
<div class="line"><a id="l00020" name="l00020"></a><span class="lineno">   20</span><span class="comment">// canvas specification (https://www.w3.org/TR/2015/REC-2dcontext-20151119/).</span></div>
<div class="line"><a id="l00021" name="l00021"></a><span class="lineno">   21</span><span class="comment">//</span></div>
<div class="line"><a id="l00022" name="l00022"></a><span class="lineno">   22</span><span class="comment">// The priorities for this library are high-quality rendering, ease of use,</span></div>
<div class="line"><a id="l00023" name="l00023"></a><span class="lineno">   23</span><span class="comment">// and compact size.  Speed is important too, but secondary to the other</span></div>
<div class="line"><a id="l00024" name="l00024"></a><span class="lineno">   24</span><span class="comment">// priorities.  Notably, this library takes an opinionated approach and</span></div>
<div class="line"><a id="l00025" name="l00025"></a><span class="lineno">   25</span><span class="comment">// does not provide options for trading off quality for speed.</span></div>
<div class="line"><a id="l00026" name="l00026"></a><span class="lineno">   26</span><span class="comment">//</span></div>
<div class="line"><a id="l00027" name="l00027"></a><span class="lineno">   27</span><span class="comment">// Despite its small size, it supports nearly everything listed in the W3C</span></div>
<div class="line"><a id="l00028" name="l00028"></a><span class="lineno">   28</span><span class="comment">// HTML5 2D canvas specification, except for hit regions and getting certain</span></div>
<div class="line"><a id="l00029" name="l00029"></a><span class="lineno">   29</span><span class="comment">// properties.  The main differences lie in the surface-level API to make this</span></div>
<div class="line"><a id="l00030" name="l00030"></a><span class="lineno">   30</span><span class="comment">// easier for C++ use, while the underlying implementation is carefully based</span></div>
<div class="line"><a id="l00031" name="l00031"></a><span class="lineno">   31</span><span class="comment">// on the specification.  In particular, stroke, fill, gradient, pattern,</span></div>
<div class="line"><a id="l00032" name="l00032"></a><span class="lineno">   32</span><span class="comment">// image, and font styles are specified slightly differently (avoiding strings</span></div>
<div class="line"><a id="l00033" name="l00033"></a><span class="lineno">   33</span><span class="comment">// and auxiliary classes).  Nonetheless, the goal is that this library could</span></div>
<div class="line"><a id="l00034" name="l00034"></a><span class="lineno">   34</span><span class="comment">// produce a conforming HTML5 2D canvas implementation if wrapped in a thin</span></div>
<div class="line"><a id="l00035" name="l00035"></a><span class="lineno">   35</span><span class="comment">// layer of JavaScript bindings.  See the accompanying C++ automated test</span></div>
<div class="line"><a id="l00036" name="l00036"></a><span class="lineno">   36</span><span class="comment">// suite and its HTML5 port for a mapping between the APIs and a comparison</span></div>
<div class="line"><a id="l00037" name="l00037"></a><span class="lineno">   37</span><span class="comment">// of this library&#39;s rendering output against browser canvas implementations.</span></div>
<div class="line"><a id="l00038" name="l00038"></a><span class="lineno">   38</span> </div>
<div class="line"><a id="l00039" name="l00039"></a><span class="lineno">   39</span><span class="comment">// ======== FEATURES ========</span></div>
<div class="line"><a id="l00040" name="l00040"></a><span class="lineno">   40</span><span class="comment">//</span></div>
<div class="line"><a id="l00041" name="l00041"></a><span class="lineno">   41</span><span class="comment">// High-quality rendering:</span></div>
<div class="line"><a id="l00042" name="l00042"></a><span class="lineno">   42</span><span class="comment">//</span></div>
<div class="line"><a id="l00043" name="l00043"></a><span class="lineno">   43</span><span class="comment">// - Trapezoidal area antialiasing provides very smooth antialiasing, even</span></div>
<div class="line"><a id="l00044" name="l00044"></a><span class="lineno">   44</span><span class="comment">//     when lines are nearly horizontal or vertical.</span></div>
<div class="line"><a id="l00045" name="l00045"></a><span class="lineno">   45</span><span class="comment">// - Gamma-correct blending, interpolation, and resampling are used</span></div>
<div class="line"><a id="l00046" name="l00046"></a><span class="lineno">   46</span><span class="comment">//     throughout.  It linearizes all colors and premultiplies alpha on</span></div>
<div class="line"><a id="l00047" name="l00047"></a><span class="lineno">   47</span><span class="comment">//     input and converts back to unpremultiplied sRGB on output.  This</span></div>
<div class="line"><a id="l00048" name="l00048"></a><span class="lineno">   48</span><span class="comment">//     reduces muddiness on many gradients (e.g., red to green), makes line</span></div>
<div class="line"><a id="l00049" name="l00049"></a><span class="lineno">   49</span><span class="comment">//     thicknesses more perceptually uniform, and avoids dark fringes when</span></div>
<div class="line"><a id="l00050" name="l00050"></a><span class="lineno">   50</span><span class="comment">//     interpolating opacity.</span></div>
<div class="line"><a id="l00051" name="l00051"></a><span class="lineno">   51</span><span class="comment">// - Bicubic convolution resampling is used whenever it needs to resample a</span></div>
<div class="line"><a id="l00052" name="l00052"></a><span class="lineno">   52</span><span class="comment">//     pattern or image.  This smoothly interpolates with less blockiness when</span></div>
<div class="line"><a id="l00053" name="l00053"></a><span class="lineno">   53</span><span class="comment">//     magnifying, and antialiases well when minifying.  It can simultaneously</span></div>
<div class="line"><a id="l00054" name="l00054"></a><span class="lineno">   54</span><span class="comment">//     magnify and minify along different axes.</span></div>
<div class="line"><a id="l00055" name="l00055"></a><span class="lineno">   55</span><span class="comment">// - Ordered dithering is used on output.  This reduces banding on subtle</span></div>
<div class="line"><a id="l00056" name="l00056"></a><span class="lineno">   56</span><span class="comment">//     gradients while still being compression-friendly.</span></div>
<div class="line"><a id="l00057" name="l00057"></a><span class="lineno">   57</span><span class="comment">// - High curvature is handled carefully in line joins.  Thick lines are</span></div>
<div class="line"><a id="l00058" name="l00058"></a><span class="lineno">   58</span><span class="comment">//     drawn correctly as though tracing with a wide pen nib, even where</span></div>
<div class="line"><a id="l00059" name="l00059"></a><span class="lineno">   59</span><span class="comment">//     the lines curve sharply.  (Simpler curve offsetting approaches tend</span></div>
<div class="line"><a id="l00060" name="l00060"></a><span class="lineno">   60</span><span class="comment">//     to show bite-like artifacts in these cases.)</span></div>
<div class="line"><a id="l00061" name="l00061"></a><span class="lineno">   61</span><span class="comment">//</span></div>
<div class="line"><a id="l00062" name="l00062"></a><span class="lineno">   62</span><span class="comment">// Ease of use:</span></div>
<div class="line"><a id="l00063" name="l00063"></a><span class="lineno">   63</span><span class="comment">//</span></div>
<div class="line"><a id="l00064" name="l00064"></a><span class="lineno">   64</span><span class="comment">// - Provided as a single-header library with no dependencies beside the</span></div>
<div class="line"><a id="l00065" name="l00065"></a><span class="lineno">   65</span><span class="comment">//     standard C++ library.  There is nothing to link, and it even includes</span></div>
<div class="line"><a id="l00066" name="l00066"></a><span class="lineno">   66</span><span class="comment">//     built-in binary parsing for TrueType font (TTF) files.  It is pure CPU</span></div>
<div class="line"><a id="l00067" name="l00067"></a><span class="lineno">   67</span><span class="comment">//     code and does not require a GPU or GPU context.</span></div>
<div class="line"><a id="l00068" name="l00068"></a><span class="lineno">   68</span><span class="comment">// - Has extensive Doxygen-style documentation comments for the public API.</span></div>
<div class="line"><a id="l00069" name="l00069"></a><span class="lineno">   69</span><span class="comment">// - Compiles cleanly at moderately high warning levels on most compilers.</span></div>
<div class="line"><a id="l00070" name="l00070"></a><span class="lineno">   70</span><span class="comment">// - Shares no internal pointers, nor holds any external pointers.  Newcomers</span></div>
<div class="line"><a id="l00071" name="l00071"></a><span class="lineno">   71</span><span class="comment">//     to C++ can have fun drawing with this library without worrying so much</span></div>
<div class="line"><a id="l00072" name="l00072"></a><span class="lineno">   72</span><span class="comment">//     about resource lifetimes or mutability.</span></div>
<div class="line"><a id="l00073" name="l00073"></a><span class="lineno">   73</span><span class="comment">// - Uses no static or global variables.  Threads may safely work with</span></div>
<div class="line"><a id="l00074" name="l00074"></a><span class="lineno">   74</span><span class="comment">//     different canvas instances concurrently without locking.</span></div>
<div class="line"><a id="l00075" name="l00075"></a><span class="lineno">   75</span><span class="comment">// - Allocates no dynamic memory after reaching the high-water mark.  Except</span></div>
<div class="line"><a id="l00076" name="l00076"></a><span class="lineno">   76</span><span class="comment">//     for the pixel buffer, flat std::vector instances embedded in the canvas</span></div>
<div class="line"><a id="l00077" name="l00077"></a><span class="lineno">   77</span><span class="comment">//     instance handle all dynamic memory.  This reduces fragmentation and</span></div>
<div class="line"><a id="l00078" name="l00078"></a><span class="lineno">   78</span><span class="comment">//     makes it easy to change the code to reserve memory up front or even</span></div>
<div class="line"><a id="l00079" name="l00079"></a><span class="lineno">   79</span><span class="comment">//     to use statically allocated vectors.</span></div>
<div class="line"><a id="l00080" name="l00080"></a><span class="lineno">   80</span><span class="comment">// - Works with exceptions and RTTI disabled.</span></div>
<div class="line"><a id="l00081" name="l00081"></a><span class="lineno">   81</span><span class="comment">// - Intentionally uses a plain C++03 style to make it as widely portable</span></div>
<div class="line"><a id="l00082" name="l00082"></a><span class="lineno">   82</span><span class="comment">//     as possible, easier to understand, and (with indexing preferred over</span></div>
<div class="line"><a id="l00083" name="l00083"></a><span class="lineno">   83</span><span class="comment">//     pointer arithmetic) easier to port natively to other languages.  The</span></div>
<div class="line"><a id="l00084" name="l00084"></a><span class="lineno">   84</span><span class="comment">//     accompanying test suite may also help with porting.</span></div>
<div class="line"><a id="l00085" name="l00085"></a><span class="lineno">   85</span><span class="comment">//</span></div>
<div class="line"><a id="l00086" name="l00086"></a><span class="lineno">   86</span><span class="comment">// Compact size:</span></div>
<div class="line"><a id="l00087" name="l00087"></a><span class="lineno">   87</span><span class="comment">//</span></div>
<div class="line"><a id="l00088" name="l00088"></a><span class="lineno">   88</span><span class="comment">// - The source code for the entire library consists of a bit over 2300 lines</span></div>
<div class="line"><a id="l00089" name="l00089"></a><span class="lineno">   89</span><span class="comment">//     (not counting comments or blanks), each no longer than 78 columns.</span></div>
<div class="line"><a id="l00090" name="l00090"></a><span class="lineno">   90</span><span class="comment">//     Alternately measured, it has fewer than 1300 semicolons.</span></div>
<div class="line"><a id="l00091" name="l00091"></a><span class="lineno">   91</span><span class="comment">// - The object code for the library can be less than 36 KiB on x86-64 with</span></div>
<div class="line"><a id="l00092" name="l00092"></a><span class="lineno">   92</span><span class="comment">//     appropriate compiler settings for size.</span></div>
<div class="line"><a id="l00093" name="l00093"></a><span class="lineno">   93</span><span class="comment">// - Due to the library&#39;s small size, the accompanying automated test suite</span></div>
<div class="line"><a id="l00094" name="l00094"></a><span class="lineno">   94</span><span class="comment">//     achieves 100% line coverage of the library in gcov and llvm-cov.</span></div>
<div class="line"><a id="l00095" name="l00095"></a><span class="lineno">   95</span> </div>
<div class="line"><a id="l00096" name="l00096"></a><span class="lineno">   96</span><span class="comment">// ======== LIMITATIONS ========</span></div>
<div class="line"><a id="l00097" name="l00097"></a><span class="lineno">   97</span><span class="comment">//</span></div>
<div class="line"><a id="l00098" name="l00098"></a><span class="lineno">   98</span><span class="comment">// - Trapezoidal antialiasing overestimates coverage where paths self-</span></div>
<div class="line"><a id="l00099" name="l00099"></a><span class="lineno">   99</span><span class="comment">//     intersect within a single pixel.  Where inner joins are visible, this</span></div>
<div class="line"><a id="l00100" name="l00100"></a><span class="lineno">  100</span><span class="comment">//     can lead to a &quot;grittier&quot; appearance due to the extra windings used.</span></div>
<div class="line"><a id="l00101" name="l00101"></a><span class="lineno">  101</span><span class="comment">// - Clipping uses an antialiased sparse pixel mask rather than geometrically</span></div>
<div class="line"><a id="l00102" name="l00102"></a><span class="lineno">  102</span><span class="comment">//     intersecting paths.  Therefore, it is not subpixel-accurate.</span></div>
<div class="line"><a id="l00103" name="l00103"></a><span class="lineno">  103</span><span class="comment">// - Text rendering is extremely basic and mainly for convenience.  It only</span></div>
<div class="line"><a id="l00104" name="l00104"></a><span class="lineno">  104</span><span class="comment">//     supports left-to-right text, and does not do any hinting, kerning,</span></div>
<div class="line"><a id="l00105" name="l00105"></a><span class="lineno">  105</span><span class="comment">//     ligatures, text shaping, or text layout.  If you require any of those,</span></div>
<div class="line"><a id="l00106" name="l00106"></a><span class="lineno">  106</span><span class="comment">//     consider using another library to provide those and feed the results</span></div>
<div class="line"><a id="l00107" name="l00107"></a><span class="lineno">  107</span><span class="comment">//     to this library as either placed glyphs or raw paths.</span></div>
<div class="line"><a id="l00108" name="l00108"></a><span class="lineno">  108</span><span class="comment">// - TRUETYPE FONT PARSING IS NOT SECURE!  It does some basic validity</span></div>
<div class="line"><a id="l00109" name="l00109"></a><span class="lineno">  109</span><span class="comment">//     checking, but should only be used with known-good or sanitized fonts.</span></div>
<div class="line"><a id="l00110" name="l00110"></a><span class="lineno">  110</span><span class="comment">// - Parameter checking does not test for non-finite floating-point values.</span></div>
<div class="line"><a id="l00111" name="l00111"></a><span class="lineno">  111</span><span class="comment">// - Rendering is single-threaded, not explicitly vectorized, and not GPU-</span></div>
<div class="line"><a id="l00112" name="l00112"></a><span class="lineno">  112</span><span class="comment">//     accelerated.  It also copies data to avoid ownership issues.  If you</span></div>
<div class="line"><a id="l00113" name="l00113"></a><span class="lineno">  113</span><span class="comment">//     need the speed, you are better off using a more fully-featured library.</span></div>
<div class="line"><a id="l00114" name="l00114"></a><span class="lineno">  114</span><span class="comment">// - The library does no input or output on its own.  Instead, you must</span></div>
<div class="line"><a id="l00115" name="l00115"></a><span class="lineno">  115</span><span class="comment">//     provide it with buffers to copy into or out of.</span></div>
<div class="line"><a id="l00116" name="l00116"></a><span class="lineno">  116</span> </div>
<div class="line"><a id="l00117" name="l00117"></a><span class="lineno">  117</span><span class="comment">// ======== USAGE ========</span></div>
<div class="line"><a id="l00118" name="l00118"></a><span class="lineno">  118</span><span class="comment">//</span></div>
<div class="line"><a id="l00119" name="l00119"></a><span class="lineno">  119</span><span class="comment">// This is a single-header library.  You may freely include it in any of</span></div>
<div class="line"><a id="l00120" name="l00120"></a><span class="lineno">  120</span><span class="comment">// your source files to declare the canvas_ity namespace and its members.</span></div>
<div class="line"><a id="l00121" name="l00121"></a><span class="lineno">  121</span><span class="comment">// However, to get the implementation, you must</span></div>
<div class="line"><a id="l00122" name="l00122"></a><span class="lineno">  122</span><span class="comment">//     #define CANVAS_ITY_IMPLEMENTATION</span></div>
<div class="line"><a id="l00123" name="l00123"></a><span class="lineno">  123</span><span class="comment">// in exactly one C++ file before including this header.</span></div>
<div class="line"><a id="l00124" name="l00124"></a><span class="lineno">  124</span><span class="comment">//</span></div>
<div class="line"><a id="l00125" name="l00125"></a><span class="lineno">  125</span><span class="comment">// Then, construct an instance of the canvas_ity::canvas class with the pixel</span></div>
<div class="line"><a id="l00126" name="l00126"></a><span class="lineno">  126</span><span class="comment">// dimensions that you want and draw into it using any of the various drawing</span></div>
<div class="line"><a id="l00127" name="l00127"></a><span class="lineno">  127</span><span class="comment">// functions.  You can then use the get_image_data() function to retrieve the</span></div>
<div class="line"><a id="l00128" name="l00128"></a><span class="lineno">  128</span><span class="comment">// currently drawn image at any time.</span></div>
<div class="line"><a id="l00129" name="l00129"></a><span class="lineno">  129</span><span class="comment">//</span></div>
<div class="line"><a id="l00130" name="l00130"></a><span class="lineno">  130</span><span class="comment">// See each of the public member function and data member (i.e., method</span></div>
<div class="line"><a id="l00131" name="l00131"></a><span class="lineno">  131</span><span class="comment">// and field) declarations for the full API documentation.  Also see the</span></div>
<div class="line"><a id="l00132" name="l00132"></a><span class="lineno">  132</span><span class="comment">// accompanying C++ automated test suite for examples of the usage of each</span></div>
<div class="line"><a id="l00133" name="l00133"></a><span class="lineno">  133</span><span class="comment">// public member, and the test suite&#39;s HTML5 port for how these map to the</span></div>
<div class="line"><a id="l00134" name="l00134"></a><span class="lineno">  134</span><span class="comment">// HTML5 canvas API.</span></div>
<div class="line"><a id="l00135" name="l00135"></a><span class="lineno">  135</span> </div>
<div class="line"><a id="l00136" name="l00136"></a><span class="lineno">  136</span><span class="preprocessor">#ifndef CANVAS_ITY_HPP</span></div>
<div class="line"><a id="l00137" name="l00137"></a><span class="lineno">  137</span><span class="preprocessor">#define CANVAS_ITY_HPP</span></div>
<div class="line"><a id="l00138" name="l00138"></a><span class="lineno">  138</span> </div>
<div class="line"><a id="l00139" name="l00139"></a><span class="lineno">  139</span><span class="preprocessor">#include &lt;cstddef&gt;</span></div>
<div class="line"><a id="l00140" name="l00140"></a><span class="lineno">  140</span><span class="preprocessor">#include &lt;vector&gt;</span></div>
<div class="line"><a id="l00141" name="l00141"></a><span class="lineno">  141</span><span class="preprocessor">#include &lt;optional&gt;</span></div>
<div class="line"><a id="l00142" name="l00142"></a><span class="lineno">  142</span> </div>
<div class="line"><a id="l00143" name="l00143"></a><span class="lineno">  143</span><span class="keyword">namespace </span><a class="code hl_namespace" href="namespacecanvas__ity.html">canvas_ity</a></div>
<div class="line"><a id="l00144" name="l00144"></a><span class="lineno">  144</span>{</div>
<div class="line"><a id="l00145" name="l00145"></a><span class="lineno">  145</span> </div>
<div class="line"><a id="l00146" name="l00146"></a><span class="lineno">  146</span>    <span class="comment">// Public API enums</span></div>
<div class="foldopen" id="foldopen00147" data-start="{" data-end="};">
<div class="line"><a id="l00147" name="l00147"></a><span class="lineno"><a class="line" href="namespacecanvas__ity.html#a89843026830c0d4312f395e2e8c5992a">  147</a></span>    <span class="keyword">enum</span> <a class="code hl_enumeration" href="namespacecanvas__ity.html#a89843026830c0d4312f395e2e8c5992a">composite_operation</a></div>
<div class="line"><a id="l00148" name="l00148"></a><span class="lineno">  148</span>    {</div>
<div class="line"><a id="l00149" name="l00149"></a><span class="lineno"><a class="line" href="namespacecanvas__ity.html#a89843026830c0d4312f395e2e8c5992aab83cd4ceae74b73a482787c8482c6aa3">  149</a></span>        <a class="code hl_enumvalue" href="namespacecanvas__ity.html#a89843026830c0d4312f395e2e8c5992aab83cd4ceae74b73a482787c8482c6aa3">source_in</a> = 1,</div>
<div class="line"><a id="l00150" name="l00150"></a><span class="lineno"><a class="line" href="namespacecanvas__ity.html#a89843026830c0d4312f395e2e8c5992aa8f5afcc68d756a07d374c7fe1af78f09">  150</a></span>        <a class="code hl_enumvalue" href="namespacecanvas__ity.html#a89843026830c0d4312f395e2e8c5992aa8f5afcc68d756a07d374c7fe1af78f09">source_copy</a>,</div>
<div class="line"><a id="l00151" name="l00151"></a><span class="lineno"><a class="line" href="namespacecanvas__ity.html#a89843026830c0d4312f395e2e8c5992aa1551281f28c69c640f9778deebe6b2a7">  151</a></span>        <a class="code hl_enumvalue" href="namespacecanvas__ity.html#a89843026830c0d4312f395e2e8c5992aa1551281f28c69c640f9778deebe6b2a7">source_out</a>,</div>
<div class="line"><a id="l00152" name="l00152"></a><span class="lineno"><a class="line" href="namespacecanvas__ity.html#a89843026830c0d4312f395e2e8c5992aadaf44bae777164af214e1897cb0a22a5">  152</a></span>        <a class="code hl_enumvalue" href="namespacecanvas__ity.html#a89843026830c0d4312f395e2e8c5992aadaf44bae777164af214e1897cb0a22a5">destination_in</a>,</div>
<div class="line"><a id="l00153" name="l00153"></a><span class="lineno"><a class="line" href="namespacecanvas__ity.html#a89843026830c0d4312f395e2e8c5992aaa2d7c8a56d9df52c6373bd2c9592a403">  153</a></span>        <a class="code hl_enumvalue" href="namespacecanvas__ity.html#a89843026830c0d4312f395e2e8c5992aaa2d7c8a56d9df52c6373bd2c9592a403">destination_atop</a> = 7,</div>
<div class="line"><a id="l00154" name="l00154"></a><span class="lineno">  154</span>        <span class="comment">// confusing name, &#39;lighter&#39; should be called &#39;plus&#39;</span></div>
<div class="line"><a id="l00155" name="l00155"></a><span class="lineno">  155</span>        <span class="comment">// https://www.w3.org/TR/compositing-1/#porterduffcompositingoperators_plus</span></div>
<div class="line"><a id="l00156" name="l00156"></a><span class="lineno">  156</span>        <span class="comment">// RED_out = ALPHA_src * RED_src + ALPHA_dst * RED_dst</span></div>
<div class="line"><a id="l00157" name="l00157"></a><span class="lineno">  157</span>        <span class="comment">// ALPHA_out = ALPHA_src + ALPHA_dst</span></div>
<div class="line"><a id="l00158" name="l00158"></a><span class="lineno">  158</span>        <span class="comment">// https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D/globalCompositeOperation</span></div>
<div class="line"><a id="l00159" name="l00159"></a><span class="lineno">  159</span>        <span class="comment">// &quot;Where both shapes overlap, the color is determined by adding color values.&quot;</span></div>
<div class="line"><a id="l00160" name="l00160"></a><span class="lineno"><a class="line" href="namespacecanvas__ity.html#a89843026830c0d4312f395e2e8c5992aa195106cf44a7a88a2348a13ae9e5e438">  160</a></span>        <a class="code hl_enumvalue" href="namespacecanvas__ity.html#a89843026830c0d4312f395e2e8c5992aa195106cf44a7a88a2348a13ae9e5e438">lighter</a> = 10,</div>
<div class="line"><a id="l00161" name="l00161"></a><span class="lineno"><a class="line" href="namespacecanvas__ity.html#a89843026830c0d4312f395e2e8c5992aac7fda6c2cdffd9c9bd2a1f4dbdfcbc92">  161</a></span>        <a class="code hl_enumvalue" href="namespacecanvas__ity.html#a89843026830c0d4312f395e2e8c5992aac7fda6c2cdffd9c9bd2a1f4dbdfcbc92">destination_over</a>,</div>
<div class="line"><a id="l00162" name="l00162"></a><span class="lineno"><a class="line" href="namespacecanvas__ity.html#a89843026830c0d4312f395e2e8c5992aa5463ab8f1b6e223c9e071b27376bb0da">  162</a></span>        <a class="code hl_enumvalue" href="namespacecanvas__ity.html#a89843026830c0d4312f395e2e8c5992aa5463ab8f1b6e223c9e071b27376bb0da">destination_out</a>,</div>
<div class="line"><a id="l00163" name="l00163"></a><span class="lineno"><a class="line" href="namespacecanvas__ity.html#a89843026830c0d4312f395e2e8c5992aa5c1f47394970225031b247173b4dd7ee">  163</a></span>        <a class="code hl_enumvalue" href="namespacecanvas__ity.html#a89843026830c0d4312f395e2e8c5992aa5c1f47394970225031b247173b4dd7ee">source_atop</a>,</div>
<div class="line"><a id="l00164" name="l00164"></a><span class="lineno"><a class="line" href="namespacecanvas__ity.html#a89843026830c0d4312f395e2e8c5992aa1e08030289f7c45d56752efe751fd4fb">  164</a></span>        <a class="code hl_enumvalue" href="namespacecanvas__ity.html#a89843026830c0d4312f395e2e8c5992aa1e08030289f7c45d56752efe751fd4fb">source_over</a>,</div>
<div class="line"><a id="l00165" name="l00165"></a><span class="lineno">  165</span>        <a class="code hl_enumvalue" href="namespacecanvas__ity.html#a89843026830c0d4312f395e2e8c5992aa0591c61522e13a6472da43c12112e230">exclusive_or</a></div>
<div class="line"><a id="l00166" name="l00166"></a><span class="lineno"><a class="line" href="namespacecanvas__ity.html#a89843026830c0d4312f395e2e8c5992aa0591c61522e13a6472da43c12112e230">  166</a></span>    };</div>
</div>
<div class="foldopen" id="foldopen00167" data-start="{" data-end="};">
<div class="line"><a id="l00167" name="l00167"></a><span class="lineno"><a class="line" href="namespacecanvas__ity.html#ac31761ebfc503cc7b7e5a9d359fa4431">  167</a></span>    <span class="keyword">enum</span> <a class="code hl_enumeration" href="namespacecanvas__ity.html#ac31761ebfc503cc7b7e5a9d359fa4431">cap_style</a></div>
<div class="line"><a id="l00168" name="l00168"></a><span class="lineno">  168</span>    {</div>
<div class="line"><a id="l00169" name="l00169"></a><span class="lineno"><a class="line" href="namespacecanvas__ity.html#ac31761ebfc503cc7b7e5a9d359fa4431aed96d21acb9c340b362bbb6e414fac7a">  169</a></span>        <a class="code hl_enumvalue" href="namespacecanvas__ity.html#ac31761ebfc503cc7b7e5a9d359fa4431aed96d21acb9c340b362bbb6e414fac7a">butt</a>,</div>
<div class="line"><a id="l00170" name="l00170"></a><span class="lineno"><a class="line" href="namespacecanvas__ity.html#ac31761ebfc503cc7b7e5a9d359fa4431a78585210f45e24334663fc46ac0c576f">  170</a></span>        <a class="code hl_enumvalue" href="namespacecanvas__ity.html#ac31761ebfc503cc7b7e5a9d359fa4431a78585210f45e24334663fc46ac0c576f">square</a>,</div>
<div class="line"><a id="l00171" name="l00171"></a><span class="lineno">  171</span>        <a class="code hl_enumvalue" href="namespacecanvas__ity.html#ac31761ebfc503cc7b7e5a9d359fa4431a949e82fed800d1871e0e5d7426b62277">circle</a></div>
<div class="line"><a id="l00172" name="l00172"></a><span class="lineno"><a class="line" href="namespacecanvas__ity.html#ac31761ebfc503cc7b7e5a9d359fa4431a949e82fed800d1871e0e5d7426b62277">  172</a></span>    };</div>
</div>
<div class="foldopen" id="foldopen00173" data-start="{" data-end="};">
<div class="line"><a id="l00173" name="l00173"></a><span class="lineno"><a class="line" href="namespacecanvas__ity.html#ac351ff9340ea3c0b196f8788ddfa0f1a">  173</a></span>    <span class="keyword">enum</span> <a class="code hl_enumeration" href="namespacecanvas__ity.html#ac351ff9340ea3c0b196f8788ddfa0f1a">join_style</a></div>
<div class="line"><a id="l00174" name="l00174"></a><span class="lineno">  174</span>    {</div>
<div class="line"><a id="l00175" name="l00175"></a><span class="lineno"><a class="line" href="namespacecanvas__ity.html#ac351ff9340ea3c0b196f8788ddfa0f1aa10b6beb5c0a396ea09bbac8b03c9e696">  175</a></span>        <a class="code hl_enumvalue" href="namespacecanvas__ity.html#ac351ff9340ea3c0b196f8788ddfa0f1aa10b6beb5c0a396ea09bbac8b03c9e696">miter</a>,</div>
<div class="line"><a id="l00176" name="l00176"></a><span class="lineno"><a class="line" href="namespacecanvas__ity.html#ac351ff9340ea3c0b196f8788ddfa0f1aa273a90f2160e164f7eef29d6a35ea71e">  176</a></span>        <a class="code hl_enumvalue" href="namespacecanvas__ity.html#ac351ff9340ea3c0b196f8788ddfa0f1aa273a90f2160e164f7eef29d6a35ea71e">bevel</a>,</div>
<div class="line"><a id="l00177" name="l00177"></a><span class="lineno">  177</span>        <a class="code hl_enumvalue" href="namespacecanvas__ity.html#ac351ff9340ea3c0b196f8788ddfa0f1aa50e8eb43e66a9878174a8cf7c3557a34">rounded</a></div>
<div class="line"><a id="l00178" name="l00178"></a><span class="lineno"><a class="line" href="namespacecanvas__ity.html#ac351ff9340ea3c0b196f8788ddfa0f1aa50e8eb43e66a9878174a8cf7c3557a34">  178</a></span>    };</div>
</div>
<div class="foldopen" id="foldopen00179" data-start="{" data-end="};">
<div class="line"><a id="l00179" name="l00179"></a><span class="lineno"><a class="line" href="namespacecanvas__ity.html#a43021a4a19378b8a045cf40f27a3bb57">  179</a></span>    <span class="keyword">enum</span> <a class="code hl_enumeration" href="namespacecanvas__ity.html#a43021a4a19378b8a045cf40f27a3bb57">brush_type</a></div>
<div class="line"><a id="l00180" name="l00180"></a><span class="lineno">  180</span>    {</div>
<div class="line"><a id="l00181" name="l00181"></a><span class="lineno"><a class="line" href="namespacecanvas__ity.html#a43021a4a19378b8a045cf40f27a3bb57a1e6269b4d68ba7a58b54ef61b8f7fb0f">  181</a></span>        <a class="code hl_enumvalue" href="namespacecanvas__ity.html#a43021a4a19378b8a045cf40f27a3bb57a1e6269b4d68ba7a58b54ef61b8f7fb0f">fill_style</a>,</div>
<div class="line"><a id="l00182" name="l00182"></a><span class="lineno">  182</span>        <a class="code hl_enumvalue" href="namespacecanvas__ity.html#a43021a4a19378b8a045cf40f27a3bb57a8007c46114f5b82c1f6f36d0522d6bf7">stroke_style</a></div>
<div class="line"><a id="l00183" name="l00183"></a><span class="lineno"><a class="line" href="namespacecanvas__ity.html#a43021a4a19378b8a045cf40f27a3bb57a8007c46114f5b82c1f6f36d0522d6bf7">  183</a></span>    };</div>
</div>
<div class="foldopen" id="foldopen00184" data-start="{" data-end="};">
<div class="line"><a id="l00184" name="l00184"></a><span class="lineno"><a class="line" href="namespacecanvas__ity.html#ad73c575b59800b5698624c6545d925b1">  184</a></span>    <span class="keyword">enum</span> <a class="code hl_enumeration" href="namespacecanvas__ity.html#ad73c575b59800b5698624c6545d925b1">repetition_style</a></div>
<div class="line"><a id="l00185" name="l00185"></a><span class="lineno">  185</span>    {</div>
<div class="line"><a id="l00186" name="l00186"></a><span class="lineno"><a class="line" href="namespacecanvas__ity.html#ad73c575b59800b5698624c6545d925b1a17b822bfdfba59ca705c9fbea739b6ad">  186</a></span>        <a class="code hl_enumvalue" href="namespacecanvas__ity.html#ad73c575b59800b5698624c6545d925b1a17b822bfdfba59ca705c9fbea739b6ad">repeat</a>,</div>
<div class="line"><a id="l00187" name="l00187"></a><span class="lineno"><a class="line" href="namespacecanvas__ity.html#ad73c575b59800b5698624c6545d925b1aab666ca31f27c30c052505212678d6b8">  187</a></span>        <a class="code hl_enumvalue" href="namespacecanvas__ity.html#ad73c575b59800b5698624c6545d925b1aab666ca31f27c30c052505212678d6b8">repeat_x</a>,</div>
<div class="line"><a id="l00188" name="l00188"></a><span class="lineno"><a class="line" href="namespacecanvas__ity.html#ad73c575b59800b5698624c6545d925b1a00167bf403bc6b0368c6b979ef5f8e07">  188</a></span>        <a class="code hl_enumvalue" href="namespacecanvas__ity.html#ad73c575b59800b5698624c6545d925b1a00167bf403bc6b0368c6b979ef5f8e07">repeat_y</a>,</div>
<div class="line"><a id="l00189" name="l00189"></a><span class="lineno">  189</span>        <a class="code hl_enumvalue" href="namespacecanvas__ity.html#ad73c575b59800b5698624c6545d925b1acbb7a5d0c043275cb4e1d12cae36a345">no_repeat</a></div>
<div class="line"><a id="l00190" name="l00190"></a><span class="lineno"><a class="line" href="namespacecanvas__ity.html#ad73c575b59800b5698624c6545d925b1acbb7a5d0c043275cb4e1d12cae36a345">  190</a></span>    };</div>
</div>
<div class="foldopen" id="foldopen00191" data-start="{" data-end="};">
<div class="line"><a id="l00191" name="l00191"></a><span class="lineno"><a class="line" href="namespacecanvas__ity.html#a64892b31b00c006299d47bb71542b765">  191</a></span>    <span class="keyword">enum</span> <a class="code hl_enumeration" href="namespacecanvas__ity.html#a64892b31b00c006299d47bb71542b765">align_style</a></div>
<div class="line"><a id="l00192" name="l00192"></a><span class="lineno">  192</span>    {</div>
<div class="line"><a id="l00193" name="l00193"></a><span class="lineno"><a class="line" href="namespacecanvas__ity.html#a64892b31b00c006299d47bb71542b765a0c8aa9e531a998845378db44119460de">  193</a></span>        <a class="code hl_enumvalue" href="namespacecanvas__ity.html#a64892b31b00c006299d47bb71542b765a0c8aa9e531a998845378db44119460de">leftward</a>,</div>
<div class="line"><a id="l00194" name="l00194"></a><span class="lineno"><a class="line" href="namespacecanvas__ity.html#a64892b31b00c006299d47bb71542b765a151ed2cf28f1c8b6fd3f4bdefbdd5f45">  194</a></span>        <a class="code hl_enumvalue" href="namespacecanvas__ity.html#a64892b31b00c006299d47bb71542b765a151ed2cf28f1c8b6fd3f4bdefbdd5f45">rightward</a>,</div>
<div class="line"><a id="l00195" name="l00195"></a><span class="lineno"><a class="line" href="namespacecanvas__ity.html#a64892b31b00c006299d47bb71542b765a5db08d7fa14da6c1e37ae6aaad87a53d">  195</a></span>        <a class="code hl_enumvalue" href="namespacecanvas__ity.html#a64892b31b00c006299d47bb71542b765a5db08d7fa14da6c1e37ae6aaad87a53d">center</a>,</div>
<div class="line"><a id="l00196" name="l00196"></a><span class="lineno"><a class="line" href="namespacecanvas__ity.html#a64892b31b00c006299d47bb71542b765a9cf9c0ad231023d5663cf9fb19993567">  196</a></span>        <a class="code hl_enumvalue" href="namespacecanvas__ity.html#a64892b31b00c006299d47bb71542b765a9cf9c0ad231023d5663cf9fb19993567">start</a> = 0,</div>
<div class="line"><a id="l00197" name="l00197"></a><span class="lineno">  197</span>        <a class="code hl_enumvalue" href="namespacecanvas__ity.html#a64892b31b00c006299d47bb71542b765ad5800f9a6ff0499528d888aafa6c0d31">ending</a></div>
<div class="line"><a id="l00198" name="l00198"></a><span class="lineno"><a class="line" href="namespacecanvas__ity.html#a64892b31b00c006299d47bb71542b765ad5800f9a6ff0499528d888aafa6c0d31">  198</a></span>    };</div>
</div>
<div class="foldopen" id="foldopen00199" data-start="{" data-end="};">
<div class="line"><a id="l00199" name="l00199"></a><span class="lineno"><a class="line" href="namespacecanvas__ity.html#a4d285f5b6403d2455e1550ff00b66a68">  199</a></span>    <span class="keyword">enum</span> <a class="code hl_enumeration" href="namespacecanvas__ity.html#a4d285f5b6403d2455e1550ff00b66a68">baseline_style</a></div>
<div class="line"><a id="l00200" name="l00200"></a><span class="lineno">  200</span>    {</div>
<div class="line"><a id="l00201" name="l00201"></a><span class="lineno"><a class="line" href="namespacecanvas__ity.html#a4d285f5b6403d2455e1550ff00b66a68a353775772d990c09479a46118fb472a9">  201</a></span>        <a class="code hl_enumvalue" href="namespacecanvas__ity.html#a4d285f5b6403d2455e1550ff00b66a68a353775772d990c09479a46118fb472a9">alphabetic</a>,</div>
<div class="line"><a id="l00202" name="l00202"></a><span class="lineno"><a class="line" href="namespacecanvas__ity.html#a4d285f5b6403d2455e1550ff00b66a68a9a249647210b2d2559a66e7aa00dcd4b">  202</a></span>        <a class="code hl_enumvalue" href="namespacecanvas__ity.html#a4d285f5b6403d2455e1550ff00b66a68a9a249647210b2d2559a66e7aa00dcd4b">top</a>,</div>
<div class="line"><a id="l00203" name="l00203"></a><span class="lineno"><a class="line" href="namespacecanvas__ity.html#a4d285f5b6403d2455e1550ff00b66a68a11cc80e28201c55b410440ff51640997">  203</a></span>        <a class="code hl_enumvalue" href="namespacecanvas__ity.html#a4d285f5b6403d2455e1550ff00b66a68a11cc80e28201c55b410440ff51640997">middle</a>,</div>
<div class="line"><a id="l00204" name="l00204"></a><span class="lineno"><a class="line" href="namespacecanvas__ity.html#a4d285f5b6403d2455e1550ff00b66a68a9bb9d7bbd943523e378fd235f23cb243">  204</a></span>        <a class="code hl_enumvalue" href="namespacecanvas__ity.html#a4d285f5b6403d2455e1550ff00b66a68a9bb9d7bbd943523e378fd235f23cb243">bottom</a>,</div>
<div class="line"><a id="l00205" name="l00205"></a><span class="lineno"><a class="line" href="namespacecanvas__ity.html#a4d285f5b6403d2455e1550ff00b66a68a4c6c4d70fb820aa393a6f169df5d9680">  205</a></span>        <a class="code hl_enumvalue" href="namespacecanvas__ity.html#a4d285f5b6403d2455e1550ff00b66a68a4c6c4d70fb820aa393a6f169df5d9680">hanging</a>,</div>
<div class="line"><a id="l00206" name="l00206"></a><span class="lineno">  206</span>        <a class="code hl_enumvalue" href="namespacecanvas__ity.html#a4d285f5b6403d2455e1550ff00b66a68a8f0245e8899461d131e1e435f8a0d7fb">ideographic</a> = 3</div>
<div class="line"><a id="l00207" name="l00207"></a><span class="lineno"><a class="line" href="namespacecanvas__ity.html#a4d285f5b6403d2455e1550ff00b66a68a8f0245e8899461d131e1e435f8a0d7fb">  207</a></span>    };</div>
</div>
<div class="line"><a id="l00208" name="l00208"></a><span class="lineno">  208</span> </div>
<div class="line"><a id="l00209" name="l00209"></a><span class="lineno">  209</span>    <span class="comment">// Implementation details</span></div>
<div class="foldopen" id="foldopen00210" data-start="{" data-end="};">
<div class="line"><a id="l00210" name="l00210"></a><span class="lineno"><a class="line" href="structcanvas__ity_1_1xy.html">  210</a></span>    <span class="keyword">struct </span><a class="code hl_struct" href="structcanvas__ity_1_1xy.html">xy</a></div>
<div class="line"><a id="l00211" name="l00211"></a><span class="lineno">  211</span>    {</div>
<div class="line"><a id="l00212" name="l00212"></a><span class="lineno"><a class="line" href="structcanvas__ity_1_1xy.html#a99cf5c3eb0d1ae13332f9f074d9584f1">  212</a></span>        <span class="keywordtype">float</span> <a class="code hl_variable" href="structcanvas__ity_1_1xy.html#a99cf5c3eb0d1ae13332f9f074d9584f1">x</a>, <a class="code hl_variable" href="structcanvas__ity_1_1xy.html#aebf5cabb01fddadd60cc071dcc3cbcf0">y</a>;</div>
<div class="line"><a id="l00213" name="l00213"></a><span class="lineno"><a class="line" href="structcanvas__ity_1_1xy.html#afe6453e0ff3b67e444997a64ebb6ef6d">  213</a></span>        <a class="code hl_function" href="structcanvas__ity_1_1xy.html#afe6453e0ff3b67e444997a64ebb6ef6d">xy</a>();</div>
<div class="line"><a id="l00214" name="l00214"></a><span class="lineno"><a class="line" href="structcanvas__ity_1_1xy.html#a663baa6faebf350489bcfd135a380503">  214</a></span>        <a class="code hl_function" href="structcanvas__ity_1_1xy.html#a663baa6faebf350489bcfd135a380503">xy</a>(<span class="keywordtype">float</span>, <span class="keywordtype">float</span>);</div>
<div class="line"><a id="l00215" name="l00215"></a><span class="lineno">  215</span>    };</div>
</div>
<div class="foldopen" id="foldopen00216" data-start="{" data-end="};">
<div class="line"><a id="l00216" name="l00216"></a><span class="lineno"><a class="line" href="structcanvas__ity_1_1rgba.html">  216</a></span>    <span class="keyword">struct </span><a class="code hl_struct" href="structcanvas__ity_1_1rgba.html">rgba</a></div>
<div class="line"><a id="l00217" name="l00217"></a><span class="lineno">  217</span>    {</div>
<div class="line"><a id="l00218" name="l00218"></a><span class="lineno"><a class="line" href="structcanvas__ity_1_1rgba.html#a56d4a13f86fa2eafafdb5d631e1dadfc">  218</a></span>        <span class="keywordtype">float</span> <a class="code hl_variable" href="structcanvas__ity_1_1rgba.html#a53e2d564e8a8ff73275b1f5b24f869e8">r</a>, <a class="code hl_variable" href="structcanvas__ity_1_1rgba.html#a61252cb52bbfb855b4930884bede8f69">g</a>, <a class="code hl_variable" href="structcanvas__ity_1_1rgba.html#a91502f52205899f0d7fd672c984ec627">b</a>, <a class="code hl_variable" href="structcanvas__ity_1_1rgba.html#a56d4a13f86fa2eafafdb5d631e1dadfc">a</a>;</div>
<div class="line"><a id="l00219" name="l00219"></a><span class="lineno"><a class="line" href="structcanvas__ity_1_1rgba.html#a794764cb2c96ca696e26001627599714">  219</a></span>        <a class="code hl_function" href="structcanvas__ity_1_1rgba.html#a794764cb2c96ca696e26001627599714">rgba</a>();</div>
<div class="line"><a id="l00220" name="l00220"></a><span class="lineno"><a class="line" href="structcanvas__ity_1_1rgba.html#a540901a530f85de9d40b2fe04c7edfb1">  220</a></span>        <a class="code hl_function" href="structcanvas__ity_1_1rgba.html#a540901a530f85de9d40b2fe04c7edfb1">rgba</a>(<span class="keywordtype">float</span>, <span class="keywordtype">float</span>, <span class="keywordtype">float</span>, <span class="keywordtype">float</span>);</div>
<div class="line"><a id="l00221" name="l00221"></a><span class="lineno">  221</span>    };</div>
</div>
<div class="foldopen" id="foldopen00222" data-start="{" data-end="};">
<div class="line"><a id="l00222" name="l00222"></a><span class="lineno"><a class="line" href="structcanvas__ity_1_1affine__matrix.html">  222</a></span>    <span class="keyword">struct </span><a class="code hl_struct" href="structcanvas__ity_1_1affine__matrix.html">affine_matrix</a></div>
<div class="line"><a id="l00223" name="l00223"></a><span class="lineno">  223</span>    {</div>
<div class="line"><a id="l00224" name="l00224"></a><span class="lineno"><a class="line" href="structcanvas__ity_1_1affine__matrix.html#a06279a73c160cc47458ff2f08f25b566">  224</a></span>        <span class="keywordtype">float</span> <a class="code hl_variable" href="structcanvas__ity_1_1affine__matrix.html#a06279a73c160cc47458ff2f08f25b566">a</a>, <a class="code hl_variable" href="structcanvas__ity_1_1affine__matrix.html#a3abbeddf9bbf1b7c7d81c2b0339c4123">b</a>, <a class="code hl_variable" href="structcanvas__ity_1_1affine__matrix.html#ae34446b5fed7e778e2a62a436e47f12e">c</a>, <a class="code hl_variable" href="structcanvas__ity_1_1affine__matrix.html#ac8fa9558e05f63f452296d1ef2aba39a">d</a>, <a class="code hl_variable" href="structcanvas__ity_1_1affine__matrix.html#a6702d95c040b895c87a2152a6a8609b6">e</a>, <a class="code hl_variable" href="structcanvas__ity_1_1affine__matrix.html#aa59db5a3cdec4569f31143c0cc74242d">f</a>;</div>
<div class="line"><a id="l00225" name="l00225"></a><span class="lineno">  225</span>    };</div>
</div>
<div class="foldopen" id="foldopen00226" data-start="{" data-end="};">
<div class="line"><a id="l00226" name="l00226"></a><span class="lineno"><a class="line" href="structcanvas__ity_1_1paint__brush.html">  226</a></span>    <span class="keyword">struct </span><a class="code hl_struct" href="structcanvas__ity_1_1paint__brush.html">paint_brush</a></div>
<div class="line"><a id="l00227" name="l00227"></a><span class="lineno">  227</span>    {</div>
<div class="foldopen" id="foldopen00228" data-start="{" data-end="};">
<div class="line"><a id="l00228" name="l00228"></a><span class="lineno"><a class="line" href="structcanvas__ity_1_1paint__brush.html#ab6686ae3436f145ab241196f2337e010">  228</a></span>        <span class="keyword">enum</span> <a class="code hl_enumeration" href="structcanvas__ity_1_1paint__brush.html#ab6686ae3436f145ab241196f2337e010">types</a></div>
<div class="line"><a id="l00229" name="l00229"></a><span class="lineno">  229</span>        {</div>
<div class="line"><a id="l00230" name="l00230"></a><span class="lineno"><a class="line" href="structcanvas__ity_1_1paint__brush.html#ab6686ae3436f145ab241196f2337e010afba9224071f073610edf89517f965566">  230</a></span>            <a class="code hl_enumvalue" href="structcanvas__ity_1_1paint__brush.html#ab6686ae3436f145ab241196f2337e010afba9224071f073610edf89517f965566">color</a>,</div>
<div class="line"><a id="l00231" name="l00231"></a><span class="lineno"><a class="line" href="structcanvas__ity_1_1paint__brush.html#ab6686ae3436f145ab241196f2337e010acee0286b8cd79b2f387c15a5d1462aaf">  231</a></span>            <a class="code hl_enumvalue" href="structcanvas__ity_1_1paint__brush.html#ab6686ae3436f145ab241196f2337e010acee0286b8cd79b2f387c15a5d1462aaf">pattern</a>,</div>
<div class="line"><a id="l00232" name="l00232"></a><span class="lineno"><a class="line" href="structcanvas__ity_1_1paint__brush.html#ab6686ae3436f145ab241196f2337e010ad457f51ef368f0241a8f41b510298fd9">  232</a></span>            <a class="code hl_enumvalue" href="structcanvas__ity_1_1paint__brush.html#ab6686ae3436f145ab241196f2337e010ad457f51ef368f0241a8f41b510298fd9">linear</a>,</div>
<div class="line"><a id="l00233" name="l00233"></a><span class="lineno"><a class="line" href="structcanvas__ity_1_1paint__brush.html#ab6686ae3436f145ab241196f2337e010a9441d4b111a1ff0bf1b075834adb9937">  233</a></span>            <a class="code hl_enumvalue" href="structcanvas__ity_1_1paint__brush.html#ab6686ae3436f145ab241196f2337e010a9441d4b111a1ff0bf1b075834adb9937">radial</a>,</div>
<div class="line"><a id="l00234" name="l00234"></a><span class="lineno"><a class="line" href="structcanvas__ity_1_1paint__brush.html#ab6686ae3436f145ab241196f2337e010aed9f68685c6e52ea8d0b31f8dc882a6e">  234</a></span>            <a class="code hl_enumvalue" href="structcanvas__ity_1_1paint__brush.html#ab6686ae3436f145ab241196f2337e010aed9f68685c6e52ea8d0b31f8dc882a6e">css_radial</a>,</div>
<div class="line"><a id="l00235" name="l00235"></a><span class="lineno">  235</span>            <a class="code hl_enumvalue" href="structcanvas__ity_1_1paint__brush.html#ab6686ae3436f145ab241196f2337e010ad3adc95a76cdcb1c12fb911b9ae31d67">conic</a></div>
<div class="line"><a id="l00236" name="l00236"></a><span class="lineno"><a class="line" href="structcanvas__ity_1_1paint__brush.html#ab6686ae3436f145ab241196f2337e010ad3adc95a76cdcb1c12fb911b9ae31d67">  236</a></span>        } <a class="code hl_variable" href="structcanvas__ity_1_1paint__brush.html#aff0e7b3da803021f501dd60016e10748">type</a>;</div>
</div>
<div class="line"><a id="l00237" name="l00237"></a><span class="lineno"><a class="line" href="structcanvas__ity_1_1paint__brush.html#aab538f72fb3bbde3bf9917383c320718">  237</a></span>        std::vector&lt;rgba&gt;                 <a class="code hl_variable" href="structcanvas__ity_1_1paint__brush.html#aab538f72fb3bbde3bf9917383c320718">colors</a>;</div>
<div class="line"><a id="l00238" name="l00238"></a><span class="lineno"><a class="line" href="structcanvas__ity_1_1paint__brush.html#a91d8bc53347a4c08c8ab4ed077d21a0e">  238</a></span>        std::vector&lt;float&gt;                <a class="code hl_variable" href="structcanvas__ity_1_1paint__brush.html#a91d8bc53347a4c08c8ab4ed077d21a0e">stops</a>;</div>
<div class="line"><a id="l00239" name="l00239"></a><span class="lineno"><a class="line" href="structcanvas__ity_1_1paint__brush.html#aecc3ff18e6d5469aa2f29f5b9f5e1965">  239</a></span>        std::vector&lt;std::optional&lt;float&gt;&gt; <a class="code hl_variable" href="structcanvas__ity_1_1paint__brush.html#aecc3ff18e6d5469aa2f29f5b9f5e1965">hints</a>;</div>
<div class="line"><a id="l00240" name="l00240"></a><span class="lineno"><a class="line" href="structcanvas__ity_1_1paint__brush.html#a05aced1e2f17c9a4d33e9cc67179a197">  240</a></span>        <a class="code hl_struct" href="structcanvas__ity_1_1xy.html">xy</a>                                <a class="code hl_variable" href="structcanvas__ity_1_1paint__brush.html#a05d02189a4fe8dd52777f920384923ba">start</a>, <a class="code hl_variable" href="structcanvas__ity_1_1paint__brush.html#a05aced1e2f17c9a4d33e9cc67179a197">end</a>;</div>
<div class="line"><a id="l00241" name="l00241"></a><span class="lineno"><a class="line" href="structcanvas__ity_1_1paint__brush.html#a213a6de70bf42a63030b25ae45232f4d">  241</a></span>        <span class="keywordtype">float</span>                             <a class="code hl_variable" href="structcanvas__ity_1_1paint__brush.html#a6201452e6cf4813c62f3c3086d930872">start_radius</a>, <a class="code hl_variable" href="structcanvas__ity_1_1paint__brush.html#a213a6de70bf42a63030b25ae45232f4d">end_radius</a>;</div>
<div class="line"><a id="l00242" name="l00242"></a><span class="lineno"><a class="line" href="structcanvas__ity_1_1paint__brush.html#a1468351f01cd8e09261c676485cef558">  242</a></span>        <a class="code hl_struct" href="structcanvas__ity_1_1xy.html">xy</a>                                <a class="code hl_variable" href="structcanvas__ity_1_1paint__brush.html#a1468351f01cd8e09261c676485cef558">css_radius</a>;</div>
<div class="line"><a id="l00243" name="l00243"></a><span class="lineno"><a class="line" href="structcanvas__ity_1_1paint__brush.html#a1fe790128ae84fd93604d8ccd56f0f3d">  243</a></span>        <span class="keywordtype">float</span>                             <a class="code hl_variable" href="structcanvas__ity_1_1paint__brush.html#a1fe790128ae84fd93604d8ccd56f0f3d">angle</a>;</div>
<div class="line"><a id="l00244" name="l00244"></a><span class="lineno"><a class="line" href="structcanvas__ity_1_1paint__brush.html#a070cede44796fdac87cad5b006d6c241">  244</a></span>        <span class="keywordtype">int</span>                               <a class="code hl_variable" href="structcanvas__ity_1_1paint__brush.html#a2cba23a419c5a91d9ae967330d4d7b1a">width</a>, <a class="code hl_variable" href="structcanvas__ity_1_1paint__brush.html#a070cede44796fdac87cad5b006d6c241">height</a>;</div>
<div class="line"><a id="l00245" name="l00245"></a><span class="lineno"><a class="line" href="structcanvas__ity_1_1paint__brush.html#a6932b9c4b42f56d33e170708fff251a6">  245</a></span>        <a class="code hl_enumeration" href="namespacecanvas__ity.html#ad73c575b59800b5698624c6545d925b1">repetition_style</a>                  <a class="code hl_variable" href="structcanvas__ity_1_1paint__brush.html#a6932b9c4b42f56d33e170708fff251a6">repetition</a>;</div>
<div class="line"><a id="l00246" name="l00246"></a><span class="lineno">  246</span>    };</div>
</div>
<div class="foldopen" id="foldopen00247" data-start="{" data-end="};">
<div class="line"><a id="l00247" name="l00247"></a><span class="lineno"><a class="line" href="structcanvas__ity_1_1font__face.html">  247</a></span>    <span class="keyword">struct </span><a class="code hl_struct" href="structcanvas__ity_1_1font__face.html">font_face</a></div>
<div class="line"><a id="l00248" name="l00248"></a><span class="lineno">  248</span>    {</div>
<div class="line"><a id="l00249" name="l00249"></a><span class="lineno"><a class="line" href="structcanvas__ity_1_1font__face.html#a3a90e69c33234ccde6923be3056750ec">  249</a></span>        std::vector&lt;unsigned char&gt; <a class="code hl_variable" href="structcanvas__ity_1_1font__face.html#a3a90e69c33234ccde6923be3056750ec">data</a>;</div>
<div class="line"><a id="l00250" name="l00250"></a><span class="lineno"><a class="line" href="structcanvas__ity_1_1font__face.html#abc046249f63b83f8168e447240f3e226">  250</a></span>        <span class="keywordtype">int</span>                        <a class="code hl_variable" href="structcanvas__ity_1_1font__face.html#abc046249f63b83f8168e447240f3e226">cmap</a>, <a class="code hl_variable" href="structcanvas__ity_1_1font__face.html#ac8800d40f09123ed5287bbf390a49971">glyf</a>, <a class="code hl_variable" href="structcanvas__ity_1_1font__face.html#acfdadcc7998b631ce831be49b7cc22d9">head</a>, <a class="code hl_variable" href="structcanvas__ity_1_1font__face.html#a4e4fb482b9b9b7eec91997680b30cd25">hhea</a>, <a class="code hl_variable" href="structcanvas__ity_1_1font__face.html#aae90819c2cb1ab8241bfee97d14602d0">hmtx</a>, <a class="code hl_variable" href="structcanvas__ity_1_1font__face.html#a62ca6aac39a43f0e1f8794e1feb63321">loca</a>, <a class="code hl_variable" href="structcanvas__ity_1_1font__face.html#a16fbf4a8de00a34df30326cadc78c8c6">maxp</a>, <a class="code hl_variable" href="structcanvas__ity_1_1font__face.html#a75fb403a4159fe65601fb200d2692cda">os_2</a>;</div>
<div class="line"><a id="l00251" name="l00251"></a><span class="lineno"><a class="line" href="structcanvas__ity_1_1font__face.html#ae9187b1026b81d08dd5000c7b8c246c2">  251</a></span>        <span class="keywordtype">float</span>                      <a class="code hl_variable" href="structcanvas__ity_1_1font__face.html#ae9187b1026b81d08dd5000c7b8c246c2">scale</a>;</div>
<div class="line"><a id="l00252" name="l00252"></a><span class="lineno">  252</span>    };</div>
</div>
<div class="foldopen" id="foldopen00253" data-start="{" data-end="};">
<div class="line"><a id="l00253" name="l00253"></a><span class="lineno"><a class="line" href="structcanvas__ity_1_1subpath__data.html">  253</a></span>    <span class="keyword">struct </span><a class="code hl_struct" href="structcanvas__ity_1_1subpath__data.html">subpath_data</a></div>
<div class="line"><a id="l00254" name="l00254"></a><span class="lineno">  254</span>    {</div>
<div class="line"><a id="l00255" name="l00255"></a><span class="lineno"><a class="line" href="structcanvas__ity_1_1subpath__data.html#add70c6c4d216df681fad6a70fd2dd287">  255</a></span>        <span class="keywordtype">size_t</span> <a class="code hl_variable" href="structcanvas__ity_1_1subpath__data.html#add70c6c4d216df681fad6a70fd2dd287">count</a>;</div>
<div class="line"><a id="l00256" name="l00256"></a><span class="lineno"><a class="line" href="structcanvas__ity_1_1subpath__data.html#a0b74d04aba5d58c4669dfd5cd48f08ce">  256</a></span>        <span class="keywordtype">bool</span>   <a class="code hl_variable" href="structcanvas__ity_1_1subpath__data.html#a0b74d04aba5d58c4669dfd5cd48f08ce">closed</a>;</div>
<div class="line"><a id="l00257" name="l00257"></a><span class="lineno">  257</span>    };</div>
</div>
<div class="foldopen" id="foldopen00258" data-start="{" data-end="};">
<div class="line"><a id="l00258" name="l00258"></a><span class="lineno"><a class="line" href="structcanvas__ity_1_1bezier__path.html">  258</a></span>    <span class="keyword">struct </span><a class="code hl_struct" href="structcanvas__ity_1_1bezier__path.html">bezier_path</a></div>
<div class="line"><a id="l00259" name="l00259"></a><span class="lineno">  259</span>    {</div>
<div class="line"><a id="l00260" name="l00260"></a><span class="lineno"><a class="line" href="structcanvas__ity_1_1bezier__path.html#a1b9a6aa5d044117cf45d1e193c09c9c6">  260</a></span>        std::vector&lt;xy&gt;           <a class="code hl_variable" href="structcanvas__ity_1_1bezier__path.html#a1b9a6aa5d044117cf45d1e193c09c9c6">points</a>;</div>
<div class="line"><a id="l00261" name="l00261"></a><span class="lineno"><a class="line" href="structcanvas__ity_1_1bezier__path.html#aa9c8932defdc8f64781d16e72fef19a3">  261</a></span>        std::vector&lt;subpath_data&gt; <a class="code hl_variable" href="structcanvas__ity_1_1bezier__path.html#aa9c8932defdc8f64781d16e72fef19a3">subpaths</a>;</div>
<div class="line"><a id="l00262" name="l00262"></a><span class="lineno">  262</span>    };</div>
</div>
<div class="foldopen" id="foldopen00263" data-start="{" data-end="};">
<div class="line"><a id="l00263" name="l00263"></a><span class="lineno"><a class="line" href="structcanvas__ity_1_1line__path.html">  263</a></span>    <span class="keyword">struct </span><a class="code hl_struct" href="structcanvas__ity_1_1line__path.html">line_path</a></div>
<div class="line"><a id="l00264" name="l00264"></a><span class="lineno">  264</span>    {</div>
<div class="line"><a id="l00265" name="l00265"></a><span class="lineno"><a class="line" href="structcanvas__ity_1_1line__path.html#a27efd4b0dec6d85e4ba861c34bacdbf4">  265</a></span>        std::vector&lt;xy&gt;           <a class="code hl_variable" href="structcanvas__ity_1_1line__path.html#a27efd4b0dec6d85e4ba861c34bacdbf4">points</a>;</div>
<div class="line"><a id="l00266" name="l00266"></a><span class="lineno"><a class="line" href="structcanvas__ity_1_1line__path.html#acfec22d114fac137ae0a70af069874d8">  266</a></span>        std::vector&lt;subpath_data&gt; <a class="code hl_variable" href="structcanvas__ity_1_1line__path.html#acfec22d114fac137ae0a70af069874d8">subpaths</a>;</div>
<div class="line"><a id="l00267" name="l00267"></a><span class="lineno">  267</span>    };</div>
</div>
<div class="foldopen" id="foldopen00268" data-start="{" data-end="};">
<div class="line"><a id="l00268" name="l00268"></a><span class="lineno"><a class="line" href="structcanvas__ity_1_1pixel__run.html">  268</a></span>    <span class="keyword">struct </span><a class="code hl_struct" href="structcanvas__ity_1_1pixel__run.html">pixel_run</a></div>
<div class="line"><a id="l00269" name="l00269"></a><span class="lineno">  269</span>    {</div>
<div class="line"><a id="l00270" name="l00270"></a><span class="lineno"><a class="line" href="structcanvas__ity_1_1pixel__run.html#a766e19a6125b9497fd1c5c1072d1056a">  270</a></span>        <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> <a class="code hl_variable" href="structcanvas__ity_1_1pixel__run.html#a766e19a6125b9497fd1c5c1072d1056a">x</a>, <a class="code hl_variable" href="structcanvas__ity_1_1pixel__run.html#a7bae9c68613cc4abf809afadd97a1377">y</a>;</div>
<div class="line"><a id="l00271" name="l00271"></a><span class="lineno"><a class="line" href="structcanvas__ity_1_1pixel__run.html#a5560517a8c77d18a5ffd3868ebc7fa9e">  271</a></span>        <span class="keywordtype">float</span>          <a class="code hl_variable" href="structcanvas__ity_1_1pixel__run.html#a5560517a8c77d18a5ffd3868ebc7fa9e">delta</a>;</div>
<div class="line"><a id="l00272" name="l00272"></a><span class="lineno">  272</span>    };</div>
</div>
<div class="line"><a id="l00273" name="l00273"></a><span class="lineno"><a class="line" href="namespacecanvas__ity.html#aefffbe6bf29b56f35ecb44b2b2aaa302">  273</a></span>    <span class="keyword">typedef</span> std::vector&lt;pixel_run&gt; <a class="code hl_typedef" href="namespacecanvas__ity.html#aefffbe6bf29b56f35ecb44b2b2aaa302">pixel_runs</a>;</div>
<div class="line"><a id="l00274" name="l00274"></a><span class="lineno">  274</span> </div>
<div class="foldopen" id="foldopen00275" data-start="{" data-end="};">
<div class="line"><a id="l00275" name="l00275"></a><span class="lineno"><a class="line" href="classcanvas__ity_1_1canvas.html">  275</a></span>    <span class="keyword">class </span><a class="code hl_class" href="classcanvas__ity_1_1canvas.html">canvas</a></div>
<div class="line"><a id="l00276" name="l00276"></a><span class="lineno">  276</span>    {</div>
<div class="line"><a id="l00277" name="l00277"></a><span class="lineno">  277</span>    <span class="keyword">public</span>:</div>
<div class="line"><a id="l00278" name="l00278"></a><span class="lineno">  278</span>        <span class="comment">// ======== LIFECYCLE ========</span></div>
<div class="line"><a id="l00279" name="l00279"></a><span class="lineno">  279</span> </div>
<div class="line"><a id="l00291" name="l00291"></a><span class="lineno"><a class="line" href="classcanvas__ity_1_1canvas.html#afa49f996733e1100b7b8165aec6d6fe2">  291</a></span>        <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#afa49f996733e1100b7b8165aec6d6fe2">canvas</a>(</div>
<div class="line"><a id="l00292" name="l00292"></a><span class="lineno">  292</span>            <span class="keywordtype">int</span> <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#ad4920132bc78f7e74a8b14319e8ff52c">width</a>,</div>
<div class="line"><a id="l00293" name="l00293"></a><span class="lineno">  293</span>            <span class="keywordtype">int</span> <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#acb61342cdc37dc89aee42e7087adbc50">height</a>);</div>
<div class="line"><a id="l00294" name="l00294"></a><span class="lineno">  294</span> </div>
<div class="line"><a id="l00295" name="l00295"></a><span class="lineno"><a class="line" href="classcanvas__ity_1_1canvas.html#a83866e4110e5cba47c30a28cc85a1e84">  295</a></span>        <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#a83866e4110e5cba47c30a28cc85a1e84">canvas</a>(</div>
<div class="line"><a id="l00296" name="l00296"></a><span class="lineno">  296</span>            <span class="keywordtype">int</span>  <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#ad4920132bc78f7e74a8b14319e8ff52c">width</a>,</div>
<div class="line"><a id="l00297" name="l00297"></a><span class="lineno">  297</span>            <span class="keywordtype">int</span>  <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#acb61342cdc37dc89aee42e7087adbc50">height</a>,</div>
<div class="line"><a id="l00298" name="l00298"></a><span class="lineno">  298</span>            <a class="code hl_struct" href="structcanvas__ity_1_1rgba.html">rgba</a> <a class="code hl_struct" href="structcolor.html">color</a>);</div>
<div class="line"><a id="l00299" name="l00299"></a><span class="lineno">  299</span> </div>
<div class="foldopen" id="foldopen00300" data-start="{" data-end="}">
<div class="line"><a id="l00300" name="l00300"></a><span class="lineno"><a class="line" href="classcanvas__ity_1_1canvas.html#a3176c99f113de2815855f8d3bbd273f3">  300</a></span>        <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#a3176c99f113de2815855f8d3bbd273f3">canvas</a>()</div>
<div class="line"><a id="l00301" name="l00301"></a><span class="lineno">  301</span>            : <a class="code hl_class" href="classcanvas__ity_1_1canvas.html">canvas</a>(0, 0)</div>
<div class="line"><a id="l00302" name="l00302"></a><span class="lineno">  302</span>        {</div>
<div class="line"><a id="l00303" name="l00303"></a><span class="lineno">  303</span>        }</div>
</div>
<div class="line"><a id="l00304" name="l00304"></a><span class="lineno">  304</span> </div>
<div class="line"><a id="l00307" name="l00307"></a><span class="lineno"><a class="line" href="classcanvas__ity_1_1canvas.html#a962182e05f7478c06c9e349f32b1f5ab">  307</a></span>        <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#a962182e05f7478c06c9e349f32b1f5ab">~canvas</a>();</div>
<div class="line"><a id="l00308" name="l00308"></a><span class="lineno">  308</span> </div>
<div class="line"><a id="l00309" name="l00309"></a><span class="lineno">  309</span>        <span class="comment">// ======== TRANSFORMS ========</span></div>
<div class="line"><a id="l00310" name="l00310"></a><span class="lineno">  310</span> </div>
<div class="line"><a id="l00323" name="l00323"></a><span class="lineno"><a class="line" href="classcanvas__ity_1_1canvas.html#a62869dd9efcbf81eca82c19e5cc397d7">  323</a></span>        <span class="keywordtype">void</span> <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#a62869dd9efcbf81eca82c19e5cc397d7">scale</a>(</div>
<div class="line"><a id="l00324" name="l00324"></a><span class="lineno">  324</span>            <span class="keywordtype">float</span> x,</div>
<div class="line"><a id="l00325" name="l00325"></a><span class="lineno">  325</span>            <span class="keywordtype">float</span> y);</div>
<div class="line"><a id="l00326" name="l00326"></a><span class="lineno">  326</span> </div>
<div class="line"><a id="l00336" name="l00336"></a><span class="lineno"><a class="line" href="classcanvas__ity_1_1canvas.html#a4689020b4b9f4a2900986727cc0f8767">  336</a></span>        <span class="keywordtype">void</span> <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#a4689020b4b9f4a2900986727cc0f8767">rotate</a>(</div>
<div class="line"><a id="l00337" name="l00337"></a><span class="lineno">  337</span>            <span class="keywordtype">float</span> angle);</div>
<div class="line"><a id="l00338" name="l00338"></a><span class="lineno">  338</span> </div>
<div class="line"><a id="l00348" name="l00348"></a><span class="lineno"><a class="line" href="classcanvas__ity_1_1canvas.html#ab593aa24c0e84a2a0513bb9c96b37841">  348</a></span>        <span class="keywordtype">void</span> <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#ab593aa24c0e84a2a0513bb9c96b37841">translate</a>(</div>
<div class="line"><a id="l00349" name="l00349"></a><span class="lineno">  349</span>            <span class="keywordtype">float</span> x,</div>
<div class="line"><a id="l00350" name="l00350"></a><span class="lineno">  350</span>            <span class="keywordtype">float</span> y);</div>
<div class="line"><a id="l00351" name="l00351"></a><span class="lineno">  351</span> </div>
<div class="line"><a id="l00369" name="l00369"></a><span class="lineno"><a class="line" href="classcanvas__ity_1_1canvas.html#a9ef5f65d2eca3518b5ea22eb76badce1">  369</a></span>        <span class="keywordtype">void</span> <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#a9ef5f65d2eca3518b5ea22eb76badce1">transform</a>(</div>
<div class="line"><a id="l00370" name="l00370"></a><span class="lineno">  370</span>            <span class="keywordtype">float</span> <a class="code hl_variable" href="tag__strings_8h.html#a4124bc0a9335c27f086f24ba207a4912">a</a>,</div>
<div class="line"><a id="l00371" name="l00371"></a><span class="lineno">  371</span>            <span class="keywordtype">float</span> <a class="code hl_variable" href="tag__strings_8h.html#a21ad0bd836b90d08f4cf640b4c298e7c">b</a>,</div>
<div class="line"><a id="l00372" name="l00372"></a><span class="lineno">  372</span>            <span class="keywordtype">float</span> c,</div>
<div class="line"><a id="l00373" name="l00373"></a><span class="lineno">  373</span>            <span class="keywordtype">float</span> d,</div>
<div class="line"><a id="l00374" name="l00374"></a><span class="lineno">  374</span>            <span class="keywordtype">float</span> e,</div>
<div class="line"><a id="l00375" name="l00375"></a><span class="lineno">  375</span>            <span class="keywordtype">float</span> f);</div>
<div class="line"><a id="l00376" name="l00376"></a><span class="lineno">  376</span> </div>
<div class="line"><a id="l00397" name="l00397"></a><span class="lineno"><a class="line" href="classcanvas__ity_1_1canvas.html#ae24350ddfad86b73976a042ef95e12ae">  397</a></span>        <span class="keywordtype">void</span> <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#ae24350ddfad86b73976a042ef95e12ae">set_transform</a>(</div>
<div class="line"><a id="l00398" name="l00398"></a><span class="lineno">  398</span>            <span class="keywordtype">float</span> <a class="code hl_variable" href="tag__strings_8h.html#a4124bc0a9335c27f086f24ba207a4912">a</a>,</div>
<div class="line"><a id="l00399" name="l00399"></a><span class="lineno">  399</span>            <span class="keywordtype">float</span> <a class="code hl_variable" href="tag__strings_8h.html#a21ad0bd836b90d08f4cf640b4c298e7c">b</a>,</div>
<div class="line"><a id="l00400" name="l00400"></a><span class="lineno">  400</span>            <span class="keywordtype">float</span> c,</div>
<div class="line"><a id="l00401" name="l00401"></a><span class="lineno">  401</span>            <span class="keywordtype">float</span> d,</div>
<div class="line"><a id="l00402" name="l00402"></a><span class="lineno">  402</span>            <span class="keywordtype">float</span> e,</div>
<div class="line"><a id="l00403" name="l00403"></a><span class="lineno">  403</span>            <span class="keywordtype">float</span> f);</div>
<div class="line"><a id="l00404" name="l00404"></a><span class="lineno">  404</span> </div>
<div class="line"><a id="l00405" name="l00405"></a><span class="lineno">  405</span>        <span class="comment">// ======== COMPOSITING ========</span></div>
<div class="line"><a id="l00406" name="l00406"></a><span class="lineno">  406</span> </div>
<div class="line"><a id="l00416" name="l00416"></a><span class="lineno"><a class="line" href="classcanvas__ity_1_1canvas.html#a06fe0eb1caa896d0b567389bd35f6c18">  416</a></span>        <span class="keywordtype">void</span> <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#a06fe0eb1caa896d0b567389bd35f6c18">set_global_alpha</a>(</div>
<div class="line"><a id="l00417" name="l00417"></a><span class="lineno">  417</span>            <span class="keywordtype">float</span> alpha);</div>
<div class="line"><a id="l00418" name="l00418"></a><span class="lineno">  418</span> </div>
<div class="line"><a id="l00437" name="l00437"></a><span class="lineno"><a class="line" href="classcanvas__ity_1_1canvas.html#af6f748374ad333a49e8b379c0e368a34">  437</a></span>        <a class="code hl_enumeration" href="namespacecanvas__ity.html#a89843026830c0d4312f395e2e8c5992a">composite_operation</a> <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#af6f748374ad333a49e8b379c0e368a34">global_composite_operation</a>;</div>
<div class="line"><a id="l00438" name="l00438"></a><span class="lineno">  438</span> </div>
<div class="line"><a id="l00439" name="l00439"></a><span class="lineno">  439</span>        <span class="comment">// ======== SHADOWS ========</span></div>
<div class="line"><a id="l00440" name="l00440"></a><span class="lineno">  440</span> </div>
<div class="line"><a id="l00457" name="l00457"></a><span class="lineno"><a class="line" href="classcanvas__ity_1_1canvas.html#a4bb7aab216b2b868ce9a4cb2f52b0c94">  457</a></span>        <span class="keywordtype">void</span> <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#a4bb7aab216b2b868ce9a4cb2f52b0c94">set_shadow_color</a>(</div>
<div class="line"><a id="l00458" name="l00458"></a><span class="lineno">  458</span>            <span class="keywordtype">float</span> <a class="code hl_enumvalue" href="color_8h.html#a80d1dc5f416b97f92939a4166d41203cabda9643ac6601722a28f238714274da4">red</a>,</div>
<div class="line"><a id="l00459" name="l00459"></a><span class="lineno">  459</span>            <span class="keywordtype">float</span> <a class="code hl_enumvalue" href="color_8h.html#a80d1dc5f416b97f92939a4166d41203ca9f27410725ab8cc8854a2769c7a516b8">green</a>,</div>
<div class="line"><a id="l00460" name="l00460"></a><span class="lineno">  460</span>            <span class="keywordtype">float</span> <a class="code hl_enumvalue" href="color_8h.html#a80d1dc5f416b97f92939a4166d41203ca48d6215903dff56238e52e8891380c8f">blue</a>,</div>
<div class="line"><a id="l00461" name="l00461"></a><span class="lineno">  461</span>            <span class="keywordtype">float</span> alpha);</div>
<div class="line"><a id="l00462" name="l00462"></a><span class="lineno">  462</span> </div>
<div class="line"><a id="l00468" name="l00468"></a><span class="lineno"><a class="line" href="classcanvas__ity_1_1canvas.html#afec88bee82b83c1d8dda0f3ba81a3c5f">  468</a></span>        <span class="keywordtype">float</span> <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#afec88bee82b83c1d8dda0f3ba81a3c5f">shadow_offset_x</a>;</div>
<div class="line"><a id="l00469" name="l00469"></a><span class="lineno">  469</span> </div>
<div class="line"><a id="l00475" name="l00475"></a><span class="lineno"><a class="line" href="classcanvas__ity_1_1canvas.html#aeaae3e918b69a8467ef5f92ed1d5d02f">  475</a></span>        <span class="keywordtype">float</span> <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#aeaae3e918b69a8467ef5f92ed1d5d02f">shadow_offset_y</a>;</div>
<div class="line"><a id="l00476" name="l00476"></a><span class="lineno">  476</span> </div>
<div class="line"><a id="l00486" name="l00486"></a><span class="lineno"><a class="line" href="classcanvas__ity_1_1canvas.html#a31f2427ebe2f8b4e4246796d43f7e9e1">  486</a></span>        <span class="keywordtype">void</span> <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#a31f2427ebe2f8b4e4246796d43f7e9e1">set_shadow_blur</a>(</div>
<div class="line"><a id="l00487" name="l00487"></a><span class="lineno">  487</span>            <span class="keywordtype">float</span> level);</div>
<div class="line"><a id="l00488" name="l00488"></a><span class="lineno">  488</span> </div>
<div class="line"><a id="l00489" name="l00489"></a><span class="lineno">  489</span>        <span class="comment">// ======== LINE STYLES ========</span></div>
<div class="line"><a id="l00490" name="l00490"></a><span class="lineno">  490</span> </div>
<div class="line"><a id="l00499" name="l00499"></a><span class="lineno"><a class="line" href="classcanvas__ity_1_1canvas.html#a474c24301d18e988c6ee7c8b3af3c816">  499</a></span>        <span class="keywordtype">void</span> <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#a474c24301d18e988c6ee7c8b3af3c816">set_line_width</a>(</div>
<div class="line"><a id="l00500" name="l00500"></a><span class="lineno">  500</span>            <span class="keywordtype">float</span> <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#ad4920132bc78f7e74a8b14319e8ff52c">width</a>);</div>
<div class="line"><a id="l00501" name="l00501"></a><span class="lineno">  501</span> </div>
<div class="line"><a id="l00511" name="l00511"></a><span class="lineno"><a class="line" href="classcanvas__ity_1_1canvas.html#a3d9bb3308af32fca293d3e6be3092b85">  511</a></span>        <a class="code hl_enumeration" href="namespacecanvas__ity.html#ac31761ebfc503cc7b7e5a9d359fa4431">cap_style</a> <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#a3d9bb3308af32fca293d3e6be3092b85">line_cap</a>;</div>
<div class="line"><a id="l00512" name="l00512"></a><span class="lineno">  512</span> </div>
<div class="line"><a id="l00522" name="l00522"></a><span class="lineno"><a class="line" href="classcanvas__ity_1_1canvas.html#a9bab8e895dc0a3d6592452124288050d">  522</a></span>        <a class="code hl_enumeration" href="namespacecanvas__ity.html#ac351ff9340ea3c0b196f8788ddfa0f1a">join_style</a> <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#a9bab8e895dc0a3d6592452124288050d">line_join</a>;</div>
<div class="line"><a id="l00523" name="l00523"></a><span class="lineno">  523</span> </div>
<div class="line"><a id="l00536" name="l00536"></a><span class="lineno"><a class="line" href="classcanvas__ity_1_1canvas.html#a3f1c83b992274a94eb5448465e10edaf">  536</a></span>        <span class="keywordtype">void</span> <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#a3f1c83b992274a94eb5448465e10edaf">set_miter_limit</a>(</div>
<div class="line"><a id="l00537" name="l00537"></a><span class="lineno">  537</span>            <span class="keywordtype">float</span> limit);</div>
<div class="line"><a id="l00538" name="l00538"></a><span class="lineno">  538</span> </div>
<div class="line"><a id="l00547" name="l00547"></a><span class="lineno"><a class="line" href="classcanvas__ity_1_1canvas.html#aa922b5d6eb6469829217ceff878354fa">  547</a></span>        <span class="keywordtype">float</span> <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#aa922b5d6eb6469829217ceff878354fa">line_dash_offset</a>;</div>
<div class="line"><a id="l00548" name="l00548"></a><span class="lineno">  548</span> </div>
<div class="line"><a id="l00567" name="l00567"></a><span class="lineno"><a class="line" href="classcanvas__ity_1_1canvas.html#a7b0a51755d45e8f931dcd7691ebc4709">  567</a></span>        <span class="keywordtype">void</span> <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#a7b0a51755d45e8f931dcd7691ebc4709">set_line_dash</a>(</div>
<div class="line"><a id="l00568" name="l00568"></a><span class="lineno">  568</span>            <span class="keywordtype">float</span> <span class="keyword">const</span>* segments,</div>
<div class="line"><a id="l00569" name="l00569"></a><span class="lineno">  569</span>            <span class="keywordtype">int</span>          <a class="code hl_function" href="core_8h.html#a501bb1bb2f0cc5706178ed237958e73b">count</a>);</div>
<div class="line"><a id="l00570" name="l00570"></a><span class="lineno">  570</span> </div>
<div class="line"><a id="l00571" name="l00571"></a><span class="lineno">  571</span>        <span class="comment">// ======== FILL AND STROKE STYLES ========</span></div>
<div class="line"><a id="l00572" name="l00572"></a><span class="lineno">  572</span> </div>
<div class="line"><a id="l00585" name="l00585"></a><span class="lineno"><a class="line" href="classcanvas__ity_1_1canvas.html#ac45236e8c3359456117d7e92f019cdf4">  585</a></span>        <span class="keywordtype">void</span> <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#ac45236e8c3359456117d7e92f019cdf4">set_color</a>(</div>
<div class="line"><a id="l00586" name="l00586"></a><span class="lineno">  586</span>            <a class="code hl_enumeration" href="namespacecanvas__ity.html#a43021a4a19378b8a045cf40f27a3bb57">brush_type</a> <a class="code hl_enumeration" href="core_8h.html#a7aead736a07eaf25623ad7bfa1f0ee2d">type</a>,</div>
<div class="line"><a id="l00587" name="l00587"></a><span class="lineno">  587</span>            <span class="keywordtype">float</span>      <a class="code hl_enumvalue" href="color_8h.html#a80d1dc5f416b97f92939a4166d41203cabda9643ac6601722a28f238714274da4">red</a>,</div>
<div class="line"><a id="l00588" name="l00588"></a><span class="lineno">  588</span>            <span class="keywordtype">float</span>      <a class="code hl_enumvalue" href="color_8h.html#a80d1dc5f416b97f92939a4166d41203ca9f27410725ab8cc8854a2769c7a516b8">green</a>,</div>
<div class="line"><a id="l00589" name="l00589"></a><span class="lineno">  589</span>            <span class="keywordtype">float</span>      <a class="code hl_enumvalue" href="color_8h.html#a80d1dc5f416b97f92939a4166d41203ca48d6215903dff56238e52e8891380c8f">blue</a>,</div>
<div class="line"><a id="l00590" name="l00590"></a><span class="lineno">  590</span>            <span class="keywordtype">float</span>      alpha);</div>
<div class="line"><a id="l00591" name="l00591"></a><span class="lineno">  591</span> </div>
<div class="foldopen" id="foldopen00592" data-start="{" data-end="}">
<div class="line"><a id="l00592" name="l00592"></a><span class="lineno"><a class="line" href="classcanvas__ity_1_1canvas.html#ac0de7db31d4e6e464adca380a32ff2f8">  592</a></span>        <span class="keywordtype">void</span> <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#ac0de7db31d4e6e464adca380a32ff2f8">set_color</a>(</div>
<div class="line"><a id="l00593" name="l00593"></a><span class="lineno">  593</span>            <a class="code hl_enumeration" href="namespacecanvas__ity.html#a43021a4a19378b8a045cf40f27a3bb57">brush_type</a> <a class="code hl_enumeration" href="core_8h.html#a7aead736a07eaf25623ad7bfa1f0ee2d">type</a>,</div>
<div class="line"><a id="l00594" name="l00594"></a><span class="lineno">  594</span>            <a class="code hl_struct" href="structcanvas__ity_1_1rgba.html">rgba</a>       c)</div>
<div class="line"><a id="l00595" name="l00595"></a><span class="lineno">  595</span>        {</div>
<div class="line"><a id="l00596" name="l00596"></a><span class="lineno">  596</span>            <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#ac45236e8c3359456117d7e92f019cdf4">set_color</a>(<a class="code hl_enumeration" href="core_8h.html#a7aead736a07eaf25623ad7bfa1f0ee2d">type</a>, c.<a class="code hl_variable" href="structcanvas__ity_1_1rgba.html#a53e2d564e8a8ff73275b1f5b24f869e8">r</a>, c.<a class="code hl_variable" href="structcanvas__ity_1_1rgba.html#a61252cb52bbfb855b4930884bede8f69">g</a>, c.<a class="code hl_variable" href="structcanvas__ity_1_1rgba.html#a91502f52205899f0d7fd672c984ec627">b</a>, c.<a class="code hl_variable" href="structcanvas__ity_1_1rgba.html#a56d4a13f86fa2eafafdb5d631e1dadfc">a</a>);</div>
<div class="line"><a id="l00597" name="l00597"></a><span class="lineno">  597</span>        }</div>
</div>
<div class="line"><a id="l00598" name="l00598"></a><span class="lineno">  598</span> </div>
<div class="line"><a id="l00614" name="l00614"></a><span class="lineno"><a class="line" href="classcanvas__ity_1_1canvas.html#add26fbf936386d5acd21524097da4598">  614</a></span>        <span class="keywordtype">void</span> <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#add26fbf936386d5acd21524097da4598">set_linear_gradient</a>(</div>
<div class="line"><a id="l00615" name="l00615"></a><span class="lineno">  615</span>            <a class="code hl_enumeration" href="namespacecanvas__ity.html#a43021a4a19378b8a045cf40f27a3bb57">brush_type</a> <a class="code hl_enumeration" href="core_8h.html#a7aead736a07eaf25623ad7bfa1f0ee2d">type</a>,</div>
<div class="line"><a id="l00616" name="l00616"></a><span class="lineno">  616</span>            <span class="keywordtype">float</span>      start_x,</div>
<div class="line"><a id="l00617" name="l00617"></a><span class="lineno">  617</span>            <span class="keywordtype">float</span>      start_y,</div>
<div class="line"><a id="l00618" name="l00618"></a><span class="lineno">  618</span>            <span class="keywordtype">float</span>      end_x,</div>
<div class="line"><a id="l00619" name="l00619"></a><span class="lineno">  619</span>            <span class="keywordtype">float</span>      end_y);</div>
<div class="line"><a id="l00620" name="l00620"></a><span class="lineno">  620</span> </div>
<div class="line"><a id="l00640" name="l00640"></a><span class="lineno"><a class="line" href="classcanvas__ity_1_1canvas.html#ad66a122ecd2ceb5c9ac8effabb1ad60d">  640</a></span>        <span class="keywordtype">void</span> <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#ad66a122ecd2ceb5c9ac8effabb1ad60d">set_radial_gradient</a>(</div>
<div class="line"><a id="l00641" name="l00641"></a><span class="lineno">  641</span>            <a class="code hl_enumeration" href="namespacecanvas__ity.html#a43021a4a19378b8a045cf40f27a3bb57">brush_type</a> <a class="code hl_enumeration" href="core_8h.html#a7aead736a07eaf25623ad7bfa1f0ee2d">type</a>,</div>
<div class="line"><a id="l00642" name="l00642"></a><span class="lineno">  642</span>            <span class="keywordtype">float</span>      start_x,</div>
<div class="line"><a id="l00643" name="l00643"></a><span class="lineno">  643</span>            <span class="keywordtype">float</span>      start_y,</div>
<div class="line"><a id="l00644" name="l00644"></a><span class="lineno">  644</span>            <span class="keywordtype">float</span>      start_radius,</div>
<div class="line"><a id="l00645" name="l00645"></a><span class="lineno">  645</span>            <span class="keywordtype">float</span>      end_x,</div>
<div class="line"><a id="l00646" name="l00646"></a><span class="lineno">  646</span>            <span class="keywordtype">float</span>      end_y,</div>
<div class="line"><a id="l00647" name="l00647"></a><span class="lineno">  647</span>            <span class="keywordtype">float</span>      end_radius);</div>
<div class="line"><a id="l00648" name="l00648"></a><span class="lineno">  648</span> </div>
<div class="line"><a id="l00649" name="l00649"></a><span class="lineno"><a class="line" href="classcanvas__ity_1_1canvas.html#a4821c78398a5edebfdcad0c8ae15358e">  649</a></span>        <span class="keywordtype">void</span> <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#a4821c78398a5edebfdcad0c8ae15358e">set_css_radial_gradient</a>(</div>
<div class="line"><a id="l00650" name="l00650"></a><span class="lineno">  650</span>            <a class="code hl_enumeration" href="namespacecanvas__ity.html#a43021a4a19378b8a045cf40f27a3bb57">brush_type</a> <a class="code hl_enumeration" href="core_8h.html#a7aead736a07eaf25623ad7bfa1f0ee2d">type</a>,</div>
<div class="line"><a id="l00651" name="l00651"></a><span class="lineno">  651</span>            <span class="keywordtype">float</span>      x,</div>
<div class="line"><a id="l00652" name="l00652"></a><span class="lineno">  652</span>            <span class="keywordtype">float</span>      y,</div>
<div class="line"><a id="l00653" name="l00653"></a><span class="lineno">  653</span>            <span class="keywordtype">float</span>      radius_x,</div>
<div class="line"><a id="l00654" name="l00654"></a><span class="lineno">  654</span>            <span class="keywordtype">float</span>      radius_y);</div>
<div class="line"><a id="l00655" name="l00655"></a><span class="lineno">  655</span> </div>
<div class="line"><a id="l00656" name="l00656"></a><span class="lineno"><a class="line" href="classcanvas__ity_1_1canvas.html#a7eb04f30065a6356d7bb8a61b3b514e7">  656</a></span>        <span class="keywordtype">void</span> <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#a7eb04f30065a6356d7bb8a61b3b514e7">set_conic_gradient</a>(</div>
<div class="line"><a id="l00657" name="l00657"></a><span class="lineno">  657</span>            <a class="code hl_enumeration" href="namespacecanvas__ity.html#a43021a4a19378b8a045cf40f27a3bb57">brush_type</a> <a class="code hl_enumeration" href="core_8h.html#a7aead736a07eaf25623ad7bfa1f0ee2d">type</a>,</div>
<div class="line"><a id="l00658" name="l00658"></a><span class="lineno">  658</span>            <span class="keywordtype">float</span>      x,</div>
<div class="line"><a id="l00659" name="l00659"></a><span class="lineno">  659</span>            <span class="keywordtype">float</span>      y,</div>
<div class="line"><a id="l00660" name="l00660"></a><span class="lineno">  660</span>            <span class="keywordtype">float</span>      angle);</div>
<div class="line"><a id="l00661" name="l00661"></a><span class="lineno">  661</span> </div>
<div class="line"><a id="l00686" name="l00686"></a><span class="lineno"><a class="line" href="classcanvas__ity_1_1canvas.html#a99a81e86ef5f77747c86ece9bc4c33b3">  686</a></span>        <span class="keywordtype">void</span> <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#a99a81e86ef5f77747c86ece9bc4c33b3">add_color_stop</a>(</div>
<div class="line"><a id="l00687" name="l00687"></a><span class="lineno">  687</span>            <a class="code hl_enumeration" href="namespacecanvas__ity.html#a43021a4a19378b8a045cf40f27a3bb57">brush_type</a>           <a class="code hl_enumeration" href="core_8h.html#a7aead736a07eaf25623ad7bfa1f0ee2d">type</a>,</div>
<div class="line"><a id="l00688" name="l00688"></a><span class="lineno">  688</span>            <span class="keywordtype">float</span>                <a class="code hl_define" href="css__properties_8cpp.html#a5dfbcc916693656dd092ddc41ab25747">offset</a>,</div>
<div class="line"><a id="l00689" name="l00689"></a><span class="lineno">  689</span>            <span class="keywordtype">float</span>                <a class="code hl_enumvalue" href="color_8h.html#a80d1dc5f416b97f92939a4166d41203cabda9643ac6601722a28f238714274da4">red</a>,</div>
<div class="line"><a id="l00690" name="l00690"></a><span class="lineno">  690</span>            <span class="keywordtype">float</span>                <a class="code hl_enumvalue" href="color_8h.html#a80d1dc5f416b97f92939a4166d41203ca9f27410725ab8cc8854a2769c7a516b8">green</a>,</div>
<div class="line"><a id="l00691" name="l00691"></a><span class="lineno">  691</span>            <span class="keywordtype">float</span>                <a class="code hl_enumvalue" href="color_8h.html#a80d1dc5f416b97f92939a4166d41203ca48d6215903dff56238e52e8891380c8f">blue</a>,</div>
<div class="line"><a id="l00692" name="l00692"></a><span class="lineno">  692</span>            <span class="keywordtype">float</span>                alpha,</div>
<div class="line"><a id="l00693" name="l00693"></a><span class="lineno">  693</span>            std::optional&lt;float&gt; hint = {});</div>
<div class="line"><a id="l00694" name="l00694"></a><span class="lineno">  694</span> </div>
<div class="line"><a id="l00720" name="l00720"></a><span class="lineno"><a class="line" href="classcanvas__ity_1_1canvas.html#a1b0e0ddf684f7eb4d3093ccfce576152">  720</a></span>        <span class="keywordtype">void</span> <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#a1b0e0ddf684f7eb4d3093ccfce576152">set_pattern</a>(</div>
<div class="line"><a id="l00721" name="l00721"></a><span class="lineno">  721</span>            <a class="code hl_enumeration" href="namespacecanvas__ity.html#a43021a4a19378b8a045cf40f27a3bb57">brush_type</a>           <a class="code hl_enumeration" href="core_8h.html#a7aead736a07eaf25623ad7bfa1f0ee2d">type</a>,</div>
<div class="line"><a id="l00722" name="l00722"></a><span class="lineno">  722</span>            <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> <span class="keyword">const</span>* <a class="code hl_variable" href="tag__strings_8h.html#a42cb5f5737262947250c709931232c69">image</a>,</div>
<div class="line"><a id="l00723" name="l00723"></a><span class="lineno">  723</span>            <span class="keywordtype">int</span>                  <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#ad4920132bc78f7e74a8b14319e8ff52c">width</a>,</div>
<div class="line"><a id="l00724" name="l00724"></a><span class="lineno">  724</span>            <span class="keywordtype">int</span>                  <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#acb61342cdc37dc89aee42e7087adbc50">height</a>,</div>
<div class="line"><a id="l00725" name="l00725"></a><span class="lineno">  725</span>            <span class="keywordtype">int</span>                  stride,</div>
<div class="line"><a id="l00726" name="l00726"></a><span class="lineno">  726</span>            <a class="code hl_enumeration" href="namespacecanvas__ity.html#ad73c575b59800b5698624c6545d925b1">repetition_style</a>     repetition);</div>
<div class="line"><a id="l00727" name="l00727"></a><span class="lineno">  727</span> </div>
<div class="line"><a id="l00728" name="l00728"></a><span class="lineno">  728</span>        <span class="comment">// ======== BUILDING PATHS ========</span></div>
<div class="line"><a id="l00729" name="l00729"></a><span class="lineno">  729</span> </div>
<div class="line"><a id="l00735" name="l00735"></a><span class="lineno"><a class="line" href="classcanvas__ity_1_1canvas.html#aa4e9cd5047183018446aa43f7f7d4795">  735</a></span>        <span class="keywordtype">void</span> <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#aa4e9cd5047183018446aa43f7f7d4795">begin_path</a>();</div>
<div class="line"><a id="l00736" name="l00736"></a><span class="lineno">  736</span> </div>
<div class="line"><a id="l00745" name="l00745"></a><span class="lineno"><a class="line" href="classcanvas__ity_1_1canvas.html#a327cdd2c64047affe6d03416bcb6a568">  745</a></span>        <span class="keywordtype">void</span> <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#a327cdd2c64047affe6d03416bcb6a568">move_to</a>(</div>
<div class="line"><a id="l00746" name="l00746"></a><span class="lineno">  746</span>            <span class="keywordtype">float</span> x,</div>
<div class="line"><a id="l00747" name="l00747"></a><span class="lineno">  747</span>            <span class="keywordtype">float</span> y);</div>
<div class="line"><a id="l00748" name="l00748"></a><span class="lineno">  748</span> </div>
<div class="line"><a id="l00757" name="l00757"></a><span class="lineno"><a class="line" href="classcanvas__ity_1_1canvas.html#aab76d29f5555824f8d76e1a17b10644e">  757</a></span>        <span class="keywordtype">void</span> <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#aab76d29f5555824f8d76e1a17b10644e">close_path</a>();</div>
<div class="line"><a id="l00758" name="l00758"></a><span class="lineno">  758</span> </div>
<div class="line"><a id="l00770" name="l00770"></a><span class="lineno"><a class="line" href="classcanvas__ity_1_1canvas.html#ac85d0e71edbc57918a6cfe12ec5083ac">  770</a></span>        <span class="keywordtype">void</span> <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#ac85d0e71edbc57918a6cfe12ec5083ac">line_to</a>(</div>
<div class="line"><a id="l00771" name="l00771"></a><span class="lineno">  771</span>            <span class="keywordtype">float</span> x,</div>
<div class="line"><a id="l00772" name="l00772"></a><span class="lineno">  772</span>            <span class="keywordtype">float</span> y);</div>
<div class="line"><a id="l00773" name="l00773"></a><span class="lineno">  773</span> </div>
<div class="line"><a id="l00790" name="l00790"></a><span class="lineno"><a class="line" href="classcanvas__ity_1_1canvas.html#ae2b7f2f2525f838ea0a812bb8555b58e">  790</a></span>        <span class="keywordtype">void</span> <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#ae2b7f2f2525f838ea0a812bb8555b58e">quadratic_curve_to</a>(</div>
<div class="line"><a id="l00791" name="l00791"></a><span class="lineno">  791</span>            <span class="keywordtype">float</span> control_x,</div>
<div class="line"><a id="l00792" name="l00792"></a><span class="lineno">  792</span>            <span class="keywordtype">float</span> control_y,</div>
<div class="line"><a id="l00793" name="l00793"></a><span class="lineno">  793</span>            <span class="keywordtype">float</span> x,</div>
<div class="line"><a id="l00794" name="l00794"></a><span class="lineno">  794</span>            <span class="keywordtype">float</span> y);</div>
<div class="line"><a id="l00795" name="l00795"></a><span class="lineno">  795</span> </div>
<div class="line"><a id="l00815" name="l00815"></a><span class="lineno"><a class="line" href="classcanvas__ity_1_1canvas.html#a5f7befd4ac9f8adf859454859d8093a9">  815</a></span>        <span class="keywordtype">void</span> <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#a5f7befd4ac9f8adf859454859d8093a9">bezier_curve_to</a>(</div>
<div class="line"><a id="l00816" name="l00816"></a><span class="lineno">  816</span>            <span class="keywordtype">float</span> control_1_x,</div>
<div class="line"><a id="l00817" name="l00817"></a><span class="lineno">  817</span>            <span class="keywordtype">float</span> control_1_y,</div>
<div class="line"><a id="l00818" name="l00818"></a><span class="lineno">  818</span>            <span class="keywordtype">float</span> control_2_x,</div>
<div class="line"><a id="l00819" name="l00819"></a><span class="lineno">  819</span>            <span class="keywordtype">float</span> control_2_y,</div>
<div class="line"><a id="l00820" name="l00820"></a><span class="lineno">  820</span>            <span class="keywordtype">float</span> x,</div>
<div class="line"><a id="l00821" name="l00821"></a><span class="lineno">  821</span>            <span class="keywordtype">float</span> y);</div>
<div class="line"><a id="l00822" name="l00822"></a><span class="lineno">  822</span> </div>
<div class="line"><a id="l00849" name="l00849"></a><span class="lineno"><a class="line" href="classcanvas__ity_1_1canvas.html#addeff553c8e798317f0314204db87e57">  849</a></span>        <span class="keywordtype">void</span> <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#addeff553c8e798317f0314204db87e57">arc_to</a>(</div>
<div class="line"><a id="l00850" name="l00850"></a><span class="lineno">  850</span>            <span class="keywordtype">float</span> vertex_x,</div>
<div class="line"><a id="l00851" name="l00851"></a><span class="lineno">  851</span>            <span class="keywordtype">float</span> vertex_y,</div>
<div class="line"><a id="l00852" name="l00852"></a><span class="lineno">  852</span>            <span class="keywordtype">float</span> x,</div>
<div class="line"><a id="l00853" name="l00853"></a><span class="lineno">  853</span>            <span class="keywordtype">float</span> y,</div>
<div class="line"><a id="l00854" name="l00854"></a><span class="lineno">  854</span>            <span class="keywordtype">float</span> radius);</div>
<div class="line"><a id="l00855" name="l00855"></a><span class="lineno">  855</span> </div>
<div class="line"><a id="l00877" name="l00877"></a><span class="lineno"><a class="line" href="classcanvas__ity_1_1canvas.html#a655b2fb6b29e9d66122fe222b3de6e08">  877</a></span>        <span class="keywordtype">void</span> <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#a655b2fb6b29e9d66122fe222b3de6e08">arc</a>(</div>
<div class="line"><a id="l00878" name="l00878"></a><span class="lineno">  878</span>            <span class="keywordtype">float</span> x,</div>
<div class="line"><a id="l00879" name="l00879"></a><span class="lineno">  879</span>            <span class="keywordtype">float</span> y,</div>
<div class="line"><a id="l00880" name="l00880"></a><span class="lineno">  880</span>            <span class="keywordtype">float</span> radius,</div>
<div class="line"><a id="l00881" name="l00881"></a><span class="lineno">  881</span>            <span class="keywordtype">float</span> start_angle,</div>
<div class="line"><a id="l00882" name="l00882"></a><span class="lineno">  882</span>            <span class="keywordtype">float</span> end_angle,</div>
<div class="line"><a id="l00883" name="l00883"></a><span class="lineno">  883</span>            <span class="keywordtype">bool</span>  counter_clockwise = <span class="keyword">false</span>);</div>
<div class="line"><a id="l00884" name="l00884"></a><span class="lineno">  884</span> </div>
<div class="line"><a id="l00899" name="l00899"></a><span class="lineno"><a class="line" href="classcanvas__ity_1_1canvas.html#a06d4869ba1a23b6b1a2bd10a2f524ec0">  899</a></span>        <span class="keywordtype">void</span> <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#a06d4869ba1a23b6b1a2bd10a2f524ec0">rectangle</a>(</div>
<div class="line"><a id="l00900" name="l00900"></a><span class="lineno">  900</span>            <span class="keywordtype">float</span> x,</div>
<div class="line"><a id="l00901" name="l00901"></a><span class="lineno">  901</span>            <span class="keywordtype">float</span> y,</div>
<div class="line"><a id="l00902" name="l00902"></a><span class="lineno">  902</span>            <span class="keywordtype">float</span> <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#ad4920132bc78f7e74a8b14319e8ff52c">width</a>,</div>
<div class="line"><a id="l00903" name="l00903"></a><span class="lineno">  903</span>            <span class="keywordtype">float</span> <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#acb61342cdc37dc89aee42e7087adbc50">height</a>);</div>
<div class="line"><a id="l00904" name="l00904"></a><span class="lineno">  904</span> </div>
<div class="line"><a id="l00905" name="l00905"></a><span class="lineno"><a class="line" href="classcanvas__ity_1_1canvas.html#a489a8d4d82cde63ca8f3bc9c3d9ced9d">  905</a></span>        <span class="keywordtype">void</span> <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#a489a8d4d82cde63ca8f3bc9c3d9ced9d">polygon</a>(std::vector&lt;xy&gt; points);</div>
<div class="line"><a id="l00906" name="l00906"></a><span class="lineno">  906</span> </div>
<div class="line"><a id="l00907" name="l00907"></a><span class="lineno">  907</span>        <span class="comment">// ======== DRAWING PATHS ========</span></div>
<div class="line"><a id="l00908" name="l00908"></a><span class="lineno">  908</span> </div>
<div class="line"><a id="l00923" name="l00923"></a><span class="lineno"><a class="line" href="classcanvas__ity_1_1canvas.html#af9b368755ab028232964cf37b0dd4118">  923</a></span>        <span class="keywordtype">void</span> <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#af9b368755ab028232964cf37b0dd4118">fill</a>();</div>
<div class="line"><a id="l00924" name="l00924"></a><span class="lineno">  924</span> </div>
<div class="line"><a id="l00943" name="l00943"></a><span class="lineno"><a class="line" href="classcanvas__ity_1_1canvas.html#af8a5baf58b3557ec405b0545ba913dc5">  943</a></span>        <span class="keywordtype">void</span> <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#af8a5baf58b3557ec405b0545ba913dc5">stroke</a>();</div>
<div class="line"><a id="l00944" name="l00944"></a><span class="lineno">  944</span> </div>
<div class="line"><a id="l00958" name="l00958"></a><span class="lineno"><a class="line" href="classcanvas__ity_1_1canvas.html#a4056f856f4f19aa460a88678ea18731f">  958</a></span>        <span class="keywordtype">void</span> <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#a4056f856f4f19aa460a88678ea18731f">clip</a>();</div>
<div class="line"><a id="l00959" name="l00959"></a><span class="lineno">  959</span> </div>
<div class="line"><a id="l00973" name="l00973"></a><span class="lineno"><a class="line" href="classcanvas__ity_1_1canvas.html#ac7c357a7c46207837884ce48845906d5">  973</a></span>        <span class="keywordtype">bool</span> <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#ac7c357a7c46207837884ce48845906d5">is_point_in_path</a>(</div>
<div class="line"><a id="l00974" name="l00974"></a><span class="lineno">  974</span>            <span class="keywordtype">float</span> x,</div>
<div class="line"><a id="l00975" name="l00975"></a><span class="lineno">  975</span>            <span class="keywordtype">float</span> y);</div>
<div class="line"><a id="l00976" name="l00976"></a><span class="lineno">  976</span> </div>
<div class="line"><a id="l00977" name="l00977"></a><span class="lineno">  977</span>        <span class="comment">// ======== DRAWING RECTANGLES ========</span></div>
<div class="line"><a id="l00978" name="l00978"></a><span class="lineno">  978</span> </div>
<div class="line"><a id="l00992" name="l00992"></a><span class="lineno"><a class="line" href="classcanvas__ity_1_1canvas.html#aff1100c359d8b75483c11e7cb74d7400">  992</a></span>        <span class="keywordtype">void</span> <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#aff1100c359d8b75483c11e7cb74d7400">clear_rectangle</a>(</div>
<div class="line"><a id="l00993" name="l00993"></a><span class="lineno">  993</span>            <span class="keywordtype">float</span> x,</div>
<div class="line"><a id="l00994" name="l00994"></a><span class="lineno">  994</span>            <span class="keywordtype">float</span> y,</div>
<div class="line"><a id="l00995" name="l00995"></a><span class="lineno">  995</span>            <span class="keywordtype">float</span> <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#ad4920132bc78f7e74a8b14319e8ff52c">width</a>,</div>
<div class="line"><a id="l00996" name="l00996"></a><span class="lineno">  996</span>            <span class="keywordtype">float</span> <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#acb61342cdc37dc89aee42e7087adbc50">height</a>);</div>
<div class="line"><a id="l00997" name="l00997"></a><span class="lineno">  997</span> </div>
<div class="line"><a id="l01012" name="l01012"></a><span class="lineno"><a class="line" href="classcanvas__ity_1_1canvas.html#aa948748b43becb53a34e013938a96299"> 1012</a></span>        <span class="keywordtype">void</span> <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#aa948748b43becb53a34e013938a96299">fill_rectangle</a>(</div>
<div class="line"><a id="l01013" name="l01013"></a><span class="lineno"> 1013</span>            <span class="keywordtype">float</span> x,</div>
<div class="line"><a id="l01014" name="l01014"></a><span class="lineno"> 1014</span>            <span class="keywordtype">float</span> y,</div>
<div class="line"><a id="l01015" name="l01015"></a><span class="lineno"> 1015</span>            <span class="keywordtype">float</span> <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#ad4920132bc78f7e74a8b14319e8ff52c">width</a>,</div>
<div class="line"><a id="l01016" name="l01016"></a><span class="lineno"> 1016</span>            <span class="keywordtype">float</span> <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#acb61342cdc37dc89aee42e7087adbc50">height</a>);</div>
<div class="line"><a id="l01017" name="l01017"></a><span class="lineno"> 1017</span> </div>
<div class="line"><a id="l01034" name="l01034"></a><span class="lineno"><a class="line" href="classcanvas__ity_1_1canvas.html#a3015bd86fb23f123a09d89d04dd1131a"> 1034</a></span>        <span class="keywordtype">void</span> <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#a3015bd86fb23f123a09d89d04dd1131a">stroke_rectangle</a>(</div>
<div class="line"><a id="l01035" name="l01035"></a><span class="lineno"> 1035</span>            <span class="keywordtype">float</span> x,</div>
<div class="line"><a id="l01036" name="l01036"></a><span class="lineno"> 1036</span>            <span class="keywordtype">float</span> y,</div>
<div class="line"><a id="l01037" name="l01037"></a><span class="lineno"> 1037</span>            <span class="keywordtype">float</span> <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#ad4920132bc78f7e74a8b14319e8ff52c">width</a>,</div>
<div class="line"><a id="l01038" name="l01038"></a><span class="lineno"> 1038</span>            <span class="keywordtype">float</span> <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#acb61342cdc37dc89aee42e7087adbc50">height</a>);</div>
<div class="line"><a id="l01039" name="l01039"></a><span class="lineno"> 1039</span> </div>
<div class="line"><a id="l01040" name="l01040"></a><span class="lineno"> 1040</span>        <span class="comment">// ======== DRAWING TEXT ========</span></div>
<div class="line"><a id="l01041" name="l01041"></a><span class="lineno"> 1041</span> </div>
<div class="line"><a id="l01054" name="l01054"></a><span class="lineno"><a class="line" href="classcanvas__ity_1_1canvas.html#a6b86e63b6b1ed3d08d0bcaa65968a82a"> 1054</a></span>        <a class="code hl_enumeration" href="namespacecanvas__ity.html#a64892b31b00c006299d47bb71542b765">align_style</a> <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#a6b86e63b6b1ed3d08d0bcaa65968a82a">text_align</a>;</div>
<div class="line"><a id="l01055" name="l01055"></a><span class="lineno"> 1055</span> </div>
<div class="line"><a id="l01067" name="l01067"></a><span class="lineno"><a class="line" href="classcanvas__ity_1_1canvas.html#a408fc5a50caaf825e1c3f6110e40fefa"> 1067</a></span>        <a class="code hl_enumeration" href="namespacecanvas__ity.html#a4d285f5b6403d2455e1550ff00b66a68">baseline_style</a> <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#a408fc5a50caaf825e1c3f6110e40fefa">text_baseline</a>;</div>
<div class="line"><a id="l01068" name="l01068"></a><span class="lineno"> 1068</span> </div>
<div class="line"><a id="l01085" name="l01085"></a><span class="lineno"><a class="line" href="classcanvas__ity_1_1canvas.html#a1f310e77dded29179958b0e424b532c6"> 1085</a></span>        <span class="keywordtype">bool</span> <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#a1f310e77dded29179958b0e424b532c6">set_font</a>(</div>
<div class="line"><a id="l01086" name="l01086"></a><span class="lineno"> 1086</span>            <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> <span class="keyword">const</span>* <a class="code hl_variable" href="tag__strings_8h.html#a8277d5a773fad745b5c98c8c498f9a05">font</a>,</div>
<div class="line"><a id="l01087" name="l01087"></a><span class="lineno"> 1087</span>            <span class="keywordtype">int</span>                  <a class="code hl_class" href="classbytes.html">bytes</a>,</div>
<div class="line"><a id="l01088" name="l01088"></a><span class="lineno"> 1088</span>            <span class="keywordtype">float</span>                size);</div>
<div class="line"><a id="l01089" name="l01089"></a><span class="lineno"> 1089</span> </div>
<div class="line"><a id="l01090" name="l01090"></a><span class="lineno"><a class="line" href="classcanvas__ity_1_1canvas.html#a4dfa9eb9567537bc2769c654fb356292"> 1090</a></span>        <span class="keywordtype">void</span> <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#a4dfa9eb9567537bc2769c654fb356292">get_font_metrics</a>(<span class="keywordtype">int</span>&amp; ascent, <span class="keywordtype">int</span>&amp; descent, <span class="keywordtype">int</span>&amp; <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#acb61342cdc37dc89aee42e7087adbc50">height</a>, <span class="keywordtype">int</span>&amp; x_height);</div>
<div class="line"><a id="l01091" name="l01091"></a><span class="lineno"> 1091</span> </div>
<div class="line"><a id="l01112" name="l01112"></a><span class="lineno"><a class="line" href="classcanvas__ity_1_1canvas.html#aa46c414baa520dcc21be5f52a263bfdb"> 1112</a></span>        <span class="keywordtype">void</span> <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#aa46c414baa520dcc21be5f52a263bfdb">fill_text</a>(</div>
<div class="line"><a id="l01113" name="l01113"></a><span class="lineno"> 1113</span>            <span class="keywordtype">char</span> <span class="keyword">const</span>* text,</div>
<div class="line"><a id="l01114" name="l01114"></a><span class="lineno"> 1114</span>            <span class="keywordtype">float</span>       x,</div>
<div class="line"><a id="l01115" name="l01115"></a><span class="lineno"> 1115</span>            <span class="keywordtype">float</span>       y,</div>
<div class="line"><a id="l01116" name="l01116"></a><span class="lineno"> 1116</span>            <span class="keywordtype">float</span>       maximum_width = 1.0e30f);</div>
<div class="line"><a id="l01117" name="l01117"></a><span class="lineno"> 1117</span> </div>
<div class="line"><a id="l01138" name="l01138"></a><span class="lineno"><a class="line" href="classcanvas__ity_1_1canvas.html#a143d5a0c98e4f2fc25572cbe30926287"> 1138</a></span>        <span class="keywordtype">void</span> <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#a143d5a0c98e4f2fc25572cbe30926287">stroke_text</a>(</div>
<div class="line"><a id="l01139" name="l01139"></a><span class="lineno"> 1139</span>            <span class="keywordtype">char</span> <span class="keyword">const</span>* text,</div>
<div class="line"><a id="l01140" name="l01140"></a><span class="lineno"> 1140</span>            <span class="keywordtype">float</span>       x,</div>
<div class="line"><a id="l01141" name="l01141"></a><span class="lineno"> 1141</span>            <span class="keywordtype">float</span>       y,</div>
<div class="line"><a id="l01142" name="l01142"></a><span class="lineno"> 1142</span>            <span class="keywordtype">float</span>       maximum_width = 1.0e30f);</div>
<div class="line"><a id="l01143" name="l01143"></a><span class="lineno"> 1143</span> </div>
<div class="line"><a id="l01157" name="l01157"></a><span class="lineno"><a class="line" href="classcanvas__ity_1_1canvas.html#ad15a54d6f83e96c430736671c4f82d8d"> 1157</a></span>        <span class="keywordtype">float</span> <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#ad15a54d6f83e96c430736671c4f82d8d">measure_text</a>(</div>
<div class="line"><a id="l01158" name="l01158"></a><span class="lineno"> 1158</span>            <span class="keywordtype">char</span> <span class="keyword">const</span>* text);</div>
<div class="line"><a id="l01159" name="l01159"></a><span class="lineno"> 1159</span> </div>
<div class="line"><a id="l01160" name="l01160"></a><span class="lineno"> 1160</span>        <span class="comment">// ======== DRAWING IMAGES ========</span></div>
<div class="line"><a id="l01161" name="l01161"></a><span class="lineno"> 1161</span> </div>
<div class="line"><a id="l01189" name="l01189"></a><span class="lineno"><a class="line" href="classcanvas__ity_1_1canvas.html#a49d7f8f26539bae43d23ac6f7555e2a5"> 1189</a></span>        <span class="keywordtype">void</span> <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#a49d7f8f26539bae43d23ac6f7555e2a5">draw_image</a>(</div>
<div class="line"><a id="l01190" name="l01190"></a><span class="lineno"> 1190</span>            <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> <span class="keyword">const</span>* <a class="code hl_variable" href="tag__strings_8h.html#a42cb5f5737262947250c709931232c69">image</a>,</div>
<div class="line"><a id="l01191" name="l01191"></a><span class="lineno"> 1191</span>            <span class="keywordtype">int</span>                  <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#ad4920132bc78f7e74a8b14319e8ff52c">width</a>,</div>
<div class="line"><a id="l01192" name="l01192"></a><span class="lineno"> 1192</span>            <span class="keywordtype">int</span>                  <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#acb61342cdc37dc89aee42e7087adbc50">height</a>,</div>
<div class="line"><a id="l01193" name="l01193"></a><span class="lineno"> 1193</span>            <span class="keywordtype">int</span>                  stride,</div>
<div class="line"><a id="l01194" name="l01194"></a><span class="lineno"> 1194</span>            <span class="keywordtype">float</span>                x,</div>
<div class="line"><a id="l01195" name="l01195"></a><span class="lineno"> 1195</span>            <span class="keywordtype">float</span>                y,</div>
<div class="line"><a id="l01196" name="l01196"></a><span class="lineno"> 1196</span>            <span class="keywordtype">float</span>                to_width,</div>
<div class="line"><a id="l01197" name="l01197"></a><span class="lineno"> 1197</span>            <span class="keywordtype">float</span>                to_height);</div>
<div class="line"><a id="l01198" name="l01198"></a><span class="lineno"> 1198</span> </div>
<div class="line"><a id="l01199" name="l01199"></a><span class="lineno"> 1199</span>        <span class="comment">// ======== PIXEL MANIPULATION ========</span></div>
<div class="line"><a id="l01200" name="l01200"></a><span class="lineno"> 1200</span> </div>
<div class="line"><a id="l01224" name="l01224"></a><span class="lineno"><a class="line" href="classcanvas__ity_1_1canvas.html#a1ad5831a81f603fbe4cdf0a3917c7403"> 1224</a></span>        <span class="keywordtype">void</span> <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#a1ad5831a81f603fbe4cdf0a3917c7403">get_image_data</a>(</div>
<div class="line"><a id="l01225" name="l01225"></a><span class="lineno"> 1225</span>            <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>* <a class="code hl_variable" href="tag__strings_8h.html#a42cb5f5737262947250c709931232c69">image</a>,</div>
<div class="line"><a id="l01226" name="l01226"></a><span class="lineno"> 1226</span>            <span class="keywordtype">int</span>            <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#ad4920132bc78f7e74a8b14319e8ff52c">width</a>,</div>
<div class="line"><a id="l01227" name="l01227"></a><span class="lineno"> 1227</span>            <span class="keywordtype">int</span>            <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#acb61342cdc37dc89aee42e7087adbc50">height</a>,</div>
<div class="line"><a id="l01228" name="l01228"></a><span class="lineno"> 1228</span>            <span class="keywordtype">int</span>            stride,</div>
<div class="line"><a id="l01229" name="l01229"></a><span class="lineno"> 1229</span>            <span class="keywordtype">int</span>            x,</div>
<div class="line"><a id="l01230" name="l01230"></a><span class="lineno"> 1230</span>            <span class="keywordtype">int</span>            y);</div>
<div class="line"><a id="l01231" name="l01231"></a><span class="lineno"> 1231</span> </div>
<div class="line"><a id="l01255" name="l01255"></a><span class="lineno"><a class="line" href="classcanvas__ity_1_1canvas.html#a0785388fa079ed8b15e9979dc3da8ca4"> 1255</a></span>        <span class="keywordtype">void</span> <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#a0785388fa079ed8b15e9979dc3da8ca4">put_image_data</a>(</div>
<div class="line"><a id="l01256" name="l01256"></a><span class="lineno"> 1256</span>            <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> <span class="keyword">const</span>* <a class="code hl_variable" href="tag__strings_8h.html#a42cb5f5737262947250c709931232c69">image</a>,</div>
<div class="line"><a id="l01257" name="l01257"></a><span class="lineno"> 1257</span>            <span class="keywordtype">int</span>                  <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#ad4920132bc78f7e74a8b14319e8ff52c">width</a>,</div>
<div class="line"><a id="l01258" name="l01258"></a><span class="lineno"> 1258</span>            <span class="keywordtype">int</span>                  <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#acb61342cdc37dc89aee42e7087adbc50">height</a>,</div>
<div class="line"><a id="l01259" name="l01259"></a><span class="lineno"> 1259</span>            <span class="keywordtype">int</span>                  stride,</div>
<div class="line"><a id="l01260" name="l01260"></a><span class="lineno"> 1260</span>            <span class="keywordtype">int</span>                  x,</div>
<div class="line"><a id="l01261" name="l01261"></a><span class="lineno"> 1261</span>            <span class="keywordtype">int</span>                  y);</div>
<div class="line"><a id="l01262" name="l01262"></a><span class="lineno"> 1262</span> </div>
<div class="foldopen" id="foldopen01263" data-start="{" data-end="}">
<div class="line"><a id="l01263" name="l01263"></a><span class="lineno"><a class="line" href="classcanvas__ity_1_1canvas.html#ad4920132bc78f7e74a8b14319e8ff52c"> 1263</a></span>        <span class="keywordtype">int</span> <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#ad4920132bc78f7e74a8b14319e8ff52c">width</a>()</div>
<div class="line"><a id="l01264" name="l01264"></a><span class="lineno"> 1264</span>        {</div>
<div class="line"><a id="l01265" name="l01265"></a><span class="lineno"> 1265</span>            <span class="keywordflow">return</span> <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#aab63b227be5d7786e5bf0b07362addfb">size_x</a>;</div>
<div class="line"><a id="l01266" name="l01266"></a><span class="lineno"> 1266</span>        }</div>
</div>
<div class="foldopen" id="foldopen01267" data-start="{" data-end="}">
<div class="line"><a id="l01267" name="l01267"></a><span class="lineno"><a class="line" href="classcanvas__ity_1_1canvas.html#acb61342cdc37dc89aee42e7087adbc50"> 1267</a></span>        <span class="keywordtype">int</span> <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#acb61342cdc37dc89aee42e7087adbc50">height</a>()</div>
<div class="line"><a id="l01268" name="l01268"></a><span class="lineno"> 1268</span>        {</div>
<div class="line"><a id="l01269" name="l01269"></a><span class="lineno"> 1269</span>            <span class="keywordflow">return</span> <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ae039e222157aef7c67de905bfbfaa1a7">size_y</a>;</div>
<div class="line"><a id="l01270" name="l01270"></a><span class="lineno"> 1270</span>        }</div>
</div>
<div class="line"><a id="l01271" name="l01271"></a><span class="lineno"> 1271</span> </div>
<div class="line"><a id="l01272" name="l01272"></a><span class="lineno"> 1272</span>        <span class="comment">// ======== CANVAS STATE ========</span></div>
<div class="line"><a id="l01273" name="l01273"></a><span class="lineno"> 1273</span> </div>
<div class="line"><a id="l01282" name="l01282"></a><span class="lineno"><a class="line" href="classcanvas__ity_1_1canvas.html#a54dd82e22a5bf04609da7d905d4cb260"> 1282</a></span>        <span class="keywordtype">void</span> <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#a54dd82e22a5bf04609da7d905d4cb260">save</a>();</div>
<div class="line"><a id="l01283" name="l01283"></a><span class="lineno"> 1283</span> </div>
<div class="line"><a id="l01289" name="l01289"></a><span class="lineno"><a class="line" href="classcanvas__ity_1_1canvas.html#a70778b3d277bfaa5d2c456fcf8992dd2"> 1289</a></span>        <span class="keywordtype">void</span> <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#a70778b3d277bfaa5d2c456fcf8992dd2">restore</a>();</div>
<div class="line"><a id="l01290" name="l01290"></a><span class="lineno"> 1290</span> </div>
<div class="line"><a id="l01291" name="l01291"></a><span class="lineno"> 1291</span>    <span class="keyword">private</span>:</div>
<div class="line"><a id="l01292" name="l01292"></a><span class="lineno"><a class="line" href="classcanvas__ity_1_1canvas.html#aab63b227be5d7786e5bf0b07362addfb"> 1292</a></span>        <span class="keywordtype">int</span>                <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#aab63b227be5d7786e5bf0b07362addfb">size_x</a>;</div>
<div class="line"><a id="l01293" name="l01293"></a><span class="lineno"><a class="line" href="classcanvas__ity_1_1canvas.html#ae039e222157aef7c67de905bfbfaa1a7"> 1293</a></span>        <span class="keywordtype">int</span>                <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ae039e222157aef7c67de905bfbfaa1a7">size_y</a>;</div>
<div class="line"><a id="l01294" name="l01294"></a><span class="lineno"><a class="line" href="classcanvas__ity_1_1canvas.html#ac5da3224f86f284b4ac7efbde3942e27"> 1294</a></span>        <a class="code hl_struct" href="structcanvas__ity_1_1affine__matrix.html">affine_matrix</a>      <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ac5da3224f86f284b4ac7efbde3942e27">forward</a>;</div>
<div class="line"><a id="l01295" name="l01295"></a><span class="lineno"><a class="line" href="classcanvas__ity_1_1canvas.html#ade344370cc819a35ed35233e02f09859"> 1295</a></span>        <a class="code hl_struct" href="structcanvas__ity_1_1affine__matrix.html">affine_matrix</a>      <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ade344370cc819a35ed35233e02f09859">inverse</a>;</div>
<div class="line"><a id="l01296" name="l01296"></a><span class="lineno"><a class="line" href="classcanvas__ity_1_1canvas.html#a5fc985877d0bb100bebbf1658d0b52b5"> 1296</a></span>        <span class="keywordtype">float</span>              <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#a5fc985877d0bb100bebbf1658d0b52b5">global_alpha</a>;</div>
<div class="line"><a id="l01297" name="l01297"></a><span class="lineno"><a class="line" href="classcanvas__ity_1_1canvas.html#ad1f1bcdb74c8c6dbcbd0815ba620f7d1"> 1297</a></span>        <a class="code hl_struct" href="structcanvas__ity_1_1rgba.html">rgba</a>               <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ad1f1bcdb74c8c6dbcbd0815ba620f7d1">shadow_color</a>;</div>
<div class="line"><a id="l01298" name="l01298"></a><span class="lineno"><a class="line" href="classcanvas__ity_1_1canvas.html#a93720138de6b5228b4154081aef29988"> 1298</a></span>        <span class="keywordtype">float</span>              <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#a93720138de6b5228b4154081aef29988">shadow_blur</a>;</div>
<div class="line"><a id="l01299" name="l01299"></a><span class="lineno"><a class="line" href="classcanvas__ity_1_1canvas.html#ab3d978450725779c91b16e192ac264ef"> 1299</a></span>        std::vector&lt;float&gt; <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ab3d978450725779c91b16e192ac264ef">shadow</a>;</div>
<div class="line"><a id="l01300" name="l01300"></a><span class="lineno"><a class="line" href="classcanvas__ity_1_1canvas.html#a9928b93ce97d8ec8fbfa6c450edbc96c"> 1300</a></span>        <span class="keywordtype">float</span>              <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#a9928b93ce97d8ec8fbfa6c450edbc96c">line_width</a>;</div>
<div class="line"><a id="l01301" name="l01301"></a><span class="lineno"><a class="line" href="classcanvas__ity_1_1canvas.html#a374c2313aab5ee0c35d0a747bbfb3f88"> 1301</a></span>        <span class="keywordtype">float</span>              <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#a374c2313aab5ee0c35d0a747bbfb3f88">miter_limit</a>;</div>
<div class="line"><a id="l01302" name="l01302"></a><span class="lineno"><a class="line" href="classcanvas__ity_1_1canvas.html#a3f34a73605c566ec786c89a18bc076b2"> 1302</a></span>        std::vector&lt;float&gt; <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#a3f34a73605c566ec786c89a18bc076b2">line_dash</a>;</div>
<div class="line"><a id="l01303" name="l01303"></a><span class="lineno"><a class="line" href="classcanvas__ity_1_1canvas.html#a8a2e78359bde16efa2f89127b119a1b2"> 1303</a></span>        <a class="code hl_struct" href="structcanvas__ity_1_1paint__brush.html">paint_brush</a>        <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#a8a2e78359bde16efa2f89127b119a1b2">fill_brush</a>;</div>
<div class="line"><a id="l01304" name="l01304"></a><span class="lineno"><a class="line" href="classcanvas__ity_1_1canvas.html#a989dabb052e2c1a7400db979069dee52"> 1304</a></span>        <a class="code hl_struct" href="structcanvas__ity_1_1paint__brush.html">paint_brush</a>        <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#a989dabb052e2c1a7400db979069dee52">stroke_brush</a>;</div>
<div class="line"><a id="l01305" name="l01305"></a><span class="lineno"><a class="line" href="classcanvas__ity_1_1canvas.html#a15db24a232ad11aedfd4f7b4cfc0b280"> 1305</a></span>        <a class="code hl_struct" href="structcanvas__ity_1_1paint__brush.html">paint_brush</a>        <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#a15db24a232ad11aedfd4f7b4cfc0b280">image_brush</a>;</div>
<div class="line"><a id="l01306" name="l01306"></a><span class="lineno"><a class="line" href="classcanvas__ity_1_1canvas.html#ae8488ab90d9a55ebf96175ff662c6ede"> 1306</a></span>        <a class="code hl_struct" href="structcanvas__ity_1_1bezier__path.html">bezier_path</a>        <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ae8488ab90d9a55ebf96175ff662c6ede">path</a>;</div>
<div class="line"><a id="l01307" name="l01307"></a><span class="lineno"><a class="line" href="classcanvas__ity_1_1canvas.html#afd8f9880a251b532bf619b3ea93aff5f"> 1307</a></span>        <a class="code hl_struct" href="structcanvas__ity_1_1line__path.html">line_path</a>          <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#afd8f9880a251b532bf619b3ea93aff5f">lines</a>;</div>
<div class="line"><a id="l01308" name="l01308"></a><span class="lineno"><a class="line" href="classcanvas__ity_1_1canvas.html#afaf3d6c584853157fb64bf463648f65c"> 1308</a></span>        <a class="code hl_struct" href="structcanvas__ity_1_1line__path.html">line_path</a>          <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#afaf3d6c584853157fb64bf463648f65c">scratch</a>;</div>
<div class="line"><a id="l01309" name="l01309"></a><span class="lineno"><a class="line" href="classcanvas__ity_1_1canvas.html#a4e8fe391327b93aaf006b52eaf3546f4"> 1309</a></span>        <a class="code hl_typedef" href="namespacecanvas__ity.html#aefffbe6bf29b56f35ecb44b2b2aaa302">pixel_runs</a>         <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#a4e8fe391327b93aaf006b52eaf3546f4">runs</a>;</div>
<div class="line"><a id="l01310" name="l01310"></a><span class="lineno"><a class="line" href="classcanvas__ity_1_1canvas.html#afac766bb79ebdf29a1d4094c91b3291e"> 1310</a></span>        <a class="code hl_typedef" href="namespacecanvas__ity.html#aefffbe6bf29b56f35ecb44b2b2aaa302">pixel_runs</a>         <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#afac766bb79ebdf29a1d4094c91b3291e">mask</a>;</div>
<div class="line"><a id="l01311" name="l01311"></a><span class="lineno"><a class="line" href="classcanvas__ity_1_1canvas.html#ae1aa377c064c039eb6c3bac8f6d2fb1b"> 1311</a></span>        <a class="code hl_struct" href="structcanvas__ity_1_1font__face.html">font_face</a>          <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ae1aa377c064c039eb6c3bac8f6d2fb1b">face</a>;</div>
<div class="line"><a id="l01312" name="l01312"></a><span class="lineno"><a class="line" href="classcanvas__ity_1_1canvas.html#afd6171d5075070f02637262085db2bb2"> 1312</a></span>        <a class="code hl_struct" href="structcanvas__ity_1_1rgba.html">rgba</a>*              <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#afd6171d5075070f02637262085db2bb2">bitmap</a>;</div>
<div class="line"><a id="l01313" name="l01313"></a><span class="lineno"><a class="line" href="classcanvas__ity_1_1canvas.html#a2309d72383256afad1d28a40c4a837dc"> 1313</a></span>        <a class="code hl_class" href="classcanvas__ity_1_1canvas.html">canvas</a>*            <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#a2309d72383256afad1d28a40c4a837dc">saves</a>;</div>
<div class="line"><a id="l01314" name="l01314"></a><span class="lineno"><a class="line" href="classcanvas__ity_1_1canvas.html#adc09699f5374cd99debeb90b8827993e"> 1314</a></span>        <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#adc09699f5374cd99debeb90b8827993e">canvas</a>(<a class="code hl_class" href="classcanvas__ity_1_1canvas.html">canvas</a> <span class="keyword">const</span>&amp;);</div>
<div class="line"><a id="l01315" name="l01315"></a><span class="lineno"><a class="line" href="classcanvas__ity_1_1canvas.html#ae82297859869bd71ddf70725ee0b6bbe"> 1315</a></span>        <a class="code hl_class" href="classcanvas__ity_1_1canvas.html">canvas</a>&amp; <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#ae82297859869bd71ddf70725ee0b6bbe">operator=</a>(<a class="code hl_class" href="classcanvas__ity_1_1canvas.html">canvas</a> <span class="keyword">const</span>&amp;);</div>
<div class="line"><a id="l01316" name="l01316"></a><span class="lineno"><a class="line" href="classcanvas__ity_1_1canvas.html#ab859d5ae4e62d7c4395f06fc422f9e8f"> 1316</a></span>        <span class="keywordtype">void</span>    <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#ab859d5ae4e62d7c4395f06fc422f9e8f">add_tessellation</a>(<a class="code hl_struct" href="structcanvas__ity_1_1xy.html">xy</a>, <a class="code hl_struct" href="structcanvas__ity_1_1xy.html">xy</a>, <a class="code hl_struct" href="structcanvas__ity_1_1xy.html">xy</a>, <a class="code hl_struct" href="structcanvas__ity_1_1xy.html">xy</a>, <span class="keywordtype">float</span>, <span class="keywordtype">int</span>);</div>
<div class="line"><a id="l01317" name="l01317"></a><span class="lineno"><a class="line" href="classcanvas__ity_1_1canvas.html#a5959c046fdd90657075cb68e24c6e3ae"> 1317</a></span>        <span class="keywordtype">void</span>    <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#a5959c046fdd90657075cb68e24c6e3ae">add_bezier</a>(<a class="code hl_struct" href="structcanvas__ity_1_1xy.html">xy</a>, <a class="code hl_struct" href="structcanvas__ity_1_1xy.html">xy</a>, <a class="code hl_struct" href="structcanvas__ity_1_1xy.html">xy</a>, <a class="code hl_struct" href="structcanvas__ity_1_1xy.html">xy</a>, <span class="keywordtype">float</span>);</div>
<div class="line"><a id="l01318" name="l01318"></a><span class="lineno"><a class="line" href="classcanvas__ity_1_1canvas.html#ae1dee2675c55bc9421de7fb1cebc3cd9"> 1318</a></span>        <span class="keywordtype">void</span>    <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#ae1dee2675c55bc9421de7fb1cebc3cd9">path_to_lines</a>(<span class="keywordtype">bool</span>);</div>
<div class="line"><a id="l01319" name="l01319"></a><span class="lineno"><a class="line" href="classcanvas__ity_1_1canvas.html#a76f919fb3dfead1b60ae57d578b649a2"> 1319</a></span>        <span class="keywordtype">void</span>    <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#a76f919fb3dfead1b60ae57d578b649a2">add_glyph</a>(<span class="keywordtype">int</span>, <span class="keywordtype">float</span>);</div>
<div class="line"><a id="l01320" name="l01320"></a><span class="lineno"><a class="line" href="classcanvas__ity_1_1canvas.html#ac677bb99b93a767bf42075a0e5969890"> 1320</a></span>        <span class="keywordtype">int</span>     <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#ac677bb99b93a767bf42075a0e5969890">character_to_glyph</a>(<span class="keywordtype">char</span> <span class="keyword">const</span>*, <span class="keywordtype">int</span>&amp;);</div>
<div class="line"><a id="l01321" name="l01321"></a><span class="lineno"><a class="line" href="classcanvas__ity_1_1canvas.html#a4dd3608e9ac1d67b267aff7710377118"> 1321</a></span>        <span class="keywordtype">void</span>    <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#a4dd3608e9ac1d67b267aff7710377118">text_to_lines</a>(<span class="keywordtype">char</span> <span class="keyword">const</span>*, <a class="code hl_struct" href="structcanvas__ity_1_1xy.html">xy</a>, <span class="keywordtype">float</span>, <span class="keywordtype">bool</span>);</div>
<div class="line"><a id="l01322" name="l01322"></a><span class="lineno"><a class="line" href="classcanvas__ity_1_1canvas.html#aa32bb49090a1a1b75ea808488bfc309b"> 1322</a></span>        <span class="keywordtype">void</span>    <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#aa32bb49090a1a1b75ea808488bfc309b">dash_lines</a>();</div>
<div class="line"><a id="l01323" name="l01323"></a><span class="lineno"><a class="line" href="classcanvas__ity_1_1canvas.html#aab6951705e9efb55d545239161de8f01"> 1323</a></span>        <span class="keywordtype">void</span>    <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#aab6951705e9efb55d545239161de8f01">add_half_stroke</a>(<span class="keywordtype">size_t</span>, <span class="keywordtype">size_t</span>, <span class="keywordtype">bool</span>);</div>
<div class="line"><a id="l01324" name="l01324"></a><span class="lineno"><a class="line" href="classcanvas__ity_1_1canvas.html#ade2814d673a6a799438a54f85040ef95"> 1324</a></span>        <span class="keywordtype">void</span>    <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#ade2814d673a6a799438a54f85040ef95">stroke_lines</a>();</div>
<div class="line"><a id="l01325" name="l01325"></a><span class="lineno"><a class="line" href="classcanvas__ity_1_1canvas.html#a5f5340853be67ae67fe66d29d186b7a4"> 1325</a></span>        <span class="keywordtype">void</span>    <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#a5f5340853be67ae67fe66d29d186b7a4">add_runs</a>(<a class="code hl_struct" href="structcanvas__ity_1_1xy.html">xy</a>, <a class="code hl_struct" href="structcanvas__ity_1_1xy.html">xy</a>);</div>
<div class="line"><a id="l01326" name="l01326"></a><span class="lineno"><a class="line" href="classcanvas__ity_1_1canvas.html#a97cc5b1cc4d7e5b67ab3054fcdcfb3d4"> 1326</a></span>        <span class="keywordtype">void</span>    <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#a97cc5b1cc4d7e5b67ab3054fcdcfb3d4">lines_to_runs</a>(<a class="code hl_struct" href="structcanvas__ity_1_1xy.html">xy</a>, <span class="keywordtype">int</span>);</div>
<div class="line"><a id="l01327" name="l01327"></a><span class="lineno"><a class="line" href="classcanvas__ity_1_1canvas.html#a4398d75300a84212897f80f34d634c6f"> 1327</a></span>        <a class="code hl_struct" href="structcanvas__ity_1_1rgba.html">rgba</a>    <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#a4398d75300a84212897f80f34d634c6f">paint_pixel</a>(<a class="code hl_struct" href="structcanvas__ity_1_1xy.html">xy</a>, <a class="code hl_struct" href="structcanvas__ity_1_1paint__brush.html">paint_brush</a> <span class="keyword">const</span>&amp;);</div>
<div class="line"><a id="l01328" name="l01328"></a><span class="lineno"><a class="line" href="classcanvas__ity_1_1canvas.html#a157d3c554ce752f70cb447fe3b7f0f4d"> 1328</a></span>        <span class="keywordtype">void</span>    <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#a157d3c554ce752f70cb447fe3b7f0f4d">render_shadow</a>(<a class="code hl_struct" href="structcanvas__ity_1_1paint__brush.html">paint_brush</a> <span class="keyword">const</span>&amp;);</div>
<div class="line"><a id="l01329" name="l01329"></a><span class="lineno"><a class="line" href="classcanvas__ity_1_1canvas.html#a7f8ab830d6326620f52816979a9b5586"> 1329</a></span>        <span class="keywordtype">void</span>    <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#a7f8ab830d6326620f52816979a9b5586">render_main</a>(<a class="code hl_struct" href="structcanvas__ity_1_1paint__brush.html">paint_brush</a> <span class="keyword">const</span>&amp;);</div>
<div class="line"><a id="l01330" name="l01330"></a><span class="lineno"> 1330</span>    };</div>
</div>
<div class="line"><a id="l01331" name="l01331"></a><span class="lineno"> 1331</span> </div>
<div class="line"><a id="l01332" name="l01332"></a><span class="lineno"> 1332</span>} <span class="comment">// namespace canvas_ity</span></div>
<div class="line"><a id="l01333" name="l01333"></a><span class="lineno"> 1333</span> </div>
<div class="line"><a id="l01334" name="l01334"></a><span class="lineno"> 1334</span><span class="preprocessor">#endif </span><span class="comment">// CANVAS_ITY_HPP</span></div>
<div class="line"><a id="l01335" name="l01335"></a><span class="lineno"> 1335</span> </div>
<div class="line"><a id="l01336" name="l01336"></a><span class="lineno"> 1336</span><span class="comment">// ======== IMPLEMENTATION ========</span></div>
<div class="line"><a id="l01337" name="l01337"></a><span class="lineno"> 1337</span><span class="comment">//</span></div>
<div class="line"><a id="l01338" name="l01338"></a><span class="lineno"> 1338</span><span class="comment">// The general internal data flow (albeit not control flow!) for rendering</span></div>
<div class="line"><a id="l01339" name="l01339"></a><span class="lineno"> 1339</span><span class="comment">// a shape onto the canvas is as follows:</span></div>
<div class="line"><a id="l01340" name="l01340"></a><span class="lineno"> 1340</span><span class="comment">//</span></div>
<div class="line"><a id="l01341" name="l01341"></a><span class="lineno"> 1341</span><span class="comment">// 1. Construct a set of polybeziers representing the current path via the</span></div>
<div class="line"><a id="l01342" name="l01342"></a><span class="lineno"> 1342</span><span class="comment">//      public path building API (move_to, line_to, bezier_curve_to, etc.).</span></div>
<div class="line"><a id="l01343" name="l01343"></a><span class="lineno"> 1343</span><span class="comment">// 2. Adaptively tessellate the polybeziers into polylines (path_to_lines).</span></div>
<div class="line"><a id="l01344" name="l01344"></a><span class="lineno"> 1344</span><span class="comment">// 3. Maybe break the polylines into shorter polylines according to the dash</span></div>
<div class="line"><a id="l01345" name="l01345"></a><span class="lineno"> 1345</span><span class="comment">//      pattern (dash_lines).</span></div>
<div class="line"><a id="l01346" name="l01346"></a><span class="lineno"> 1346</span><span class="comment">// 4. Maybe stroke expand the polylines into new polylines that can be filled</span></div>
<div class="line"><a id="l01347" name="l01347"></a><span class="lineno"> 1347</span><span class="comment">//      to show the lines with width, joins, and caps (stroke_lines).</span></div>
<div class="line"><a id="l01348" name="l01348"></a><span class="lineno"> 1348</span><span class="comment">// 5. Scan-convert the polylines into a sparse representation of fractional</span></div>
<div class="line"><a id="l01349" name="l01349"></a><span class="lineno"> 1349</span><span class="comment">//      pixel coverage (lines_to_runs).</span></div>
<div class="line"><a id="l01350" name="l01350"></a><span class="lineno"> 1350</span><span class="comment">// 6. Maybe paint the covered pixel span alphas &quot;offscreen&quot;, blur, color,</span></div>
<div class="line"><a id="l01351" name="l01351"></a><span class="lineno"> 1351</span><span class="comment">//      and blend them onto the canvas where not clipped (render_shadow).</span></div>
<div class="line"><a id="l01352" name="l01352"></a><span class="lineno"> 1352</span><span class="comment">// 7. Paint the covered pixel spans and blend them onto the canvas where not</span></div>
<div class="line"><a id="l01353" name="l01353"></a><span class="lineno"> 1353</span><span class="comment">//      clipped (render_main).</span></div>
<div class="line"><a id="l01354" name="l01354"></a><span class="lineno"> 1354</span> </div>
<div class="line"><a id="l01355" name="l01355"></a><span class="lineno"> 1355</span><span class="preprocessor">#ifdef CANVAS_ITY_IMPLEMENTATION</span></div>
<div class="line"><a id="l01356" name="l01356"></a><span class="lineno"> 1356</span><span class="preprocessor">#define LINEARIZE_RGB 2</span></div>
<div class="line"><a id="l01357" name="l01357"></a><span class="lineno"> 1357</span> </div>
<div class="line"><a id="l01358" name="l01358"></a><span class="lineno"> 1358</span><span class="preprocessor">#include &lt;algorithm&gt;</span></div>
<div class="line"><a id="l01359" name="l01359"></a><span class="lineno"> 1359</span><span class="preprocessor">#include &lt;cmath&gt;</span></div>
<div class="line"><a id="l01360" name="l01360"></a><span class="lineno"> 1360</span><span class="preprocessor">#include &lt;numeric&gt;</span></div>
<div class="line"><a id="l01361" name="l01361"></a><span class="lineno"> 1361</span> </div>
<div class="line"><a id="l01362" name="l01362"></a><span class="lineno"> 1362</span><span class="keyword">namespace </span><a class="code hl_namespace" href="namespacecanvas__ity.html">canvas_ity</a></div>
<div class="line"><a id="l01363" name="l01363"></a><span class="lineno"> 1363</span>{</div>
<div class="line"><a id="l01364" name="l01364"></a><span class="lineno"> 1364</span> </div>
<div class="line"><a id="l01365" name="l01365"></a><span class="lineno"> 1365</span>    <span class="comment">// 2D vector math operations</span></div>
<div class="line"><a id="l01366" name="l01366"></a><span class="lineno"> 1366</span>    <span class="keyword">const</span> <span class="keywordtype">float</span> pi = 3.14159265f;</div>
<div class="line"><a id="l01367" name="l01367"></a><span class="lineno"> 1367</span>    <a class="code hl_function" href="structcanvas__ity_1_1xy.html#afe6453e0ff3b67e444997a64ebb6ef6d">xy::xy</a>()</div>
<div class="line"><a id="l01368" name="l01368"></a><span class="lineno"> 1368</span>        : x(0.0f), y(0.0f)</div>
<div class="line"><a id="l01369" name="l01369"></a><span class="lineno"> 1369</span>    {</div>
<div class="line"><a id="l01370" name="l01370"></a><span class="lineno"> 1370</span>    }</div>
<div class="line"><a id="l01371" name="l01371"></a><span class="lineno"> 1371</span>    <a class="code hl_function" href="structcanvas__ity_1_1xy.html#afe6453e0ff3b67e444997a64ebb6ef6d">xy::xy</a>(<span class="keywordtype">float</span> new_x, <span class="keywordtype">float</span> new_y)</div>
<div class="line"><a id="l01372" name="l01372"></a><span class="lineno"> 1372</span>        : x(new_x), y(new_y)</div>
<div class="line"><a id="l01373" name="l01373"></a><span class="lineno"> 1373</span>    {</div>
<div class="line"><a id="l01374" name="l01374"></a><span class="lineno"> 1374</span>    }</div>
<div class="line"><a id="l01375" name="l01375"></a><span class="lineno"> 1375</span>    <span class="keyword">static</span> xy&amp; <a class="code hl_function" href="namespacelitehtml.html#a9c340138591e7b47c6f4c266d0074bae">operator+=</a>(xy&amp; left, xy right)</div>
<div class="line"><a id="l01376" name="l01376"></a><span class="lineno"> 1376</span>    {</div>
<div class="line"><a id="l01377" name="l01377"></a><span class="lineno"> 1377</span>        left.x += right.x;</div>
<div class="line"><a id="l01378" name="l01378"></a><span class="lineno"> 1378</span>        left.y += right.y;</div>
<div class="line"><a id="l01379" name="l01379"></a><span class="lineno"> 1379</span>        <span class="keywordflow">return</span> left;</div>
<div class="line"><a id="l01380" name="l01380"></a><span class="lineno"> 1380</span>    }</div>
<div class="line"><a id="l01381" name="l01381"></a><span class="lineno"> 1381</span>    <span class="keyword">static</span> xy&amp; operator-=(xy&amp; left, xy right)</div>
<div class="line"><a id="l01382" name="l01382"></a><span class="lineno"> 1382</span>    {</div>
<div class="line"><a id="l01383" name="l01383"></a><span class="lineno"> 1383</span>        left.x -= right.x;</div>
<div class="line"><a id="l01384" name="l01384"></a><span class="lineno"> 1384</span>        left.y -= right.y;</div>
<div class="line"><a id="l01385" name="l01385"></a><span class="lineno"> 1385</span>        <span class="keywordflow">return</span> left;</div>
<div class="line"><a id="l01386" name="l01386"></a><span class="lineno"> 1386</span>    }</div>
<div class="line"><a id="l01387" name="l01387"></a><span class="lineno"> 1387</span>    <span class="keyword">static</span> xy&amp; operator*=(xy&amp; left, <span class="keywordtype">float</span> right)</div>
<div class="line"><a id="l01388" name="l01388"></a><span class="lineno"> 1388</span>    {</div>
<div class="line"><a id="l01389" name="l01389"></a><span class="lineno"> 1389</span>        left.x *= right;</div>
<div class="line"><a id="l01390" name="l01390"></a><span class="lineno"> 1390</span>        left.y *= right;</div>
<div class="line"><a id="l01391" name="l01391"></a><span class="lineno"> 1391</span>        <span class="keywordflow">return</span> left;</div>
<div class="line"><a id="l01392" name="l01392"></a><span class="lineno"> 1392</span>    }</div>
<div class="line"><a id="l01393" name="l01393"></a><span class="lineno"> 1393</span>    <span class="keyword">static</span> xy <span class="keyword">const</span> operator+(xy left, xy right)</div>
<div class="line"><a id="l01394" name="l01394"></a><span class="lineno"> 1394</span>    {</div>
<div class="line"><a id="l01395" name="l01395"></a><span class="lineno"> 1395</span>        <span class="keywordflow">return</span> left += right;</div>
<div class="line"><a id="l01396" name="l01396"></a><span class="lineno"> 1396</span>    }</div>
<div class="line"><a id="l01397" name="l01397"></a><span class="lineno"> 1397</span>    <span class="keyword">static</span> xy <span class="keyword">const</span> operator-(xy left, xy right)</div>
<div class="line"><a id="l01398" name="l01398"></a><span class="lineno"> 1398</span>    {</div>
<div class="line"><a id="l01399" name="l01399"></a><span class="lineno"> 1399</span>        <span class="keywordflow">return</span> left -= right;</div>
<div class="line"><a id="l01400" name="l01400"></a><span class="lineno"> 1400</span>    }</div>
<div class="line"><a id="l01401" name="l01401"></a><span class="lineno"> 1401</span>    <span class="keyword">static</span> xy <span class="keyword">const</span> <a class="code hl_function" href="format_8h.html#a53543fa01d0b37fd6ccfe73e2976e139">operator*</a>(<span class="keywordtype">float</span> left, xy right)</div>
<div class="line"><a id="l01402" name="l01402"></a><span class="lineno"> 1402</span>    {</div>
<div class="line"><a id="l01403" name="l01403"></a><span class="lineno"> 1403</span>        <span class="keywordflow">return</span> right *= left;</div>
<div class="line"><a id="l01404" name="l01404"></a><span class="lineno"> 1404</span>    }</div>
<div class="line"><a id="l01405" name="l01405"></a><span class="lineno"> 1405</span>    <span class="keyword">static</span> xy <span class="keyword">const</span> <a class="code hl_function" href="format_8h.html#a53543fa01d0b37fd6ccfe73e2976e139">operator*</a>(affine_matrix <span class="keyword">const</span>&amp; left, xy right)</div>
<div class="line"><a id="l01406" name="l01406"></a><span class="lineno"> 1406</span>    {</div>
<div class="line"><a id="l01407" name="l01407"></a><span class="lineno"> 1407</span>        <span class="keywordflow">return</span> xy(left.a * right.x + left.c * right.y + left.e,</div>
<div class="line"><a id="l01408" name="l01408"></a><span class="lineno"> 1408</span>                  left.b * right.x + left.d * right.y + left.f);</div>
<div class="line"><a id="l01409" name="l01409"></a><span class="lineno"> 1409</span>    }</div>
<div class="line"><a id="l01410" name="l01410"></a><span class="lineno"> 1410</span>    <span class="keyword">static</span> <span class="keywordtype">float</span> dot(xy left, xy right)</div>
<div class="line"><a id="l01411" name="l01411"></a><span class="lineno"> 1411</span>    {</div>
<div class="line"><a id="l01412" name="l01412"></a><span class="lineno"> 1412</span>        <span class="keywordflow">return</span> left.x * right.x + left.y * right.y;</div>
<div class="line"><a id="l01413" name="l01413"></a><span class="lineno"> 1413</span>    }</div>
<div class="line"><a id="l01414" name="l01414"></a><span class="lineno"> 1414</span>    <span class="keyword">static</span> <span class="keywordtype">float</span> length(xy that)</div>
<div class="line"><a id="l01415" name="l01415"></a><span class="lineno"> 1415</span>    {</div>
<div class="line"><a id="l01416" name="l01416"></a><span class="lineno"> 1416</span>        <span class="keywordflow">return</span> sqrtf(dot(that, that));</div>
<div class="line"><a id="l01417" name="l01417"></a><span class="lineno"> 1417</span>    }</div>
<div class="line"><a id="l01418" name="l01418"></a><span class="lineno"> 1418</span>    <span class="keyword">static</span> <span class="keywordtype">float</span> direction(xy that)</div>
<div class="line"><a id="l01419" name="l01419"></a><span class="lineno"> 1419</span>    {</div>
<div class="line"><a id="l01420" name="l01420"></a><span class="lineno"> 1420</span>        <span class="keywordflow">return</span> atan2f(that.y, that.x);</div>
<div class="line"><a id="l01421" name="l01421"></a><span class="lineno"> 1421</span>    }</div>
<div class="line"><a id="l01422" name="l01422"></a><span class="lineno"> 1422</span>    <span class="keyword">static</span> xy <span class="keyword">const</span> normalized(xy that)</div>
<div class="line"><a id="l01423" name="l01423"></a><span class="lineno"> 1423</span>    {</div>
<div class="line"><a id="l01424" name="l01424"></a><span class="lineno"> 1424</span>        <span class="keywordflow">return</span> 1.0f / std::max(1.0e-6f, length(that)) * that;</div>
<div class="line"><a id="l01425" name="l01425"></a><span class="lineno"> 1425</span>    }</div>
<div class="line"><a id="l01426" name="l01426"></a><span class="lineno"> 1426</span>    <span class="keyword">static</span> xy <span class="keyword">const</span> perpendicular(xy that)</div>
<div class="line"><a id="l01427" name="l01427"></a><span class="lineno"> 1427</span>    {</div>
<div class="line"><a id="l01428" name="l01428"></a><span class="lineno"> 1428</span>        <span class="keywordflow">return</span> xy(-that.y, that.x);</div>
<div class="line"><a id="l01429" name="l01429"></a><span class="lineno"> 1429</span>    }</div>
<div class="line"><a id="l01430" name="l01430"></a><span class="lineno"> 1430</span>    <span class="keyword">static</span> xy <span class="keyword">const</span> lerp(xy from, xy to, <span class="keywordtype">float</span> ratio)</div>
<div class="line"><a id="l01431" name="l01431"></a><span class="lineno"> 1431</span>    {</div>
<div class="line"><a id="l01432" name="l01432"></a><span class="lineno"> 1432</span>        <span class="keywordflow">return</span> from + ratio * (to - from);</div>
<div class="line"><a id="l01433" name="l01433"></a><span class="lineno"> 1433</span>    }</div>
<div class="line"><a id="l01434" name="l01434"></a><span class="lineno"> 1434</span>    <span class="comment">// ensure 0 &lt;= angle &lt; 360</span></div>
<div class="line"><a id="l01435" name="l01435"></a><span class="lineno"> 1435</span>    <span class="keywordtype">float</span> normalize_angle(<span class="keywordtype">float</span> angle)</div>
<div class="line"><a id="l01436" name="l01436"></a><span class="lineno"> 1436</span>    {</div>
<div class="line"><a id="l01437" name="l01437"></a><span class="lineno"> 1437</span>        <span class="keywordflow">return</span> fmodf(angle, 360) + (angle &lt; 0 ? 360 : 0);</div>
<div class="line"><a id="l01438" name="l01438"></a><span class="lineno"> 1438</span>    }</div>
<div class="line"><a id="l01439" name="l01439"></a><span class="lineno"> 1439</span> </div>
<div class="line"><a id="l01440" name="l01440"></a><span class="lineno"> 1440</span>    <span class="comment">// RGBA color operations</span></div>
<div class="line"><a id="l01441" name="l01441"></a><span class="lineno"> 1441</span>    <a class="code hl_function" href="structcanvas__ity_1_1rgba.html#a794764cb2c96ca696e26001627599714">rgba::rgba</a>()</div>
<div class="line"><a id="l01442" name="l01442"></a><span class="lineno"> 1442</span>        : r(0.0f), g(0.0f), <a class="code hl_variable" href="tag__strings_8h.html#a21ad0bd836b90d08f4cf640b4c298e7c">b</a>(0.0f), <a class="code hl_variable" href="tag__strings_8h.html#a4124bc0a9335c27f086f24ba207a4912">a</a>(0.0f)</div>
<div class="line"><a id="l01443" name="l01443"></a><span class="lineno"> 1443</span>    {</div>
<div class="line"><a id="l01444" name="l01444"></a><span class="lineno"> 1444</span>    }</div>
<div class="line"><a id="l01445" name="l01445"></a><span class="lineno"> 1445</span>    <a class="code hl_function" href="structcanvas__ity_1_1rgba.html#a794764cb2c96ca696e26001627599714">rgba::rgba</a>(<span class="keywordtype">float</span> new_r, <span class="keywordtype">float</span> new_g, <span class="keywordtype">float</span> new_b, <span class="keywordtype">float</span> new_a)</div>
<div class="line"><a id="l01446" name="l01446"></a><span class="lineno"> 1446</span>        : r(new_r), g(new_g), <a class="code hl_variable" href="tag__strings_8h.html#a21ad0bd836b90d08f4cf640b4c298e7c">b</a>(new_b), <a class="code hl_variable" href="tag__strings_8h.html#a4124bc0a9335c27f086f24ba207a4912">a</a>(new_a)</div>
<div class="line"><a id="l01447" name="l01447"></a><span class="lineno"> 1447</span>    {</div>
<div class="line"><a id="l01448" name="l01448"></a><span class="lineno"> 1448</span>    }</div>
<div class="line"><a id="l01449" name="l01449"></a><span class="lineno"> 1449</span>    <span class="keyword">static</span> rgba&amp; <a class="code hl_function" href="namespacelitehtml.html#a9c340138591e7b47c6f4c266d0074bae">operator+=</a>(rgba&amp; left, rgba right)</div>
<div class="line"><a id="l01450" name="l01450"></a><span class="lineno"> 1450</span>    {</div>
<div class="line"><a id="l01451" name="l01451"></a><span class="lineno"> 1451</span>        left.r += right.r;</div>
<div class="line"><a id="l01452" name="l01452"></a><span class="lineno"> 1452</span>        left.g += right.g;</div>
<div class="line"><a id="l01453" name="l01453"></a><span class="lineno"> 1453</span>        left.b += right.b;</div>
<div class="line"><a id="l01454" name="l01454"></a><span class="lineno"> 1454</span>        left.a += right.a;</div>
<div class="line"><a id="l01455" name="l01455"></a><span class="lineno"> 1455</span>        <span class="keywordflow">return</span> left;</div>
<div class="line"><a id="l01456" name="l01456"></a><span class="lineno"> 1456</span>    }</div>
<div class="line"><a id="l01457" name="l01457"></a><span class="lineno"> 1457</span>    <span class="comment">//static rgba &amp;operator-=( rgba &amp;left, rgba right ) {</span></div>
<div class="line"><a id="l01458" name="l01458"></a><span class="lineno"> 1458</span>    <span class="comment">//    left.r -= right.r; left.g -= right.g; left.b -= right.b;</span></div>
<div class="line"><a id="l01459" name="l01459"></a><span class="lineno"> 1459</span>    <span class="comment">//    left.a -= right.a; return left; }</span></div>
<div class="line"><a id="l01460" name="l01460"></a><span class="lineno"> 1460</span>    <span class="keyword">static</span> rgba&amp; operator*=(rgba&amp; left, <span class="keywordtype">float</span> right)</div>
<div class="line"><a id="l01461" name="l01461"></a><span class="lineno"> 1461</span>    {</div>
<div class="line"><a id="l01462" name="l01462"></a><span class="lineno"> 1462</span>        left.r *= right;</div>
<div class="line"><a id="l01463" name="l01463"></a><span class="lineno"> 1463</span>        left.g *= right;</div>
<div class="line"><a id="l01464" name="l01464"></a><span class="lineno"> 1464</span>        left.b *= right;</div>
<div class="line"><a id="l01465" name="l01465"></a><span class="lineno"> 1465</span>        left.a *= right;</div>
<div class="line"><a id="l01466" name="l01466"></a><span class="lineno"> 1466</span>        <span class="keywordflow">return</span> left;</div>
<div class="line"><a id="l01467" name="l01467"></a><span class="lineno"> 1467</span>    }</div>
<div class="line"><a id="l01468" name="l01468"></a><span class="lineno"> 1468</span>    <span class="keyword">static</span> rgba <span class="keyword">const</span> operator+(rgba left, rgba right)</div>
<div class="line"><a id="l01469" name="l01469"></a><span class="lineno"> 1469</span>    {</div>
<div class="line"><a id="l01470" name="l01470"></a><span class="lineno"> 1470</span>        <span class="keywordflow">return</span> left += right;</div>
<div class="line"><a id="l01471" name="l01471"></a><span class="lineno"> 1471</span>    }</div>
<div class="line"><a id="l01472" name="l01472"></a><span class="lineno"> 1472</span>    <span class="comment">//static rgba const operator-( rgba left, rgba right ) {</span></div>
<div class="line"><a id="l01473" name="l01473"></a><span class="lineno"> 1473</span>    <span class="comment">//    return left -= right; }</span></div>
<div class="line"><a id="l01474" name="l01474"></a><span class="lineno"> 1474</span>    <span class="keyword">static</span> rgba <span class="keyword">const</span> <a class="code hl_function" href="format_8h.html#a53543fa01d0b37fd6ccfe73e2976e139">operator*</a>(<span class="keywordtype">float</span> left, rgba right)</div>
<div class="line"><a id="l01475" name="l01475"></a><span class="lineno"> 1475</span>    {</div>
<div class="line"><a id="l01476" name="l01476"></a><span class="lineno"> 1476</span>        <span class="keywordflow">return</span> right *= left;</div>
<div class="line"><a id="l01477" name="l01477"></a><span class="lineno"> 1477</span>    }</div>
<div class="line"><a id="l01478" name="l01478"></a><span class="lineno"> 1478</span><span class="preprocessor">#if (CANVAS_ITY_IMPLEMENTATION + 0) &amp; LINEARIZE_RGB</span></div>
<div class="line"><a id="l01479" name="l01479"></a><span class="lineno"> 1479</span>    <span class="keyword">static</span> <span class="keywordtype">float</span> linearized(<span class="keywordtype">float</span> <a class="code hl_class" href="classvalue.html">value</a>)</div>
<div class="line"><a id="l01480" name="l01480"></a><span class="lineno"> 1480</span>    {</div>
<div class="line"><a id="l01481" name="l01481"></a><span class="lineno"> 1481</span>        <span class="keywordflow">return</span> <a class="code hl_class" href="classvalue.html">value</a> &lt; 0.04045f ? <a class="code hl_class" href="classvalue.html">value</a> / 12.92f : powf((<a class="code hl_class" href="classvalue.html">value</a> + 0.055f) / 1.055f, 2.4f);</div>
<div class="line"><a id="l01482" name="l01482"></a><span class="lineno"> 1482</span>    }</div>
<div class="line"><a id="l01483" name="l01483"></a><span class="lineno"> 1483</span>    <span class="keyword">static</span> <span class="keywordtype">float</span> delinearized(<span class="keywordtype">float</span> <a class="code hl_class" href="classvalue.html">value</a>)</div>
<div class="line"><a id="l01484" name="l01484"></a><span class="lineno"> 1484</span>    {</div>
<div class="line"><a id="l01485" name="l01485"></a><span class="lineno"> 1485</span>        <span class="keywordflow">return</span> <a class="code hl_class" href="classvalue.html">value</a> &lt; 0.0031308f ? 12.92f * <a class="code hl_class" href="classvalue.html">value</a> : 1.055f * powf(<a class="code hl_class" href="classvalue.html">value</a>, 1.0f / 2.4f) - 0.055f;</div>
<div class="line"><a id="l01486" name="l01486"></a><span class="lineno"> 1486</span>    }</div>
<div class="line"><a id="l01487" name="l01487"></a><span class="lineno"> 1487</span><span class="preprocessor">#else</span></div>
<div class="line"><a id="l01488" name="l01488"></a><span class="lineno"> 1488</span>    <span class="keyword">static</span> <span class="keywordtype">float</span> linearized(<span class="keywordtype">float</span> <a class="code hl_class" href="classvalue.html">value</a>)</div>
<div class="line"><a id="l01489" name="l01489"></a><span class="lineno"> 1489</span>    {</div>
<div class="line"><a id="l01490" name="l01490"></a><span class="lineno"> 1490</span>        <span class="keywordflow">return</span> <a class="code hl_class" href="classvalue.html">value</a>;</div>
<div class="line"><a id="l01491" name="l01491"></a><span class="lineno"> 1491</span>    }</div>
<div class="line"><a id="l01492" name="l01492"></a><span class="lineno"> 1492</span>    <span class="keyword">static</span> <span class="keywordtype">float</span> delinearized(<span class="keywordtype">float</span> <a class="code hl_class" href="classvalue.html">value</a>)</div>
<div class="line"><a id="l01493" name="l01493"></a><span class="lineno"> 1493</span>    {</div>
<div class="line"><a id="l01494" name="l01494"></a><span class="lineno"> 1494</span>        <span class="keywordflow">return</span> <a class="code hl_class" href="classvalue.html">value</a>;</div>
<div class="line"><a id="l01495" name="l01495"></a><span class="lineno"> 1495</span>    }</div>
<div class="line"><a id="l01496" name="l01496"></a><span class="lineno"> 1496</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l01497" name="l01497"></a><span class="lineno"> 1497</span>    <span class="keyword">static</span> rgba <span class="keyword">const</span> linearized(rgba that)</div>
<div class="line"><a id="l01498" name="l01498"></a><span class="lineno"> 1498</span>    {</div>
<div class="line"><a id="l01499" name="l01499"></a><span class="lineno"> 1499</span>        <span class="keywordflow">return</span> rgba(linearized(that.r), linearized(that.g),</div>
<div class="line"><a id="l01500" name="l01500"></a><span class="lineno"> 1500</span>                    linearized(that.b), that.a);</div>
<div class="line"><a id="l01501" name="l01501"></a><span class="lineno"> 1501</span>    }</div>
<div class="line"><a id="l01502" name="l01502"></a><span class="lineno"> 1502</span>    <span class="keyword">static</span> rgba <span class="keyword">const</span> premultiplied(rgba that)</div>
<div class="line"><a id="l01503" name="l01503"></a><span class="lineno"> 1503</span>    {</div>
<div class="line"><a id="l01504" name="l01504"></a><span class="lineno"> 1504</span>        <span class="keywordflow">return</span> rgba(that.r * that.a, that.g * that.a,</div>
<div class="line"><a id="l01505" name="l01505"></a><span class="lineno"> 1505</span>                    that.b * that.a, that.a);</div>
<div class="line"><a id="l01506" name="l01506"></a><span class="lineno"> 1506</span>    }</div>
<div class="line"><a id="l01507" name="l01507"></a><span class="lineno"> 1507</span>    <span class="keyword">static</span> rgba <span class="keyword">const</span> delinearized(rgba that)</div>
<div class="line"><a id="l01508" name="l01508"></a><span class="lineno"> 1508</span>    {</div>
<div class="line"><a id="l01509" name="l01509"></a><span class="lineno"> 1509</span>        <span class="keywordflow">return</span> rgba(delinearized(that.r), delinearized(that.g),</div>
<div class="line"><a id="l01510" name="l01510"></a><span class="lineno"> 1510</span>                    delinearized(that.b), that.a);</div>
<div class="line"><a id="l01511" name="l01511"></a><span class="lineno"> 1511</span>    }</div>
<div class="line"><a id="l01512" name="l01512"></a><span class="lineno"> 1512</span>    <span class="keyword">static</span> rgba <span class="keyword">const</span> unpremultiplied(rgba that)</div>
<div class="line"><a id="l01513" name="l01513"></a><span class="lineno"> 1513</span>    {</div>
<div class="line"><a id="l01514" name="l01514"></a><span class="lineno"> 1514</span>        <span class="keyword">static</span> <span class="keywordtype">float</span> <span class="keyword">const</span> threshold = 1.0f / 8160.0f;</div>
<div class="line"><a id="l01515" name="l01515"></a><span class="lineno"> 1515</span>        <span class="keywordflow">return</span> that.a &lt; threshold ? rgba(0.0f, 0.0f, 0.0f, 0.0f) : rgba(1.0f / that.<a class="code hl_variable" href="tag__strings_8h.html#a4124bc0a9335c27f086f24ba207a4912">a</a> * that.r, 1.0f / that.<a class="code hl_variable" href="tag__strings_8h.html#a4124bc0a9335c27f086f24ba207a4912">a</a> * that.g, 1.0f / that.<a class="code hl_variable" href="tag__strings_8h.html#a4124bc0a9335c27f086f24ba207a4912">a</a> * that.<a class="code hl_variable" href="tag__strings_8h.html#a21ad0bd836b90d08f4cf640b4c298e7c">b</a>, that.<a class="code hl_variable" href="tag__strings_8h.html#a4124bc0a9335c27f086f24ba207a4912">a</a>);</div>
<div class="line"><a id="l01516" name="l01516"></a><span class="lineno"> 1516</span>    }</div>
<div class="line"><a id="l01517" name="l01517"></a><span class="lineno"> 1517</span>    <span class="keyword">static</span> rgba <span class="keyword">const</span> clamped(rgba that)</div>
<div class="line"><a id="l01518" name="l01518"></a><span class="lineno"> 1518</span>    {</div>
<div class="line"><a id="l01519" name="l01519"></a><span class="lineno"> 1519</span>        <span class="keywordflow">return</span> rgba(std::min(std::max(that.r, 0.0f), 1.0f),</div>
<div class="line"><a id="l01520" name="l01520"></a><span class="lineno"> 1520</span>                    std::min(std::max(that.g, 0.0f), 1.0f),</div>
<div class="line"><a id="l01521" name="l01521"></a><span class="lineno"> 1521</span>                    std::min(std::max(that.b, 0.0f), 1.0f),</div>
<div class="line"><a id="l01522" name="l01522"></a><span class="lineno"> 1522</span>                    std::min(std::max(that.a, 0.0f), 1.0f));</div>
<div class="line"><a id="l01523" name="l01523"></a><span class="lineno"> 1523</span>    }</div>
<div class="line"><a id="l01524" name="l01524"></a><span class="lineno"> 1524</span> </div>
<div class="line"><a id="l01525" name="l01525"></a><span class="lineno"> 1525</span>    <span class="comment">// Helpers for TTF file parsing</span></div>
<div class="line"><a id="l01526" name="l01526"></a><span class="lineno"> 1526</span>    <span class="keyword">static</span> <span class="keywordtype">int</span> unsigned_8(std::vector&lt;unsigned char&gt;&amp; <a class="code hl_struct" href="structdata.html">data</a>, <span class="keywordtype">int</span> <a class="code hl_enumvalue" href="core_8h.html#a7fc0249f0f8ba720115d2430f5b86cbaa6a992d5529f459a44fee58c733255e86">index</a>)</div>
<div class="line"><a id="l01527" name="l01527"></a><span class="lineno"> 1527</span>    {</div>
<div class="line"><a id="l01528" name="l01528"></a><span class="lineno"> 1528</span>        <span class="keywordflow">return</span> <a class="code hl_struct" href="structdata.html">data</a>[<span class="keyword">static_cast&lt;</span><span class="keywordtype">size_t</span><span class="keyword">&gt;</span>(<a class="code hl_enumvalue" href="core_8h.html#a7fc0249f0f8ba720115d2430f5b86cbaa6a992d5529f459a44fee58c733255e86">index</a>)];</div>
<div class="line"><a id="l01529" name="l01529"></a><span class="lineno"> 1529</span>    }</div>
<div class="line"><a id="l01530" name="l01530"></a><span class="lineno"> 1530</span>    <span class="keyword">static</span> <span class="keywordtype">int</span> signed_8(std::vector&lt;unsigned char&gt;&amp; <a class="code hl_struct" href="structdata.html">data</a>, <span class="keywordtype">int</span> <a class="code hl_enumvalue" href="core_8h.html#a7fc0249f0f8ba720115d2430f5b86cbaa6a992d5529f459a44fee58c733255e86">index</a>)</div>
<div class="line"><a id="l01531" name="l01531"></a><span class="lineno"> 1531</span>    {</div>
<div class="line"><a id="l01532" name="l01532"></a><span class="lineno"> 1532</span>        <span class="keywordtype">size_t</span> place = <span class="keyword">static_cast&lt;</span><span class="keywordtype">size_t</span><span class="keyword">&gt;</span>(<a class="code hl_enumvalue" href="core_8h.html#a7fc0249f0f8ba720115d2430f5b86cbaa6a992d5529f459a44fee58c733255e86">index</a>);</div>
<div class="line"><a id="l01533" name="l01533"></a><span class="lineno"> 1533</span>        <span class="keywordflow">return</span> <span class="keyword">static_cast&lt;</span><span class="keywordtype">signed</span> <span class="keywordtype">char</span><span class="keyword">&gt;</span>(<a class="code hl_struct" href="structdata.html">data</a>[place]);</div>
<div class="line"><a id="l01534" name="l01534"></a><span class="lineno"> 1534</span>    }</div>
<div class="line"><a id="l01535" name="l01535"></a><span class="lineno"> 1535</span>    <span class="keyword">static</span> <span class="keywordtype">int</span> unsigned_16(std::vector&lt;unsigned char&gt;&amp; <a class="code hl_struct" href="structdata.html">data</a>, <span class="keywordtype">int</span> <a class="code hl_enumvalue" href="core_8h.html#a7fc0249f0f8ba720115d2430f5b86cbaa6a992d5529f459a44fee58c733255e86">index</a>)</div>
<div class="line"><a id="l01536" name="l01536"></a><span class="lineno"> 1536</span>    {</div>
<div class="line"><a id="l01537" name="l01537"></a><span class="lineno"> 1537</span>        <span class="keywordtype">size_t</span> place = <span class="keyword">static_cast&lt;</span><span class="keywordtype">size_t</span><span class="keyword">&gt;</span>(<a class="code hl_enumvalue" href="core_8h.html#a7fc0249f0f8ba720115d2430f5b86cbaa6a992d5529f459a44fee58c733255e86">index</a>);</div>
<div class="line"><a id="l01538" name="l01538"></a><span class="lineno"> 1538</span>        <span class="keywordflow">return</span> <a class="code hl_struct" href="structdata.html">data</a>[place] &lt;&lt; 8 | <a class="code hl_struct" href="structdata.html">data</a>[place + 1];</div>
<div class="line"><a id="l01539" name="l01539"></a><span class="lineno"> 1539</span>    }</div>
<div class="line"><a id="l01540" name="l01540"></a><span class="lineno"> 1540</span>    <span class="keyword">static</span> <span class="keywordtype">int</span> signed_16(std::vector&lt;unsigned char&gt;&amp; <a class="code hl_struct" href="structdata.html">data</a>, <span class="keywordtype">int</span> <a class="code hl_enumvalue" href="core_8h.html#a7fc0249f0f8ba720115d2430f5b86cbaa6a992d5529f459a44fee58c733255e86">index</a>)</div>
<div class="line"><a id="l01541" name="l01541"></a><span class="lineno"> 1541</span>    {</div>
<div class="line"><a id="l01542" name="l01542"></a><span class="lineno"> 1542</span>        <span class="keywordtype">size_t</span> place = <span class="keyword">static_cast&lt;</span><span class="keywordtype">size_t</span><span class="keyword">&gt;</span>(<a class="code hl_enumvalue" href="core_8h.html#a7fc0249f0f8ba720115d2430f5b86cbaa6a992d5529f459a44fee58c733255e86">index</a>);</div>
<div class="line"><a id="l01543" name="l01543"></a><span class="lineno"> 1543</span>        <span class="keywordflow">return</span> <span class="keyword">static_cast&lt;</span><span class="keywordtype">short</span><span class="keyword">&gt;</span>(<a class="code hl_struct" href="structdata.html">data</a>[place] &lt;&lt; 8 | <a class="code hl_struct" href="structdata.html">data</a>[place + 1]);</div>
<div class="line"><a id="l01544" name="l01544"></a><span class="lineno"> 1544</span>    }</div>
<div class="line"><a id="l01545" name="l01545"></a><span class="lineno"> 1545</span>    <span class="keyword">static</span> <span class="keywordtype">int</span> signed_32(std::vector&lt;unsigned char&gt;&amp; <a class="code hl_struct" href="structdata.html">data</a>, <span class="keywordtype">int</span> <a class="code hl_enumvalue" href="core_8h.html#a7fc0249f0f8ba720115d2430f5b86cbaa6a992d5529f459a44fee58c733255e86">index</a>)</div>
<div class="line"><a id="l01546" name="l01546"></a><span class="lineno"> 1546</span>    {</div>
<div class="line"><a id="l01547" name="l01547"></a><span class="lineno"> 1547</span>        <span class="keywordtype">size_t</span> place = <span class="keyword">static_cast&lt;</span><span class="keywordtype">size_t</span><span class="keyword">&gt;</span>(<a class="code hl_enumvalue" href="core_8h.html#a7fc0249f0f8ba720115d2430f5b86cbaa6a992d5529f459a44fee58c733255e86">index</a>);</div>
<div class="line"><a id="l01548" name="l01548"></a><span class="lineno"> 1548</span>        <span class="keywordflow">return</span> (<a class="code hl_struct" href="structdata.html">data</a>[place + 0] &lt;&lt; 24 | <a class="code hl_struct" href="structdata.html">data</a>[place + 1] &lt;&lt; 16 |</div>
<div class="line"><a id="l01549" name="l01549"></a><span class="lineno"> 1549</span>                <a class="code hl_struct" href="structdata.html">data</a>[place + 2] &lt;&lt; 8 | <a class="code hl_struct" href="structdata.html">data</a>[place + 3] &lt;&lt; 0);</div>
<div class="line"><a id="l01550" name="l01550"></a><span class="lineno"> 1550</span>    }</div>
<div class="line"><a id="l01551" name="l01551"></a><span class="lineno"> 1551</span> </div>
<div class="line"><a id="l01552" name="l01552"></a><span class="lineno"> 1552</span>    <span class="comment">// Tessellate (at low-level) a cubic Bezier curve and add it to the polyline</span></div>
<div class="line"><a id="l01553" name="l01553"></a><span class="lineno"> 1553</span>    <span class="comment">// data.  This recursively splits the curve until two criteria are met</span></div>
<div class="line"><a id="l01554" name="l01554"></a><span class="lineno"> 1554</span>    <span class="comment">// (subject to a hard recursion depth limit).  First, the control points</span></div>
<div class="line"><a id="l01555" name="l01555"></a><span class="lineno"> 1555</span>    <span class="comment">// must not be farther from the line between the endpoints than the tolerance.</span></div>
<div class="line"><a id="l01556" name="l01556"></a><span class="lineno"> 1556</span>    <span class="comment">// By the Bezier convex hull property, this ensures that the distance between</span></div>
<div class="line"><a id="l01557" name="l01557"></a><span class="lineno"> 1557</span>    <span class="comment">// the true curve and the polyline approximation will be no more than the</span></div>
<div class="line"><a id="l01558" name="l01558"></a><span class="lineno"> 1558</span>    <span class="comment">// tolerance.  Secondly, it takes the cosine of an angular turn limit; the</span></div>
<div class="line"><a id="l01559" name="l01559"></a><span class="lineno"> 1559</span>    <span class="comment">// curve will be split until it turns less than this amount.  This is used</span></div>
<div class="line"><a id="l01560" name="l01560"></a><span class="lineno"> 1560</span>    <span class="comment">// for stroking, with the angular limit chosen such that the sagita of an arc</span></div>
<div class="line"><a id="l01561" name="l01561"></a><span class="lineno"> 1561</span>    <span class="comment">// with that angle and a half-stroke radius will be equal to the tolerance.</span></div>
<div class="line"><a id="l01562" name="l01562"></a><span class="lineno"> 1562</span>    <span class="comment">// This keeps expanded strokes approximately within tolerance.  Note that</span></div>
<div class="line"><a id="l01563" name="l01563"></a><span class="lineno"> 1563</span>    <span class="comment">// in the base case, it adds the control points as well as the end points.</span></div>
<div class="line"><a id="l01564" name="l01564"></a><span class="lineno"> 1564</span>    <span class="comment">// This way, stroke expansion infers the correct tangents from the ends of</span></div>
<div class="line"><a id="l01565" name="l01565"></a><span class="lineno"> 1565</span>    <span class="comment">// the polylines.</span></div>
<div class="line"><a id="l01566" name="l01566"></a><span class="lineno"> 1566</span>    <span class="comment">//</span></div>
<div class="line"><a id="l01567" name="l01567"></a><span class="lineno"> 1567</span>    <span class="keywordtype">void</span> <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#ab859d5ae4e62d7c4395f06fc422f9e8f">canvas::add_tessellation</a>(</div>
<div class="line"><a id="l01568" name="l01568"></a><span class="lineno"> 1568</span>        xy    point_1,</div>
<div class="line"><a id="l01569" name="l01569"></a><span class="lineno"> 1569</span>        xy    control_1,</div>
<div class="line"><a id="l01570" name="l01570"></a><span class="lineno"> 1570</span>        xy    control_2,</div>
<div class="line"><a id="l01571" name="l01571"></a><span class="lineno"> 1571</span>        xy    point_2,</div>
<div class="line"><a id="l01572" name="l01572"></a><span class="lineno"> 1572</span>        <span class="keywordtype">float</span> angular,</div>
<div class="line"><a id="l01573" name="l01573"></a><span class="lineno"> 1573</span>        <span class="keywordtype">int</span>   limit)</div>
<div class="line"><a id="l01574" name="l01574"></a><span class="lineno"> 1574</span>    {</div>
<div class="line"><a id="l01575" name="l01575"></a><span class="lineno"> 1575</span>        <span class="keyword">static</span> <span class="keywordtype">float</span> <span class="keyword">const</span> tolerance      = 0.125f;</div>
<div class="line"><a id="l01576" name="l01576"></a><span class="lineno"> 1576</span>        <span class="keywordtype">float</span>              flatness       = tolerance * tolerance;</div>
<div class="line"><a id="l01577" name="l01577"></a><span class="lineno"> 1577</span>        xy                 edge_1         = control_1 - point_1;</div>
<div class="line"><a id="l01578" name="l01578"></a><span class="lineno"> 1578</span>        xy                 edge_2         = control_2 - control_1;</div>
<div class="line"><a id="l01579" name="l01579"></a><span class="lineno"> 1579</span>        xy                 edge_3         = point_2 - control_2;</div>
<div class="line"><a id="l01580" name="l01580"></a><span class="lineno"> 1580</span>        xy                 segment        = point_2 - point_1;</div>
<div class="line"><a id="l01581" name="l01581"></a><span class="lineno"> 1581</span>        <span class="keywordtype">float</span>              squared_1      = dot(edge_1, edge_1);</div>
<div class="line"><a id="l01582" name="l01582"></a><span class="lineno"> 1582</span>        <span class="keywordtype">float</span>              squared_2      = dot(edge_2, edge_2);</div>
<div class="line"><a id="l01583" name="l01583"></a><span class="lineno"> 1583</span>        <span class="keywordtype">float</span>              squared_3      = dot(edge_3, edge_3);</div>
<div class="line"><a id="l01584" name="l01584"></a><span class="lineno"> 1584</span>        <span class="keyword">static</span> <span class="keywordtype">float</span> <span class="keyword">const</span> epsilon        = 1.0e-4f;</div>
<div class="line"><a id="l01585" name="l01585"></a><span class="lineno"> 1585</span>        <span class="keywordtype">float</span>              length_squared = std::max(epsilon, dot(segment, segment));</div>
<div class="line"><a id="l01586" name="l01586"></a><span class="lineno"> 1586</span>        <span class="keywordtype">float</span>              projection_1   = dot(edge_1, segment) / length_squared;</div>
<div class="line"><a id="l01587" name="l01587"></a><span class="lineno"> 1587</span>        <span class="keywordtype">float</span>              projection_2   = dot(edge_3, segment) / length_squared;</div>
<div class="line"><a id="l01588" name="l01588"></a><span class="lineno"> 1588</span>        <span class="keywordtype">float</span>              clamped_1      = std::min(std::max(projection_1, 0.0f), 1.0f);</div>
<div class="line"><a id="l01589" name="l01589"></a><span class="lineno"> 1589</span>        <span class="keywordtype">float</span>              clamped_2      = std::min(std::max(projection_2, 0.0f), 1.0f);</div>
<div class="line"><a id="l01590" name="l01590"></a><span class="lineno"> 1590</span>        xy                 to_line_1      = point_1 + clamped_1 * segment - control_1;</div>
<div class="line"><a id="l01591" name="l01591"></a><span class="lineno"> 1591</span>        xy                 to_line_2      = point_2 - clamped_2 * segment - control_2;</div>
<div class="line"><a id="l01592" name="l01592"></a><span class="lineno"> 1592</span>        <span class="keywordtype">float</span>              cosine         = 1.0f;</div>
<div class="line"><a id="l01593" name="l01593"></a><span class="lineno"> 1593</span>        <span class="keywordflow">if</span> (angular &gt; -1.0f)</div>
<div class="line"><a id="l01594" name="l01594"></a><span class="lineno"> 1594</span>        {</div>
<div class="line"><a id="l01595" name="l01595"></a><span class="lineno"> 1595</span>            <span class="keywordflow">if</span> (squared_1 * squared_3 != 0.0f)</div>
<div class="line"><a id="l01596" name="l01596"></a><span class="lineno"> 1596</span>                cosine = dot(edge_1, edge_3) / sqrtf(squared_1 * squared_3);</div>
<div class="line"><a id="l01597" name="l01597"></a><span class="lineno"> 1597</span>            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (squared_1 * squared_2 != 0.0f)</div>
<div class="line"><a id="l01598" name="l01598"></a><span class="lineno"> 1598</span>                cosine = dot(edge_1, edge_2) / sqrtf(squared_1 * squared_2);</div>
<div class="line"><a id="l01599" name="l01599"></a><span class="lineno"> 1599</span>            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (squared_2 * squared_3 != 0.0f)</div>
<div class="line"><a id="l01600" name="l01600"></a><span class="lineno"> 1600</span>                cosine = dot(edge_2, edge_3) / sqrtf(squared_2 * squared_3);</div>
<div class="line"><a id="l01601" name="l01601"></a><span class="lineno"> 1601</span>        }</div>
<div class="line"><a id="l01602" name="l01602"></a><span class="lineno"> 1602</span>        <span class="keywordflow">if</span> ((dot(to_line_1, to_line_1) &lt;= flatness &amp;&amp;</div>
<div class="line"><a id="l01603" name="l01603"></a><span class="lineno"> 1603</span>             dot(to_line_2, to_line_2) &lt;= flatness &amp;&amp;</div>
<div class="line"><a id="l01604" name="l01604"></a><span class="lineno"> 1604</span>             cosine &gt;= angular) ||</div>
<div class="line"><a id="l01605" name="l01605"></a><span class="lineno"> 1605</span>            !limit)</div>
<div class="line"><a id="l01606" name="l01606"></a><span class="lineno"> 1606</span>        {</div>
<div class="line"><a id="l01607" name="l01607"></a><span class="lineno"> 1607</span>            <span class="keywordflow">if</span> (angular &gt; -1.0f &amp;&amp; squared_1 != 0.0f)</div>
<div class="line"><a id="l01608" name="l01608"></a><span class="lineno"> 1608</span>                <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#afd8f9880a251b532bf619b3ea93aff5f">lines</a>.<a class="code hl_variable" href="structcanvas__ity_1_1line__path.html#a27efd4b0dec6d85e4ba861c34bacdbf4">points</a>.push_back(control_1);</div>
<div class="line"><a id="l01609" name="l01609"></a><span class="lineno"> 1609</span>            <span class="keywordflow">if</span> (angular &gt; -1.0f &amp;&amp; squared_2 != 0.0f)</div>
<div class="line"><a id="l01610" name="l01610"></a><span class="lineno"> 1610</span>                <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#afd8f9880a251b532bf619b3ea93aff5f">lines</a>.<a class="code hl_variable" href="structcanvas__ity_1_1line__path.html#a27efd4b0dec6d85e4ba861c34bacdbf4">points</a>.push_back(control_2);</div>
<div class="line"><a id="l01611" name="l01611"></a><span class="lineno"> 1611</span>            <span class="keywordflow">if</span> (angular == -1.0f || squared_3 != 0.0f)</div>
<div class="line"><a id="l01612" name="l01612"></a><span class="lineno"> 1612</span>                <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#afd8f9880a251b532bf619b3ea93aff5f">lines</a>.<a class="code hl_variable" href="structcanvas__ity_1_1line__path.html#a27efd4b0dec6d85e4ba861c34bacdbf4">points</a>.push_back(point_2);</div>
<div class="line"><a id="l01613" name="l01613"></a><span class="lineno"> 1613</span>            <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l01614" name="l01614"></a><span class="lineno"> 1614</span>        }</div>
<div class="line"><a id="l01615" name="l01615"></a><span class="lineno"> 1615</span>        xy left_1  = lerp(point_1, control_1, 0.5f);</div>
<div class="line"><a id="l01616" name="l01616"></a><span class="lineno"> 1616</span>        xy <a class="code hl_enumvalue" href="namespacecanvas__ity.html#a4d285f5b6403d2455e1550ff00b66a68a11cc80e28201c55b410440ff51640997">middle</a>  = lerp(control_1, control_2, 0.5f);</div>
<div class="line"><a id="l01617" name="l01617"></a><span class="lineno"> 1617</span>        xy right_2 = lerp(control_2, point_2, 0.5f);</div>
<div class="line"><a id="l01618" name="l01618"></a><span class="lineno"> 1618</span>        xy left_2  = lerp(left_1, <a class="code hl_enumvalue" href="namespacecanvas__ity.html#a4d285f5b6403d2455e1550ff00b66a68a11cc80e28201c55b410440ff51640997">middle</a>, 0.5f);</div>
<div class="line"><a id="l01619" name="l01619"></a><span class="lineno"> 1619</span>        xy right_1 = lerp(<a class="code hl_enumvalue" href="namespacecanvas__ity.html#a4d285f5b6403d2455e1550ff00b66a68a11cc80e28201c55b410440ff51640997">middle</a>, right_2, 0.5f);</div>
<div class="line"><a id="l01620" name="l01620"></a><span class="lineno"> 1620</span>        xy split   = lerp(left_2, right_1, 0.5f);</div>
<div class="line"><a id="l01621" name="l01621"></a><span class="lineno"> 1621</span>        <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#ab859d5ae4e62d7c4395f06fc422f9e8f">add_tessellation</a>(point_1, left_1, left_2, split, angular, limit - 1);</div>
<div class="line"><a id="l01622" name="l01622"></a><span class="lineno"> 1622</span>        <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#ab859d5ae4e62d7c4395f06fc422f9e8f">add_tessellation</a>(split, right_1, right_2, point_2, angular, limit - 1);</div>
<div class="line"><a id="l01623" name="l01623"></a><span class="lineno"> 1623</span>    }</div>
<div class="line"><a id="l01624" name="l01624"></a><span class="lineno"> 1624</span> </div>
<div class="line"><a id="l01625" name="l01625"></a><span class="lineno"> 1625</span>    <span class="comment">// Tessellate (at high-level) a cubic Bezier curve and add it to the polyline</span></div>
<div class="line"><a id="l01626" name="l01626"></a><span class="lineno"> 1626</span>    <span class="comment">// data.  This solves both for the extreme in curvature and for the horizontal</span></div>
<div class="line"><a id="l01627" name="l01627"></a><span class="lineno"> 1627</span>    <span class="comment">// and vertical extrema.  It then splits the curve into segments at these</span></div>
<div class="line"><a id="l01628" name="l01628"></a><span class="lineno"> 1628</span>    <span class="comment">// points and passes them off to the lower-level recursive tessellation.</span></div>
<div class="line"><a id="l01629" name="l01629"></a><span class="lineno"> 1629</span>    <span class="comment">// This preconditioning means the polyline exactly includes any cusps or</span></div>
<div class="line"><a id="l01630" name="l01630"></a><span class="lineno"> 1630</span>    <span class="comment">// ends of tight loops without the flatness test needing to locate it via</span></div>
<div class="line"><a id="l01631" name="l01631"></a><span class="lineno"> 1631</span>    <span class="comment">// bisection, and the angular limit test can use simple dot products without</span></div>
<div class="line"><a id="l01632" name="l01632"></a><span class="lineno"> 1632</span>    <span class="comment">// fear of curves turning more than 90 degrees.</span></div>
<div class="line"><a id="l01633" name="l01633"></a><span class="lineno"> 1633</span>    <span class="comment">//</span></div>
<div class="line"><a id="l01634" name="l01634"></a><span class="lineno"> 1634</span>    <span class="keywordtype">void</span> <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#a5959c046fdd90657075cb68e24c6e3ae">canvas::add_bezier</a>(</div>
<div class="line"><a id="l01635" name="l01635"></a><span class="lineno"> 1635</span>        xy    point_1,</div>
<div class="line"><a id="l01636" name="l01636"></a><span class="lineno"> 1636</span>        xy    control_1,</div>
<div class="line"><a id="l01637" name="l01637"></a><span class="lineno"> 1637</span>        xy    control_2,</div>
<div class="line"><a id="l01638" name="l01638"></a><span class="lineno"> 1638</span>        xy    point_2,</div>
<div class="line"><a id="l01639" name="l01639"></a><span class="lineno"> 1639</span>        <span class="keywordtype">float</span> angular)</div>
<div class="line"><a id="l01640" name="l01640"></a><span class="lineno"> 1640</span>    {</div>
<div class="line"><a id="l01641" name="l01641"></a><span class="lineno"> 1641</span>        xy edge_1 = control_1 - point_1;</div>
<div class="line"><a id="l01642" name="l01642"></a><span class="lineno"> 1642</span>        xy edge_2 = control_2 - control_1;</div>
<div class="line"><a id="l01643" name="l01643"></a><span class="lineno"> 1643</span>        xy edge_3 = point_2 - control_2;</div>
<div class="line"><a id="l01644" name="l01644"></a><span class="lineno"> 1644</span>        <span class="keywordflow">if</span> (dot(edge_1, edge_1) == 0.0f &amp;&amp;</div>
<div class="line"><a id="l01645" name="l01645"></a><span class="lineno"> 1645</span>            dot(edge_3, edge_3) == 0.0f)</div>
<div class="line"><a id="l01646" name="l01646"></a><span class="lineno"> 1646</span>        {</div>
<div class="line"><a id="l01647" name="l01647"></a><span class="lineno"> 1647</span>            <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#afd8f9880a251b532bf619b3ea93aff5f">lines</a>.<a class="code hl_variable" href="structcanvas__ity_1_1line__path.html#a27efd4b0dec6d85e4ba861c34bacdbf4">points</a>.push_back(point_2);</div>
<div class="line"><a id="l01648" name="l01648"></a><span class="lineno"> 1648</span>            <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l01649" name="l01649"></a><span class="lineno"> 1649</span>        }</div>
<div class="line"><a id="l01650" name="l01650"></a><span class="lineno"> 1650</span>        <span class="keywordtype">float</span>              <a class="code hl_function" href="namespacelitehtml.html#a6f952703aa655217919dcdcfc641e4a2">at</a>[7]     = {0.0f, 1.0f};</div>
<div class="line"><a id="l01651" name="l01651"></a><span class="lineno"> 1651</span>        <span class="keywordtype">int</span>                cuts      = 2;</div>
<div class="line"><a id="l01652" name="l01652"></a><span class="lineno"> 1652</span>        xy                 extrema_a = -9.0f * edge_2 + 3.0f * (point_2 - point_1);</div>
<div class="line"><a id="l01653" name="l01653"></a><span class="lineno"> 1653</span>        xy                 extrema_b = 6.0f * (point_1 + control_2) - 12.0f * control_1;</div>
<div class="line"><a id="l01654" name="l01654"></a><span class="lineno"> 1654</span>        xy                 extrema_c = 3.0f * edge_1;</div>
<div class="line"><a id="l01655" name="l01655"></a><span class="lineno"> 1655</span>        <span class="keyword">static</span> <span class="keywordtype">float</span> <span class="keyword">const</span> epsilon   = 1.0e-4f;</div>
<div class="line"><a id="l01656" name="l01656"></a><span class="lineno"> 1656</span>        <span class="keywordflow">if</span> (fabsf(extrema_a.x) &gt; epsilon)</div>
<div class="line"><a id="l01657" name="l01657"></a><span class="lineno"> 1657</span>        {</div>
<div class="line"><a id="l01658" name="l01658"></a><span class="lineno"> 1658</span>            <span class="keywordtype">float</span> discriminant =</div>
<div class="line"><a id="l01659" name="l01659"></a><span class="lineno"> 1659</span>                extrema_b.x * extrema_b.x - 4.0f * extrema_a.x * extrema_c.x;</div>
<div class="line"><a id="l01660" name="l01660"></a><span class="lineno"> 1660</span>            <span class="keywordflow">if</span> (discriminant &gt;= 0.0f)</div>
<div class="line"><a id="l01661" name="l01661"></a><span class="lineno"> 1661</span>            {</div>
<div class="line"><a id="l01662" name="l01662"></a><span class="lineno"> 1662</span>                <span class="keywordtype">float</span> <a class="code hl_namespace" href="namespacesign.html">sign</a>       = extrema_b.x &gt; 0.0f ? 1.0f : -1.0f;</div>
<div class="line"><a id="l01663" name="l01663"></a><span class="lineno"> 1663</span>                <span class="keywordtype">float</span> term       = -extrema_b.x - <a class="code hl_namespace" href="namespacesign.html">sign</a> * sqrtf(discriminant);</div>
<div class="line"><a id="l01664" name="l01664"></a><span class="lineno"> 1664</span>                <span class="keywordtype">float</span> extremum_1 = term / (2.0f * extrema_a.x);</div>
<div class="line"><a id="l01665" name="l01665"></a><span class="lineno"> 1665</span>                <a class="code hl_function" href="namespacelitehtml.html#a6f952703aa655217919dcdcfc641e4a2">at</a>[cuts++]       = extremum_1;</div>
<div class="line"><a id="l01666" name="l01666"></a><span class="lineno"> 1666</span>                <a class="code hl_function" href="namespacelitehtml.html#a6f952703aa655217919dcdcfc641e4a2">at</a>[cuts++]       = extrema_c.x / (extrema_a.x * extremum_1);</div>
<div class="line"><a id="l01667" name="l01667"></a><span class="lineno"> 1667</span>            }</div>
<div class="line"><a id="l01668" name="l01668"></a><span class="lineno"> 1668</span>        }</div>
<div class="line"><a id="l01669" name="l01669"></a><span class="lineno"> 1669</span>        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (fabsf(extrema_b.x) &gt; epsilon)</div>
<div class="line"><a id="l01670" name="l01670"></a><span class="lineno"> 1670</span>            at[cuts++] = -extrema_c.x / extrema_b.x;</div>
<div class="line"><a id="l01671" name="l01671"></a><span class="lineno"> 1671</span>        <span class="keywordflow">if</span> (fabsf(extrema_a.y) &gt; epsilon)</div>
<div class="line"><a id="l01672" name="l01672"></a><span class="lineno"> 1672</span>        {</div>
<div class="line"><a id="l01673" name="l01673"></a><span class="lineno"> 1673</span>            <span class="keywordtype">float</span> discriminant =</div>
<div class="line"><a id="l01674" name="l01674"></a><span class="lineno"> 1674</span>                extrema_b.y * extrema_b.y - 4.0f * extrema_a.y * extrema_c.y;</div>
<div class="line"><a id="l01675" name="l01675"></a><span class="lineno"> 1675</span>            <span class="keywordflow">if</span> (discriminant &gt;= 0.0f)</div>
<div class="line"><a id="l01676" name="l01676"></a><span class="lineno"> 1676</span>            {</div>
<div class="line"><a id="l01677" name="l01677"></a><span class="lineno"> 1677</span>                <span class="keywordtype">float</span> <a class="code hl_namespace" href="namespacesign.html">sign</a>       = extrema_b.y &gt; 0.0f ? 1.0f : -1.0f;</div>
<div class="line"><a id="l01678" name="l01678"></a><span class="lineno"> 1678</span>                <span class="keywordtype">float</span> term       = -extrema_b.y - <a class="code hl_namespace" href="namespacesign.html">sign</a> * sqrtf(discriminant);</div>
<div class="line"><a id="l01679" name="l01679"></a><span class="lineno"> 1679</span>                <span class="keywordtype">float</span> extremum_1 = term / (2.0f * extrema_a.y);</div>
<div class="line"><a id="l01680" name="l01680"></a><span class="lineno"> 1680</span>                <a class="code hl_function" href="namespacelitehtml.html#a6f952703aa655217919dcdcfc641e4a2">at</a>[cuts++]       = extremum_1;</div>
<div class="line"><a id="l01681" name="l01681"></a><span class="lineno"> 1681</span>                <a class="code hl_function" href="namespacelitehtml.html#a6f952703aa655217919dcdcfc641e4a2">at</a>[cuts++]       = extrema_c.y / (extrema_a.y * extremum_1);</div>
<div class="line"><a id="l01682" name="l01682"></a><span class="lineno"> 1682</span>            }</div>
<div class="line"><a id="l01683" name="l01683"></a><span class="lineno"> 1683</span>        }</div>
<div class="line"><a id="l01684" name="l01684"></a><span class="lineno"> 1684</span>        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (fabsf(extrema_b.y) &gt; epsilon)</div>
<div class="line"><a id="l01685" name="l01685"></a><span class="lineno"> 1685</span>            at[cuts++] = -extrema_c.y / extrema_b.y;</div>
<div class="line"><a id="l01686" name="l01686"></a><span class="lineno"> 1686</span>        <span class="keywordtype">float</span> determinant_1 = dot(perpendicular(edge_1), edge_2);</div>
<div class="line"><a id="l01687" name="l01687"></a><span class="lineno"> 1687</span>        <span class="keywordtype">float</span> determinant_2 = dot(perpendicular(edge_1), edge_3);</div>
<div class="line"><a id="l01688" name="l01688"></a><span class="lineno"> 1688</span>        <span class="keywordtype">float</span> determinant_3 = dot(perpendicular(edge_2), edge_3);</div>
<div class="line"><a id="l01689" name="l01689"></a><span class="lineno"> 1689</span>        <span class="keywordtype">float</span> curve_a       = determinant_1 - determinant_2 + determinant_3;</div>
<div class="line"><a id="l01690" name="l01690"></a><span class="lineno"> 1690</span>        <span class="keywordtype">float</span> curve_b       = -2.0f * determinant_1 + determinant_2;</div>
<div class="line"><a id="l01691" name="l01691"></a><span class="lineno"> 1691</span>        <span class="keywordflow">if</span> (fabsf(curve_a) &gt; epsilon &amp;&amp;</div>
<div class="line"><a id="l01692" name="l01692"></a><span class="lineno"> 1692</span>            fabsf(curve_b) &gt; epsilon)</div>
<div class="line"><a id="l01693" name="l01693"></a><span class="lineno"> 1693</span>            <a class="code hl_function" href="namespacelitehtml.html#a6f952703aa655217919dcdcfc641e4a2">at</a>[cuts++] = -0.5f * curve_b / curve_a;</div>
<div class="line"><a id="l01694" name="l01694"></a><span class="lineno"> 1694</span>        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code hl_enumvalue" href="core_8h.html#a7fc0249f0f8ba720115d2430f5b86cbaa6a992d5529f459a44fee58c733255e86">index</a> = 1; <a class="code hl_enumvalue" href="core_8h.html#a7fc0249f0f8ba720115d2430f5b86cbaa6a992d5529f459a44fee58c733255e86">index</a> &lt; cuts; ++<a class="code hl_enumvalue" href="core_8h.html#a7fc0249f0f8ba720115d2430f5b86cbaa6a992d5529f459a44fee58c733255e86">index</a>)</div>
<div class="line"><a id="l01695" name="l01695"></a><span class="lineno"> 1695</span>        {</div>
<div class="line"><a id="l01696" name="l01696"></a><span class="lineno"> 1696</span>            <span class="keywordtype">float</span> <a class="code hl_class" href="classvalue.html">value</a>  = <a class="code hl_function" href="namespacelitehtml.html#a6f952703aa655217919dcdcfc641e4a2">at</a>[<a class="code hl_enumvalue" href="core_8h.html#a7fc0249f0f8ba720115d2430f5b86cbaa6a992d5529f459a44fee58c733255e86">index</a>];</div>
<div class="line"><a id="l01697" name="l01697"></a><span class="lineno"> 1697</span>            <span class="keywordtype">int</span>   sorted = <a class="code hl_enumvalue" href="core_8h.html#a7fc0249f0f8ba720115d2430f5b86cbaa6a992d5529f459a44fee58c733255e86">index</a> - 1;</div>
<div class="line"><a id="l01698" name="l01698"></a><span class="lineno"> 1698</span>            <span class="keywordflow">for</span> (; 0 &lt;= sorted &amp;&amp; <a class="code hl_class" href="classvalue.html">value</a> &lt; <a class="code hl_function" href="namespacelitehtml.html#a6f952703aa655217919dcdcfc641e4a2">at</a>[sorted]; --sorted)</div>
<div class="line"><a id="l01699" name="l01699"></a><span class="lineno"> 1699</span>                at[sorted + 1] = at[sorted];</div>
<div class="line"><a id="l01700" name="l01700"></a><span class="lineno"> 1700</span>            <a class="code hl_function" href="namespacelitehtml.html#a6f952703aa655217919dcdcfc641e4a2">at</a>[sorted + 1] = <a class="code hl_class" href="classvalue.html">value</a>;</div>
<div class="line"><a id="l01701" name="l01701"></a><span class="lineno"> 1701</span>        }</div>
<div class="line"><a id="l01702" name="l01702"></a><span class="lineno"> 1702</span>        xy split_point_1 = point_1;</div>
<div class="line"><a id="l01703" name="l01703"></a><span class="lineno"> 1703</span>        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code hl_enumvalue" href="core_8h.html#a7fc0249f0f8ba720115d2430f5b86cbaa6a992d5529f459a44fee58c733255e86">index</a> = 0; <a class="code hl_enumvalue" href="core_8h.html#a7fc0249f0f8ba720115d2430f5b86cbaa6a992d5529f459a44fee58c733255e86">index</a> &lt; cuts - 1; ++<a class="code hl_enumvalue" href="core_8h.html#a7fc0249f0f8ba720115d2430f5b86cbaa6a992d5529f459a44fee58c733255e86">index</a>)</div>
<div class="line"><a id="l01704" name="l01704"></a><span class="lineno"> 1704</span>        {</div>
<div class="line"><a id="l01705" name="l01705"></a><span class="lineno"> 1705</span>            <span class="keywordflow">if</span> (!(0.0f &lt;= at[<a class="code hl_enumvalue" href="core_8h.html#a7fc0249f0f8ba720115d2430f5b86cbaa6a992d5529f459a44fee58c733255e86">index</a>] &amp;&amp; at[<a class="code hl_enumvalue" href="core_8h.html#a7fc0249f0f8ba720115d2430f5b86cbaa6a992d5529f459a44fee58c733255e86">index</a> + 1] &lt;= 1.0f &amp;&amp;</div>
<div class="line"><a id="l01706" name="l01706"></a><span class="lineno"> 1706</span>                  at[<a class="code hl_enumvalue" href="core_8h.html#a7fc0249f0f8ba720115d2430f5b86cbaa6a992d5529f459a44fee58c733255e86">index</a>] != at[<a class="code hl_enumvalue" href="core_8h.html#a7fc0249f0f8ba720115d2430f5b86cbaa6a992d5529f459a44fee58c733255e86">index</a> + 1]))</div>
<div class="line"><a id="l01707" name="l01707"></a><span class="lineno"> 1707</span>                <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l01708" name="l01708"></a><span class="lineno"> 1708</span>            <span class="keywordtype">float</span> ratio           = <a class="code hl_function" href="namespacelitehtml.html#a6f952703aa655217919dcdcfc641e4a2">at</a>[<a class="code hl_enumvalue" href="core_8h.html#a7fc0249f0f8ba720115d2430f5b86cbaa6a992d5529f459a44fee58c733255e86">index</a>] / <a class="code hl_function" href="namespacelitehtml.html#a6f952703aa655217919dcdcfc641e4a2">at</a>[<a class="code hl_enumvalue" href="core_8h.html#a7fc0249f0f8ba720115d2430f5b86cbaa6a992d5529f459a44fee58c733255e86">index</a> + 1];</div>
<div class="line"><a id="l01709" name="l01709"></a><span class="lineno"> 1709</span>            xy    partial_1       = lerp(point_1, control_1, at[<a class="code hl_enumvalue" href="core_8h.html#a7fc0249f0f8ba720115d2430f5b86cbaa6a992d5529f459a44fee58c733255e86">index</a> + 1]);</div>
<div class="line"><a id="l01710" name="l01710"></a><span class="lineno"> 1710</span>            xy    partial_2       = lerp(control_1, control_2, at[<a class="code hl_enumvalue" href="core_8h.html#a7fc0249f0f8ba720115d2430f5b86cbaa6a992d5529f459a44fee58c733255e86">index</a> + 1]);</div>
<div class="line"><a id="l01711" name="l01711"></a><span class="lineno"> 1711</span>            xy    partial_3       = lerp(control_2, point_2, at[<a class="code hl_enumvalue" href="core_8h.html#a7fc0249f0f8ba720115d2430f5b86cbaa6a992d5529f459a44fee58c733255e86">index</a> + 1]);</div>
<div class="line"><a id="l01712" name="l01712"></a><span class="lineno"> 1712</span>            xy    partial_4       = lerp(partial_1, partial_2, at[<a class="code hl_enumvalue" href="core_8h.html#a7fc0249f0f8ba720115d2430f5b86cbaa6a992d5529f459a44fee58c733255e86">index</a> + 1]);</div>
<div class="line"><a id="l01713" name="l01713"></a><span class="lineno"> 1713</span>            xy    partial_5       = lerp(partial_2, partial_3, at[<a class="code hl_enumvalue" href="core_8h.html#a7fc0249f0f8ba720115d2430f5b86cbaa6a992d5529f459a44fee58c733255e86">index</a> + 1]);</div>
<div class="line"><a id="l01714" name="l01714"></a><span class="lineno"> 1714</span>            xy    partial_6       = lerp(partial_1, partial_4, ratio);</div>
<div class="line"><a id="l01715" name="l01715"></a><span class="lineno"> 1715</span>            xy    split_point_2   = lerp(partial_4, partial_5, at[<a class="code hl_enumvalue" href="core_8h.html#a7fc0249f0f8ba720115d2430f5b86cbaa6a992d5529f459a44fee58c733255e86">index</a> + 1]);</div>
<div class="line"><a id="l01716" name="l01716"></a><span class="lineno"> 1716</span>            xy    split_control_2 = lerp(partial_4, split_point_2, ratio);</div>
<div class="line"><a id="l01717" name="l01717"></a><span class="lineno"> 1717</span>            xy    split_control_1 = lerp(partial_6, split_control_2, ratio);</div>
<div class="line"><a id="l01718" name="l01718"></a><span class="lineno"> 1718</span>            <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#ab859d5ae4e62d7c4395f06fc422f9e8f">add_tessellation</a>(split_point_1, split_control_1,</div>
<div class="line"><a id="l01719" name="l01719"></a><span class="lineno"> 1719</span>                             split_control_2, split_point_2,</div>
<div class="line"><a id="l01720" name="l01720"></a><span class="lineno"> 1720</span>                             angular, 20);</div>
<div class="line"><a id="l01721" name="l01721"></a><span class="lineno"> 1721</span>            split_point_1 = split_point_2;</div>
<div class="line"><a id="l01722" name="l01722"></a><span class="lineno"> 1722</span>        }</div>
<div class="line"><a id="l01723" name="l01723"></a><span class="lineno"> 1723</span>    }</div>
<div class="line"><a id="l01724" name="l01724"></a><span class="lineno"> 1724</span> </div>
<div class="line"><a id="l01725" name="l01725"></a><span class="lineno"> 1725</span>    <span class="comment">// Convert the current path to a set of polylines.  This walks over the</span></div>
<div class="line"><a id="l01726" name="l01726"></a><span class="lineno"> 1726</span>    <span class="comment">// complete set of subpaths in the current path (stored as sets of cubic</span></div>
<div class="line"><a id="l01727" name="l01727"></a><span class="lineno"> 1727</span>    <span class="comment">// Beziers) and converts each Bezier curve segment to a polyline while</span></div>
<div class="line"><a id="l01728" name="l01728"></a><span class="lineno"> 1728</span>    <span class="comment">// preserving information about where subpaths begin and end and whether</span></div>
<div class="line"><a id="l01729" name="l01729"></a><span class="lineno"> 1729</span>    <span class="comment">// they are closed or open.  This replaces the previous polyline data.</span></div>
<div class="line"><a id="l01730" name="l01730"></a><span class="lineno"> 1730</span>    <span class="comment">//</span></div>
<div class="line"><a id="l01731" name="l01731"></a><span class="lineno"> 1731</span>    <span class="keywordtype">void</span> <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#ae1dee2675c55bc9421de7fb1cebc3cd9">canvas::path_to_lines</a>(</div>
<div class="line"><a id="l01732" name="l01732"></a><span class="lineno"> 1732</span>        <span class="keywordtype">bool</span> stroking)</div>
<div class="line"><a id="l01733" name="l01733"></a><span class="lineno"> 1733</span>    {</div>
<div class="line"><a id="l01734" name="l01734"></a><span class="lineno"> 1734</span>        <span class="keyword">static</span> <span class="keywordtype">float</span> <span class="keyword">const</span> tolerance = 0.125f;</div>
<div class="line"><a id="l01735" name="l01735"></a><span class="lineno"> 1735</span>        <span class="keywordtype">float</span>              ratio     = tolerance / std::max(0.5f * <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#a9928b93ce97d8ec8fbfa6c450edbc96c">line_width</a>, tolerance);</div>
<div class="line"><a id="l01736" name="l01736"></a><span class="lineno"> 1736</span>        <span class="keywordtype">float</span>              angular   = stroking ? (ratio - 2.0f) * ratio * 2.0f + 1.0f : -1.0f;</div>
<div class="line"><a id="l01737" name="l01737"></a><span class="lineno"> 1737</span>        <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#afd8f9880a251b532bf619b3ea93aff5f">lines</a>.<a class="code hl_variable" href="structcanvas__ity_1_1line__path.html#a27efd4b0dec6d85e4ba861c34bacdbf4">points</a>.clear();</div>
<div class="line"><a id="l01738" name="l01738"></a><span class="lineno"> 1738</span>        <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#afd8f9880a251b532bf619b3ea93aff5f">lines</a>.<a class="code hl_variable" href="structcanvas__ity_1_1line__path.html#acfec22d114fac137ae0a70af069874d8">subpaths</a>.clear();</div>
<div class="line"><a id="l01739" name="l01739"></a><span class="lineno"> 1739</span>        <span class="keywordtype">size_t</span> <a class="code hl_enumvalue" href="core_8h.html#a7fc0249f0f8ba720115d2430f5b86cbaa6a992d5529f459a44fee58c733255e86">index</a>  = 0;</div>
<div class="line"><a id="l01740" name="l01740"></a><span class="lineno"> 1740</span>        <span class="keywordtype">size_t</span> <a class="code hl_enumvalue" href="namespacecanvas__ity.html#a64892b31b00c006299d47bb71542b765ad5800f9a6ff0499528d888aafa6c0d31">ending</a> = 0;</div>
<div class="line"><a id="l01741" name="l01741"></a><span class="lineno"> 1741</span>        <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> subpath = 0; subpath &lt; <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ae8488ab90d9a55ebf96175ff662c6ede">path</a>.<a class="code hl_variable" href="structcanvas__ity_1_1bezier__path.html#aa9c8932defdc8f64781d16e72fef19a3">subpaths</a>.size(); ++subpath)</div>
<div class="line"><a id="l01742" name="l01742"></a><span class="lineno"> 1742</span>        {</div>
<div class="line"><a id="l01743" name="l01743"></a><span class="lineno"> 1743</span>            <a class="code hl_enumvalue" href="namespacecanvas__ity.html#a64892b31b00c006299d47bb71542b765ad5800f9a6ff0499528d888aafa6c0d31">ending</a> += <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ae8488ab90d9a55ebf96175ff662c6ede">path</a>.<a class="code hl_variable" href="structcanvas__ity_1_1bezier__path.html#aa9c8932defdc8f64781d16e72fef19a3">subpaths</a>[subpath].count;</div>
<div class="line"><a id="l01744" name="l01744"></a><span class="lineno"> 1744</span>            <span class="keywordtype">size_t</span> <a class="code hl_function" href="namespacedetail.html#a7c8bc5fb5ef4750d192614dd7f0cf396">first</a>   = <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#afd8f9880a251b532bf619b3ea93aff5f">lines</a>.<a class="code hl_variable" href="structcanvas__ity_1_1line__path.html#a27efd4b0dec6d85e4ba861c34bacdbf4">points</a>.size();</div>
<div class="line"><a id="l01745" name="l01745"></a><span class="lineno"> 1745</span>            xy     point_1 = <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ae8488ab90d9a55ebf96175ff662c6ede">path</a>.<a class="code hl_variable" href="structcanvas__ity_1_1bezier__path.html#a1b9a6aa5d044117cf45d1e193c09c9c6">points</a>[<a class="code hl_enumvalue" href="core_8h.html#a7fc0249f0f8ba720115d2430f5b86cbaa6a992d5529f459a44fee58c733255e86">index</a>++];</div>
<div class="line"><a id="l01746" name="l01746"></a><span class="lineno"> 1746</span>            <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#afd8f9880a251b532bf619b3ea93aff5f">lines</a>.<a class="code hl_variable" href="structcanvas__ity_1_1line__path.html#a27efd4b0dec6d85e4ba861c34bacdbf4">points</a>.push_back(point_1);</div>
<div class="line"><a id="l01747" name="l01747"></a><span class="lineno"> 1747</span>            <span class="keywordflow">for</span> (; <a class="code hl_enumvalue" href="core_8h.html#a7fc0249f0f8ba720115d2430f5b86cbaa6a992d5529f459a44fee58c733255e86">index</a> &lt; <a class="code hl_enumvalue" href="namespacecanvas__ity.html#a64892b31b00c006299d47bb71542b765ad5800f9a6ff0499528d888aafa6c0d31">ending</a>; <a class="code hl_enumvalue" href="core_8h.html#a7fc0249f0f8ba720115d2430f5b86cbaa6a992d5529f459a44fee58c733255e86">index</a> += 3)</div>
<div class="line"><a id="l01748" name="l01748"></a><span class="lineno"> 1748</span>            {</div>
<div class="line"><a id="l01749" name="l01749"></a><span class="lineno"> 1749</span>                xy control_1 = <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ae8488ab90d9a55ebf96175ff662c6ede">path</a>.<a class="code hl_variable" href="structcanvas__ity_1_1bezier__path.html#a1b9a6aa5d044117cf45d1e193c09c9c6">points</a>[<a class="code hl_enumvalue" href="core_8h.html#a7fc0249f0f8ba720115d2430f5b86cbaa6a992d5529f459a44fee58c733255e86">index</a> + 0];</div>
<div class="line"><a id="l01750" name="l01750"></a><span class="lineno"> 1750</span>                xy control_2 = <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ae8488ab90d9a55ebf96175ff662c6ede">path</a>.<a class="code hl_variable" href="structcanvas__ity_1_1bezier__path.html#a1b9a6aa5d044117cf45d1e193c09c9c6">points</a>[<a class="code hl_enumvalue" href="core_8h.html#a7fc0249f0f8ba720115d2430f5b86cbaa6a992d5529f459a44fee58c733255e86">index</a> + 1];</div>
<div class="line"><a id="l01751" name="l01751"></a><span class="lineno"> 1751</span>                xy point_2   = <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ae8488ab90d9a55ebf96175ff662c6ede">path</a>.<a class="code hl_variable" href="structcanvas__ity_1_1bezier__path.html#a1b9a6aa5d044117cf45d1e193c09c9c6">points</a>[<a class="code hl_enumvalue" href="core_8h.html#a7fc0249f0f8ba720115d2430f5b86cbaa6a992d5529f459a44fee58c733255e86">index</a> + 2];</div>
<div class="line"><a id="l01752" name="l01752"></a><span class="lineno"> 1752</span>                <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#a5959c046fdd90657075cb68e24c6e3ae">add_bezier</a>(point_1, control_1, control_2, point_2, angular);</div>
<div class="line"><a id="l01753" name="l01753"></a><span class="lineno"> 1753</span>                point_1 = point_2;</div>
<div class="line"><a id="l01754" name="l01754"></a><span class="lineno"> 1754</span>            }</div>
<div class="line"><a id="l01755" name="l01755"></a><span class="lineno"> 1755</span>            subpath_data entry = {</div>
<div class="line"><a id="l01756" name="l01756"></a><span class="lineno"> 1756</span>                <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#afd8f9880a251b532bf619b3ea93aff5f">lines</a>.<a class="code hl_variable" href="structcanvas__ity_1_1line__path.html#a27efd4b0dec6d85e4ba861c34bacdbf4">points</a>.size() - <a class="code hl_function" href="namespacedetail.html#a7c8bc5fb5ef4750d192614dd7f0cf396">first</a>,</div>
<div class="line"><a id="l01757" name="l01757"></a><span class="lineno"> 1757</span>                <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ae8488ab90d9a55ebf96175ff662c6ede">path</a>.<a class="code hl_variable" href="structcanvas__ity_1_1bezier__path.html#aa9c8932defdc8f64781d16e72fef19a3">subpaths</a>[subpath].closed};</div>
<div class="line"><a id="l01758" name="l01758"></a><span class="lineno"> 1758</span>            <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#afd8f9880a251b532bf619b3ea93aff5f">lines</a>.<a class="code hl_variable" href="structcanvas__ity_1_1line__path.html#acfec22d114fac137ae0a70af069874d8">subpaths</a>.push_back(entry);</div>
<div class="line"><a id="l01759" name="l01759"></a><span class="lineno"> 1759</span>        }</div>
<div class="line"><a id="l01760" name="l01760"></a><span class="lineno"> 1760</span>    }</div>
<div class="line"><a id="l01761" name="l01761"></a><span class="lineno"> 1761</span> </div>
<div class="line"><a id="l01762" name="l01762"></a><span class="lineno"> 1762</span>    <span class="comment">// Add a text glyph directly to the polylines.  Given a glyph index, this</span></div>
<div class="line"><a id="l01763" name="l01763"></a><span class="lineno"> 1763</span>    <span class="comment">// parses the data for that glyph directly from the TTF glyph data table and</span></div>
<div class="line"><a id="l01764" name="l01764"></a><span class="lineno"> 1764</span>    <span class="comment">// immediately tessellates it to a set of a polyline subpaths which it adds</span></div>
<div class="line"><a id="l01765" name="l01765"></a><span class="lineno"> 1765</span>    <span class="comment">// to any subpaths already present.  It uses the current transform matrix to</span></div>
<div class="line"><a id="l01766" name="l01766"></a><span class="lineno"> 1766</span>    <span class="comment">// transform from the glyph&#39;s vertices in font units to the proper size and</span></div>
<div class="line"><a id="l01767" name="l01767"></a><span class="lineno"> 1767</span>    <span class="comment">// position on the canvas.</span></div>
<div class="line"><a id="l01768" name="l01768"></a><span class="lineno"> 1768</span>    <span class="comment">//</span></div>
<div class="line"><a id="l01769" name="l01769"></a><span class="lineno"> 1769</span>    <span class="keywordtype">void</span> <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#a76f919fb3dfead1b60ae57d578b649a2">canvas::add_glyph</a>(</div>
<div class="line"><a id="l01770" name="l01770"></a><span class="lineno"> 1770</span>        <span class="keywordtype">int</span>   glyph,</div>
<div class="line"><a id="l01771" name="l01771"></a><span class="lineno"> 1771</span>        <span class="keywordtype">float</span> angular)</div>
<div class="line"><a id="l01772" name="l01772"></a><span class="lineno"> 1772</span>    {</div>
<div class="line"><a id="l01773" name="l01773"></a><span class="lineno"> 1773</span>        <span class="keywordtype">int</span> loc_format = unsigned_16(<a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ae1aa377c064c039eb6c3bac8f6d2fb1b">face</a>.<a class="code hl_variable" href="structcanvas__ity_1_1font__face.html#a3a90e69c33234ccde6923be3056750ec">data</a>, <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ae1aa377c064c039eb6c3bac8f6d2fb1b">face</a>.<a class="code hl_variable" href="structcanvas__ity_1_1font__face.html#acfdadcc7998b631ce831be49b7cc22d9">head</a> + 50);</div>
<div class="line"><a id="l01774" name="l01774"></a><span class="lineno"> 1774</span>        <span class="keywordtype">int</span> <a class="code hl_define" href="css__properties_8cpp.html#a5dfbcc916693656dd092ddc41ab25747">offset</a>     = <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ae1aa377c064c039eb6c3bac8f6d2fb1b">face</a>.<a class="code hl_variable" href="structcanvas__ity_1_1font__face.html#ac8800d40f09123ed5287bbf390a49971">glyf</a> + (loc_format ? signed_32(<a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ae1aa377c064c039eb6c3bac8f6d2fb1b">face</a>.<a class="code hl_variable" href="structcanvas__ity_1_1font__face.html#a3a90e69c33234ccde6923be3056750ec">data</a>, <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ae1aa377c064c039eb6c3bac8f6d2fb1b">face</a>.<a class="code hl_variable" href="structcanvas__ity_1_1font__face.html#a62ca6aac39a43f0e1f8794e1feb63321">loca</a> + glyph * 4) : unsigned_16(<a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ae1aa377c064c039eb6c3bac8f6d2fb1b">face</a>.<a class="code hl_struct" href="structdata.html">data</a>, <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ae1aa377c064c039eb6c3bac8f6d2fb1b">face</a>.loca + glyph * 2) * 2);</div>
<div class="line"><a id="l01775" name="l01775"></a><span class="lineno"> 1775</span>        <span class="keywordtype">int</span> next       = <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ae1aa377c064c039eb6c3bac8f6d2fb1b">face</a>.<a class="code hl_variable" href="structcanvas__ity_1_1font__face.html#ac8800d40f09123ed5287bbf390a49971">glyf</a> + (loc_format ? signed_32(<a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ae1aa377c064c039eb6c3bac8f6d2fb1b">face</a>.<a class="code hl_variable" href="structcanvas__ity_1_1font__face.html#a3a90e69c33234ccde6923be3056750ec">data</a>, <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ae1aa377c064c039eb6c3bac8f6d2fb1b">face</a>.<a class="code hl_variable" href="structcanvas__ity_1_1font__face.html#a62ca6aac39a43f0e1f8794e1feb63321">loca</a> + glyph * 4 + 4) : unsigned_16(<a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ae1aa377c064c039eb6c3bac8f6d2fb1b">face</a>.<a class="code hl_struct" href="structdata.html">data</a>, <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ae1aa377c064c039eb6c3bac8f6d2fb1b">face</a>.loca + glyph * 2 + 2) * 2);</div>
<div class="line"><a id="l01776" name="l01776"></a><span class="lineno"> 1776</span>        <span class="keywordflow">if</span> (<a class="code hl_define" href="css__properties_8cpp.html#a5dfbcc916693656dd092ddc41ab25747">offset</a> == next)</div>
<div class="line"><a id="l01777" name="l01777"></a><span class="lineno"> 1777</span>            <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l01778" name="l01778"></a><span class="lineno"> 1778</span>        <span class="keywordtype">int</span> contours = signed_16(<a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ae1aa377c064c039eb6c3bac8f6d2fb1b">face</a>.<a class="code hl_variable" href="structcanvas__ity_1_1font__face.html#a3a90e69c33234ccde6923be3056750ec">data</a>, <a class="code hl_define" href="css__properties_8cpp.html#a5dfbcc916693656dd092ddc41ab25747">offset</a>);</div>
<div class="line"><a id="l01779" name="l01779"></a><span class="lineno"> 1779</span>        <span class="keywordflow">if</span> (contours &lt; 0)</div>
<div class="line"><a id="l01780" name="l01780"></a><span class="lineno"> 1780</span>        {</div>
<div class="line"><a id="l01781" name="l01781"></a><span class="lineno"> 1781</span>            <a class="code hl_define" href="css__properties_8cpp.html#a5dfbcc916693656dd092ddc41ab25747">offset</a> += 10;</div>
<div class="line"><a id="l01782" name="l01782"></a><span class="lineno"> 1782</span>            <span class="keywordflow">for</span> (;;)</div>
<div class="line"><a id="l01783" name="l01783"></a><span class="lineno"> 1783</span>            {</div>
<div class="line"><a id="l01784" name="l01784"></a><span class="lineno"> 1784</span>                <span class="keywordtype">int</span> flags     = unsigned_16(<a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ae1aa377c064c039eb6c3bac8f6d2fb1b">face</a>.<a class="code hl_variable" href="structcanvas__ity_1_1font__face.html#a3a90e69c33234ccde6923be3056750ec">data</a>, <a class="code hl_define" href="css__properties_8cpp.html#a5dfbcc916693656dd092ddc41ab25747">offset</a>);</div>
<div class="line"><a id="l01785" name="l01785"></a><span class="lineno"> 1785</span>                <span class="keywordtype">int</span> component = unsigned_16(<a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ae1aa377c064c039eb6c3bac8f6d2fb1b">face</a>.<a class="code hl_variable" href="structcanvas__ity_1_1font__face.html#a3a90e69c33234ccde6923be3056750ec">data</a>, <a class="code hl_define" href="css__properties_8cpp.html#a5dfbcc916693656dd092ddc41ab25747">offset</a> + 2);</div>
<div class="line"><a id="l01786" name="l01786"></a><span class="lineno"> 1786</span>                <span class="keywordflow">if</span> (!(flags &amp; 2))</div>
<div class="line"><a id="l01787" name="l01787"></a><span class="lineno"> 1787</span>                    <span class="keywordflow">return</span>; <span class="comment">// Matching points are not supported</span></div>
<div class="line"><a id="l01788" name="l01788"></a><span class="lineno"> 1788</span>                <span class="keywordtype">float</span> e = <span class="keyword">static_cast&lt;</span><span class="keywordtype">float</span><span class="keyword">&gt;</span>(flags &amp; 1 ? signed_16(<a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ae1aa377c064c039eb6c3bac8f6d2fb1b">face</a>.<a class="code hl_variable" href="structcanvas__ity_1_1font__face.html#a3a90e69c33234ccde6923be3056750ec">data</a>, <a class="code hl_define" href="css__properties_8cpp.html#a5dfbcc916693656dd092ddc41ab25747">offset</a> + 4) : signed_8(<a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ae1aa377c064c039eb6c3bac8f6d2fb1b">face</a>.<a class="code hl_struct" href="structdata.html">data</a>, <a class="code hl_define" href="css__properties_8cpp.html#a5dfbcc916693656dd092ddc41ab25747">offset</a> + 4));</div>
<div class="line"><a id="l01789" name="l01789"></a><span class="lineno"> 1789</span>                <span class="keywordtype">float</span> f = <span class="keyword">static_cast&lt;</span><span class="keywordtype">float</span><span class="keyword">&gt;</span>(flags &amp; 1 ? signed_16(<a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ae1aa377c064c039eb6c3bac8f6d2fb1b">face</a>.<a class="code hl_variable" href="structcanvas__ity_1_1font__face.html#a3a90e69c33234ccde6923be3056750ec">data</a>, <a class="code hl_define" href="css__properties_8cpp.html#a5dfbcc916693656dd092ddc41ab25747">offset</a> + 6) : signed_8(<a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ae1aa377c064c039eb6c3bac8f6d2fb1b">face</a>.<a class="code hl_struct" href="structdata.html">data</a>, <a class="code hl_define" href="css__properties_8cpp.html#a5dfbcc916693656dd092ddc41ab25747">offset</a> + 5));</div>
<div class="line"><a id="l01790" name="l01790"></a><span class="lineno"> 1790</span>                <a class="code hl_define" href="css__properties_8cpp.html#a5dfbcc916693656dd092ddc41ab25747">offset</a> += flags &amp; 1 ? 8 : 6;</div>
<div class="line"><a id="l01791" name="l01791"></a><span class="lineno"> 1791</span>                <span class="keywordtype">float</span> <a class="code hl_variable" href="tag__strings_8h.html#a4124bc0a9335c27f086f24ba207a4912">a</a> = flags &amp; 200 ? <span class="keyword">static_cast&lt;</span><span class="keywordtype">float</span><span class="keyword">&gt;</span>(</div>
<div class="line"><a id="l01792" name="l01792"></a><span class="lineno"> 1792</span>                                            signed_16(<a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ae1aa377c064c039eb6c3bac8f6d2fb1b">face</a>.<a class="code hl_variable" href="structcanvas__ity_1_1font__face.html#a3a90e69c33234ccde6923be3056750ec">data</a>, <a class="code hl_define" href="css__properties_8cpp.html#a5dfbcc916693656dd092ddc41ab25747">offset</a>)) /</div>
<div class="line"><a id="l01793" name="l01793"></a><span class="lineno"> 1793</span>                                            16384.0f</div>
<div class="line"><a id="l01794" name="l01794"></a><span class="lineno"> 1794</span>                                      : 1.0f;</div>
<div class="line"><a id="l01795" name="l01795"></a><span class="lineno"> 1795</span>                <span class="keywordtype">float</span> <a class="code hl_variable" href="tag__strings_8h.html#a21ad0bd836b90d08f4cf640b4c298e7c">b</a> = flags &amp; 128 ? <span class="keyword">static_cast&lt;</span><span class="keywordtype">float</span><span class="keyword">&gt;</span>(</div>
<div class="line"><a id="l01796" name="l01796"></a><span class="lineno"> 1796</span>                                            signed_16(<a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ae1aa377c064c039eb6c3bac8f6d2fb1b">face</a>.<a class="code hl_variable" href="structcanvas__ity_1_1font__face.html#a3a90e69c33234ccde6923be3056750ec">data</a>, <a class="code hl_define" href="css__properties_8cpp.html#a5dfbcc916693656dd092ddc41ab25747">offset</a> + 2)) /</div>
<div class="line"><a id="l01797" name="l01797"></a><span class="lineno"> 1797</span>                                            16384.0f</div>
<div class="line"><a id="l01798" name="l01798"></a><span class="lineno"> 1798</span>                                      : 0.0f;</div>
<div class="line"><a id="l01799" name="l01799"></a><span class="lineno"> 1799</span>                <span class="keywordtype">float</span> c = flags &amp; 128 ? <span class="keyword">static_cast&lt;</span><span class="keywordtype">float</span><span class="keyword">&gt;</span>(</div>
<div class="line"><a id="l01800" name="l01800"></a><span class="lineno"> 1800</span>                                            signed_16(<a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ae1aa377c064c039eb6c3bac8f6d2fb1b">face</a>.<a class="code hl_variable" href="structcanvas__ity_1_1font__face.html#a3a90e69c33234ccde6923be3056750ec">data</a>, <a class="code hl_define" href="css__properties_8cpp.html#a5dfbcc916693656dd092ddc41ab25747">offset</a> + 4)) /</div>
<div class="line"><a id="l01801" name="l01801"></a><span class="lineno"> 1801</span>                                            16384.0f</div>
<div class="line"><a id="l01802" name="l01802"></a><span class="lineno"> 1802</span>                                      : 0.0f;</div>
<div class="line"><a id="l01803" name="l01803"></a><span class="lineno"> 1803</span>                <span class="keywordtype">float</span> d = flags &amp; 8 ? <a class="code hl_variable" href="tag__strings_8h.html#a4124bc0a9335c27f086f24ba207a4912">a</a> : flags &amp; 64 ? <span class="keyword">static_cast&lt;</span><span class="keywordtype">float</span><span class="keyword">&gt;</span>(signed_16(<a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ae1aa377c064c039eb6c3bac8f6d2fb1b">face</a>.<a class="code hl_variable" href="structcanvas__ity_1_1font__face.html#a3a90e69c33234ccde6923be3056750ec">data</a>, <a class="code hl_define" href="css__properties_8cpp.html#a5dfbcc916693656dd092ddc41ab25747">offset</a> + 2)) / 16384.0f</div>
<div class="line"><a id="l01804" name="l01804"></a><span class="lineno"> 1804</span>                                      : flags &amp; 128  ? static_cast&lt;float&gt;(signed_16(<a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ae1aa377c064c039eb6c3bac8f6d2fb1b">face</a>.<a class="code hl_struct" href="structdata.html">data</a>, <a class="code hl_define" href="css__properties_8cpp.html#a5dfbcc916693656dd092ddc41ab25747">offset</a> + 6)) / 16384.0f</div>
<div class="line"><a id="l01805" name="l01805"></a><span class="lineno"> 1805</span>                                                     : 1.0f;</div>
<div class="line"><a id="l01806" name="l01806"></a><span class="lineno"> 1806</span>                <a class="code hl_define" href="css__properties_8cpp.html#a5dfbcc916693656dd092ddc41ab25747">offset</a> += flags &amp; 8 ? 2 : flags &amp; 64 ? 4</div>
<div class="line"><a id="l01807" name="l01807"></a><span class="lineno"> 1807</span>                                      : flags &amp; 128  ? 8</div>
<div class="line"><a id="l01808" name="l01808"></a><span class="lineno"> 1808</span>                                                     : 0;</div>
<div class="line"><a id="l01809" name="l01809"></a><span class="lineno"> 1809</span>                affine_matrix saved_forward = <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ac5da3224f86f284b4ac7efbde3942e27">forward</a>;</div>
<div class="line"><a id="l01810" name="l01810"></a><span class="lineno"> 1810</span>                affine_matrix saved_inverse = <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ade344370cc819a35ed35233e02f09859">inverse</a>;</div>
<div class="line"><a id="l01811" name="l01811"></a><span class="lineno"> 1811</span>                <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#a9ef5f65d2eca3518b5ea22eb76badce1">transform</a>(<a class="code hl_variable" href="tag__strings_8h.html#a4124bc0a9335c27f086f24ba207a4912">a</a>, <a class="code hl_variable" href="tag__strings_8h.html#a21ad0bd836b90d08f4cf640b4c298e7c">b</a>, c, d, e, f);</div>
<div class="line"><a id="l01812" name="l01812"></a><span class="lineno"> 1812</span>                <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#a76f919fb3dfead1b60ae57d578b649a2">add_glyph</a>(component, angular);</div>
<div class="line"><a id="l01813" name="l01813"></a><span class="lineno"> 1813</span>                <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ac5da3224f86f284b4ac7efbde3942e27">forward</a> = saved_forward;</div>
<div class="line"><a id="l01814" name="l01814"></a><span class="lineno"> 1814</span>                <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ade344370cc819a35ed35233e02f09859">inverse</a> = saved_inverse;</div>
<div class="line"><a id="l01815" name="l01815"></a><span class="lineno"> 1815</span>                <span class="keywordflow">if</span> (!(flags &amp; 32))</div>
<div class="line"><a id="l01816" name="l01816"></a><span class="lineno"> 1816</span>                    <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l01817" name="l01817"></a><span class="lineno"> 1817</span>            }</div>
<div class="line"><a id="l01818" name="l01818"></a><span class="lineno"> 1818</span>        }</div>
<div class="line"><a id="l01819" name="l01819"></a><span class="lineno"> 1819</span>        <span class="keywordtype">int</span> hmetrics          = unsigned_16(<a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ae1aa377c064c039eb6c3bac8f6d2fb1b">face</a>.<a class="code hl_variable" href="structcanvas__ity_1_1font__face.html#a3a90e69c33234ccde6923be3056750ec">data</a>, <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ae1aa377c064c039eb6c3bac8f6d2fb1b">face</a>.<a class="code hl_variable" href="structcanvas__ity_1_1font__face.html#a4e4fb482b9b9b7eec91997680b30cd25">hhea</a> + 34);</div>
<div class="line"><a id="l01820" name="l01820"></a><span class="lineno"> 1820</span>        <span class="keywordtype">int</span> left_side_bearing = glyph &lt; hmetrics ? signed_16(<a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ae1aa377c064c039eb6c3bac8f6d2fb1b">face</a>.<a class="code hl_variable" href="structcanvas__ity_1_1font__face.html#a3a90e69c33234ccde6923be3056750ec">data</a>, <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ae1aa377c064c039eb6c3bac8f6d2fb1b">face</a>.<a class="code hl_variable" href="structcanvas__ity_1_1font__face.html#aae90819c2cb1ab8241bfee97d14602d0">hmtx</a> + glyph * 4 + 2) : signed_16(<a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ae1aa377c064c039eb6c3bac8f6d2fb1b">face</a>.<a class="code hl_struct" href="structdata.html">data</a>, <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ae1aa377c064c039eb6c3bac8f6d2fb1b">face</a>.hmtx + hmetrics * 2 + glyph * 2);</div>
<div class="line"><a id="l01821" name="l01821"></a><span class="lineno"> 1821</span>        <span class="keywordtype">int</span> x_min             = signed_16(<a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ae1aa377c064c039eb6c3bac8f6d2fb1b">face</a>.<a class="code hl_variable" href="structcanvas__ity_1_1font__face.html#a3a90e69c33234ccde6923be3056750ec">data</a>, <a class="code hl_define" href="css__properties_8cpp.html#a5dfbcc916693656dd092ddc41ab25747">offset</a> + 2);</div>
<div class="line"><a id="l01822" name="l01822"></a><span class="lineno"> 1822</span>        <span class="keywordtype">int</span> points            = unsigned_16(<a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ae1aa377c064c039eb6c3bac8f6d2fb1b">face</a>.<a class="code hl_variable" href="structcanvas__ity_1_1font__face.html#a3a90e69c33234ccde6923be3056750ec">data</a>, <a class="code hl_define" href="css__properties_8cpp.html#a5dfbcc916693656dd092ddc41ab25747">offset</a> + 8 + contours * 2) + 1;</div>
<div class="line"><a id="l01823" name="l01823"></a><span class="lineno"> 1823</span>        <span class="keywordtype">int</span> instructions      = unsigned_16(<a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ae1aa377c064c039eb6c3bac8f6d2fb1b">face</a>.<a class="code hl_variable" href="structcanvas__ity_1_1font__face.html#a3a90e69c33234ccde6923be3056750ec">data</a>, <a class="code hl_define" href="css__properties_8cpp.html#a5dfbcc916693656dd092ddc41ab25747">offset</a> + 10 + contours * 2);</div>
<div class="line"><a id="l01824" name="l01824"></a><span class="lineno"> 1824</span>        <span class="keywordtype">int</span> flags_array       = <a class="code hl_define" href="css__properties_8cpp.html#a5dfbcc916693656dd092ddc41ab25747">offset</a> + 12 + contours * 2 + instructions;</div>
<div class="line"><a id="l01825" name="l01825"></a><span class="lineno"> 1825</span>        <span class="keywordtype">int</span> flags_size        = 0;</div>
<div class="line"><a id="l01826" name="l01826"></a><span class="lineno"> 1826</span>        <span class="keywordtype">int</span> x_size            = 0;</div>
<div class="line"><a id="l01827" name="l01827"></a><span class="lineno"> 1827</span>        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code hl_enumvalue" href="core_8h.html#a7fc0249f0f8ba720115d2430f5b86cbaa6a992d5529f459a44fee58c733255e86">index</a> = 0; <a class="code hl_enumvalue" href="core_8h.html#a7fc0249f0f8ba720115d2430f5b86cbaa6a992d5529f459a44fee58c733255e86">index</a> &lt; points;)</div>
<div class="line"><a id="l01828" name="l01828"></a><span class="lineno"> 1828</span>        {</div>
<div class="line"><a id="l01829" name="l01829"></a><span class="lineno"> 1829</span>            <span class="keywordtype">int</span> flags    = unsigned_8(<a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ae1aa377c064c039eb6c3bac8f6d2fb1b">face</a>.<a class="code hl_variable" href="structcanvas__ity_1_1font__face.html#a3a90e69c33234ccde6923be3056750ec">data</a>, flags_array + flags_size++);</div>
<div class="line"><a id="l01830" name="l01830"></a><span class="lineno"> 1830</span>            <span class="keywordtype">int</span> repeated = flags &amp; 8 ? unsigned_8(<a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ae1aa377c064c039eb6c3bac8f6d2fb1b">face</a>.<a class="code hl_variable" href="structcanvas__ity_1_1font__face.html#a3a90e69c33234ccde6923be3056750ec">data</a>, flags_array + flags_size++) + 1 : 1;</div>
<div class="line"><a id="l01831" name="l01831"></a><span class="lineno"> 1831</span>            x_size += repeated * (flags &amp; 2 ? 1 : flags &amp; 16 ? 0</div>
<div class="line"><a id="l01832" name="l01832"></a><span class="lineno"> 1832</span>                                                             : 2);</div>
<div class="line"><a id="l01833" name="l01833"></a><span class="lineno"> 1833</span>            <a class="code hl_enumvalue" href="core_8h.html#a7fc0249f0f8ba720115d2430f5b86cbaa6a992d5529f459a44fee58c733255e86">index</a> += repeated;</div>
<div class="line"><a id="l01834" name="l01834"></a><span class="lineno"> 1834</span>        }</div>
<div class="line"><a id="l01835" name="l01835"></a><span class="lineno"> 1835</span>        <span class="keywordtype">int</span> x_array  = flags_array + flags_size;</div>
<div class="line"><a id="l01836" name="l01836"></a><span class="lineno"> 1836</span>        <span class="keywordtype">int</span> y_array  = x_array + x_size;</div>
<div class="line"><a id="l01837" name="l01837"></a><span class="lineno"> 1837</span>        <span class="keywordtype">int</span> x        = left_side_bearing - x_min;</div>
<div class="line"><a id="l01838" name="l01838"></a><span class="lineno"> 1838</span>        <span class="keywordtype">int</span> y        = 0;</div>
<div class="line"><a id="l01839" name="l01839"></a><span class="lineno"> 1839</span>        <span class="keywordtype">int</span> flags    = 0;</div>
<div class="line"><a id="l01840" name="l01840"></a><span class="lineno"> 1840</span>        <span class="keywordtype">int</span> repeated = 0;</div>
<div class="line"><a id="l01841" name="l01841"></a><span class="lineno"> 1841</span>        <span class="keywordtype">int</span> <a class="code hl_enumvalue" href="core_8h.html#a7fc0249f0f8ba720115d2430f5b86cbaa6a992d5529f459a44fee58c733255e86">index</a>    = 0;</div>
<div class="line"><a id="l01842" name="l01842"></a><span class="lineno"> 1842</span>        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> contour = 0; contour &lt; contours; ++contour)</div>
<div class="line"><a id="l01843" name="l01843"></a><span class="lineno"> 1843</span>        {</div>
<div class="line"><a id="l01844" name="l01844"></a><span class="lineno"> 1844</span>            <span class="keywordtype">int</span>    beginning   = <a class="code hl_enumvalue" href="core_8h.html#a7fc0249f0f8ba720115d2430f5b86cbaa6a992d5529f459a44fee58c733255e86">index</a>;</div>
<div class="line"><a id="l01845" name="l01845"></a><span class="lineno"> 1845</span>            <span class="keywordtype">int</span>    <a class="code hl_enumvalue" href="namespacecanvas__ity.html#a64892b31b00c006299d47bb71542b765ad5800f9a6ff0499528d888aafa6c0d31">ending</a>      = unsigned_16(<a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ae1aa377c064c039eb6c3bac8f6d2fb1b">face</a>.<a class="code hl_variable" href="structcanvas__ity_1_1font__face.html#a3a90e69c33234ccde6923be3056750ec">data</a>, <a class="code hl_define" href="css__properties_8cpp.html#a5dfbcc916693656dd092ddc41ab25747">offset</a> + 10 + contour * 2);</div>
<div class="line"><a id="l01846" name="l01846"></a><span class="lineno"> 1846</span>            xy     begin_point = xy(0.0f, 0.0f);</div>
<div class="line"><a id="l01847" name="l01847"></a><span class="lineno"> 1847</span>            <span class="keywordtype">bool</span>   begin_on    = <span class="keyword">false</span>;</div>
<div class="line"><a id="l01848" name="l01848"></a><span class="lineno"> 1848</span>            xy     end_point   = xy(0.0f, 0.0f);</div>
<div class="line"><a id="l01849" name="l01849"></a><span class="lineno"> 1849</span>            <span class="keywordtype">bool</span>   end_on      = <span class="keyword">false</span>;</div>
<div class="line"><a id="l01850" name="l01850"></a><span class="lineno"> 1850</span>            <span class="keywordtype">size_t</span> <a class="code hl_function" href="namespacedetail.html#a7c8bc5fb5ef4750d192614dd7f0cf396">first</a>       = <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#afd8f9880a251b532bf619b3ea93aff5f">lines</a>.<a class="code hl_variable" href="structcanvas__ity_1_1line__path.html#a27efd4b0dec6d85e4ba861c34bacdbf4">points</a>.size();</div>
<div class="line"><a id="l01851" name="l01851"></a><span class="lineno"> 1851</span>            <span class="keywordflow">for</span> (; <a class="code hl_enumvalue" href="core_8h.html#a7fc0249f0f8ba720115d2430f5b86cbaa6a992d5529f459a44fee58c733255e86">index</a> &lt;= <a class="code hl_enumvalue" href="namespacecanvas__ity.html#a64892b31b00c006299d47bb71542b765ad5800f9a6ff0499528d888aafa6c0d31">ending</a>; ++<a class="code hl_enumvalue" href="core_8h.html#a7fc0249f0f8ba720115d2430f5b86cbaa6a992d5529f459a44fee58c733255e86">index</a>)</div>
<div class="line"><a id="l01852" name="l01852"></a><span class="lineno"> 1852</span>            {</div>
<div class="line"><a id="l01853" name="l01853"></a><span class="lineno"> 1853</span>                <span class="keywordflow">if</span> (repeated)</div>
<div class="line"><a id="l01854" name="l01854"></a><span class="lineno"> 1854</span>                    --repeated;</div>
<div class="line"><a id="l01855" name="l01855"></a><span class="lineno"> 1855</span>                <span class="keywordflow">else</span></div>
<div class="line"><a id="l01856" name="l01856"></a><span class="lineno"> 1856</span>                {</div>
<div class="line"><a id="l01857" name="l01857"></a><span class="lineno"> 1857</span>                    flags = unsigned_8(<a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ae1aa377c064c039eb6c3bac8f6d2fb1b">face</a>.<a class="code hl_variable" href="structcanvas__ity_1_1font__face.html#a3a90e69c33234ccde6923be3056750ec">data</a>, flags_array++);</div>
<div class="line"><a id="l01858" name="l01858"></a><span class="lineno"> 1858</span>                    <span class="keywordflow">if</span> (flags &amp; 8)</div>
<div class="line"><a id="l01859" name="l01859"></a><span class="lineno"> 1859</span>                        repeated = unsigned_8(<a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ae1aa377c064c039eb6c3bac8f6d2fb1b">face</a>.<a class="code hl_variable" href="structcanvas__ity_1_1font__face.html#a3a90e69c33234ccde6923be3056750ec">data</a>, flags_array++);</div>
<div class="line"><a id="l01860" name="l01860"></a><span class="lineno"> 1860</span>                }</div>
<div class="line"><a id="l01861" name="l01861"></a><span class="lineno"> 1861</span>                <span class="keywordflow">if</span> (flags &amp; 2)</div>
<div class="line"><a id="l01862" name="l01862"></a><span class="lineno"> 1862</span>                    x += (unsigned_8(<a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ae1aa377c064c039eb6c3bac8f6d2fb1b">face</a>.<a class="code hl_variable" href="structcanvas__ity_1_1font__face.html#a3a90e69c33234ccde6923be3056750ec">data</a>, x_array) *</div>
<div class="line"><a id="l01863" name="l01863"></a><span class="lineno"> 1863</span>                          (flags &amp; 16 ? 1 : -1));</div>
<div class="line"><a id="l01864" name="l01864"></a><span class="lineno"> 1864</span>                <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!(flags &amp; 16))</div>
<div class="line"><a id="l01865" name="l01865"></a><span class="lineno"> 1865</span>                    x += signed_16(<a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ae1aa377c064c039eb6c3bac8f6d2fb1b">face</a>.<a class="code hl_variable" href="structcanvas__ity_1_1font__face.html#a3a90e69c33234ccde6923be3056750ec">data</a>, x_array);</div>
<div class="line"><a id="l01866" name="l01866"></a><span class="lineno"> 1866</span>                <span class="keywordflow">if</span> (flags &amp; 4)</div>
<div class="line"><a id="l01867" name="l01867"></a><span class="lineno"> 1867</span>                    y += (unsigned_8(<a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ae1aa377c064c039eb6c3bac8f6d2fb1b">face</a>.<a class="code hl_variable" href="structcanvas__ity_1_1font__face.html#a3a90e69c33234ccde6923be3056750ec">data</a>, y_array) *</div>
<div class="line"><a id="l01868" name="l01868"></a><span class="lineno"> 1868</span>                          (flags &amp; 32 ? 1 : -1));</div>
<div class="line"><a id="l01869" name="l01869"></a><span class="lineno"> 1869</span>                <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!(flags &amp; 32))</div>
<div class="line"><a id="l01870" name="l01870"></a><span class="lineno"> 1870</span>                    y += signed_16(<a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ae1aa377c064c039eb6c3bac8f6d2fb1b">face</a>.<a class="code hl_variable" href="structcanvas__ity_1_1font__face.html#a3a90e69c33234ccde6923be3056750ec">data</a>, y_array);</div>
<div class="line"><a id="l01871" name="l01871"></a><span class="lineno"> 1871</span>                x_array += flags &amp; 2 ? 1 : flags &amp; 16 ? 0</div>
<div class="line"><a id="l01872" name="l01872"></a><span class="lineno"> 1872</span>                                                      : 2;</div>
<div class="line"><a id="l01873" name="l01873"></a><span class="lineno"> 1873</span>                y_array += flags &amp; 4 ? 1 : flags &amp; 32 ? 0</div>
<div class="line"><a id="l01874" name="l01874"></a><span class="lineno"> 1874</span>                                                      : 2;</div>
<div class="line"><a id="l01875" name="l01875"></a><span class="lineno"> 1875</span>                xy  point    = <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ac5da3224f86f284b4ac7efbde3942e27">forward</a> * xy(<span class="keyword">static_cast&lt;</span><span class="keywordtype">float</span><span class="keyword">&gt;</span>(x),</div>
<div class="line"><a id="l01876" name="l01876"></a><span class="lineno"> 1876</span>                                        <span class="keyword">static_cast&lt;</span><span class="keywordtype">float</span><span class="keyword">&gt;</span>(y));</div>
<div class="line"><a id="l01877" name="l01877"></a><span class="lineno"> 1877</span>                <span class="keywordtype">int</span> on_curve = flags &amp; 1;</div>
<div class="line"><a id="l01878" name="l01878"></a><span class="lineno"> 1878</span>                <span class="keywordflow">if</span> (<a class="code hl_enumvalue" href="core_8h.html#a7fc0249f0f8ba720115d2430f5b86cbaa6a992d5529f459a44fee58c733255e86">index</a> == beginning)</div>
<div class="line"><a id="l01879" name="l01879"></a><span class="lineno"> 1879</span>                {</div>
<div class="line"><a id="l01880" name="l01880"></a><span class="lineno"> 1880</span>                    begin_point = point;</div>
<div class="line"><a id="l01881" name="l01881"></a><span class="lineno"> 1881</span>                    begin_on    = on_curve;</div>
<div class="line"><a id="l01882" name="l01882"></a><span class="lineno"> 1882</span>                    <span class="keywordflow">if</span> (on_curve)</div>
<div class="line"><a id="l01883" name="l01883"></a><span class="lineno"> 1883</span>                        <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#afd8f9880a251b532bf619b3ea93aff5f">lines</a>.<a class="code hl_variable" href="structcanvas__ity_1_1line__path.html#a27efd4b0dec6d85e4ba861c34bacdbf4">points</a>.push_back(point);</div>
<div class="line"><a id="l01884" name="l01884"></a><span class="lineno"> 1884</span>                }</div>
<div class="line"><a id="l01885" name="l01885"></a><span class="lineno"> 1885</span>                <span class="keywordflow">else</span></div>
<div class="line"><a id="l01886" name="l01886"></a><span class="lineno"> 1886</span>                {</div>
<div class="line"><a id="l01887" name="l01887"></a><span class="lineno"> 1887</span>                    xy point_2 = on_curve ? point : lerp(end_point, point, 0.5f);</div>
<div class="line"><a id="l01888" name="l01888"></a><span class="lineno"> 1888</span>                    <span class="keywordflow">if</span> (<a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#afd8f9880a251b532bf619b3ea93aff5f">lines</a>.<a class="code hl_variable" href="structcanvas__ity_1_1line__path.html#a27efd4b0dec6d85e4ba861c34bacdbf4">points</a>.size() == first ||</div>
<div class="line"><a id="l01889" name="l01889"></a><span class="lineno"> 1889</span>                        (end_on &amp;&amp; on_curve))</div>
<div class="line"><a id="l01890" name="l01890"></a><span class="lineno"> 1890</span>                        <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#afd8f9880a251b532bf619b3ea93aff5f">lines</a>.<a class="code hl_variable" href="structcanvas__ity_1_1line__path.html#a27efd4b0dec6d85e4ba861c34bacdbf4">points</a>.push_back(point_2);</div>
<div class="line"><a id="l01891" name="l01891"></a><span class="lineno"> 1891</span>                    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!end_on || on_curve)</div>
<div class="line"><a id="l01892" name="l01892"></a><span class="lineno"> 1892</span>                    {</div>
<div class="line"><a id="l01893" name="l01893"></a><span class="lineno"> 1893</span>                        xy point_1   = <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#afd8f9880a251b532bf619b3ea93aff5f">lines</a>.<a class="code hl_variable" href="structcanvas__ity_1_1line__path.html#a27efd4b0dec6d85e4ba861c34bacdbf4">points</a>.back();</div>
<div class="line"><a id="l01894" name="l01894"></a><span class="lineno"> 1894</span>                        xy control_1 = lerp(point_1, end_point, 2.0f / 3.0f);</div>
<div class="line"><a id="l01895" name="l01895"></a><span class="lineno"> 1895</span>                        xy control_2 = lerp(point_2, end_point, 2.0f / 3.0f);</div>
<div class="line"><a id="l01896" name="l01896"></a><span class="lineno"> 1896</span>                        <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#a5959c046fdd90657075cb68e24c6e3ae">add_bezier</a>(point_1, control_1, control_2, point_2,</div>
<div class="line"><a id="l01897" name="l01897"></a><span class="lineno"> 1897</span>                                   angular);</div>
<div class="line"><a id="l01898" name="l01898"></a><span class="lineno"> 1898</span>                    }</div>
<div class="line"><a id="l01899" name="l01899"></a><span class="lineno"> 1899</span>                }</div>
<div class="line"><a id="l01900" name="l01900"></a><span class="lineno"> 1900</span>                end_point = point;</div>
<div class="line"><a id="l01901" name="l01901"></a><span class="lineno"> 1901</span>                end_on    = on_curve;</div>
<div class="line"><a id="l01902" name="l01902"></a><span class="lineno"> 1902</span>            }</div>
<div class="line"><a id="l01903" name="l01903"></a><span class="lineno"> 1903</span>            <span class="keywordflow">if</span> (begin_on ^ end_on)</div>
<div class="line"><a id="l01904" name="l01904"></a><span class="lineno"> 1904</span>            {</div>
<div class="line"><a id="l01905" name="l01905"></a><span class="lineno"> 1905</span>                xy point_1   = <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#afd8f9880a251b532bf619b3ea93aff5f">lines</a>.<a class="code hl_variable" href="structcanvas__ity_1_1line__path.html#a27efd4b0dec6d85e4ba861c34bacdbf4">points</a>.back();</div>
<div class="line"><a id="l01906" name="l01906"></a><span class="lineno"> 1906</span>                xy point_2   = <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#afd8f9880a251b532bf619b3ea93aff5f">lines</a>.<a class="code hl_variable" href="structcanvas__ity_1_1line__path.html#a27efd4b0dec6d85e4ba861c34bacdbf4">points</a>[<a class="code hl_function" href="namespacedetail.html#a7c8bc5fb5ef4750d192614dd7f0cf396">first</a>];</div>
<div class="line"><a id="l01907" name="l01907"></a><span class="lineno"> 1907</span>                xy control   = end_on ? begin_point : end_point;</div>
<div class="line"><a id="l01908" name="l01908"></a><span class="lineno"> 1908</span>                xy control_1 = lerp(point_1, control, 2.0f / 3.0f);</div>
<div class="line"><a id="l01909" name="l01909"></a><span class="lineno"> 1909</span>                xy control_2 = lerp(point_2, control, 2.0f / 3.0f);</div>
<div class="line"><a id="l01910" name="l01910"></a><span class="lineno"> 1910</span>                <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#a5959c046fdd90657075cb68e24c6e3ae">add_bezier</a>(point_1, control_1, control_2, point_2, angular);</div>
<div class="line"><a id="l01911" name="l01911"></a><span class="lineno"> 1911</span>            }</div>
<div class="line"><a id="l01912" name="l01912"></a><span class="lineno"> 1912</span>            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!begin_on &amp;&amp; !end_on)</div>
<div class="line"><a id="l01913" name="l01913"></a><span class="lineno"> 1913</span>            {</div>
<div class="line"><a id="l01914" name="l01914"></a><span class="lineno"> 1914</span>                xy point_1 = <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#afd8f9880a251b532bf619b3ea93aff5f">lines</a>.<a class="code hl_variable" href="structcanvas__ity_1_1line__path.html#a27efd4b0dec6d85e4ba861c34bacdbf4">points</a>.back();</div>
<div class="line"><a id="l01915" name="l01915"></a><span class="lineno"> 1915</span>                xy split   = lerp(begin_point, end_point, 0.5f);</div>
<div class="line"><a id="l01916" name="l01916"></a><span class="lineno"> 1916</span>                xy point_2 = <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#afd8f9880a251b532bf619b3ea93aff5f">lines</a>.<a class="code hl_variable" href="structcanvas__ity_1_1line__path.html#a27efd4b0dec6d85e4ba861c34bacdbf4">points</a>[<a class="code hl_function" href="namespacedetail.html#a7c8bc5fb5ef4750d192614dd7f0cf396">first</a>];</div>
<div class="line"><a id="l01917" name="l01917"></a><span class="lineno"> 1917</span>                xy left_1  = lerp(point_1, end_point, 2.0f / 3.0f);</div>
<div class="line"><a id="l01918" name="l01918"></a><span class="lineno"> 1918</span>                xy left_2  = lerp(split, end_point, 2.0f / 3.0f);</div>
<div class="line"><a id="l01919" name="l01919"></a><span class="lineno"> 1919</span>                xy right_1 = lerp(split, begin_point, 2.0f / 3.0f);</div>
<div class="line"><a id="l01920" name="l01920"></a><span class="lineno"> 1920</span>                xy right_2 = lerp(point_2, begin_point, 2.0f / 3.0f);</div>
<div class="line"><a id="l01921" name="l01921"></a><span class="lineno"> 1921</span>                <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#a5959c046fdd90657075cb68e24c6e3ae">add_bezier</a>(point_1, left_1, left_2, split, angular);</div>
<div class="line"><a id="l01922" name="l01922"></a><span class="lineno"> 1922</span>                <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#a5959c046fdd90657075cb68e24c6e3ae">add_bezier</a>(split, right_1, right_2, point_2, angular);</div>
<div class="line"><a id="l01923" name="l01923"></a><span class="lineno"> 1923</span>            }</div>
<div class="line"><a id="l01924" name="l01924"></a><span class="lineno"> 1924</span>            <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#afd8f9880a251b532bf619b3ea93aff5f">lines</a>.<a class="code hl_variable" href="structcanvas__ity_1_1line__path.html#a27efd4b0dec6d85e4ba861c34bacdbf4">points</a>.push_back(<a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#afd8f9880a251b532bf619b3ea93aff5f">lines</a>.<a class="code hl_variable" href="structcanvas__ity_1_1line__path.html#a27efd4b0dec6d85e4ba861c34bacdbf4">points</a>[first]);</div>
<div class="line"><a id="l01925" name="l01925"></a><span class="lineno"> 1925</span>            subpath_data entry = {<a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#afd8f9880a251b532bf619b3ea93aff5f">lines</a>.<a class="code hl_variable" href="structcanvas__ity_1_1line__path.html#a27efd4b0dec6d85e4ba861c34bacdbf4">points</a>.size() - <a class="code hl_function" href="namespacedetail.html#a7c8bc5fb5ef4750d192614dd7f0cf396">first</a>, <span class="keyword">true</span>};</div>
<div class="line"><a id="l01926" name="l01926"></a><span class="lineno"> 1926</span>            <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#afd8f9880a251b532bf619b3ea93aff5f">lines</a>.<a class="code hl_variable" href="structcanvas__ity_1_1line__path.html#acfec22d114fac137ae0a70af069874d8">subpaths</a>.push_back(entry);</div>
<div class="line"><a id="l01927" name="l01927"></a><span class="lineno"> 1927</span>        }</div>
<div class="line"><a id="l01928" name="l01928"></a><span class="lineno"> 1928</span>    }</div>
<div class="line"><a id="l01929" name="l01929"></a><span class="lineno"> 1929</span> </div>
<div class="line"><a id="l01930" name="l01930"></a><span class="lineno"> 1930</span>    <span class="comment">// Decode the next codepoint from a null-terminated UTF-8 string to its glyph</span></div>
<div class="line"><a id="l01931" name="l01931"></a><span class="lineno"> 1931</span>    <span class="comment">// index within the font.  The index to the next codepoint in the string</span></div>
<div class="line"><a id="l01932" name="l01932"></a><span class="lineno"> 1932</span>    <span class="comment">// is advanced accordingly.  It checks for valid UTF-8 encoding, but not</span></div>
<div class="line"><a id="l01933" name="l01933"></a><span class="lineno"> 1933</span>    <span class="comment">// for valid unicode codepoints.  Where it finds an invalid encoding, it</span></div>
<div class="line"><a id="l01934" name="l01934"></a><span class="lineno"> 1934</span>    <span class="comment">// decodes it as the Unicode replacement character (U+FFFD) and advances to</span></div>
<div class="line"><a id="l01935" name="l01935"></a><span class="lineno"> 1935</span>    <span class="comment">// the invalid byte, per Unicode recommendation.  It also replaces low-ASCII</span></div>
<div class="line"><a id="l01936" name="l01936"></a><span class="lineno"> 1936</span>    <span class="comment">// whitespace characters with regular spaces.  After decoding the codepoint,</span></div>
<div class="line"><a id="l01937" name="l01937"></a><span class="lineno"> 1937</span>    <span class="comment">// it looks up the corresponding glyph index from the current font&#39;s character</span></div>
<div class="line"><a id="l01938" name="l01938"></a><span class="lineno"> 1938</span>    <span class="comment">// map table, returning a glyph index of 0 for the .notdef character (i.e.,</span></div>
<div class="line"><a id="l01939" name="l01939"></a><span class="lineno"> 1939</span>    <span class="comment">// &quot;tofu&quot;) if the font lacks a glyph for that codepoint.</span></div>
<div class="line"><a id="l01940" name="l01940"></a><span class="lineno"> 1940</span>    <span class="comment">//</span></div>
<div class="line"><a id="l01941" name="l01941"></a><span class="lineno"> 1941</span>    <span class="keywordtype">int</span> <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#ac677bb99b93a767bf42075a0e5969890">canvas::character_to_glyph</a>(</div>
<div class="line"><a id="l01942" name="l01942"></a><span class="lineno"> 1942</span>        <span class="keywordtype">char</span> <span class="keyword">const</span>* text,</div>
<div class="line"><a id="l01943" name="l01943"></a><span class="lineno"> 1943</span>        <span class="keywordtype">int</span>&amp;        <a class="code hl_enumvalue" href="core_8h.html#a7fc0249f0f8ba720115d2430f5b86cbaa6a992d5529f459a44fee58c733255e86">index</a>)</div>
<div class="line"><a id="l01944" name="l01944"></a><span class="lineno"> 1944</span>    {</div>
<div class="line"><a id="l01945" name="l01945"></a><span class="lineno"> 1945</span>        <span class="keywordtype">int</span>       <a class="code hl_class" href="classbytes.html">bytes</a>     = ((text[<a class="code hl_enumvalue" href="core_8h.html#a7fc0249f0f8ba720115d2430f5b86cbaa6a992d5529f459a44fee58c733255e86">index</a>] &amp; 0x80) == 0x00 ? 1 : (text[<a class="code hl_enumvalue" href="core_8h.html#a7fc0249f0f8ba720115d2430f5b86cbaa6a992d5529f459a44fee58c733255e86">index</a>] &amp; 0xe0) == 0xc0 ? 2</div>
<div class="line"><a id="l01946" name="l01946"></a><span class="lineno"> 1946</span>                                                              : (text[<a class="code hl_enumvalue" href="core_8h.html#a7fc0249f0f8ba720115d2430f5b86cbaa6a992d5529f459a44fee58c733255e86">index</a>] &amp; 0xf0) == 0xe0   ? 3</div>
<div class="line"><a id="l01947" name="l01947"></a><span class="lineno"> 1947</span>                                                              : (text[<a class="code hl_enumvalue" href="core_8h.html#a7fc0249f0f8ba720115d2430f5b86cbaa6a992d5529f459a44fee58c733255e86">index</a>] &amp; 0xf8) == 0xf0   ? 4</div>
<div class="line"><a id="l01948" name="l01948"></a><span class="lineno"> 1948</span>                                                                                               : 0);</div>
<div class="line"><a id="l01949" name="l01949"></a><span class="lineno"> 1949</span>        <span class="keywordtype">int</span> <span class="keyword">const</span> masks[]   = {0x0, 0x7f, 0x1f, 0x0f, 0x07};</div>
<div class="line"><a id="l01950" name="l01950"></a><span class="lineno"> 1950</span>        <span class="keywordtype">int</span>       codepoint = <a class="code hl_class" href="classbytes.html">bytes</a> ? text[<a class="code hl_enumvalue" href="core_8h.html#a7fc0249f0f8ba720115d2430f5b86cbaa6a992d5529f459a44fee58c733255e86">index</a>] &amp; masks[<a class="code hl_class" href="classbytes.html">bytes</a>] : 0xfffd;</div>
<div class="line"><a id="l01951" name="l01951"></a><span class="lineno"> 1951</span>        ++<a class="code hl_enumvalue" href="core_8h.html#a7fc0249f0f8ba720115d2430f5b86cbaa6a992d5529f459a44fee58c733255e86">index</a>;</div>
<div class="line"><a id="l01952" name="l01952"></a><span class="lineno"> 1952</span>        <span class="keywordflow">while</span> (--<a class="code hl_class" href="classbytes.html">bytes</a> &gt; 0)</div>
<div class="line"><a id="l01953" name="l01953"></a><span class="lineno"> 1953</span>            <span class="keywordflow">if</span> ((text[<a class="code hl_enumvalue" href="core_8h.html#a7fc0249f0f8ba720115d2430f5b86cbaa6a992d5529f459a44fee58c733255e86">index</a>] &amp; 0xc0) == 0x80)</div>
<div class="line"><a id="l01954" name="l01954"></a><span class="lineno"> 1954</span>                codepoint = codepoint &lt;&lt; 6 | (text[<a class="code hl_enumvalue" href="core_8h.html#a7fc0249f0f8ba720115d2430f5b86cbaa6a992d5529f459a44fee58c733255e86">index</a>++] &amp; 0x3f);</div>
<div class="line"><a id="l01955" name="l01955"></a><span class="lineno"> 1955</span>            <span class="keywordflow">else</span></div>
<div class="line"><a id="l01956" name="l01956"></a><span class="lineno"> 1956</span>            {</div>
<div class="line"><a id="l01957" name="l01957"></a><span class="lineno"> 1957</span>                codepoint = 0xfffd;</div>
<div class="line"><a id="l01958" name="l01958"></a><span class="lineno"> 1958</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l01959" name="l01959"></a><span class="lineno"> 1959</span>            }</div>
<div class="line"><a id="l01960" name="l01960"></a><span class="lineno"> 1960</span>        <span class="keywordflow">if</span> (codepoint == <span class="charliteral">&#39;\t&#39;</span> || codepoint == <span class="charliteral">&#39;\v&#39;</span> || codepoint == <span class="charliteral">&#39;\f&#39;</span> ||</div>
<div class="line"><a id="l01961" name="l01961"></a><span class="lineno"> 1961</span>            codepoint == <span class="charliteral">&#39;\r&#39;</span> || codepoint == <span class="charliteral">&#39;\n&#39;</span>)</div>
<div class="line"><a id="l01962" name="l01962"></a><span class="lineno"> 1962</span>            codepoint = <span class="charliteral">&#39; &#39;</span>;</div>
<div class="line"><a id="l01963" name="l01963"></a><span class="lineno"> 1963</span>        <span class="keywordtype">int</span> tables    = unsigned_16(<a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ae1aa377c064c039eb6c3bac8f6d2fb1b">face</a>.<a class="code hl_variable" href="structcanvas__ity_1_1font__face.html#a3a90e69c33234ccde6923be3056750ec">data</a>, <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ae1aa377c064c039eb6c3bac8f6d2fb1b">face</a>.<a class="code hl_variable" href="structcanvas__ity_1_1font__face.html#abc046249f63b83f8168e447240f3e226">cmap</a> + 2);</div>
<div class="line"><a id="l01964" name="l01964"></a><span class="lineno"> 1964</span>        <span class="keywordtype">int</span> format_12 = 0;</div>
<div class="line"><a id="l01965" name="l01965"></a><span class="lineno"> 1965</span>        <span class="keywordtype">int</span> format_4  = 0;</div>
<div class="line"><a id="l01966" name="l01966"></a><span class="lineno"> 1966</span>        <span class="keywordtype">int</span> format_0  = 0;</div>
<div class="line"><a id="l01967" name="l01967"></a><span class="lineno"> 1967</span>        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code hl_variable" href="tag__strings_8h.html#afccde767bad748fa7ca78d8d025fb7ab">table</a> = 0; <a class="code hl_variable" href="tag__strings_8h.html#afccde767bad748fa7ca78d8d025fb7ab">table</a> &lt; tables; ++<a class="code hl_variable" href="tag__strings_8h.html#afccde767bad748fa7ca78d8d025fb7ab">table</a>)</div>
<div class="line"><a id="l01968" name="l01968"></a><span class="lineno"> 1968</span>        {</div>
<div class="line"><a id="l01969" name="l01969"></a><span class="lineno"> 1969</span>            <span class="keywordtype">int</span> platform = unsigned_16(<a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ae1aa377c064c039eb6c3bac8f6d2fb1b">face</a>.<a class="code hl_variable" href="structcanvas__ity_1_1font__face.html#a3a90e69c33234ccde6923be3056750ec">data</a>, <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ae1aa377c064c039eb6c3bac8f6d2fb1b">face</a>.<a class="code hl_variable" href="structcanvas__ity_1_1font__face.html#abc046249f63b83f8168e447240f3e226">cmap</a> + <a class="code hl_variable" href="tag__strings_8h.html#afccde767bad748fa7ca78d8d025fb7ab">table</a> * 8 + 4);</div>
<div class="line"><a id="l01970" name="l01970"></a><span class="lineno"> 1970</span>            <span class="keywordtype">int</span> <a class="code hl_enumeration" href="namespacelitehtml.html#a8ddaff9e5b881cd89aade1489f211890">encoding</a> = unsigned_16(<a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ae1aa377c064c039eb6c3bac8f6d2fb1b">face</a>.<a class="code hl_variable" href="structcanvas__ity_1_1font__face.html#a3a90e69c33234ccde6923be3056750ec">data</a>, <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ae1aa377c064c039eb6c3bac8f6d2fb1b">face</a>.<a class="code hl_variable" href="structcanvas__ity_1_1font__face.html#abc046249f63b83f8168e447240f3e226">cmap</a> + <a class="code hl_variable" href="tag__strings_8h.html#afccde767bad748fa7ca78d8d025fb7ab">table</a> * 8 + 6);</div>
<div class="line"><a id="l01971" name="l01971"></a><span class="lineno"> 1971</span>            <span class="keywordtype">int</span> <a class="code hl_define" href="css__properties_8cpp.html#a5dfbcc916693656dd092ddc41ab25747">offset</a>   = signed_32(<a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ae1aa377c064c039eb6c3bac8f6d2fb1b">face</a>.<a class="code hl_variable" href="structcanvas__ity_1_1font__face.html#a3a90e69c33234ccde6923be3056750ec">data</a>, <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ae1aa377c064c039eb6c3bac8f6d2fb1b">face</a>.<a class="code hl_variable" href="structcanvas__ity_1_1font__face.html#abc046249f63b83f8168e447240f3e226">cmap</a> + <a class="code hl_variable" href="tag__strings_8h.html#afccde767bad748fa7ca78d8d025fb7ab">table</a> * 8 + 8);</div>
<div class="line"><a id="l01972" name="l01972"></a><span class="lineno"> 1972</span>            <span class="keywordtype">int</span> <a class="code hl_function" href="color_8h.html#a8b34a9364f5d6ca43a8a24f96a6db55b">format</a>   = unsigned_16(<a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ae1aa377c064c039eb6c3bac8f6d2fb1b">face</a>.<a class="code hl_variable" href="structcanvas__ity_1_1font__face.html#a3a90e69c33234ccde6923be3056750ec">data</a>, <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ae1aa377c064c039eb6c3bac8f6d2fb1b">face</a>.<a class="code hl_variable" href="structcanvas__ity_1_1font__face.html#abc046249f63b83f8168e447240f3e226">cmap</a> + <a class="code hl_define" href="css__properties_8cpp.html#a5dfbcc916693656dd092ddc41ab25747">offset</a>);</div>
<div class="line"><a id="l01973" name="l01973"></a><span class="lineno"> 1973</span>            <span class="keywordflow">if</span> (platform == 3 &amp;&amp; encoding == 10 &amp;&amp; <a class="code hl_function" href="color_8h.html#a8b34a9364f5d6ca43a8a24f96a6db55b">format</a> == 12)</div>
<div class="line"><a id="l01974" name="l01974"></a><span class="lineno"> 1974</span>                format_12 = <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ae1aa377c064c039eb6c3bac8f6d2fb1b">face</a>.<a class="code hl_variable" href="structcanvas__ity_1_1font__face.html#abc046249f63b83f8168e447240f3e226">cmap</a> + <a class="code hl_define" href="css__properties_8cpp.html#a5dfbcc916693656dd092ddc41ab25747">offset</a>;</div>
<div class="line"><a id="l01975" name="l01975"></a><span class="lineno"> 1975</span>            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (platform == 3 &amp;&amp; encoding == 1 &amp;&amp; <a class="code hl_function" href="color_8h.html#a8b34a9364f5d6ca43a8a24f96a6db55b">format</a> == 4)</div>
<div class="line"><a id="l01976" name="l01976"></a><span class="lineno"> 1976</span>                format_4 = <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ae1aa377c064c039eb6c3bac8f6d2fb1b">face</a>.<a class="code hl_variable" href="structcanvas__ity_1_1font__face.html#abc046249f63b83f8168e447240f3e226">cmap</a> + <a class="code hl_define" href="css__properties_8cpp.html#a5dfbcc916693656dd092ddc41ab25747">offset</a>;</div>
<div class="line"><a id="l01977" name="l01977"></a><span class="lineno"> 1977</span>            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code hl_function" href="color_8h.html#a8b34a9364f5d6ca43a8a24f96a6db55b">format</a> == 0)</div>
<div class="line"><a id="l01978" name="l01978"></a><span class="lineno"> 1978</span>                format_0 = <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ae1aa377c064c039eb6c3bac8f6d2fb1b">face</a>.<a class="code hl_variable" href="structcanvas__ity_1_1font__face.html#abc046249f63b83f8168e447240f3e226">cmap</a> + <a class="code hl_define" href="css__properties_8cpp.html#a5dfbcc916693656dd092ddc41ab25747">offset</a>;</div>
<div class="line"><a id="l01979" name="l01979"></a><span class="lineno"> 1979</span>        }</div>
<div class="line"><a id="l01980" name="l01980"></a><span class="lineno"> 1980</span>        <span class="keywordflow">if</span> (format_12)</div>
<div class="line"><a id="l01981" name="l01981"></a><span class="lineno"> 1981</span>        {</div>
<div class="line"><a id="l01982" name="l01982"></a><span class="lineno"> 1982</span>            <span class="keywordtype">int</span> groups = signed_32(<a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ae1aa377c064c039eb6c3bac8f6d2fb1b">face</a>.<a class="code hl_variable" href="structcanvas__ity_1_1font__face.html#a3a90e69c33234ccde6923be3056750ec">data</a>, format_12 + 12);</div>
<div class="line"><a id="l01983" name="l01983"></a><span class="lineno"> 1983</span>            <span class="keywordflow">for</span> (<span class="keywordtype">int</span> group = 0; group &lt; groups; ++group)</div>
<div class="line"><a id="l01984" name="l01984"></a><span class="lineno"> 1984</span>            {</div>
<div class="line"><a id="l01985" name="l01985"></a><span class="lineno"> 1985</span>                <span class="keywordtype">int</span> <a class="code hl_enumvalue" href="namespacecanvas__ity.html#a64892b31b00c006299d47bb71542b765a9cf9c0ad231023d5663cf9fb19993567">start</a> = signed_32(<a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ae1aa377c064c039eb6c3bac8f6d2fb1b">face</a>.<a class="code hl_variable" href="structcanvas__ity_1_1font__face.html#a3a90e69c33234ccde6923be3056750ec">data</a>, format_12 + 16 + group * 12);</div>
<div class="line"><a id="l01986" name="l01986"></a><span class="lineno"> 1986</span>                <span class="keywordtype">int</span> <a class="code hl_function" href="namespacelitehtml.html#ac2e9e9b4147860e0fc5e76e887824433">end</a>   = signed_32(<a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ae1aa377c064c039eb6c3bac8f6d2fb1b">face</a>.<a class="code hl_variable" href="structcanvas__ity_1_1font__face.html#a3a90e69c33234ccde6923be3056750ec">data</a>, format_12 + 20 + group * 12);</div>
<div class="line"><a id="l01987" name="l01987"></a><span class="lineno"> 1987</span>                <span class="keywordtype">int</span> glyph = signed_32(<a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ae1aa377c064c039eb6c3bac8f6d2fb1b">face</a>.<a class="code hl_variable" href="structcanvas__ity_1_1font__face.html#a3a90e69c33234ccde6923be3056750ec">data</a>, format_12 + 24 + group * 12);</div>
<div class="line"><a id="l01988" name="l01988"></a><span class="lineno"> 1988</span>                <span class="keywordflow">if</span> (<a class="code hl_enumvalue" href="namespacecanvas__ity.html#a64892b31b00c006299d47bb71542b765a9cf9c0ad231023d5663cf9fb19993567">start</a> &lt;= codepoint &amp;&amp; codepoint &lt;= end)</div>
<div class="line"><a id="l01989" name="l01989"></a><span class="lineno"> 1989</span>                    <span class="keywordflow">return</span> codepoint - <a class="code hl_enumvalue" href="namespacecanvas__ity.html#a64892b31b00c006299d47bb71542b765a9cf9c0ad231023d5663cf9fb19993567">start</a> + glyph;</div>
<div class="line"><a id="l01990" name="l01990"></a><span class="lineno"> 1990</span>            }</div>
<div class="line"><a id="l01991" name="l01991"></a><span class="lineno"> 1991</span>        }</div>
<div class="line"><a id="l01992" name="l01992"></a><span class="lineno"> 1992</span>        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (format_4)</div>
<div class="line"><a id="l01993" name="l01993"></a><span class="lineno"> 1993</span>        {</div>
<div class="line"><a id="l01994" name="l01994"></a><span class="lineno"> 1994</span>            <span class="keywordtype">int</span> segments    = unsigned_16(<a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ae1aa377c064c039eb6c3bac8f6d2fb1b">face</a>.<a class="code hl_variable" href="structcanvas__ity_1_1font__face.html#a3a90e69c33234ccde6923be3056750ec">data</a>, format_4 + 6);</div>
<div class="line"><a id="l01995" name="l01995"></a><span class="lineno"> 1995</span>            <span class="keywordtype">int</span> end_array   = format_4 + 14;</div>
<div class="line"><a id="l01996" name="l01996"></a><span class="lineno"> 1996</span>            <span class="keywordtype">int</span> start_array = end_array + 2 + segments;</div>
<div class="line"><a id="l01997" name="l01997"></a><span class="lineno"> 1997</span>            <span class="keywordtype">int</span> delta_array = start_array + segments;</div>
<div class="line"><a id="l01998" name="l01998"></a><span class="lineno"> 1998</span>            <span class="keywordtype">int</span> range_array = delta_array + segments;</div>
<div class="line"><a id="l01999" name="l01999"></a><span class="lineno"> 1999</span>            <span class="keywordflow">for</span> (<span class="keywordtype">int</span> segment = 0; segment &lt; segments; segment += 2)</div>
<div class="line"><a id="l02000" name="l02000"></a><span class="lineno"> 2000</span>            {</div>
<div class="line"><a id="l02001" name="l02001"></a><span class="lineno"> 2001</span>                <span class="keywordtype">int</span> <a class="code hl_enumvalue" href="namespacecanvas__ity.html#a64892b31b00c006299d47bb71542b765a9cf9c0ad231023d5663cf9fb19993567">start</a> = unsigned_16(<a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ae1aa377c064c039eb6c3bac8f6d2fb1b">face</a>.<a class="code hl_variable" href="structcanvas__ity_1_1font__face.html#a3a90e69c33234ccde6923be3056750ec">data</a>, start_array + segment);</div>
<div class="line"><a id="l02002" name="l02002"></a><span class="lineno"> 2002</span>                <span class="keywordtype">int</span> <a class="code hl_function" href="namespacelitehtml.html#ac2e9e9b4147860e0fc5e76e887824433">end</a>   = unsigned_16(<a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ae1aa377c064c039eb6c3bac8f6d2fb1b">face</a>.<a class="code hl_variable" href="structcanvas__ity_1_1font__face.html#a3a90e69c33234ccde6923be3056750ec">data</a>, end_array + segment);</div>
<div class="line"><a id="l02003" name="l02003"></a><span class="lineno"> 2003</span>                <span class="keywordtype">int</span> delta = signed_16(<a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ae1aa377c064c039eb6c3bac8f6d2fb1b">face</a>.<a class="code hl_variable" href="structcanvas__ity_1_1font__face.html#a3a90e69c33234ccde6923be3056750ec">data</a>, delta_array + segment);</div>
<div class="line"><a id="l02004" name="l02004"></a><span class="lineno"> 2004</span>                <span class="keywordtype">int</span> range = unsigned_16(<a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ae1aa377c064c039eb6c3bac8f6d2fb1b">face</a>.<a class="code hl_variable" href="structcanvas__ity_1_1font__face.html#a3a90e69c33234ccde6923be3056750ec">data</a>, range_array + segment);</div>
<div class="line"><a id="l02005" name="l02005"></a><span class="lineno"> 2005</span>                <span class="keywordflow">if</span> (<a class="code hl_enumvalue" href="namespacecanvas__ity.html#a64892b31b00c006299d47bb71542b765a9cf9c0ad231023d5663cf9fb19993567">start</a> &lt;= codepoint &amp;&amp; codepoint &lt;= end)</div>
<div class="line"><a id="l02006" name="l02006"></a><span class="lineno"> 2006</span>                    <span class="keywordflow">return</span> range ? unsigned_16(<a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ae1aa377c064c039eb6c3bac8f6d2fb1b">face</a>.<a class="code hl_variable" href="structcanvas__ity_1_1font__face.html#a3a90e69c33234ccde6923be3056750ec">data</a>, range_array + segment +</div>
<div class="line"><a id="l02007" name="l02007"></a><span class="lineno"> 2007</span>                                                              (codepoint - <a class="code hl_enumvalue" href="namespacecanvas__ity.html#a64892b31b00c006299d47bb71542b765a9cf9c0ad231023d5663cf9fb19993567">start</a>) * 2 + range)</div>
<div class="line"><a id="l02008" name="l02008"></a><span class="lineno"> 2008</span>                                 : (codepoint + delta) &amp; 0xffff;</div>
<div class="line"><a id="l02009" name="l02009"></a><span class="lineno"> 2009</span>            }</div>
<div class="line"><a id="l02010" name="l02010"></a><span class="lineno"> 2010</span>        }</div>
<div class="line"><a id="l02011" name="l02011"></a><span class="lineno"> 2011</span>        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (format_0 &amp;&amp; 0 &lt;= codepoint &amp;&amp; codepoint &lt; 256)</div>
<div class="line"><a id="l02012" name="l02012"></a><span class="lineno"> 2012</span>            <span class="keywordflow">return</span> unsigned_8(<a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ae1aa377c064c039eb6c3bac8f6d2fb1b">face</a>.<a class="code hl_variable" href="structcanvas__ity_1_1font__face.html#a3a90e69c33234ccde6923be3056750ec">data</a>, format_0 + 6 + codepoint);</div>
<div class="line"><a id="l02013" name="l02013"></a><span class="lineno"> 2013</span>        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a id="l02014" name="l02014"></a><span class="lineno"> 2014</span>    }</div>
<div class="line"><a id="l02015" name="l02015"></a><span class="lineno"> 2015</span> </div>
<div class="line"><a id="l02016" name="l02016"></a><span class="lineno"> 2016</span>    <span class="keywordtype">void</span> <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#a4dfa9eb9567537bc2769c654fb356292">canvas::get_font_metrics</a>(<span class="keywordtype">int</span>&amp; ascent, <span class="keywordtype">int</span>&amp; descent, <span class="keywordtype">int</span>&amp; height, <span class="keywordtype">int</span>&amp; x_height)</div>
<div class="line"><a id="l02017" name="l02017"></a><span class="lineno"> 2017</span>    {</div>
<div class="line"><a id="l02018" name="l02018"></a><span class="lineno"> 2018</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ae1aa377c064c039eb6c3bac8f6d2fb1b">face</a>.<a class="code hl_variable" href="structcanvas__ity_1_1font__face.html#a3a90e69c33234ccde6923be3056750ec">data</a>.empty())</div>
<div class="line"><a id="l02019" name="l02019"></a><span class="lineno"> 2019</span>            <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l02020" name="l02020"></a><span class="lineno"> 2020</span> </div>
<div class="line"><a id="l02021" name="l02021"></a><span class="lineno"> 2021</span>        <span class="comment">// https://www.w3.org/TR/css-inline/#ascent-descent</span></div>
<div class="line"><a id="l02022" name="l02022"></a><span class="lineno"> 2022</span>        <span class="comment">// &quot;It is recommended that implementations that use OpenType or TrueType fonts use the metrics sTypoAscender and sTypoDescender from the font’s OS/2 table&quot;</span></div>
<div class="line"><a id="l02023" name="l02023"></a><span class="lineno"> 2023</span>        <span class="keywordtype">float</span> sTypoAscender  = (float)signed_16(<a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ae1aa377c064c039eb6c3bac8f6d2fb1b">face</a>.<a class="code hl_variable" href="structcanvas__ity_1_1font__face.html#a3a90e69c33234ccde6923be3056750ec">data</a>, <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ae1aa377c064c039eb6c3bac8f6d2fb1b">face</a>.<a class="code hl_variable" href="structcanvas__ity_1_1font__face.html#a75fb403a4159fe65601fb200d2692cda">os_2</a> + 68);</div>
<div class="line"><a id="l02024" name="l02024"></a><span class="lineno"> 2024</span>        <span class="keywordtype">float</span> sTypoDescender = (float)signed_16(<a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ae1aa377c064c039eb6c3bac8f6d2fb1b">face</a>.<a class="code hl_variable" href="structcanvas__ity_1_1font__face.html#a3a90e69c33234ccde6923be3056750ec">data</a>, <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ae1aa377c064c039eb6c3bac8f6d2fb1b">face</a>.<a class="code hl_variable" href="structcanvas__ity_1_1font__face.html#a75fb403a4159fe65601fb200d2692cda">os_2</a> + 70);</div>
<div class="line"><a id="l02025" name="l02025"></a><span class="lineno"> 2025</span>        <span class="comment">// Some fonts, eg. Inconsolata, don&#39;t have the sxHeight field (it is defined in the second version of OS/2 table).</span></div>
<div class="line"><a id="l02026" name="l02026"></a><span class="lineno"> 2026</span>        <span class="comment">// If it is absent (yMax - yMin) for &#39;x&#39; from glyf table can be used.</span></div>
<div class="line"><a id="l02027" name="l02027"></a><span class="lineno"> 2027</span>        <span class="keywordtype">int</span>   os2ver   = unsigned_16(<a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ae1aa377c064c039eb6c3bac8f6d2fb1b">face</a>.<a class="code hl_variable" href="structcanvas__ity_1_1font__face.html#a3a90e69c33234ccde6923be3056750ec">data</a>, <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ae1aa377c064c039eb6c3bac8f6d2fb1b">face</a>.<a class="code hl_variable" href="structcanvas__ity_1_1font__face.html#a75fb403a4159fe65601fb200d2692cda">os_2</a>);</div>
<div class="line"><a id="l02028" name="l02028"></a><span class="lineno"> 2028</span>        <span class="keywordtype">float</span> sxHeight = os2ver &gt;= 2 ? (float)signed_16(<a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ae1aa377c064c039eb6c3bac8f6d2fb1b">face</a>.<a class="code hl_variable" href="structcanvas__ity_1_1font__face.html#a3a90e69c33234ccde6923be3056750ec">data</a>, <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ae1aa377c064c039eb6c3bac8f6d2fb1b">face</a>.<a class="code hl_variable" href="structcanvas__ity_1_1font__face.html#a75fb403a4159fe65601fb200d2692cda">os_2</a> + 86) : 0;</div>
<div class="line"><a id="l02029" name="l02029"></a><span class="lineno"> 2029</span> </div>
<div class="line"><a id="l02030" name="l02030"></a><span class="lineno"> 2030</span>        ascent  = (int)ceil(sTypoAscender * <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ae1aa377c064c039eb6c3bac8f6d2fb1b">face</a>.<a class="code hl_variable" href="structcanvas__ity_1_1font__face.html#ae9187b1026b81d08dd5000c7b8c246c2">scale</a>);</div>
<div class="line"><a id="l02031" name="l02031"></a><span class="lineno"> 2031</span>        descent = (int)ceil(-sTypoDescender * <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ae1aa377c064c039eb6c3bac8f6d2fb1b">face</a>.<a class="code hl_variable" href="structcanvas__ity_1_1font__face.html#ae9187b1026b81d08dd5000c7b8c246c2">scale</a>);</div>
<div class="line"><a id="l02032" name="l02032"></a><span class="lineno"> 2032</span> </div>
<div class="line"><a id="l02033" name="l02033"></a><span class="lineno"> 2033</span>        <span class="comment">// https://www.w3.org/TR/css-inline/#font-line-gap</span></div>
<div class="line"><a id="l02034" name="l02034"></a><span class="lineno"> 2034</span>        <span class="comment">// https://www.w3.org/TR/css-inline/#inline-height</span></div>
<div class="line"><a id="l02035" name="l02035"></a><span class="lineno"> 2035</span>        <span class="comment">// In several fonts I examined, including Inconsolata and csstest-ascii.ttf from w3.org,</span></div>
<div class="line"><a id="l02036" name="l02036"></a><span class="lineno"> 2036</span>        <span class="comment">// both OS/2 sTypoLineGap and hhea lineGap are either 0 or very small (I used https://fontdrop.info/ viewer).</span></div>
<div class="line"><a id="l02037" name="l02037"></a><span class="lineno"> 2037</span>        <span class="comment">// cairo container sets height to ascent + descent, litehtml uses this value as a normal line height and for baseline calculations.</span></div>
<div class="line"><a id="l02038" name="l02038"></a><span class="lineno"> 2038</span>        <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#acb61342cdc37dc89aee42e7087adbc50">height</a> = (int)ceil((sTypoAscender - sTypoDescender) * <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ae1aa377c064c039eb6c3bac8f6d2fb1b">face</a>.<a class="code hl_variable" href="structcanvas__ity_1_1font__face.html#ae9187b1026b81d08dd5000c7b8c246c2">scale</a>);</div>
<div class="line"><a id="l02039" name="l02039"></a><span class="lineno"> 2039</span> </div>
<div class="line"><a id="l02040" name="l02040"></a><span class="lineno"> 2040</span>        x_height = (int)ceil(sxHeight * <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ae1aa377c064c039eb6c3bac8f6d2fb1b">face</a>.<a class="code hl_variable" href="structcanvas__ity_1_1font__face.html#ae9187b1026b81d08dd5000c7b8c246c2">scale</a>);</div>
<div class="line"><a id="l02041" name="l02041"></a><span class="lineno"> 2041</span>    }</div>
<div class="line"><a id="l02042" name="l02042"></a><span class="lineno"> 2042</span> </div>
<div class="line"><a id="l02043" name="l02043"></a><span class="lineno"> 2043</span>    <span class="comment">// Convert a text string to a set of polylines.  This works out the placement</span></div>
<div class="line"><a id="l02044" name="l02044"></a><span class="lineno"> 2044</span>    <span class="comment">// of the text string relative to the anchor position.  Then it walks through</span></div>
<div class="line"><a id="l02045" name="l02045"></a><span class="lineno"> 2045</span>    <span class="comment">// the string, sizing and placing each character by temporarily changing the</span></div>
<div class="line"><a id="l02046" name="l02046"></a><span class="lineno"> 2046</span>    <span class="comment">// current transform matrix to map from font units to canvas pixel coordinates</span></div>
<div class="line"><a id="l02047" name="l02047"></a><span class="lineno"> 2047</span>    <span class="comment">// before adding the glyph to the polylines.  This replaces the previous</span></div>
<div class="line"><a id="l02048" name="l02048"></a><span class="lineno"> 2048</span>    <span class="comment">// polyline data.</span></div>
<div class="line"><a id="l02049" name="l02049"></a><span class="lineno"> 2049</span>    <span class="comment">//</span></div>
<div class="line"><a id="l02050" name="l02050"></a><span class="lineno"> 2050</span>    <span class="keywordtype">void</span> <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#a4dd3608e9ac1d67b267aff7710377118">canvas::text_to_lines</a>(</div>
<div class="line"><a id="l02051" name="l02051"></a><span class="lineno"> 2051</span>        <span class="keywordtype">char</span> <span class="keyword">const</span>* text,</div>
<div class="line"><a id="l02052" name="l02052"></a><span class="lineno"> 2052</span>        xy          position,</div>
<div class="line"><a id="l02053" name="l02053"></a><span class="lineno"> 2053</span>        <span class="keywordtype">float</span>       maximum_width,</div>
<div class="line"><a id="l02054" name="l02054"></a><span class="lineno"> 2054</span>        <span class="keywordtype">bool</span>        stroking)</div>
<div class="line"><a id="l02055" name="l02055"></a><span class="lineno"> 2055</span>    {</div>
<div class="line"><a id="l02056" name="l02056"></a><span class="lineno"> 2056</span>        <span class="keyword">static</span> <span class="keywordtype">float</span> <span class="keyword">const</span> tolerance = 0.125f;</div>
<div class="line"><a id="l02057" name="l02057"></a><span class="lineno"> 2057</span>        <span class="keywordtype">float</span>              ratio     = tolerance / std::max(0.5f * <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#a9928b93ce97d8ec8fbfa6c450edbc96c">line_width</a>, tolerance);</div>
<div class="line"><a id="l02058" name="l02058"></a><span class="lineno"> 2058</span>        <span class="keywordtype">float</span>              angular   = stroking ? (ratio - 2.0f) * ratio * 2.0f + 1.0f : -1.0f;</div>
<div class="line"><a id="l02059" name="l02059"></a><span class="lineno"> 2059</span>        <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#afd8f9880a251b532bf619b3ea93aff5f">lines</a>.<a class="code hl_variable" href="structcanvas__ity_1_1line__path.html#a27efd4b0dec6d85e4ba861c34bacdbf4">points</a>.clear();</div>
<div class="line"><a id="l02060" name="l02060"></a><span class="lineno"> 2060</span>        <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#afd8f9880a251b532bf619b3ea93aff5f">lines</a>.<a class="code hl_variable" href="structcanvas__ity_1_1line__path.html#acfec22d114fac137ae0a70af069874d8">subpaths</a>.clear();</div>
<div class="line"><a id="l02061" name="l02061"></a><span class="lineno"> 2061</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ae1aa377c064c039eb6c3bac8f6d2fb1b">face</a>.<a class="code hl_variable" href="structcanvas__ity_1_1font__face.html#a3a90e69c33234ccde6923be3056750ec">data</a>.empty() || !text || maximum_width &lt;= 0.0f)</div>
<div class="line"><a id="l02062" name="l02062"></a><span class="lineno"> 2062</span>            <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l02063" name="l02063"></a><span class="lineno"> 2063</span>        <span class="keywordtype">float</span> <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#ad4920132bc78f7e74a8b14319e8ff52c">width</a>     = maximum_width == 1.0e30f &amp;&amp; <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#a6b86e63b6b1ed3d08d0bcaa65968a82a">text_align</a> == <a class="code hl_enumvalue" href="namespacecanvas__ity.html#a64892b31b00c006299d47bb71542b765a0c8aa9e531a998845378db44119460de">leftward</a> ? 0.0f : <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#ad15a54d6f83e96c430736671c4f82d8d">measure_text</a>(text);</div>
<div class="line"><a id="l02064" name="l02064"></a><span class="lineno"> 2064</span>        <span class="keywordtype">float</span> reduction = maximum_width / std::max(maximum_width, <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#ad4920132bc78f7e74a8b14319e8ff52c">width</a>);</div>
<div class="line"><a id="l02065" name="l02065"></a><span class="lineno"> 2065</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#a6b86e63b6b1ed3d08d0bcaa65968a82a">text_align</a> == <a class="code hl_enumvalue" href="namespacecanvas__ity.html#a64892b31b00c006299d47bb71542b765a151ed2cf28f1c8b6fd3f4bdefbdd5f45">rightward</a>)</div>
<div class="line"><a id="l02066" name="l02066"></a><span class="lineno"> 2066</span>            position.x -= <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#ad4920132bc78f7e74a8b14319e8ff52c">width</a> * reduction;</div>
<div class="line"><a id="l02067" name="l02067"></a><span class="lineno"> 2067</span>        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#a6b86e63b6b1ed3d08d0bcaa65968a82a">text_align</a> == <a class="code hl_enumvalue" href="namespacecanvas__ity.html#a64892b31b00c006299d47bb71542b765a5db08d7fa14da6c1e37ae6aaad87a53d">center</a>)</div>
<div class="line"><a id="l02068" name="l02068"></a><span class="lineno"> 2068</span>            position.x -= 0.5f * <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#ad4920132bc78f7e74a8b14319e8ff52c">width</a> * reduction;</div>
<div class="line"><a id="l02069" name="l02069"></a><span class="lineno"> 2069</span>        xy    scaling      = <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ae1aa377c064c039eb6c3bac8f6d2fb1b">face</a>.<a class="code hl_variable" href="structcanvas__ity_1_1font__face.html#ae9187b1026b81d08dd5000c7b8c246c2">scale</a> * xy(reduction, 1.0f);</div>
<div class="line"><a id="l02070" name="l02070"></a><span class="lineno"> 2070</span>        <span class="keywordtype">float</span> units_per_em = <span class="keyword">static_cast&lt;</span><span class="keywordtype">float</span><span class="keyword">&gt;</span>(</div>
<div class="line"><a id="l02071" name="l02071"></a><span class="lineno"> 2071</span>            unsigned_16(<a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ae1aa377c064c039eb6c3bac8f6d2fb1b">face</a>.<a class="code hl_variable" href="structcanvas__ity_1_1font__face.html#a3a90e69c33234ccde6923be3056750ec">data</a>, <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ae1aa377c064c039eb6c3bac8f6d2fb1b">face</a>.<a class="code hl_variable" href="structcanvas__ity_1_1font__face.html#acfdadcc7998b631ce831be49b7cc22d9">head</a> + 18));</div>
<div class="line"><a id="l02072" name="l02072"></a><span class="lineno"> 2072</span>        <span class="keywordtype">float</span> ascender = <span class="keyword">static_cast&lt;</span><span class="keywordtype">float</span><span class="keyword">&gt;</span>(</div>
<div class="line"><a id="l02073" name="l02073"></a><span class="lineno"> 2073</span>            signed_16(<a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ae1aa377c064c039eb6c3bac8f6d2fb1b">face</a>.<a class="code hl_variable" href="structcanvas__ity_1_1font__face.html#a3a90e69c33234ccde6923be3056750ec">data</a>, <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ae1aa377c064c039eb6c3bac8f6d2fb1b">face</a>.<a class="code hl_variable" href="structcanvas__ity_1_1font__face.html#a75fb403a4159fe65601fb200d2692cda">os_2</a> + 68));</div>
<div class="line"><a id="l02074" name="l02074"></a><span class="lineno"> 2074</span>        <span class="keywordtype">float</span> descender = <span class="keyword">static_cast&lt;</span><span class="keywordtype">float</span><span class="keyword">&gt;</span>(</div>
<div class="line"><a id="l02075" name="l02075"></a><span class="lineno"> 2075</span>            signed_16(<a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ae1aa377c064c039eb6c3bac8f6d2fb1b">face</a>.<a class="code hl_variable" href="structcanvas__ity_1_1font__face.html#a3a90e69c33234ccde6923be3056750ec">data</a>, <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ae1aa377c064c039eb6c3bac8f6d2fb1b">face</a>.<a class="code hl_variable" href="structcanvas__ity_1_1font__face.html#a75fb403a4159fe65601fb200d2692cda">os_2</a> + 70));</div>
<div class="line"><a id="l02076" name="l02076"></a><span class="lineno"> 2076</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#a408fc5a50caaf825e1c3f6110e40fefa">text_baseline</a> == <a class="code hl_enumvalue" href="namespacecanvas__ity.html#a4d285f5b6403d2455e1550ff00b66a68a9a249647210b2d2559a66e7aa00dcd4b">top</a>)</div>
<div class="line"><a id="l02077" name="l02077"></a><span class="lineno"> 2077</span>            position.y += ascender * <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ae1aa377c064c039eb6c3bac8f6d2fb1b">face</a>.<a class="code hl_variable" href="structcanvas__ity_1_1font__face.html#ae9187b1026b81d08dd5000c7b8c246c2">scale</a>;</div>
<div class="line"><a id="l02078" name="l02078"></a><span class="lineno"> 2078</span>        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#a408fc5a50caaf825e1c3f6110e40fefa">text_baseline</a> == <a class="code hl_enumvalue" href="namespacecanvas__ity.html#a4d285f5b6403d2455e1550ff00b66a68a11cc80e28201c55b410440ff51640997">middle</a>)</div>
<div class="line"><a id="l02079" name="l02079"></a><span class="lineno"> 2079</span>            position.y += (ascender - descender) * 0.5f * <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ae1aa377c064c039eb6c3bac8f6d2fb1b">face</a>.<a class="code hl_variable" href="structcanvas__ity_1_1font__face.html#ae9187b1026b81d08dd5000c7b8c246c2">scale</a>;</div>
<div class="line"><a id="l02080" name="l02080"></a><span class="lineno"> 2080</span>        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#a408fc5a50caaf825e1c3f6110e40fefa">text_baseline</a> == <a class="code hl_enumvalue" href="namespacecanvas__ity.html#a4d285f5b6403d2455e1550ff00b66a68a9bb9d7bbd943523e378fd235f23cb243">bottom</a>)</div>
<div class="line"><a id="l02081" name="l02081"></a><span class="lineno"> 2081</span>            position.y += descender * <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ae1aa377c064c039eb6c3bac8f6d2fb1b">face</a>.<a class="code hl_variable" href="structcanvas__ity_1_1font__face.html#ae9187b1026b81d08dd5000c7b8c246c2">scale</a>;</div>
<div class="line"><a id="l02082" name="l02082"></a><span class="lineno"> 2082</span>        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#a408fc5a50caaf825e1c3f6110e40fefa">text_baseline</a> == <a class="code hl_enumvalue" href="namespacecanvas__ity.html#a4d285f5b6403d2455e1550ff00b66a68a4c6c4d70fb820aa393a6f169df5d9680">hanging</a>)</div>
<div class="line"><a id="l02083" name="l02083"></a><span class="lineno"> 2083</span>            position.y += 0.6f * <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ae1aa377c064c039eb6c3bac8f6d2fb1b">face</a>.<a class="code hl_variable" href="structcanvas__ity_1_1font__face.html#ae9187b1026b81d08dd5000c7b8c246c2">scale</a> * units_per_em;</div>
<div class="line"><a id="l02084" name="l02084"></a><span class="lineno"> 2084</span>        affine_matrix saved_forward = <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ac5da3224f86f284b4ac7efbde3942e27">forward</a>;</div>
<div class="line"><a id="l02085" name="l02085"></a><span class="lineno"> 2085</span>        affine_matrix saved_inverse = <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ade344370cc819a35ed35233e02f09859">inverse</a>;</div>
<div class="line"><a id="l02086" name="l02086"></a><span class="lineno"> 2086</span>        <span class="keywordtype">int</span>           hmetrics      = unsigned_16(<a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ae1aa377c064c039eb6c3bac8f6d2fb1b">face</a>.<a class="code hl_variable" href="structcanvas__ity_1_1font__face.html#a3a90e69c33234ccde6923be3056750ec">data</a>, <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ae1aa377c064c039eb6c3bac8f6d2fb1b">face</a>.<a class="code hl_variable" href="structcanvas__ity_1_1font__face.html#a4e4fb482b9b9b7eec91997680b30cd25">hhea</a> + 34);</div>
<div class="line"><a id="l02087" name="l02087"></a><span class="lineno"> 2087</span>        <span class="keywordtype">int</span>           place         = 0;</div>
<div class="line"><a id="l02088" name="l02088"></a><span class="lineno"> 2088</span>        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code hl_enumvalue" href="core_8h.html#a7fc0249f0f8ba720115d2430f5b86cbaa6a992d5529f459a44fee58c733255e86">index</a> = 0; text[<a class="code hl_enumvalue" href="core_8h.html#a7fc0249f0f8ba720115d2430f5b86cbaa6a992d5529f459a44fee58c733255e86">index</a>];)</div>
<div class="line"><a id="l02089" name="l02089"></a><span class="lineno"> 2089</span>        {</div>
<div class="line"><a id="l02090" name="l02090"></a><span class="lineno"> 2090</span>            <span class="keywordtype">int</span> glyph = <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#ac677bb99b93a767bf42075a0e5969890">character_to_glyph</a>(text, <a class="code hl_enumvalue" href="core_8h.html#a7fc0249f0f8ba720115d2430f5b86cbaa6a992d5529f459a44fee58c733255e86">index</a>);</div>
<div class="line"><a id="l02091" name="l02091"></a><span class="lineno"> 2091</span>            <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ac5da3224f86f284b4ac7efbde3942e27">forward</a>   = saved_forward;</div>
<div class="line"><a id="l02092" name="l02092"></a><span class="lineno"> 2092</span>            <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#a9ef5f65d2eca3518b5ea22eb76badce1">transform</a>(scaling.x, 0.0f, 0.0f, -scaling.y,</div>
<div class="line"><a id="l02093" name="l02093"></a><span class="lineno"> 2093</span>                      position.x + <span class="keyword">static_cast&lt;</span><span class="keywordtype">float</span><span class="keyword">&gt;</span>(place) * scaling.x,</div>
<div class="line"><a id="l02094" name="l02094"></a><span class="lineno"> 2094</span>                      position.y);</div>
<div class="line"><a id="l02095" name="l02095"></a><span class="lineno"> 2095</span>            <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#a76f919fb3dfead1b60ae57d578b649a2">add_glyph</a>(glyph, angular);</div>
<div class="line"><a id="l02096" name="l02096"></a><span class="lineno"> 2096</span>            <span class="keywordtype">int</span> entry = std::min(glyph, hmetrics - 1);</div>
<div class="line"><a id="l02097" name="l02097"></a><span class="lineno"> 2097</span>            place += unsigned_16(<a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ae1aa377c064c039eb6c3bac8f6d2fb1b">face</a>.<a class="code hl_variable" href="structcanvas__ity_1_1font__face.html#a3a90e69c33234ccde6923be3056750ec">data</a>, <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ae1aa377c064c039eb6c3bac8f6d2fb1b">face</a>.<a class="code hl_variable" href="structcanvas__ity_1_1font__face.html#aae90819c2cb1ab8241bfee97d14602d0">hmtx</a> + entry * 4);</div>
<div class="line"><a id="l02098" name="l02098"></a><span class="lineno"> 2098</span>        }</div>
<div class="line"><a id="l02099" name="l02099"></a><span class="lineno"> 2099</span>        <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ac5da3224f86f284b4ac7efbde3942e27">forward</a> = saved_forward;</div>
<div class="line"><a id="l02100" name="l02100"></a><span class="lineno"> 2100</span>        <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ade344370cc819a35ed35233e02f09859">inverse</a> = saved_inverse;</div>
<div class="line"><a id="l02101" name="l02101"></a><span class="lineno"> 2101</span>    }</div>
<div class="line"><a id="l02102" name="l02102"></a><span class="lineno"> 2102</span> </div>
<div class="line"><a id="l02103" name="l02103"></a><span class="lineno"> 2103</span>    <span class="comment">// Break the polylines into smaller pieces according to the dash settings.</span></div>
<div class="line"><a id="l02104" name="l02104"></a><span class="lineno"> 2104</span>    <span class="comment">// This walks along the polyline subpaths and dash pattern together, emitting</span></div>
<div class="line"><a id="l02105" name="l02105"></a><span class="lineno"> 2105</span>    <span class="comment">// new points via lerping where dash segments begin and end.  Each dash</span></div>
<div class="line"><a id="l02106" name="l02106"></a><span class="lineno"> 2106</span>    <span class="comment">// segment becomes a new open subpath in the polyline.  Some care is to</span></div>
<div class="line"><a id="l02107" name="l02107"></a><span class="lineno"> 2107</span>    <span class="comment">// taken to handle two special cases of closed subpaths.  First, those that</span></div>
<div class="line"><a id="l02108" name="l02108"></a><span class="lineno"> 2108</span>    <span class="comment">// are completely within the first dash segment should be emitted as-is and</span></div>
<div class="line"><a id="l02109" name="l02109"></a><span class="lineno"> 2109</span>    <span class="comment">// remain closed.  Secondly, those that start and end within a dash should</span></div>
<div class="line"><a id="l02110" name="l02110"></a><span class="lineno"> 2110</span>    <span class="comment">// have the two dashes merged together so that the lines join.  This replaces</span></div>
<div class="line"><a id="l02111" name="l02111"></a><span class="lineno"> 2111</span>    <span class="comment">// the previous polyline data.</span></div>
<div class="line"><a id="l02112" name="l02112"></a><span class="lineno"> 2112</span>    <span class="comment">//</span></div>
<div class="line"><a id="l02113" name="l02113"></a><span class="lineno"> 2113</span>    <span class="keywordtype">void</span> <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#aa32bb49090a1a1b75ea808488bfc309b">canvas::dash_lines</a>()</div>
<div class="line"><a id="l02114" name="l02114"></a><span class="lineno"> 2114</span>    {</div>
<div class="line"><a id="l02115" name="l02115"></a><span class="lineno"> 2115</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#a3f34a73605c566ec786c89a18bc076b2">line_dash</a>.empty())</div>
<div class="line"><a id="l02116" name="l02116"></a><span class="lineno"> 2116</span>            <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l02117" name="l02117"></a><span class="lineno"> 2117</span>        <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#afd8f9880a251b532bf619b3ea93aff5f">lines</a>.<a class="code hl_variable" href="structcanvas__ity_1_1line__path.html#a27efd4b0dec6d85e4ba861c34bacdbf4">points</a>.swap(<a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#afaf3d6c584853157fb64bf463648f65c">scratch</a>.<a class="code hl_variable" href="structcanvas__ity_1_1line__path.html#a27efd4b0dec6d85e4ba861c34bacdbf4">points</a>);</div>
<div class="line"><a id="l02118" name="l02118"></a><span class="lineno"> 2118</span>        <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#afd8f9880a251b532bf619b3ea93aff5f">lines</a>.<a class="code hl_variable" href="structcanvas__ity_1_1line__path.html#a27efd4b0dec6d85e4ba861c34bacdbf4">points</a>.clear();</div>
<div class="line"><a id="l02119" name="l02119"></a><span class="lineno"> 2119</span>        <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#afd8f9880a251b532bf619b3ea93aff5f">lines</a>.<a class="code hl_variable" href="structcanvas__ity_1_1line__path.html#acfec22d114fac137ae0a70af069874d8">subpaths</a>.swap(<a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#afaf3d6c584853157fb64bf463648f65c">scratch</a>.<a class="code hl_variable" href="structcanvas__ity_1_1line__path.html#acfec22d114fac137ae0a70af069874d8">subpaths</a>);</div>
<div class="line"><a id="l02120" name="l02120"></a><span class="lineno"> 2120</span>        <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#afd8f9880a251b532bf619b3ea93aff5f">lines</a>.<a class="code hl_variable" href="structcanvas__ity_1_1line__path.html#acfec22d114fac137ae0a70af069874d8">subpaths</a>.clear();</div>
<div class="line"><a id="l02121" name="l02121"></a><span class="lineno"> 2121</span>        <span class="keywordtype">float</span> total  = std::accumulate(<a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#a3f34a73605c566ec786c89a18bc076b2">line_dash</a>.begin(), <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#a3f34a73605c566ec786c89a18bc076b2">line_dash</a>.end(), 0.0f);</div>
<div class="line"><a id="l02122" name="l02122"></a><span class="lineno"> 2122</span>        <span class="keywordtype">float</span> <a class="code hl_define" href="css__properties_8cpp.html#a5dfbcc916693656dd092ddc41ab25747">offset</a> = fmodf(<a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#aa922b5d6eb6469829217ceff878354fa">line_dash_offset</a>, total);</div>
<div class="line"><a id="l02123" name="l02123"></a><span class="lineno"> 2123</span>        <span class="keywordflow">if</span> (<a class="code hl_define" href="css__properties_8cpp.html#a5dfbcc916693656dd092ddc41ab25747">offset</a> &lt; 0.0f)</div>
<div class="line"><a id="l02124" name="l02124"></a><span class="lineno"> 2124</span>            <a class="code hl_define" href="css__properties_8cpp.html#a5dfbcc916693656dd092ddc41ab25747">offset</a> += total;</div>
<div class="line"><a id="l02125" name="l02125"></a><span class="lineno"> 2125</span>        <span class="keywordtype">size_t</span> <a class="code hl_enumvalue" href="namespacecanvas__ity.html#a64892b31b00c006299d47bb71542b765a9cf9c0ad231023d5663cf9fb19993567">start</a> = 0;</div>
<div class="line"><a id="l02126" name="l02126"></a><span class="lineno"> 2126</span>        <span class="keywordflow">while</span> (<a class="code hl_define" href="css__properties_8cpp.html#a5dfbcc916693656dd092ddc41ab25747">offset</a> &gt;= <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#a3f34a73605c566ec786c89a18bc076b2">line_dash</a>[<a class="code hl_enumvalue" href="namespacecanvas__ity.html#a64892b31b00c006299d47bb71542b765a9cf9c0ad231023d5663cf9fb19993567">start</a>])</div>
<div class="line"><a id="l02127" name="l02127"></a><span class="lineno"> 2127</span>        {</div>
<div class="line"><a id="l02128" name="l02128"></a><span class="lineno"> 2128</span>            <a class="code hl_define" href="css__properties_8cpp.html#a5dfbcc916693656dd092ddc41ab25747">offset</a> -= <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#a3f34a73605c566ec786c89a18bc076b2">line_dash</a>[<a class="code hl_enumvalue" href="namespacecanvas__ity.html#a64892b31b00c006299d47bb71542b765a9cf9c0ad231023d5663cf9fb19993567">start</a>];</div>
<div class="line"><a id="l02129" name="l02129"></a><span class="lineno"> 2129</span>            <a class="code hl_enumvalue" href="namespacecanvas__ity.html#a64892b31b00c006299d47bb71542b765a9cf9c0ad231023d5663cf9fb19993567">start</a> = <a class="code hl_enumvalue" href="namespacecanvas__ity.html#a64892b31b00c006299d47bb71542b765a9cf9c0ad231023d5663cf9fb19993567">start</a> + 1 &lt; <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#a3f34a73605c566ec786c89a18bc076b2">line_dash</a>.size() ? <a class="code hl_enumvalue" href="namespacecanvas__ity.html#a64892b31b00c006299d47bb71542b765a9cf9c0ad231023d5663cf9fb19993567">start</a> + 1 : 0;</div>
<div class="line"><a id="l02130" name="l02130"></a><span class="lineno"> 2130</span>        }</div>
<div class="line"><a id="l02131" name="l02131"></a><span class="lineno"> 2131</span>        <span class="keywordtype">size_t</span> <a class="code hl_enumvalue" href="namespacecanvas__ity.html#a64892b31b00c006299d47bb71542b765ad5800f9a6ff0499528d888aafa6c0d31">ending</a> = 0;</div>
<div class="line"><a id="l02132" name="l02132"></a><span class="lineno"> 2132</span>        <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> subpath = 0; subpath &lt; <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#afaf3d6c584853157fb64bf463648f65c">scratch</a>.<a class="code hl_variable" href="structcanvas__ity_1_1line__path.html#acfec22d114fac137ae0a70af069874d8">subpaths</a>.size(); ++subpath)</div>
<div class="line"><a id="l02133" name="l02133"></a><span class="lineno"> 2133</span>        {</div>
<div class="line"><a id="l02134" name="l02134"></a><span class="lineno"> 2134</span>            <span class="keywordtype">size_t</span> <a class="code hl_enumvalue" href="core_8h.html#a7fc0249f0f8ba720115d2430f5b86cbaa6a992d5529f459a44fee58c733255e86">index</a> = <a class="code hl_enumvalue" href="namespacecanvas__ity.html#a64892b31b00c006299d47bb71542b765ad5800f9a6ff0499528d888aafa6c0d31">ending</a>;</div>
<div class="line"><a id="l02135" name="l02135"></a><span class="lineno"> 2135</span>            <a class="code hl_enumvalue" href="namespacecanvas__ity.html#a64892b31b00c006299d47bb71542b765ad5800f9a6ff0499528d888aafa6c0d31">ending</a> += <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#afaf3d6c584853157fb64bf463648f65c">scratch</a>.<a class="code hl_variable" href="structcanvas__ity_1_1line__path.html#acfec22d114fac137ae0a70af069874d8">subpaths</a>[subpath].count;</div>
<div class="line"><a id="l02136" name="l02136"></a><span class="lineno"> 2136</span>            <span class="keywordtype">size_t</span> <a class="code hl_function" href="namespacedetail.html#a7c8bc5fb5ef4750d192614dd7f0cf396">first</a>         = <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#afd8f9880a251b532bf619b3ea93aff5f">lines</a>.<a class="code hl_variable" href="structcanvas__ity_1_1line__path.html#a27efd4b0dec6d85e4ba861c34bacdbf4">points</a>.size();</div>
<div class="line"><a id="l02137" name="l02137"></a><span class="lineno"> 2137</span>            <span class="keywordtype">size_t</span> segment       = <a class="code hl_enumvalue" href="namespacecanvas__ity.html#a64892b31b00c006299d47bb71542b765a9cf9c0ad231023d5663cf9fb19993567">start</a>;</div>
<div class="line"><a id="l02138" name="l02138"></a><span class="lineno"> 2138</span>            <span class="keywordtype">bool</span>   emit          = ~start &amp; 1;</div>
<div class="line"><a id="l02139" name="l02139"></a><span class="lineno"> 2139</span>            <span class="keywordtype">size_t</span> merge_point   = <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#afd8f9880a251b532bf619b3ea93aff5f">lines</a>.<a class="code hl_variable" href="structcanvas__ity_1_1line__path.html#a27efd4b0dec6d85e4ba861c34bacdbf4">points</a>.size();</div>
<div class="line"><a id="l02140" name="l02140"></a><span class="lineno"> 2140</span>            <span class="keywordtype">size_t</span> merge_subpath = <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#afd8f9880a251b532bf619b3ea93aff5f">lines</a>.<a class="code hl_variable" href="structcanvas__ity_1_1line__path.html#acfec22d114fac137ae0a70af069874d8">subpaths</a>.size();</div>
<div class="line"><a id="l02141" name="l02141"></a><span class="lineno"> 2141</span>            <span class="keywordtype">bool</span>   merge_emit    = emit;</div>
<div class="line"><a id="l02142" name="l02142"></a><span class="lineno"> 2142</span>            <span class="keywordtype">float</span>  next          = <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#a3f34a73605c566ec786c89a18bc076b2">line_dash</a>[<a class="code hl_enumvalue" href="namespacecanvas__ity.html#a64892b31b00c006299d47bb71542b765a9cf9c0ad231023d5663cf9fb19993567">start</a>] - <a class="code hl_define" href="css__properties_8cpp.html#a5dfbcc916693656dd092ddc41ab25747">offset</a>;</div>
<div class="line"><a id="l02143" name="l02143"></a><span class="lineno"> 2143</span>            <span class="keywordflow">for</span> (; <a class="code hl_enumvalue" href="core_8h.html#a7fc0249f0f8ba720115d2430f5b86cbaa6a992d5529f459a44fee58c733255e86">index</a> + 1 &lt; <a class="code hl_enumvalue" href="namespacecanvas__ity.html#a64892b31b00c006299d47bb71542b765ad5800f9a6ff0499528d888aafa6c0d31">ending</a>; ++<a class="code hl_enumvalue" href="core_8h.html#a7fc0249f0f8ba720115d2430f5b86cbaa6a992d5529f459a44fee58c733255e86">index</a>)</div>
<div class="line"><a id="l02144" name="l02144"></a><span class="lineno"> 2144</span>            {</div>
<div class="line"><a id="l02145" name="l02145"></a><span class="lineno"> 2145</span>                xy from = <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#afaf3d6c584853157fb64bf463648f65c">scratch</a>.<a class="code hl_variable" href="structcanvas__ity_1_1line__path.html#a27efd4b0dec6d85e4ba861c34bacdbf4">points</a>[<a class="code hl_enumvalue" href="core_8h.html#a7fc0249f0f8ba720115d2430f5b86cbaa6a992d5529f459a44fee58c733255e86">index</a>];</div>
<div class="line"><a id="l02146" name="l02146"></a><span class="lineno"> 2146</span>                xy to   = <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#afaf3d6c584853157fb64bf463648f65c">scratch</a>.<a class="code hl_variable" href="structcanvas__ity_1_1line__path.html#a27efd4b0dec6d85e4ba861c34bacdbf4">points</a>[<a class="code hl_enumvalue" href="core_8h.html#a7fc0249f0f8ba720115d2430f5b86cbaa6a992d5529f459a44fee58c733255e86">index</a> + 1];</div>
<div class="line"><a id="l02147" name="l02147"></a><span class="lineno"> 2147</span>                <span class="keywordflow">if</span> (emit)</div>
<div class="line"><a id="l02148" name="l02148"></a><span class="lineno"> 2148</span>                    <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#afd8f9880a251b532bf619b3ea93aff5f">lines</a>.<a class="code hl_variable" href="structcanvas__ity_1_1line__path.html#a27efd4b0dec6d85e4ba861c34bacdbf4">points</a>.push_back(from);</div>
<div class="line"><a id="l02149" name="l02149"></a><span class="lineno"> 2149</span>                <span class="keywordtype">float</span> line = length(<a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ade344370cc819a35ed35233e02f09859">inverse</a> * to - <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ade344370cc819a35ed35233e02f09859">inverse</a> * from);</div>
<div class="line"><a id="l02150" name="l02150"></a><span class="lineno"> 2150</span>                <span class="keywordflow">while</span> (next &lt; line)</div>
<div class="line"><a id="l02151" name="l02151"></a><span class="lineno"> 2151</span>                {</div>
<div class="line"><a id="l02152" name="l02152"></a><span class="lineno"> 2152</span>                    <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#afd8f9880a251b532bf619b3ea93aff5f">lines</a>.<a class="code hl_variable" href="structcanvas__ity_1_1line__path.html#a27efd4b0dec6d85e4ba861c34bacdbf4">points</a>.push_back(lerp(from, to, next / line));</div>
<div class="line"><a id="l02153" name="l02153"></a><span class="lineno"> 2153</span>                    <span class="keywordflow">if</span> (emit)</div>
<div class="line"><a id="l02154" name="l02154"></a><span class="lineno"> 2154</span>                    {</div>
<div class="line"><a id="l02155" name="l02155"></a><span class="lineno"> 2155</span>                        subpath_data entry = {</div>
<div class="line"><a id="l02156" name="l02156"></a><span class="lineno"> 2156</span>                            <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#afd8f9880a251b532bf619b3ea93aff5f">lines</a>.<a class="code hl_variable" href="structcanvas__ity_1_1line__path.html#a27efd4b0dec6d85e4ba861c34bacdbf4">points</a>.size() - <a class="code hl_function" href="namespacedetail.html#a7c8bc5fb5ef4750d192614dd7f0cf396">first</a>, <span class="keyword">false</span>};</div>
<div class="line"><a id="l02157" name="l02157"></a><span class="lineno"> 2157</span>                        <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#afd8f9880a251b532bf619b3ea93aff5f">lines</a>.<a class="code hl_variable" href="structcanvas__ity_1_1line__path.html#acfec22d114fac137ae0a70af069874d8">subpaths</a>.push_back(entry);</div>
<div class="line"><a id="l02158" name="l02158"></a><span class="lineno"> 2158</span>                        <a class="code hl_function" href="namespacedetail.html#a7c8bc5fb5ef4750d192614dd7f0cf396">first</a> = <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#afd8f9880a251b532bf619b3ea93aff5f">lines</a>.<a class="code hl_variable" href="structcanvas__ity_1_1line__path.html#a27efd4b0dec6d85e4ba861c34bacdbf4">points</a>.size();</div>
<div class="line"><a id="l02159" name="l02159"></a><span class="lineno"> 2159</span>                    }</div>
<div class="line"><a id="l02160" name="l02160"></a><span class="lineno"> 2160</span>                    segment = segment + 1 &lt; <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#a3f34a73605c566ec786c89a18bc076b2">line_dash</a>.size() ? segment + 1 : 0;</div>
<div class="line"><a id="l02161" name="l02161"></a><span class="lineno"> 2161</span>                    emit    = !emit;</div>
<div class="line"><a id="l02162" name="l02162"></a><span class="lineno"> 2162</span>                    next += <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#a3f34a73605c566ec786c89a18bc076b2">line_dash</a>[segment];</div>
<div class="line"><a id="l02163" name="l02163"></a><span class="lineno"> 2163</span>                }</div>
<div class="line"><a id="l02164" name="l02164"></a><span class="lineno"> 2164</span>                next -= line;</div>
<div class="line"><a id="l02165" name="l02165"></a><span class="lineno"> 2165</span>            }</div>
<div class="line"><a id="l02166" name="l02166"></a><span class="lineno"> 2166</span>            <span class="keywordflow">if</span> (emit)</div>
<div class="line"><a id="l02167" name="l02167"></a><span class="lineno"> 2167</span>            {</div>
<div class="line"><a id="l02168" name="l02168"></a><span class="lineno"> 2168</span>                <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#afd8f9880a251b532bf619b3ea93aff5f">lines</a>.<a class="code hl_variable" href="structcanvas__ity_1_1line__path.html#a27efd4b0dec6d85e4ba861c34bacdbf4">points</a>.push_back(<a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#afaf3d6c584853157fb64bf463648f65c">scratch</a>.<a class="code hl_variable" href="structcanvas__ity_1_1line__path.html#a27efd4b0dec6d85e4ba861c34bacdbf4">points</a>[<a class="code hl_enumvalue" href="core_8h.html#a7fc0249f0f8ba720115d2430f5b86cbaa6a992d5529f459a44fee58c733255e86">index</a>]);</div>
<div class="line"><a id="l02169" name="l02169"></a><span class="lineno"> 2169</span>                subpath_data entry = {<a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#afd8f9880a251b532bf619b3ea93aff5f">lines</a>.<a class="code hl_variable" href="structcanvas__ity_1_1line__path.html#a27efd4b0dec6d85e4ba861c34bacdbf4">points</a>.size() - <a class="code hl_function" href="namespacedetail.html#a7c8bc5fb5ef4750d192614dd7f0cf396">first</a>, <span class="keyword">false</span>};</div>
<div class="line"><a id="l02170" name="l02170"></a><span class="lineno"> 2170</span>                <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#afd8f9880a251b532bf619b3ea93aff5f">lines</a>.<a class="code hl_variable" href="structcanvas__ity_1_1line__path.html#acfec22d114fac137ae0a70af069874d8">subpaths</a>.push_back(entry);</div>
<div class="line"><a id="l02171" name="l02171"></a><span class="lineno"> 2171</span>                <span class="keywordflow">if</span> (<a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#afaf3d6c584853157fb64bf463648f65c">scratch</a>.<a class="code hl_variable" href="structcanvas__ity_1_1line__path.html#acfec22d114fac137ae0a70af069874d8">subpaths</a>[subpath].closed &amp;&amp; merge_emit)</div>
<div class="line"><a id="l02172" name="l02172"></a><span class="lineno"> 2172</span>                {</div>
<div class="line"><a id="l02173" name="l02173"></a><span class="lineno"> 2173</span>                    <span class="keywordflow">if</span> (<a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#afd8f9880a251b532bf619b3ea93aff5f">lines</a>.<a class="code hl_variable" href="structcanvas__ity_1_1line__path.html#acfec22d114fac137ae0a70af069874d8">subpaths</a>.size() == merge_subpath + 1)</div>
<div class="line"><a id="l02174" name="l02174"></a><span class="lineno"> 2174</span>                        <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#afd8f9880a251b532bf619b3ea93aff5f">lines</a>.<a class="code hl_variable" href="structcanvas__ity_1_1line__path.html#acfec22d114fac137ae0a70af069874d8">subpaths</a>.back().closed = <span class="keyword">true</span>;</div>
<div class="line"><a id="l02175" name="l02175"></a><span class="lineno"> 2175</span>                    <span class="keywordflow">else</span></div>
<div class="line"><a id="l02176" name="l02176"></a><span class="lineno"> 2176</span>                    {</div>
<div class="line"><a id="l02177" name="l02177"></a><span class="lineno"> 2177</span>                        <span class="keywordtype">size_t</span> <a class="code hl_function" href="core_8h.html#a501bb1bb2f0cc5706178ed237958e73b">count</a> = <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#afd8f9880a251b532bf619b3ea93aff5f">lines</a>.<a class="code hl_variable" href="structcanvas__ity_1_1line__path.html#acfec22d114fac137ae0a70af069874d8">subpaths</a>.back().count;</div>
<div class="line"><a id="l02178" name="l02178"></a><span class="lineno"> 2178</span>                        std::rotate((<a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#afd8f9880a251b532bf619b3ea93aff5f">lines</a>.<a class="code hl_variable" href="structcanvas__ity_1_1line__path.html#a27efd4b0dec6d85e4ba861c34bacdbf4">points</a>.begin() +</div>
<div class="line"><a id="l02179" name="l02179"></a><span class="lineno"> 2179</span>                                     <span class="keyword">static_cast&lt;</span>ptrdiff_t<span class="keyword">&gt;</span>(merge_point)),</div>
<div class="line"><a id="l02180" name="l02180"></a><span class="lineno"> 2180</span>                                    (<a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#afd8f9880a251b532bf619b3ea93aff5f">lines</a>.<a class="code hl_variable" href="structcanvas__ity_1_1line__path.html#a27efd4b0dec6d85e4ba861c34bacdbf4">points</a>.end() -</div>
<div class="line"><a id="l02181" name="l02181"></a><span class="lineno"> 2181</span>                                     <span class="keyword">static_cast&lt;</span>ptrdiff_t<span class="keyword">&gt;</span>(<a class="code hl_function" href="core_8h.html#a501bb1bb2f0cc5706178ed237958e73b">count</a>)),</div>
<div class="line"><a id="l02182" name="l02182"></a><span class="lineno"> 2182</span>                                    <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#afd8f9880a251b532bf619b3ea93aff5f">lines</a>.<a class="code hl_variable" href="structcanvas__ity_1_1line__path.html#a27efd4b0dec6d85e4ba861c34bacdbf4">points</a>.end());</div>
<div class="line"><a id="l02183" name="l02183"></a><span class="lineno"> 2183</span>                        <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#afd8f9880a251b532bf619b3ea93aff5f">lines</a>.<a class="code hl_variable" href="structcanvas__ity_1_1line__path.html#acfec22d114fac137ae0a70af069874d8">subpaths</a>[merge_subpath].count += <a class="code hl_function" href="core_8h.html#a501bb1bb2f0cc5706178ed237958e73b">count</a>;</div>
<div class="line"><a id="l02184" name="l02184"></a><span class="lineno"> 2184</span>                        <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#afd8f9880a251b532bf619b3ea93aff5f">lines</a>.<a class="code hl_variable" href="structcanvas__ity_1_1line__path.html#acfec22d114fac137ae0a70af069874d8">subpaths</a>.pop_back();</div>
<div class="line"><a id="l02185" name="l02185"></a><span class="lineno"> 2185</span>                    }</div>
<div class="line"><a id="l02186" name="l02186"></a><span class="lineno"> 2186</span>                }</div>
<div class="line"><a id="l02187" name="l02187"></a><span class="lineno"> 2187</span>            }</div>
<div class="line"><a id="l02188" name="l02188"></a><span class="lineno"> 2188</span>        }</div>
<div class="line"><a id="l02189" name="l02189"></a><span class="lineno"> 2189</span>    }</div>
<div class="line"><a id="l02190" name="l02190"></a><span class="lineno"> 2190</span> </div>
<div class="line"><a id="l02191" name="l02191"></a><span class="lineno"> 2191</span>    <span class="comment">// Trace along a series of points from a subpath in the scratch polylines</span></div>
<div class="line"><a id="l02192" name="l02192"></a><span class="lineno"> 2192</span>    <span class="comment">// and add new points to the main polylines with the stroke expansion on</span></div>
<div class="line"><a id="l02193" name="l02193"></a><span class="lineno"> 2193</span>    <span class="comment">// one side.  Calling this again with the ends reversed adds the other</span></div>
<div class="line"><a id="l02194" name="l02194"></a><span class="lineno"> 2194</span>    <span class="comment">// half of the stroke.  If the original subpath was closed, each pass</span></div>
<div class="line"><a id="l02195" name="l02195"></a><span class="lineno"> 2195</span>    <span class="comment">// adds a complete closed loop, with one adding the inside and one adding</span></div>
<div class="line"><a id="l02196" name="l02196"></a><span class="lineno"> 2196</span>    <span class="comment">// the outside.  The two will wind in opposite directions.  If the original</span></div>
<div class="line"><a id="l02197" name="l02197"></a><span class="lineno"> 2197</span>    <span class="comment">// subpath was open, each pass ends with one of the line caps and the two</span></div>
<div class="line"><a id="l02198" name="l02198"></a><span class="lineno"> 2198</span>    <span class="comment">// passes together form a single closed loop.  In either case, this handles</span></div>
<div class="line"><a id="l02199" name="l02199"></a><span class="lineno"> 2199</span>    <span class="comment">// adding line joins, including inner joins.  Care is taken to fill tight</span></div>
<div class="line"><a id="l02200" name="l02200"></a><span class="lineno"> 2200</span>    <span class="comment">// inside turns correctly by adding additional windings.  See Figure 10 of</span></div>
<div class="line"><a id="l02201" name="l02201"></a><span class="lineno"> 2201</span>    <span class="comment">// &quot;Converting Stroked Primitives to Filled Primitives&quot; by Diego Nehab, for</span></div>
<div class="line"><a id="l02202" name="l02202"></a><span class="lineno"> 2202</span>    <span class="comment">// the inspiration for these extra windings.</span></div>
<div class="line"><a id="l02203" name="l02203"></a><span class="lineno"> 2203</span>    <span class="comment">//</span></div>
<div class="line"><a id="l02204" name="l02204"></a><span class="lineno"> 2204</span>    <span class="keywordtype">void</span> <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#aab6951705e9efb55d545239161de8f01">canvas::add_half_stroke</a>(</div>
<div class="line"><a id="l02205" name="l02205"></a><span class="lineno"> 2205</span>        <span class="keywordtype">size_t</span> beginning,</div>
<div class="line"><a id="l02206" name="l02206"></a><span class="lineno"> 2206</span>        <span class="keywordtype">size_t</span> <a class="code hl_enumvalue" href="namespacecanvas__ity.html#a64892b31b00c006299d47bb71542b765ad5800f9a6ff0499528d888aafa6c0d31">ending</a>,</div>
<div class="line"><a id="l02207" name="l02207"></a><span class="lineno"> 2207</span>        <span class="keywordtype">bool</span>   closed)</div>
<div class="line"><a id="l02208" name="l02208"></a><span class="lineno"> 2208</span>    {</div>
<div class="line"><a id="l02209" name="l02209"></a><span class="lineno"> 2209</span>        <span class="keywordtype">float</span>  half         = <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#a9928b93ce97d8ec8fbfa6c450edbc96c">line_width</a> * 0.5f;</div>
<div class="line"><a id="l02210" name="l02210"></a><span class="lineno"> 2210</span>        <span class="keywordtype">float</span>  ratio        = <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#a374c2313aab5ee0c35d0a747bbfb3f88">miter_limit</a> * <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#a374c2313aab5ee0c35d0a747bbfb3f88">miter_limit</a> * half * half;</div>
<div class="line"><a id="l02211" name="l02211"></a><span class="lineno"> 2211</span>        xy     in_direction = xy(0.0f, 0.0f);</div>
<div class="line"><a id="l02212" name="l02212"></a><span class="lineno"> 2212</span>        <span class="keywordtype">float</span>  in_length    = 0.0f;</div>
<div class="line"><a id="l02213" name="l02213"></a><span class="lineno"> 2213</span>        xy     point        = <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ade344370cc819a35ed35233e02f09859">inverse</a> * <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#afaf3d6c584853157fb64bf463648f65c">scratch</a>.<a class="code hl_variable" href="structcanvas__ity_1_1line__path.html#a27efd4b0dec6d85e4ba861c34bacdbf4">points</a>[beginning];</div>
<div class="line"><a id="l02214" name="l02214"></a><span class="lineno"> 2214</span>        <span class="keywordtype">size_t</span> finish       = beginning;</div>
<div class="line"><a id="l02215" name="l02215"></a><span class="lineno"> 2215</span>        <span class="keywordtype">size_t</span> <a class="code hl_enumvalue" href="core_8h.html#a7fc0249f0f8ba720115d2430f5b86cbaa6a992d5529f459a44fee58c733255e86">index</a>        = beginning;</div>
<div class="line"><a id="l02216" name="l02216"></a><span class="lineno"> 2216</span>        <span class="keywordflow">do</span></div>
<div class="line"><a id="l02217" name="l02217"></a><span class="lineno"> 2217</span>        {</div>
<div class="line"><a id="l02218" name="l02218"></a><span class="lineno"> 2218</span>            xy                 next          = <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ade344370cc819a35ed35233e02f09859">inverse</a> * <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#afaf3d6c584853157fb64bf463648f65c">scratch</a>.<a class="code hl_variable" href="structcanvas__ity_1_1line__path.html#a27efd4b0dec6d85e4ba861c34bacdbf4">points</a>[<a class="code hl_enumvalue" href="core_8h.html#a7fc0249f0f8ba720115d2430f5b86cbaa6a992d5529f459a44fee58c733255e86">index</a>];</div>
<div class="line"><a id="l02219" name="l02219"></a><span class="lineno"> 2219</span>            xy                 out_direction = normalized(next - point);</div>
<div class="line"><a id="l02220" name="l02220"></a><span class="lineno"> 2220</span>            <span class="keywordtype">float</span>              out_length    = length(next - point);</div>
<div class="line"><a id="l02221" name="l02221"></a><span class="lineno"> 2221</span>            <span class="keyword">static</span> <span class="keywordtype">float</span> <span class="keyword">const</span> epsilon       = 1.0e-4f;</div>
<div class="line"><a id="l02222" name="l02222"></a><span class="lineno"> 2222</span>            <span class="keywordflow">if</span> (in_length != 0.0f &amp;&amp; out_length &gt;= epsilon)</div>
<div class="line"><a id="l02223" name="l02223"></a><span class="lineno"> 2223</span>            {</div>
<div class="line"><a id="l02224" name="l02224"></a><span class="lineno"> 2224</span>                <span class="keywordflow">if</span> (closed &amp;&amp; finish == beginning)</div>
<div class="line"><a id="l02225" name="l02225"></a><span class="lineno"> 2225</span>                    finish = <a class="code hl_enumvalue" href="core_8h.html#a7fc0249f0f8ba720115d2430f5b86cbaa6a992d5529f459a44fee58c733255e86">index</a>;</div>
<div class="line"><a id="l02226" name="l02226"></a><span class="lineno"> 2226</span>                xy    side_in  = point + half * perpendicular(in_direction);</div>
<div class="line"><a id="l02227" name="l02227"></a><span class="lineno"> 2227</span>                xy    side_out = point + half * perpendicular(out_direction);</div>
<div class="line"><a id="l02228" name="l02228"></a><span class="lineno"> 2228</span>                <span class="keywordtype">float</span> turn     = dot(perpendicular(in_direction), out_direction);</div>
<div class="line"><a id="l02229" name="l02229"></a><span class="lineno"> 2229</span>                <span class="keywordflow">if</span> (fabsf(turn) &lt; epsilon)</div>
<div class="line"><a id="l02230" name="l02230"></a><span class="lineno"> 2230</span>                    turn = 0.0f;</div>
<div class="line"><a id="l02231" name="l02231"></a><span class="lineno"> 2231</span>                xy   <a class="code hl_define" href="css__properties_8cpp.html#a5dfbcc916693656dd092ddc41ab25747">offset</a> = turn == 0.0f ? xy(0.0f, 0.0f) : half / turn * (out_direction - in_direction);</div>
<div class="line"><a id="l02232" name="l02232"></a><span class="lineno"> 2232</span>                <span class="keywordtype">bool</span> tight  = (dot(<a class="code hl_define" href="css__properties_8cpp.html#a5dfbcc916693656dd092ddc41ab25747">offset</a>, in_direction) &lt; -in_length &amp;&amp;</div>
<div class="line"><a id="l02233" name="l02233"></a><span class="lineno"> 2233</span>                               dot(<a class="code hl_define" href="css__properties_8cpp.html#a5dfbcc916693656dd092ddc41ab25747">offset</a>, out_direction) &gt; out_length);</div>
<div class="line"><a id="l02234" name="l02234"></a><span class="lineno"> 2234</span>                <span class="keywordflow">if</span> (turn &gt; 0.0f &amp;&amp; tight)</div>
<div class="line"><a id="l02235" name="l02235"></a><span class="lineno"> 2235</span>                {</div>
<div class="line"><a id="l02236" name="l02236"></a><span class="lineno"> 2236</span>                    std::swap(side_in, side_out);</div>
<div class="line"><a id="l02237" name="l02237"></a><span class="lineno"> 2237</span>                    std::swap(in_direction, out_direction);</div>
<div class="line"><a id="l02238" name="l02238"></a><span class="lineno"> 2238</span>                    <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#afd8f9880a251b532bf619b3ea93aff5f">lines</a>.<a class="code hl_variable" href="structcanvas__ity_1_1line__path.html#a27efd4b0dec6d85e4ba861c34bacdbf4">points</a>.push_back(<a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ac5da3224f86f284b4ac7efbde3942e27">forward</a> * side_out);</div>
<div class="line"><a id="l02239" name="l02239"></a><span class="lineno"> 2239</span>                    <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#afd8f9880a251b532bf619b3ea93aff5f">lines</a>.<a class="code hl_variable" href="structcanvas__ity_1_1line__path.html#a27efd4b0dec6d85e4ba861c34bacdbf4">points</a>.push_back(<a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ac5da3224f86f284b4ac7efbde3942e27">forward</a> * point);</div>
<div class="line"><a id="l02240" name="l02240"></a><span class="lineno"> 2240</span>                    <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#afd8f9880a251b532bf619b3ea93aff5f">lines</a>.<a class="code hl_variable" href="structcanvas__ity_1_1line__path.html#a27efd4b0dec6d85e4ba861c34bacdbf4">points</a>.push_back(<a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ac5da3224f86f284b4ac7efbde3942e27">forward</a> * side_in);</div>
<div class="line"><a id="l02241" name="l02241"></a><span class="lineno"> 2241</span>                }</div>
<div class="line"><a id="l02242" name="l02242"></a><span class="lineno"> 2242</span>                <span class="keywordflow">if</span> ((turn &gt; 0.0f &amp;&amp; !tight) ||</div>
<div class="line"><a id="l02243" name="l02243"></a><span class="lineno"> 2243</span>                    (turn != 0.0f &amp;&amp; <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#a9bab8e895dc0a3d6592452124288050d">line_join</a> == <a class="code hl_enumvalue" href="namespacecanvas__ity.html#ac351ff9340ea3c0b196f8788ddfa0f1aa10b6beb5c0a396ea09bbac8b03c9e696">miter</a> &amp;&amp;</div>
<div class="line"><a id="l02244" name="l02244"></a><span class="lineno"> 2244</span>                     dot(<a class="code hl_define" href="css__properties_8cpp.html#a5dfbcc916693656dd092ddc41ab25747">offset</a>, <a class="code hl_define" href="css__properties_8cpp.html#a5dfbcc916693656dd092ddc41ab25747">offset</a>) &lt;= ratio))</div>
<div class="line"><a id="l02245" name="l02245"></a><span class="lineno"> 2245</span>                    <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#afd8f9880a251b532bf619b3ea93aff5f">lines</a>.<a class="code hl_variable" href="structcanvas__ity_1_1line__path.html#a27efd4b0dec6d85e4ba861c34bacdbf4">points</a>.push_back(<a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ac5da3224f86f284b4ac7efbde3942e27">forward</a> * (point + <a class="code hl_define" href="css__properties_8cpp.html#a5dfbcc916693656dd092ddc41ab25747">offset</a>));</div>
<div class="line"><a id="l02246" name="l02246"></a><span class="lineno"> 2246</span>                <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#a9bab8e895dc0a3d6592452124288050d">line_join</a> == <a class="code hl_enumvalue" href="namespacecanvas__ity.html#ac351ff9340ea3c0b196f8788ddfa0f1aa50e8eb43e66a9878174a8cf7c3557a34">rounded</a>)</div>
<div class="line"><a id="l02247" name="l02247"></a><span class="lineno"> 2247</span>                {</div>
<div class="line"><a id="l02248" name="l02248"></a><span class="lineno"> 2248</span>                    <span class="keywordtype">float</span> cosine = dot(in_direction, out_direction);</div>
<div class="line"><a id="l02249" name="l02249"></a><span class="lineno"> 2249</span>                    <span class="keywordtype">float</span> angle  = acosf(</div>
<div class="line"><a id="l02250" name="l02250"></a><span class="lineno"> 2250</span>                         std::min(std::max(cosine, -1.0f), 1.0f));</div>
<div class="line"><a id="l02251" name="l02251"></a><span class="lineno"> 2251</span>                    <span class="keywordtype">float</span> alpha = 4.0f / 3.0f * tanf(0.25f * angle);</div>
<div class="line"><a id="l02252" name="l02252"></a><span class="lineno"> 2252</span>                    <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#afd8f9880a251b532bf619b3ea93aff5f">lines</a>.<a class="code hl_variable" href="structcanvas__ity_1_1line__path.html#a27efd4b0dec6d85e4ba861c34bacdbf4">points</a>.push_back(<a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ac5da3224f86f284b4ac7efbde3942e27">forward</a> * side_in);</div>
<div class="line"><a id="l02253" name="l02253"></a><span class="lineno"> 2253</span>                    <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#a5959c046fdd90657075cb68e24c6e3ae">add_bezier</a>(</div>
<div class="line"><a id="l02254" name="l02254"></a><span class="lineno"> 2254</span>                        <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ac5da3224f86f284b4ac7efbde3942e27">forward</a> * side_in,</div>
<div class="line"><a id="l02255" name="l02255"></a><span class="lineno"> 2255</span>                        <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ac5da3224f86f284b4ac7efbde3942e27">forward</a> * (side_in + alpha * half * in_direction),</div>
<div class="line"><a id="l02256" name="l02256"></a><span class="lineno"> 2256</span>                        <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ac5da3224f86f284b4ac7efbde3942e27">forward</a> * (side_out - alpha * half * out_direction),</div>
<div class="line"><a id="l02257" name="l02257"></a><span class="lineno"> 2257</span>                        <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ac5da3224f86f284b4ac7efbde3942e27">forward</a> * side_out,</div>
<div class="line"><a id="l02258" name="l02258"></a><span class="lineno"> 2258</span>                        -1.0f);</div>
<div class="line"><a id="l02259" name="l02259"></a><span class="lineno"> 2259</span>                }</div>
<div class="line"><a id="l02260" name="l02260"></a><span class="lineno"> 2260</span>                <span class="keywordflow">else</span></div>
<div class="line"><a id="l02261" name="l02261"></a><span class="lineno"> 2261</span>                {</div>
<div class="line"><a id="l02262" name="l02262"></a><span class="lineno"> 2262</span>                    <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#afd8f9880a251b532bf619b3ea93aff5f">lines</a>.<a class="code hl_variable" href="structcanvas__ity_1_1line__path.html#a27efd4b0dec6d85e4ba861c34bacdbf4">points</a>.push_back(<a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ac5da3224f86f284b4ac7efbde3942e27">forward</a> * side_in);</div>
<div class="line"><a id="l02263" name="l02263"></a><span class="lineno"> 2263</span>                    <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#afd8f9880a251b532bf619b3ea93aff5f">lines</a>.<a class="code hl_variable" href="structcanvas__ity_1_1line__path.html#a27efd4b0dec6d85e4ba861c34bacdbf4">points</a>.push_back(<a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ac5da3224f86f284b4ac7efbde3942e27">forward</a> * side_out);</div>
<div class="line"><a id="l02264" name="l02264"></a><span class="lineno"> 2264</span>                }</div>
<div class="line"><a id="l02265" name="l02265"></a><span class="lineno"> 2265</span>                <span class="keywordflow">if</span> (turn &gt; 0.0f &amp;&amp; tight)</div>
<div class="line"><a id="l02266" name="l02266"></a><span class="lineno"> 2266</span>                {</div>
<div class="line"><a id="l02267" name="l02267"></a><span class="lineno"> 2267</span>                    <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#afd8f9880a251b532bf619b3ea93aff5f">lines</a>.<a class="code hl_variable" href="structcanvas__ity_1_1line__path.html#a27efd4b0dec6d85e4ba861c34bacdbf4">points</a>.push_back(<a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ac5da3224f86f284b4ac7efbde3942e27">forward</a> * side_out);</div>
<div class="line"><a id="l02268" name="l02268"></a><span class="lineno"> 2268</span>                    <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#afd8f9880a251b532bf619b3ea93aff5f">lines</a>.<a class="code hl_variable" href="structcanvas__ity_1_1line__path.html#a27efd4b0dec6d85e4ba861c34bacdbf4">points</a>.push_back(<a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ac5da3224f86f284b4ac7efbde3942e27">forward</a> * point);</div>
<div class="line"><a id="l02269" name="l02269"></a><span class="lineno"> 2269</span>                    <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#afd8f9880a251b532bf619b3ea93aff5f">lines</a>.<a class="code hl_variable" href="structcanvas__ity_1_1line__path.html#a27efd4b0dec6d85e4ba861c34bacdbf4">points</a>.push_back(<a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ac5da3224f86f284b4ac7efbde3942e27">forward</a> * side_in);</div>
<div class="line"><a id="l02270" name="l02270"></a><span class="lineno"> 2270</span>                    std::swap(in_direction, out_direction);</div>
<div class="line"><a id="l02271" name="l02271"></a><span class="lineno"> 2271</span>                }</div>
<div class="line"><a id="l02272" name="l02272"></a><span class="lineno"> 2272</span>            }</div>
<div class="line"><a id="l02273" name="l02273"></a><span class="lineno"> 2273</span>            <span class="keywordflow">if</span> (out_length &gt;= epsilon)</div>
<div class="line"><a id="l02274" name="l02274"></a><span class="lineno"> 2274</span>            {</div>
<div class="line"><a id="l02275" name="l02275"></a><span class="lineno"> 2275</span>                in_direction = out_direction;</div>
<div class="line"><a id="l02276" name="l02276"></a><span class="lineno"> 2276</span>                in_length    = out_length;</div>
<div class="line"><a id="l02277" name="l02277"></a><span class="lineno"> 2277</span>                point        = next;</div>
<div class="line"><a id="l02278" name="l02278"></a><span class="lineno"> 2278</span>            }</div>
<div class="line"><a id="l02279" name="l02279"></a><span class="lineno"> 2279</span>            <a class="code hl_enumvalue" href="core_8h.html#a7fc0249f0f8ba720115d2430f5b86cbaa6a992d5529f459a44fee58c733255e86">index</a> = (<a class="code hl_enumvalue" href="core_8h.html#a7fc0249f0f8ba720115d2430f5b86cbaa6a992d5529f459a44fee58c733255e86">index</a> == <a class="code hl_enumvalue" href="namespacecanvas__ity.html#a64892b31b00c006299d47bb71542b765ad5800f9a6ff0499528d888aafa6c0d31">ending</a> ? beginning : <a class="code hl_enumvalue" href="namespacecanvas__ity.html#a64892b31b00c006299d47bb71542b765ad5800f9a6ff0499528d888aafa6c0d31">ending</a> &gt; beginning ? <a class="code hl_enumvalue" href="core_8h.html#a7fc0249f0f8ba720115d2430f5b86cbaa6a992d5529f459a44fee58c733255e86">index</a> + 1</div>
<div class="line"><a id="l02280" name="l02280"></a><span class="lineno"> 2280</span>                                                                      : <a class="code hl_enumvalue" href="core_8h.html#a7fc0249f0f8ba720115d2430f5b86cbaa6a992d5529f459a44fee58c733255e86">index</a> - 1);</div>
<div class="line"><a id="l02281" name="l02281"></a><span class="lineno"> 2281</span>        } <span class="keywordflow">while</span> (<a class="code hl_enumvalue" href="core_8h.html#a7fc0249f0f8ba720115d2430f5b86cbaa6a992d5529f459a44fee58c733255e86">index</a> != finish);</div>
<div class="line"><a id="l02282" name="l02282"></a><span class="lineno"> 2282</span>        <span class="keywordflow">if</span> (closed || in_length == 0.0f)</div>
<div class="line"><a id="l02283" name="l02283"></a><span class="lineno"> 2283</span>            <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l02284" name="l02284"></a><span class="lineno"> 2284</span>        xy ahead = half * in_direction;</div>
<div class="line"><a id="l02285" name="l02285"></a><span class="lineno"> 2285</span>        xy side  = perpendicular(ahead);</div>
<div class="line"><a id="l02286" name="l02286"></a><span class="lineno"> 2286</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#a3d9bb3308af32fca293d3e6be3092b85">line_cap</a> == <a class="code hl_enumvalue" href="namespacecanvas__ity.html#ac31761ebfc503cc7b7e5a9d359fa4431aed96d21acb9c340b362bbb6e414fac7a">butt</a>)</div>
<div class="line"><a id="l02287" name="l02287"></a><span class="lineno"> 2287</span>        {</div>
<div class="line"><a id="l02288" name="l02288"></a><span class="lineno"> 2288</span>            <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#afd8f9880a251b532bf619b3ea93aff5f">lines</a>.<a class="code hl_variable" href="structcanvas__ity_1_1line__path.html#a27efd4b0dec6d85e4ba861c34bacdbf4">points</a>.push_back(<a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ac5da3224f86f284b4ac7efbde3942e27">forward</a> * (point + side));</div>
<div class="line"><a id="l02289" name="l02289"></a><span class="lineno"> 2289</span>            <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#afd8f9880a251b532bf619b3ea93aff5f">lines</a>.<a class="code hl_variable" href="structcanvas__ity_1_1line__path.html#a27efd4b0dec6d85e4ba861c34bacdbf4">points</a>.push_back(<a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ac5da3224f86f284b4ac7efbde3942e27">forward</a> * (point - side));</div>
<div class="line"><a id="l02290" name="l02290"></a><span class="lineno"> 2290</span>        }</div>
<div class="line"><a id="l02291" name="l02291"></a><span class="lineno"> 2291</span>        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#a3d9bb3308af32fca293d3e6be3092b85">line_cap</a> == <a class="code hl_enumvalue" href="namespacecanvas__ity.html#ac31761ebfc503cc7b7e5a9d359fa4431a78585210f45e24334663fc46ac0c576f">square</a>)</div>
<div class="line"><a id="l02292" name="l02292"></a><span class="lineno"> 2292</span>        {</div>
<div class="line"><a id="l02293" name="l02293"></a><span class="lineno"> 2293</span>            <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#afd8f9880a251b532bf619b3ea93aff5f">lines</a>.<a class="code hl_variable" href="structcanvas__ity_1_1line__path.html#a27efd4b0dec6d85e4ba861c34bacdbf4">points</a>.push_back(<a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ac5da3224f86f284b4ac7efbde3942e27">forward</a> * (point + ahead + side));</div>
<div class="line"><a id="l02294" name="l02294"></a><span class="lineno"> 2294</span>            <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#afd8f9880a251b532bf619b3ea93aff5f">lines</a>.<a class="code hl_variable" href="structcanvas__ity_1_1line__path.html#a27efd4b0dec6d85e4ba861c34bacdbf4">points</a>.push_back(<a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ac5da3224f86f284b4ac7efbde3942e27">forward</a> * (point + ahead - side));</div>
<div class="line"><a id="l02295" name="l02295"></a><span class="lineno"> 2295</span>        }</div>
<div class="line"><a id="l02296" name="l02296"></a><span class="lineno"> 2296</span>        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#a3d9bb3308af32fca293d3e6be3092b85">line_cap</a> == <a class="code hl_enumvalue" href="namespacecanvas__ity.html#ac31761ebfc503cc7b7e5a9d359fa4431a949e82fed800d1871e0e5d7426b62277">circle</a>)</div>
<div class="line"><a id="l02297" name="l02297"></a><span class="lineno"> 2297</span>        {</div>
<div class="line"><a id="l02298" name="l02298"></a><span class="lineno"> 2298</span>            <span class="keyword">static</span> <span class="keywordtype">float</span> <span class="keyword">const</span> alpha = 0.55228475f; <span class="comment">// 4/3*tan(pi/8)</span></div>
<div class="line"><a id="l02299" name="l02299"></a><span class="lineno"> 2299</span>            <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#afd8f9880a251b532bf619b3ea93aff5f">lines</a>.<a class="code hl_variable" href="structcanvas__ity_1_1line__path.html#a27efd4b0dec6d85e4ba861c34bacdbf4">points</a>.push_back(<a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ac5da3224f86f284b4ac7efbde3942e27">forward</a> * (point + side));</div>
<div class="line"><a id="l02300" name="l02300"></a><span class="lineno"> 2300</span>            <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#a5959c046fdd90657075cb68e24c6e3ae">add_bezier</a>(<a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ac5da3224f86f284b4ac7efbde3942e27">forward</a> * (point + side),</div>
<div class="line"><a id="l02301" name="l02301"></a><span class="lineno"> 2301</span>                       <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ac5da3224f86f284b4ac7efbde3942e27">forward</a> * (point + side + alpha * ahead),</div>
<div class="line"><a id="l02302" name="l02302"></a><span class="lineno"> 2302</span>                       <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ac5da3224f86f284b4ac7efbde3942e27">forward</a> * (point + ahead + alpha * side),</div>
<div class="line"><a id="l02303" name="l02303"></a><span class="lineno"> 2303</span>                       <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ac5da3224f86f284b4ac7efbde3942e27">forward</a> * (point + ahead),</div>
<div class="line"><a id="l02304" name="l02304"></a><span class="lineno"> 2304</span>                       -1.0f);</div>
<div class="line"><a id="l02305" name="l02305"></a><span class="lineno"> 2305</span>            <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#a5959c046fdd90657075cb68e24c6e3ae">add_bezier</a>(<a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ac5da3224f86f284b4ac7efbde3942e27">forward</a> * (point + ahead),</div>
<div class="line"><a id="l02306" name="l02306"></a><span class="lineno"> 2306</span>                       <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ac5da3224f86f284b4ac7efbde3942e27">forward</a> * (point + ahead - alpha * side),</div>
<div class="line"><a id="l02307" name="l02307"></a><span class="lineno"> 2307</span>                       <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ac5da3224f86f284b4ac7efbde3942e27">forward</a> * (point - side + alpha * ahead),</div>
<div class="line"><a id="l02308" name="l02308"></a><span class="lineno"> 2308</span>                       <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ac5da3224f86f284b4ac7efbde3942e27">forward</a> * (point - side),</div>
<div class="line"><a id="l02309" name="l02309"></a><span class="lineno"> 2309</span>                       -1.0f);</div>
<div class="line"><a id="l02310" name="l02310"></a><span class="lineno"> 2310</span>        }</div>
<div class="line"><a id="l02311" name="l02311"></a><span class="lineno"> 2311</span>    }</div>
<div class="line"><a id="l02312" name="l02312"></a><span class="lineno"> 2312</span> </div>
<div class="line"><a id="l02313" name="l02313"></a><span class="lineno"> 2313</span>    <span class="comment">// Perform stroke expansion on the polylines.  After first breaking them up</span></div>
<div class="line"><a id="l02314" name="l02314"></a><span class="lineno"> 2314</span>    <span class="comment">// according to the dash pattern (if any), it then moves the polyline data to</span></div>
<div class="line"><a id="l02315" name="l02315"></a><span class="lineno"> 2315</span>    <span class="comment">// the scratch space.  Each subpath is then traced both forwards and backwards</span></div>
<div class="line"><a id="l02316" name="l02316"></a><span class="lineno"> 2316</span>    <span class="comment">// to add the points for a half stroke, which together create the points for</span></div>
<div class="line"><a id="l02317" name="l02317"></a><span class="lineno"> 2317</span>    <span class="comment">// one (if the original subpath was open) or two (if it was closed) new closed</span></div>
<div class="line"><a id="l02318" name="l02318"></a><span class="lineno"> 2318</span>    <span class="comment">// subpaths which, when filled, will draw the stroked lines.  While the lower</span></div>
<div class="line"><a id="l02319" name="l02319"></a><span class="lineno"> 2319</span>    <span class="comment">// level code this calls only adds the points of the half strokes, this</span></div>
<div class="line"><a id="l02320" name="l02320"></a><span class="lineno"> 2320</span>    <span class="comment">// adds subpath information for the strokes.  This replaces the previous</span></div>
<div class="line"><a id="l02321" name="l02321"></a><span class="lineno"> 2321</span>    <span class="comment">// polyline data.</span></div>
<div class="line"><a id="l02322" name="l02322"></a><span class="lineno"> 2322</span>    <span class="comment">//</span></div>
<div class="line"><a id="l02323" name="l02323"></a><span class="lineno"> 2323</span>    <span class="keywordtype">void</span> <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#ade2814d673a6a799438a54f85040ef95">canvas::stroke_lines</a>()</div>
<div class="line"><a id="l02324" name="l02324"></a><span class="lineno"> 2324</span>    {</div>
<div class="line"><a id="l02325" name="l02325"></a><span class="lineno"> 2325</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ac5da3224f86f284b4ac7efbde3942e27">forward</a>.<a class="code hl_variable" href="structcanvas__ity_1_1affine__matrix.html#a06279a73c160cc47458ff2f08f25b566">a</a> * <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ac5da3224f86f284b4ac7efbde3942e27">forward</a>.<a class="code hl_variable" href="structcanvas__ity_1_1affine__matrix.html#ac8fa9558e05f63f452296d1ef2aba39a">d</a> - <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ac5da3224f86f284b4ac7efbde3942e27">forward</a>.<a class="code hl_variable" href="structcanvas__ity_1_1affine__matrix.html#a3abbeddf9bbf1b7c7d81c2b0339c4123">b</a> * <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ac5da3224f86f284b4ac7efbde3942e27">forward</a>.<a class="code hl_variable" href="structcanvas__ity_1_1affine__matrix.html#ae34446b5fed7e778e2a62a436e47f12e">c</a> == 0.0f)</div>
<div class="line"><a id="l02326" name="l02326"></a><span class="lineno"> 2326</span>            <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l02327" name="l02327"></a><span class="lineno"> 2327</span>        <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#aa32bb49090a1a1b75ea808488bfc309b">dash_lines</a>();</div>
<div class="line"><a id="l02328" name="l02328"></a><span class="lineno"> 2328</span>        <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#afd8f9880a251b532bf619b3ea93aff5f">lines</a>.<a class="code hl_variable" href="structcanvas__ity_1_1line__path.html#a27efd4b0dec6d85e4ba861c34bacdbf4">points</a>.swap(<a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#afaf3d6c584853157fb64bf463648f65c">scratch</a>.<a class="code hl_variable" href="structcanvas__ity_1_1line__path.html#a27efd4b0dec6d85e4ba861c34bacdbf4">points</a>);</div>
<div class="line"><a id="l02329" name="l02329"></a><span class="lineno"> 2329</span>        <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#afd8f9880a251b532bf619b3ea93aff5f">lines</a>.<a class="code hl_variable" href="structcanvas__ity_1_1line__path.html#a27efd4b0dec6d85e4ba861c34bacdbf4">points</a>.clear();</div>
<div class="line"><a id="l02330" name="l02330"></a><span class="lineno"> 2330</span>        <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#afd8f9880a251b532bf619b3ea93aff5f">lines</a>.<a class="code hl_variable" href="structcanvas__ity_1_1line__path.html#acfec22d114fac137ae0a70af069874d8">subpaths</a>.swap(<a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#afaf3d6c584853157fb64bf463648f65c">scratch</a>.<a class="code hl_variable" href="structcanvas__ity_1_1line__path.html#acfec22d114fac137ae0a70af069874d8">subpaths</a>);</div>
<div class="line"><a id="l02331" name="l02331"></a><span class="lineno"> 2331</span>        <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#afd8f9880a251b532bf619b3ea93aff5f">lines</a>.<a class="code hl_variable" href="structcanvas__ity_1_1line__path.html#acfec22d114fac137ae0a70af069874d8">subpaths</a>.clear();</div>
<div class="line"><a id="l02332" name="l02332"></a><span class="lineno"> 2332</span>        <span class="keywordtype">size_t</span> <a class="code hl_enumvalue" href="namespacecanvas__ity.html#a64892b31b00c006299d47bb71542b765ad5800f9a6ff0499528d888aafa6c0d31">ending</a> = 0;</div>
<div class="line"><a id="l02333" name="l02333"></a><span class="lineno"> 2333</span>        <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> subpath = 0; subpath &lt; <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#afaf3d6c584853157fb64bf463648f65c">scratch</a>.<a class="code hl_variable" href="structcanvas__ity_1_1line__path.html#acfec22d114fac137ae0a70af069874d8">subpaths</a>.size(); ++subpath)</div>
<div class="line"><a id="l02334" name="l02334"></a><span class="lineno"> 2334</span>        {</div>
<div class="line"><a id="l02335" name="l02335"></a><span class="lineno"> 2335</span>            <span class="keywordtype">size_t</span> beginning = <a class="code hl_enumvalue" href="namespacecanvas__ity.html#a64892b31b00c006299d47bb71542b765ad5800f9a6ff0499528d888aafa6c0d31">ending</a>;</div>
<div class="line"><a id="l02336" name="l02336"></a><span class="lineno"> 2336</span>            <a class="code hl_enumvalue" href="namespacecanvas__ity.html#a64892b31b00c006299d47bb71542b765ad5800f9a6ff0499528d888aafa6c0d31">ending</a> += <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#afaf3d6c584853157fb64bf463648f65c">scratch</a>.<a class="code hl_variable" href="structcanvas__ity_1_1line__path.html#acfec22d114fac137ae0a70af069874d8">subpaths</a>[subpath].count;</div>
<div class="line"><a id="l02337" name="l02337"></a><span class="lineno"> 2337</span>            <span class="keywordflow">if</span> (<a class="code hl_enumvalue" href="namespacecanvas__ity.html#a64892b31b00c006299d47bb71542b765ad5800f9a6ff0499528d888aafa6c0d31">ending</a> - beginning &lt; 2)</div>
<div class="line"><a id="l02338" name="l02338"></a><span class="lineno"> 2338</span>                <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l02339" name="l02339"></a><span class="lineno"> 2339</span>            <span class="keywordtype">size_t</span> <a class="code hl_function" href="namespacedetail.html#a7c8bc5fb5ef4750d192614dd7f0cf396">first</a> = <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#afd8f9880a251b532bf619b3ea93aff5f">lines</a>.<a class="code hl_variable" href="structcanvas__ity_1_1line__path.html#a27efd4b0dec6d85e4ba861c34bacdbf4">points</a>.size();</div>
<div class="line"><a id="l02340" name="l02340"></a><span class="lineno"> 2340</span>            <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#aab6951705e9efb55d545239161de8f01">add_half_stroke</a>(beginning, <a class="code hl_enumvalue" href="namespacecanvas__ity.html#a64892b31b00c006299d47bb71542b765ad5800f9a6ff0499528d888aafa6c0d31">ending</a> - 1,</div>
<div class="line"><a id="l02341" name="l02341"></a><span class="lineno"> 2341</span>                            <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#afaf3d6c584853157fb64bf463648f65c">scratch</a>.<a class="code hl_variable" href="structcanvas__ity_1_1line__path.html#acfec22d114fac137ae0a70af069874d8">subpaths</a>[subpath].closed);</div>
<div class="line"><a id="l02342" name="l02342"></a><span class="lineno"> 2342</span>            <span class="keywordflow">if</span> (<a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#afaf3d6c584853157fb64bf463648f65c">scratch</a>.<a class="code hl_variable" href="structcanvas__ity_1_1line__path.html#acfec22d114fac137ae0a70af069874d8">subpaths</a>[subpath].closed)</div>
<div class="line"><a id="l02343" name="l02343"></a><span class="lineno"> 2343</span>            {</div>
<div class="line"><a id="l02344" name="l02344"></a><span class="lineno"> 2344</span>                subpath_data entry = {<a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#afd8f9880a251b532bf619b3ea93aff5f">lines</a>.<a class="code hl_variable" href="structcanvas__ity_1_1line__path.html#a27efd4b0dec6d85e4ba861c34bacdbf4">points</a>.size() - <a class="code hl_function" href="namespacedetail.html#a7c8bc5fb5ef4750d192614dd7f0cf396">first</a>, <span class="keyword">true</span>};</div>
<div class="line"><a id="l02345" name="l02345"></a><span class="lineno"> 2345</span>                <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#afd8f9880a251b532bf619b3ea93aff5f">lines</a>.<a class="code hl_variable" href="structcanvas__ity_1_1line__path.html#acfec22d114fac137ae0a70af069874d8">subpaths</a>.push_back(entry);</div>
<div class="line"><a id="l02346" name="l02346"></a><span class="lineno"> 2346</span>                <a class="code hl_function" href="namespacedetail.html#a7c8bc5fb5ef4750d192614dd7f0cf396">first</a> = <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#afd8f9880a251b532bf619b3ea93aff5f">lines</a>.<a class="code hl_variable" href="structcanvas__ity_1_1line__path.html#a27efd4b0dec6d85e4ba861c34bacdbf4">points</a>.size();</div>
<div class="line"><a id="l02347" name="l02347"></a><span class="lineno"> 2347</span>            }</div>
<div class="line"><a id="l02348" name="l02348"></a><span class="lineno"> 2348</span>            <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#aab6951705e9efb55d545239161de8f01">add_half_stroke</a>(<a class="code hl_enumvalue" href="namespacecanvas__ity.html#a64892b31b00c006299d47bb71542b765ad5800f9a6ff0499528d888aafa6c0d31">ending</a> - 1, beginning,</div>
<div class="line"><a id="l02349" name="l02349"></a><span class="lineno"> 2349</span>                            <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#afaf3d6c584853157fb64bf463648f65c">scratch</a>.<a class="code hl_variable" href="structcanvas__ity_1_1line__path.html#acfec22d114fac137ae0a70af069874d8">subpaths</a>[subpath].closed);</div>
<div class="line"><a id="l02350" name="l02350"></a><span class="lineno"> 2350</span>            subpath_data entry = {<a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#afd8f9880a251b532bf619b3ea93aff5f">lines</a>.<a class="code hl_variable" href="structcanvas__ity_1_1line__path.html#a27efd4b0dec6d85e4ba861c34bacdbf4">points</a>.size() - <a class="code hl_function" href="namespacedetail.html#a7c8bc5fb5ef4750d192614dd7f0cf396">first</a>, <span class="keyword">true</span>};</div>
<div class="line"><a id="l02351" name="l02351"></a><span class="lineno"> 2351</span>            <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#afd8f9880a251b532bf619b3ea93aff5f">lines</a>.<a class="code hl_variable" href="structcanvas__ity_1_1line__path.html#acfec22d114fac137ae0a70af069874d8">subpaths</a>.push_back(entry);</div>
<div class="line"><a id="l02352" name="l02352"></a><span class="lineno"> 2352</span>        }</div>
<div class="line"><a id="l02353" name="l02353"></a><span class="lineno"> 2353</span>    }</div>
<div class="line"><a id="l02354" name="l02354"></a><span class="lineno"> 2354</span> </div>
<div class="line"><a id="l02355" name="l02355"></a><span class="lineno"> 2355</span>    <span class="comment">// Scan-convert a single polyline segment.  This walks along the pixels that</span></div>
<div class="line"><a id="l02356" name="l02356"></a><span class="lineno"> 2356</span>    <span class="comment">// the segment touches in left-to-right order, using signed trapezoidal area</span></div>
<div class="line"><a id="l02357" name="l02357"></a><span class="lineno"> 2357</span>    <span class="comment">// to accumulate a list of changes in signed coverage at each visible pixel</span></div>
<div class="line"><a id="l02358" name="l02358"></a><span class="lineno"> 2358</span>    <span class="comment">// when processing them from left to right.  Each run of horizontal pixels</span></div>
<div class="line"><a id="l02359" name="l02359"></a><span class="lineno"> 2359</span>    <span class="comment">// ends with one final update to the right of the last pixel to bring the</span></div>
<div class="line"><a id="l02360" name="l02360"></a><span class="lineno"> 2360</span>    <span class="comment">// total up to date.  Note that this does not clip to the screen boundary.</span></div>
<div class="line"><a id="l02361" name="l02361"></a><span class="lineno"> 2361</span>    <span class="comment">//</span></div>
<div class="line"><a id="l02362" name="l02362"></a><span class="lineno"> 2362</span>    <span class="keywordtype">void</span> <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#a5f5340853be67ae67fe66d29d186b7a4">canvas::add_runs</a>(</div>
<div class="line"><a id="l02363" name="l02363"></a><span class="lineno"> 2363</span>        xy from,</div>
<div class="line"><a id="l02364" name="l02364"></a><span class="lineno"> 2364</span>        xy to)</div>
<div class="line"><a id="l02365" name="l02365"></a><span class="lineno"> 2365</span>    {</div>
<div class="line"><a id="l02366" name="l02366"></a><span class="lineno"> 2366</span>        <span class="keyword">static</span> <span class="keywordtype">float</span> <span class="keyword">const</span> epsilon = 2.0e-5f;</div>
<div class="line"><a id="l02367" name="l02367"></a><span class="lineno"> 2367</span>        <span class="keywordflow">if</span> (fabsf(to.y - from.y) &lt; epsilon)</div>
<div class="line"><a id="l02368" name="l02368"></a><span class="lineno"> 2368</span>            <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l02369" name="l02369"></a><span class="lineno"> 2369</span>        <span class="keywordtype">float</span> <a class="code hl_namespace" href="namespacesign.html">sign</a> = to.y &gt; from.y ? 1.0f : -1.0f;</div>
<div class="line"><a id="l02370" name="l02370"></a><span class="lineno"> 2370</span>        <span class="keywordflow">if</span> (from.x &gt; to.x)</div>
<div class="line"><a id="l02371" name="l02371"></a><span class="lineno"> 2371</span>            std::swap(from, to);</div>
<div class="line"><a id="l02372" name="l02372"></a><span class="lineno"> 2372</span>        xy <a class="code hl_function" href="namespacespdlog_1_1details_1_1os.html#aa8e51fe363f1c951f14fffea69ab19ca">now</a>    = from;</div>
<div class="line"><a id="l02373" name="l02373"></a><span class="lineno"> 2373</span>        xy pixel  = xy(floorf(<a class="code hl_function" href="namespacespdlog_1_1details_1_1os.html#aa8e51fe363f1c951f14fffea69ab19ca">now</a>.x), floorf(<a class="code hl_function" href="namespacespdlog_1_1details_1_1os.html#aa8e51fe363f1c951f14fffea69ab19ca">now</a>.y));</div>
<div class="line"><a id="l02374" name="l02374"></a><span class="lineno"> 2374</span>        xy corner = pixel + xy(1.0f, to.y &gt; from.y ? 1.0f : 0.0f);</div>
<div class="line"><a id="l02375" name="l02375"></a><span class="lineno"> 2375</span>        xy slope  = xy((to.x - from.x) / (to.y - from.y),</div>
<div class="line"><a id="l02376" name="l02376"></a><span class="lineno"> 2376</span>                       (to.y - from.y) / (to.x - from.x));</div>
<div class="line"><a id="l02377" name="l02377"></a><span class="lineno"> 2377</span>        xy next_x = (to.x - from.x &lt; epsilon) ? to : xy(corner.x, <a class="code hl_function" href="namespacespdlog_1_1details_1_1os.html#aa8e51fe363f1c951f14fffea69ab19ca">now</a>.y + (corner.x - <a class="code hl_function" href="namespacespdlog_1_1details_1_1os.html#aa8e51fe363f1c951f14fffea69ab19ca">now</a>.x) * slope.y);</div>
<div class="line"><a id="l02378" name="l02378"></a><span class="lineno"> 2378</span>        xy next_y = xy(<a class="code hl_function" href="namespacespdlog_1_1details_1_1os.html#aa8e51fe363f1c951f14fffea69ab19ca">now</a>.x + (corner.y - <a class="code hl_function" href="namespacespdlog_1_1details_1_1os.html#aa8e51fe363f1c951f14fffea69ab19ca">now</a>.y) * slope.x, corner.y);</div>
<div class="line"><a id="l02379" name="l02379"></a><span class="lineno"> 2379</span>        <span class="keywordflow">if</span> ((from.y &lt; to.y &amp;&amp; to.y &lt; next_y.y) ||</div>
<div class="line"><a id="l02380" name="l02380"></a><span class="lineno"> 2380</span>            (from.y &gt; to.y &amp;&amp; to.y &gt; next_y.y))</div>
<div class="line"><a id="l02381" name="l02381"></a><span class="lineno"> 2381</span>            next_y = to;</div>
<div class="line"><a id="l02382" name="l02382"></a><span class="lineno"> 2382</span>        <span class="keywordtype">float</span> y_step = to.y &gt; from.y ? 1.0f : -1.0f;</div>
<div class="line"><a id="l02383" name="l02383"></a><span class="lineno"> 2383</span>        <span class="keywordflow">do</span></div>
<div class="line"><a id="l02384" name="l02384"></a><span class="lineno"> 2384</span>        {</div>
<div class="line"><a id="l02385" name="l02385"></a><span class="lineno"> 2385</span>            <span class="keywordtype">float</span> carry = 0.0f;</div>
<div class="line"><a id="l02386" name="l02386"></a><span class="lineno"> 2386</span>            <span class="keywordflow">while</span> (next_x.x &lt; next_y.x)</div>
<div class="line"><a id="l02387" name="l02387"></a><span class="lineno"> 2387</span>            {</div>
<div class="line"><a id="l02388" name="l02388"></a><span class="lineno"> 2388</span>                <span class="keywordtype">float</span>     strip = std::min(std::max((next_x.y - <a class="code hl_function" href="namespacespdlog_1_1details_1_1os.html#aa8e51fe363f1c951f14fffea69ab19ca">now</a>.y) * y_step,</div>
<div class="line"><a id="l02389" name="l02389"></a><span class="lineno"> 2389</span>                                                0.0f),</div>
<div class="line"><a id="l02390" name="l02390"></a><span class="lineno"> 2390</span>                                       1.0f);</div>
<div class="line"><a id="l02391" name="l02391"></a><span class="lineno"> 2391</span>                <span class="keywordtype">float</span>     mid   = (next_x.x + <a class="code hl_function" href="namespacespdlog_1_1details_1_1os.html#aa8e51fe363f1c951f14fffea69ab19ca">now</a>.x) * 0.5f;</div>
<div class="line"><a id="l02392" name="l02392"></a><span class="lineno"> 2392</span>                <span class="keywordtype">float</span>     <a class="code hl_variable" href="tag__strings_8h.html#a4329d2992f02e00a6e706a5443269afc">area</a>  = (mid - pixel.x) * strip;</div>
<div class="line"><a id="l02393" name="l02393"></a><span class="lineno"> 2393</span>                pixel_run piece = {<span class="keyword">static_cast&lt;</span><span class="keywordtype">unsigned</span> <span class="keywordtype">short</span><span class="keyword">&gt;</span>(pixel.x),</div>
<div class="line"><a id="l02394" name="l02394"></a><span class="lineno"> 2394</span>                                   <span class="keyword">static_cast&lt;</span><span class="keywordtype">unsigned</span> <span class="keywordtype">short</span><span class="keyword">&gt;</span>(pixel.y),</div>
<div class="line"><a id="l02395" name="l02395"></a><span class="lineno"> 2395</span>                                   (carry + strip - <a class="code hl_variable" href="tag__strings_8h.html#a4329d2992f02e00a6e706a5443269afc">area</a>) * <a class="code hl_namespace" href="namespacesign.html">sign</a>};</div>
<div class="line"><a id="l02396" name="l02396"></a><span class="lineno"> 2396</span>                <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#a4e8fe391327b93aaf006b52eaf3546f4">runs</a>.push_back(piece);</div>
<div class="line"><a id="l02397" name="l02397"></a><span class="lineno"> 2397</span>                carry = <a class="code hl_variable" href="tag__strings_8h.html#a4329d2992f02e00a6e706a5443269afc">area</a>;</div>
<div class="line"><a id="l02398" name="l02398"></a><span class="lineno"> 2398</span>                <a class="code hl_function" href="namespacespdlog_1_1details_1_1os.html#aa8e51fe363f1c951f14fffea69ab19ca">now</a>   = next_x;</div>
<div class="line"><a id="l02399" name="l02399"></a><span class="lineno"> 2399</span>                next_x.x += 1.0f;</div>
<div class="line"><a id="l02400" name="l02400"></a><span class="lineno"> 2400</span>                next_x.y = (next_x.x - from.x) * slope.y + from.y;</div>
<div class="line"><a id="l02401" name="l02401"></a><span class="lineno"> 2401</span>                pixel.x += 1.0f;</div>
<div class="line"><a id="l02402" name="l02402"></a><span class="lineno"> 2402</span>            }</div>
<div class="line"><a id="l02403" name="l02403"></a><span class="lineno"> 2403</span>            <span class="keywordtype">float</span>     strip   = std::min(std::max((next_y.y - <a class="code hl_function" href="namespacespdlog_1_1details_1_1os.html#aa8e51fe363f1c951f14fffea69ab19ca">now</a>.y) * y_step,</div>
<div class="line"><a id="l02404" name="l02404"></a><span class="lineno"> 2404</span>                                              0.0f),</div>
<div class="line"><a id="l02405" name="l02405"></a><span class="lineno"> 2405</span>                                     1.0f);</div>
<div class="line"><a id="l02406" name="l02406"></a><span class="lineno"> 2406</span>            <span class="keywordtype">float</span>     mid     = (next_y.x + <a class="code hl_function" href="namespacespdlog_1_1details_1_1os.html#aa8e51fe363f1c951f14fffea69ab19ca">now</a>.x) * 0.5f;</div>
<div class="line"><a id="l02407" name="l02407"></a><span class="lineno"> 2407</span>            <span class="keywordtype">float</span>     <a class="code hl_variable" href="tag__strings_8h.html#a4329d2992f02e00a6e706a5443269afc">area</a>    = (mid - pixel.x) * strip;</div>
<div class="line"><a id="l02408" name="l02408"></a><span class="lineno"> 2408</span>            pixel_run piece_1 = {<span class="keyword">static_cast&lt;</span><span class="keywordtype">unsigned</span> <span class="keywordtype">short</span><span class="keyword">&gt;</span>(pixel.x),</div>
<div class="line"><a id="l02409" name="l02409"></a><span class="lineno"> 2409</span>                                 <span class="keyword">static_cast&lt;</span><span class="keywordtype">unsigned</span> <span class="keywordtype">short</span><span class="keyword">&gt;</span>(pixel.y),</div>
<div class="line"><a id="l02410" name="l02410"></a><span class="lineno"> 2410</span>                                 (carry + strip - <a class="code hl_variable" href="tag__strings_8h.html#a4329d2992f02e00a6e706a5443269afc">area</a>) * <a class="code hl_namespace" href="namespacesign.html">sign</a>};</div>
<div class="line"><a id="l02411" name="l02411"></a><span class="lineno"> 2411</span>            pixel_run piece_2 = {<span class="keyword">static_cast&lt;</span><span class="keywordtype">unsigned</span> <span class="keywordtype">short</span><span class="keyword">&gt;</span>(pixel.x + 1.0f),</div>
<div class="line"><a id="l02412" name="l02412"></a><span class="lineno"> 2412</span>                                 <span class="keyword">static_cast&lt;</span><span class="keywordtype">unsigned</span> <span class="keywordtype">short</span><span class="keyword">&gt;</span>(pixel.y),</div>
<div class="line"><a id="l02413" name="l02413"></a><span class="lineno"> 2413</span>                                 <a class="code hl_variable" href="tag__strings_8h.html#a4329d2992f02e00a6e706a5443269afc">area</a> * <a class="code hl_namespace" href="namespacesign.html">sign</a>};</div>
<div class="line"><a id="l02414" name="l02414"></a><span class="lineno"> 2414</span>            <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#a4e8fe391327b93aaf006b52eaf3546f4">runs</a>.push_back(piece_1);</div>
<div class="line"><a id="l02415" name="l02415"></a><span class="lineno"> 2415</span>            <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#a4e8fe391327b93aaf006b52eaf3546f4">runs</a>.push_back(piece_2);</div>
<div class="line"><a id="l02416" name="l02416"></a><span class="lineno"> 2416</span>            <a class="code hl_function" href="namespacespdlog_1_1details_1_1os.html#aa8e51fe363f1c951f14fffea69ab19ca">now</a> = next_y;</div>
<div class="line"><a id="l02417" name="l02417"></a><span class="lineno"> 2417</span>            next_y.y += y_step;</div>
<div class="line"><a id="l02418" name="l02418"></a><span class="lineno"> 2418</span>            next_y.x = (next_y.y - from.y) * slope.x + from.x;</div>
<div class="line"><a id="l02419" name="l02419"></a><span class="lineno"> 2419</span>            pixel.y += y_step;</div>
<div class="line"><a id="l02420" name="l02420"></a><span class="lineno"> 2420</span>            <span class="keywordflow">if</span> ((from.y &lt; to.y &amp;&amp; to.y &lt; next_y.y) ||</div>
<div class="line"><a id="l02421" name="l02421"></a><span class="lineno"> 2421</span>                (from.y &gt; to.y &amp;&amp; to.y &gt; next_y.y))</div>
<div class="line"><a id="l02422" name="l02422"></a><span class="lineno"> 2422</span>                next_y = to;</div>
<div class="line"><a id="l02423" name="l02423"></a><span class="lineno"> 2423</span>        } <span class="keywordflow">while</span> (<a class="code hl_function" href="namespacespdlog_1_1details_1_1os.html#aa8e51fe363f1c951f14fffea69ab19ca">now</a>.y != to.y);</div>
<div class="line"><a id="l02424" name="l02424"></a><span class="lineno"> 2424</span>    }</div>
<div class="line"><a id="l02425" name="l02425"></a><span class="lineno"> 2425</span> </div>
<div class="line"><a id="l02426" name="l02426"></a><span class="lineno"> 2426</span>    <span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code hl_function" href="namespacelitehtml.html#a6a98390caf97aa8e2f13dae367482ce0">operator&lt;</a>(</div>
<div class="line"><a id="l02427" name="l02427"></a><span class="lineno"> 2427</span>        pixel_run left,</div>
<div class="line"><a id="l02428" name="l02428"></a><span class="lineno"> 2428</span>        pixel_run right)</div>
<div class="line"><a id="l02429" name="l02429"></a><span class="lineno"> 2429</span>    {</div>
<div class="line"><a id="l02430" name="l02430"></a><span class="lineno"> 2430</span>        <span class="keywordflow">return</span> (left.y &lt; right.y ? <span class="keyword">true</span> : left.y &gt; right.y ? false</div>
<div class="line"><a id="l02431" name="l02431"></a><span class="lineno"> 2431</span>                                      : left.x &lt; right.x   ? true</div>
<div class="line"><a id="l02432" name="l02432"></a><span class="lineno"> 2432</span>                                      : left.x &gt; right.x   ? false</div>
<div class="line"><a id="l02433" name="l02433"></a><span class="lineno"> 2433</span>                                                           : fabsf(left.delta) &lt; fabsf(right.delta));</div>
<div class="line"><a id="l02434" name="l02434"></a><span class="lineno"> 2434</span>    }</div>
<div class="line"><a id="l02435" name="l02435"></a><span class="lineno"> 2435</span> </div>
<div class="line"><a id="l02436" name="l02436"></a><span class="lineno"> 2436</span>    <span class="comment">// Scan-convert the polylines to prepare them for antialiased rendering.</span></div>
<div class="line"><a id="l02437" name="l02437"></a><span class="lineno"> 2437</span>    <span class="comment">// For each of the polyline loops, it first clips them to the screen.</span></div>
<div class="line"><a id="l02438" name="l02438"></a><span class="lineno"> 2438</span>    <span class="comment">// See &quot;Reentrant Polygon Clipping&quot; by Sutherland and Hodgman for details.</span></div>
<div class="line"><a id="l02439" name="l02439"></a><span class="lineno"> 2439</span>    <span class="comment">// Then it walks the polyline loop and scan-converts each line segment to</span></div>
<div class="line"><a id="l02440" name="l02440"></a><span class="lineno"> 2440</span>    <span class="comment">// produce a list of changes in signed pixel coverage when processed in</span></div>
<div class="line"><a id="l02441" name="l02441"></a><span class="lineno"> 2441</span>    <span class="comment">// left-to-right, top-to-bottom order.  The list of changes is then sorted</span></div>
<div class="line"><a id="l02442" name="l02442"></a><span class="lineno"> 2442</span>    <span class="comment">// into that order, and multiple changes to the same pixel are coalesced</span></div>
<div class="line"><a id="l02443" name="l02443"></a><span class="lineno"> 2443</span>    <span class="comment">// by summation.  The result is a sparse, run-length encoded description</span></div>
<div class="line"><a id="l02444" name="l02444"></a><span class="lineno"> 2444</span>    <span class="comment">// of the coverage of each pixel to be drawn.</span></div>
<div class="line"><a id="l02445" name="l02445"></a><span class="lineno"> 2445</span>    <span class="comment">//</span></div>
<div class="line"><a id="l02446" name="l02446"></a><span class="lineno"> 2446</span>    <span class="keywordtype">void</span> <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#a97cc5b1cc4d7e5b67ab3054fcdcfb3d4">canvas::lines_to_runs</a>(</div>
<div class="line"><a id="l02447" name="l02447"></a><span class="lineno"> 2447</span>        xy  <a class="code hl_define" href="css__properties_8cpp.html#a5dfbcc916693656dd092ddc41ab25747">offset</a>,</div>
<div class="line"><a id="l02448" name="l02448"></a><span class="lineno"> 2448</span>        <span class="keywordtype">int</span> padding)</div>
<div class="line"><a id="l02449" name="l02449"></a><span class="lineno"> 2449</span>    {</div>
<div class="line"><a id="l02450" name="l02450"></a><span class="lineno"> 2450</span>        <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#a4e8fe391327b93aaf006b52eaf3546f4">runs</a>.clear();</div>
<div class="line"><a id="l02451" name="l02451"></a><span class="lineno"> 2451</span>        <span class="keywordtype">float</span>  <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#ad4920132bc78f7e74a8b14319e8ff52c">width</a>  = <span class="keyword">static_cast&lt;</span><span class="keywordtype">float</span><span class="keyword">&gt;</span>(<a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#aab63b227be5d7786e5bf0b07362addfb">size_x</a> + padding);</div>
<div class="line"><a id="l02452" name="l02452"></a><span class="lineno"> 2452</span>        <span class="keywordtype">float</span>  <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#acb61342cdc37dc89aee42e7087adbc50">height</a> = <span class="keyword">static_cast&lt;</span><span class="keywordtype">float</span><span class="keyword">&gt;</span>(<a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ae039e222157aef7c67de905bfbfaa1a7">size_y</a> + padding);</div>
<div class="line"><a id="l02453" name="l02453"></a><span class="lineno"> 2453</span>        <span class="keywordtype">size_t</span> <a class="code hl_enumvalue" href="namespacecanvas__ity.html#a64892b31b00c006299d47bb71542b765ad5800f9a6ff0499528d888aafa6c0d31">ending</a> = 0;</div>
<div class="line"><a id="l02454" name="l02454"></a><span class="lineno"> 2454</span>        <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> subpath = 0; subpath &lt; <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#afd8f9880a251b532bf619b3ea93aff5f">lines</a>.<a class="code hl_variable" href="structcanvas__ity_1_1line__path.html#acfec22d114fac137ae0a70af069874d8">subpaths</a>.size(); ++subpath)</div>
<div class="line"><a id="l02455" name="l02455"></a><span class="lineno"> 2455</span>        {</div>
<div class="line"><a id="l02456" name="l02456"></a><span class="lineno"> 2456</span>            <span class="keywordtype">size_t</span> beginning = <a class="code hl_enumvalue" href="namespacecanvas__ity.html#a64892b31b00c006299d47bb71542b765ad5800f9a6ff0499528d888aafa6c0d31">ending</a>;</div>
<div class="line"><a id="l02457" name="l02457"></a><span class="lineno"> 2457</span>            <a class="code hl_enumvalue" href="namespacecanvas__ity.html#a64892b31b00c006299d47bb71542b765ad5800f9a6ff0499528d888aafa6c0d31">ending</a> += <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#afd8f9880a251b532bf619b3ea93aff5f">lines</a>.<a class="code hl_variable" href="structcanvas__ity_1_1line__path.html#acfec22d114fac137ae0a70af069874d8">subpaths</a>[subpath].count;</div>
<div class="line"><a id="l02458" name="l02458"></a><span class="lineno"> 2458</span>            <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#afaf3d6c584853157fb64bf463648f65c">scratch</a>.<a class="code hl_variable" href="structcanvas__ity_1_1line__path.html#a27efd4b0dec6d85e4ba861c34bacdbf4">points</a>.clear();</div>
<div class="line"><a id="l02459" name="l02459"></a><span class="lineno"> 2459</span>            <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> <a class="code hl_enumvalue" href="core_8h.html#a7fc0249f0f8ba720115d2430f5b86cbaa6a992d5529f459a44fee58c733255e86">index</a> = beginning; <a class="code hl_enumvalue" href="core_8h.html#a7fc0249f0f8ba720115d2430f5b86cbaa6a992d5529f459a44fee58c733255e86">index</a> &lt; <a class="code hl_enumvalue" href="namespacecanvas__ity.html#a64892b31b00c006299d47bb71542b765ad5800f9a6ff0499528d888aafa6c0d31">ending</a>; ++<a class="code hl_enumvalue" href="core_8h.html#a7fc0249f0f8ba720115d2430f5b86cbaa6a992d5529f459a44fee58c733255e86">index</a>)</div>
<div class="line"><a id="l02460" name="l02460"></a><span class="lineno"> 2460</span>                <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#afaf3d6c584853157fb64bf463648f65c">scratch</a>.<a class="code hl_variable" href="structcanvas__ity_1_1line__path.html#a27efd4b0dec6d85e4ba861c34bacdbf4">points</a>.push_back(<a class="code hl_define" href="css__properties_8cpp.html#a5dfbcc916693656dd092ddc41ab25747">offset</a> + <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#afd8f9880a251b532bf619b3ea93aff5f">lines</a>.<a class="code hl_variable" href="structcanvas__ity_1_1line__path.html#a27efd4b0dec6d85e4ba861c34bacdbf4">points</a>[<a class="code hl_enumvalue" href="core_8h.html#a7fc0249f0f8ba720115d2430f5b86cbaa6a992d5529f459a44fee58c733255e86">index</a>]);</div>
<div class="line"><a id="l02461" name="l02461"></a><span class="lineno"> 2461</span>            <span class="keywordflow">for</span> (<span class="keywordtype">int</span> edge = 0; edge &lt; 4; ++edge)</div>
<div class="line"><a id="l02462" name="l02462"></a><span class="lineno"> 2462</span>            {</div>
<div class="line"><a id="l02463" name="l02463"></a><span class="lineno"> 2463</span>                xy normal = xy(edge == 0 ? 1.0f : edge == 2 ? -1.0f</div>
<div class="line"><a id="l02464" name="l02464"></a><span class="lineno"> 2464</span>                                                            : 0.0f,</div>
<div class="line"><a id="l02465" name="l02465"></a><span class="lineno"> 2465</span>                               edge == 1 ? 1.0f : edge == 3 ? -1.0f</div>
<div class="line"><a id="l02466" name="l02466"></a><span class="lineno"> 2466</span>                                                            : 0.0f);</div>
<div class="line"><a id="l02467" name="l02467"></a><span class="lineno"> 2467</span>                <span class="keywordtype">float</span>  place = edge == 2 ? <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#ad4920132bc78f7e74a8b14319e8ff52c">width</a> : edge == 3 ? <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#acb61342cdc37dc89aee42e7087adbc50">height</a></div>
<div class="line"><a id="l02468" name="l02468"></a><span class="lineno"> 2468</span>                                                             : 0.0f;</div>
<div class="line"><a id="l02469" name="l02469"></a><span class="lineno"> 2469</span>                <span class="keywordtype">size_t</span> <a class="code hl_function" href="namespacedetail.html#a7c8bc5fb5ef4750d192614dd7f0cf396">first</a> = <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#afaf3d6c584853157fb64bf463648f65c">scratch</a>.<a class="code hl_variable" href="structcanvas__ity_1_1line__path.html#a27efd4b0dec6d85e4ba861c34bacdbf4">points</a>.size();</div>
<div class="line"><a id="l02470" name="l02470"></a><span class="lineno"> 2470</span>                <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> <a class="code hl_enumvalue" href="core_8h.html#a7fc0249f0f8ba720115d2430f5b86cbaa6a992d5529f459a44fee58c733255e86">index</a> = 0; <a class="code hl_enumvalue" href="core_8h.html#a7fc0249f0f8ba720115d2430f5b86cbaa6a992d5529f459a44fee58c733255e86">index</a> &lt; <a class="code hl_function" href="namespacedetail.html#a7c8bc5fb5ef4750d192614dd7f0cf396">first</a>; ++<a class="code hl_enumvalue" href="core_8h.html#a7fc0249f0f8ba720115d2430f5b86cbaa6a992d5529f459a44fee58c733255e86">index</a>)</div>
<div class="line"><a id="l02471" name="l02471"></a><span class="lineno"> 2471</span>                {</div>
<div class="line"><a id="l02472" name="l02472"></a><span class="lineno"> 2472</span>                    xy    from      = <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#afaf3d6c584853157fb64bf463648f65c">scratch</a>.<a class="code hl_variable" href="structcanvas__ity_1_1line__path.html#a27efd4b0dec6d85e4ba861c34bacdbf4">points</a>[(<a class="code hl_enumvalue" href="core_8h.html#a7fc0249f0f8ba720115d2430f5b86cbaa6a992d5529f459a44fee58c733255e86">index</a> ? <a class="code hl_enumvalue" href="core_8h.html#a7fc0249f0f8ba720115d2430f5b86cbaa6a992d5529f459a44fee58c733255e86">index</a> : <a class="code hl_function" href="namespacedetail.html#a7c8bc5fb5ef4750d192614dd7f0cf396">first</a>) - 1];</div>
<div class="line"><a id="l02473" name="l02473"></a><span class="lineno"> 2473</span>                    xy    to        = <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#afaf3d6c584853157fb64bf463648f65c">scratch</a>.<a class="code hl_variable" href="structcanvas__ity_1_1line__path.html#a27efd4b0dec6d85e4ba861c34bacdbf4">points</a>[<a class="code hl_enumvalue" href="core_8h.html#a7fc0249f0f8ba720115d2430f5b86cbaa6a992d5529f459a44fee58c733255e86">index</a>];</div>
<div class="line"><a id="l02474" name="l02474"></a><span class="lineno"> 2474</span>                    <span class="keywordtype">float</span> from_side = dot(from, normal) + place;</div>
<div class="line"><a id="l02475" name="l02475"></a><span class="lineno"> 2475</span>                    <span class="keywordtype">float</span> to_side   = dot(to, normal) + place;</div>
<div class="line"><a id="l02476" name="l02476"></a><span class="lineno"> 2476</span>                    <span class="keywordflow">if</span> (from_side * to_side &lt; 0.0f)</div>
<div class="line"><a id="l02477" name="l02477"></a><span class="lineno"> 2477</span>                        <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#afaf3d6c584853157fb64bf463648f65c">scratch</a>.<a class="code hl_variable" href="structcanvas__ity_1_1line__path.html#a27efd4b0dec6d85e4ba861c34bacdbf4">points</a>.push_back(lerp(from, to,</div>
<div class="line"><a id="l02478" name="l02478"></a><span class="lineno"> 2478</span>                                                      from_side / (from_side - to_side)));</div>
<div class="line"><a id="l02479" name="l02479"></a><span class="lineno"> 2479</span>                    <span class="keywordflow">if</span> (to_side &gt;= 0.0f)</div>
<div class="line"><a id="l02480" name="l02480"></a><span class="lineno"> 2480</span>                        <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#afaf3d6c584853157fb64bf463648f65c">scratch</a>.<a class="code hl_variable" href="structcanvas__ity_1_1line__path.html#a27efd4b0dec6d85e4ba861c34bacdbf4">points</a>.push_back(to);</div>
<div class="line"><a id="l02481" name="l02481"></a><span class="lineno"> 2481</span>                }</div>
<div class="line"><a id="l02482" name="l02482"></a><span class="lineno"> 2482</span>                <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#afaf3d6c584853157fb64bf463648f65c">scratch</a>.<a class="code hl_variable" href="structcanvas__ity_1_1line__path.html#a27efd4b0dec6d85e4ba861c34bacdbf4">points</a>.erase(</div>
<div class="line"><a id="l02483" name="l02483"></a><span class="lineno"> 2483</span>                    <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#afaf3d6c584853157fb64bf463648f65c">scratch</a>.<a class="code hl_variable" href="structcanvas__ity_1_1line__path.html#a27efd4b0dec6d85e4ba861c34bacdbf4">points</a>.begin(),</div>
<div class="line"><a id="l02484" name="l02484"></a><span class="lineno"> 2484</span>                    <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#afaf3d6c584853157fb64bf463648f65c">scratch</a>.<a class="code hl_variable" href="structcanvas__ity_1_1line__path.html#a27efd4b0dec6d85e4ba861c34bacdbf4">points</a>.begin() + <span class="keyword">static_cast&lt;</span>ptrdiff_t<span class="keyword">&gt;</span>(first));</div>
<div class="line"><a id="l02485" name="l02485"></a><span class="lineno"> 2485</span>            }</div>
<div class="line"><a id="l02486" name="l02486"></a><span class="lineno"> 2486</span>            <span class="keywordtype">size_t</span> last = <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#afaf3d6c584853157fb64bf463648f65c">scratch</a>.<a class="code hl_variable" href="structcanvas__ity_1_1line__path.html#a27efd4b0dec6d85e4ba861c34bacdbf4">points</a>.size();</div>
<div class="line"><a id="l02487" name="l02487"></a><span class="lineno"> 2487</span>            <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> <a class="code hl_enumvalue" href="core_8h.html#a7fc0249f0f8ba720115d2430f5b86cbaa6a992d5529f459a44fee58c733255e86">index</a> = 0; <a class="code hl_enumvalue" href="core_8h.html#a7fc0249f0f8ba720115d2430f5b86cbaa6a992d5529f459a44fee58c733255e86">index</a> &lt; last; ++<a class="code hl_enumvalue" href="core_8h.html#a7fc0249f0f8ba720115d2430f5b86cbaa6a992d5529f459a44fee58c733255e86">index</a>)</div>
<div class="line"><a id="l02488" name="l02488"></a><span class="lineno"> 2488</span>            {</div>
<div class="line"><a id="l02489" name="l02489"></a><span class="lineno"> 2489</span>                xy from = <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#afaf3d6c584853157fb64bf463648f65c">scratch</a>.<a class="code hl_variable" href="structcanvas__ity_1_1line__path.html#a27efd4b0dec6d85e4ba861c34bacdbf4">points</a>[(<a class="code hl_enumvalue" href="core_8h.html#a7fc0249f0f8ba720115d2430f5b86cbaa6a992d5529f459a44fee58c733255e86">index</a> ? <a class="code hl_enumvalue" href="core_8h.html#a7fc0249f0f8ba720115d2430f5b86cbaa6a992d5529f459a44fee58c733255e86">index</a> : last) - 1];</div>
<div class="line"><a id="l02490" name="l02490"></a><span class="lineno"> 2490</span>                xy to   = <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#afaf3d6c584853157fb64bf463648f65c">scratch</a>.<a class="code hl_variable" href="structcanvas__ity_1_1line__path.html#a27efd4b0dec6d85e4ba861c34bacdbf4">points</a>[<a class="code hl_enumvalue" href="core_8h.html#a7fc0249f0f8ba720115d2430f5b86cbaa6a992d5529f459a44fee58c733255e86">index</a>];</div>
<div class="line"><a id="l02491" name="l02491"></a><span class="lineno"> 2491</span>                <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#a5f5340853be67ae67fe66d29d186b7a4">add_runs</a>(xy(std::min(std::max(from.x, 0.0f), <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#ad4920132bc78f7e74a8b14319e8ff52c">width</a>),</div>
<div class="line"><a id="l02492" name="l02492"></a><span class="lineno"> 2492</span>                            std::min(std::max(from.y, 0.0f), <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#acb61342cdc37dc89aee42e7087adbc50">height</a>)),</div>
<div class="line"><a id="l02493" name="l02493"></a><span class="lineno"> 2493</span>                         xy(std::min(std::max(to.x, 0.0f), <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#ad4920132bc78f7e74a8b14319e8ff52c">width</a>),</div>
<div class="line"><a id="l02494" name="l02494"></a><span class="lineno"> 2494</span>                            std::min(std::max(to.y, 0.0f), <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#acb61342cdc37dc89aee42e7087adbc50">height</a>)));</div>
<div class="line"><a id="l02495" name="l02495"></a><span class="lineno"> 2495</span>            }</div>
<div class="line"><a id="l02496" name="l02496"></a><span class="lineno"> 2496</span>        }</div>
<div class="line"><a id="l02497" name="l02497"></a><span class="lineno"> 2497</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#a4e8fe391327b93aaf006b52eaf3546f4">runs</a>.empty())</div>
<div class="line"><a id="l02498" name="l02498"></a><span class="lineno"> 2498</span>            <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l02499" name="l02499"></a><span class="lineno"> 2499</span>        std::sort(<a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#a4e8fe391327b93aaf006b52eaf3546f4">runs</a>.begin(), <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#a4e8fe391327b93aaf006b52eaf3546f4">runs</a>.end());</div>
<div class="line"><a id="l02500" name="l02500"></a><span class="lineno"> 2500</span>        <span class="keywordtype">size_t</span> to = 0;</div>
<div class="line"><a id="l02501" name="l02501"></a><span class="lineno"> 2501</span>        <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> from = 1; from &lt; <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#a4e8fe391327b93aaf006b52eaf3546f4">runs</a>.size(); ++from)</div>
<div class="line"><a id="l02502" name="l02502"></a><span class="lineno"> 2502</span>            <span class="keywordflow">if</span> (<a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#a4e8fe391327b93aaf006b52eaf3546f4">runs</a>[from].x == <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#a4e8fe391327b93aaf006b52eaf3546f4">runs</a>[to].x &amp;&amp;</div>
<div class="line"><a id="l02503" name="l02503"></a><span class="lineno"> 2503</span>                <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#a4e8fe391327b93aaf006b52eaf3546f4">runs</a>[from].y == <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#a4e8fe391327b93aaf006b52eaf3546f4">runs</a>[to].y)</div>
<div class="line"><a id="l02504" name="l02504"></a><span class="lineno"> 2504</span>                <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#a4e8fe391327b93aaf006b52eaf3546f4">runs</a>[to].delta += <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#a4e8fe391327b93aaf006b52eaf3546f4">runs</a>[from].delta;</div>
<div class="line"><a id="l02505" name="l02505"></a><span class="lineno"> 2505</span>            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#a4e8fe391327b93aaf006b52eaf3546f4">runs</a>[from].delta != 0.0f)</div>
<div class="line"><a id="l02506" name="l02506"></a><span class="lineno"> 2506</span>                <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#a4e8fe391327b93aaf006b52eaf3546f4">runs</a>[++to] = <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#a4e8fe391327b93aaf006b52eaf3546f4">runs</a>[from];</div>
<div class="line"><a id="l02507" name="l02507"></a><span class="lineno"> 2507</span>        <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#a4e8fe391327b93aaf006b52eaf3546f4">runs</a>.erase(<a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#a4e8fe391327b93aaf006b52eaf3546f4">runs</a>.begin() + <span class="keyword">static_cast&lt;</span>ptrdiff_t<span class="keyword">&gt;</span>(to) + 1,</div>
<div class="line"><a id="l02508" name="l02508"></a><span class="lineno"> 2508</span>                   <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#a4e8fe391327b93aaf006b52eaf3546f4">runs</a>.end());</div>
<div class="line"><a id="l02509" name="l02509"></a><span class="lineno"> 2509</span>    }</div>
<div class="line"><a id="l02510" name="l02510"></a><span class="lineno"> 2510</span> </div>
<div class="line"><a id="l02511" name="l02511"></a><span class="lineno"> 2511</span>    <span class="comment">// Paint a pixel according to its point location and a paint style to produce</span></div>
<div class="line"><a id="l02512" name="l02512"></a><span class="lineno"> 2512</span>    <span class="comment">// a premultiplied, linearized RGBA color.  This handles all supported paint</span></div>
<div class="line"><a id="l02513" name="l02513"></a><span class="lineno"> 2513</span>    <span class="comment">// styles: solid colors, linear gradients, radial gradients, and patterns.</span></div>
<div class="line"><a id="l02514" name="l02514"></a><span class="lineno"> 2514</span>    <span class="comment">// For gradients and patterns, it takes into account the current transform.</span></div>
<div class="line"><a id="l02515" name="l02515"></a><span class="lineno"> 2515</span>    <span class="comment">// Patterns are resampled using a separable bicubic convolution filter,</span></div>
<div class="line"><a id="l02516" name="l02516"></a><span class="lineno"> 2516</span>    <span class="comment">// with edges handled according to the wrap mode.  See &quot;Cubic Convolution</span></div>
<div class="line"><a id="l02517" name="l02517"></a><span class="lineno"> 2517</span>    <span class="comment">// Interpolation for Digital Image Processing&quot; by Keys.  This filter is best</span></div>
<div class="line"><a id="l02518" name="l02518"></a><span class="lineno"> 2518</span>    <span class="comment">// known for magnification, but also works well for antialiased minification,</span></div>
<div class="line"><a id="l02519" name="l02519"></a><span class="lineno"> 2519</span>    <span class="comment">// since it&#39;s actually a Catmull-Rom spline approximation of Lanczos-2.</span></div>
<div class="line"><a id="l02520" name="l02520"></a><span class="lineno"> 2520</span>    <span class="comment">//</span></div>
<div class="line"><a id="l02521" name="l02521"></a><span class="lineno"> 2521</span>    rgba <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#a4398d75300a84212897f80f34d634c6f">canvas::paint_pixel</a>(</div>
<div class="line"><a id="l02522" name="l02522"></a><span class="lineno"> 2522</span>        xy                 point,</div>
<div class="line"><a id="l02523" name="l02523"></a><span class="lineno"> 2523</span>        paint_brush <span class="keyword">const</span>&amp; brush)</div>
<div class="line"><a id="l02524" name="l02524"></a><span class="lineno"> 2524</span>    {</div>
<div class="line"><a id="l02525" name="l02525"></a><span class="lineno"> 2525</span>        <span class="keywordflow">if</span> (brush.colors.empty())</div>
<div class="line"><a id="l02526" name="l02526"></a><span class="lineno"> 2526</span>            <span class="keywordflow">return</span> rgba(0.0f, 0.0f, 0.0f, 0.0f);</div>
<div class="line"><a id="l02527" name="l02527"></a><span class="lineno"> 2527</span>        <span class="keywordflow">if</span> (brush.type == <a class="code hl_enumvalue" href="structcanvas__ity_1_1paint__brush.html#ab6686ae3436f145ab241196f2337e010afba9224071f073610edf89517f965566">paint_brush::color</a>)</div>
<div class="line"><a id="l02528" name="l02528"></a><span class="lineno"> 2528</span>            <span class="keywordflow">return</span> brush.colors.front();</div>
<div class="line"><a id="l02529" name="l02529"></a><span class="lineno"> 2529</span>        point = <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ade344370cc819a35ed35233e02f09859">inverse</a> * point;</div>
<div class="line"><a id="l02530" name="l02530"></a><span class="lineno"> 2530</span>        <span class="keywordflow">if</span> (brush.type == <a class="code hl_enumvalue" href="structcanvas__ity_1_1paint__brush.html#ab6686ae3436f145ab241196f2337e010acee0286b8cd79b2f387c15a5d1462aaf">paint_brush::pattern</a>)</div>
<div class="line"><a id="l02531" name="l02531"></a><span class="lineno"> 2531</span>        {</div>
<div class="line"><a id="l02532" name="l02532"></a><span class="lineno"> 2532</span>            <span class="keywordtype">float</span> <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#ad4920132bc78f7e74a8b14319e8ff52c">width</a>  = <span class="keyword">static_cast&lt;</span><span class="keywordtype">float</span><span class="keyword">&gt;</span>(brush.width);</div>
<div class="line"><a id="l02533" name="l02533"></a><span class="lineno"> 2533</span>            <span class="keywordtype">float</span> <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#acb61342cdc37dc89aee42e7087adbc50">height</a> = <span class="keyword">static_cast&lt;</span><span class="keywordtype">float</span><span class="keyword">&gt;</span>(brush.height);</div>
<div class="line"><a id="l02534" name="l02534"></a><span class="lineno"> 2534</span>            <span class="keywordflow">if</span> (((brush.repetition &amp; 2) &amp;&amp;</div>
<div class="line"><a id="l02535" name="l02535"></a><span class="lineno"> 2535</span>                 (point.x &lt; 0.0f || <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#ad4920132bc78f7e74a8b14319e8ff52c">width</a> &lt;= point.x)) ||</div>
<div class="line"><a id="l02536" name="l02536"></a><span class="lineno"> 2536</span>                ((brush.repetition &amp; 1) &amp;&amp;</div>
<div class="line"><a id="l02537" name="l02537"></a><span class="lineno"> 2537</span>                 (point.y &lt; 0.0f || <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#acb61342cdc37dc89aee42e7087adbc50">height</a> &lt;= point.y)))</div>
<div class="line"><a id="l02538" name="l02538"></a><span class="lineno"> 2538</span>                <span class="keywordflow">return</span> rgba(0.0f, 0.0f, 0.0f, 0.0f);</div>
<div class="line"><a id="l02539" name="l02539"></a><span class="lineno"> 2539</span>            <span class="keywordtype">float</span> scale_x      = fabsf(<a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ade344370cc819a35ed35233e02f09859">inverse</a>.<a class="code hl_variable" href="structcanvas__ity_1_1affine__matrix.html#a06279a73c160cc47458ff2f08f25b566">a</a>) + fabsf(<a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ade344370cc819a35ed35233e02f09859">inverse</a>.<a class="code hl_variable" href="structcanvas__ity_1_1affine__matrix.html#ae34446b5fed7e778e2a62a436e47f12e">c</a>);</div>
<div class="line"><a id="l02540" name="l02540"></a><span class="lineno"> 2540</span>            <span class="keywordtype">float</span> scale_y      = fabsf(<a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ade344370cc819a35ed35233e02f09859">inverse</a>.<a class="code hl_variable" href="structcanvas__ity_1_1affine__matrix.html#a3abbeddf9bbf1b7c7d81c2b0339c4123">b</a>) + fabsf(<a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ade344370cc819a35ed35233e02f09859">inverse</a>.<a class="code hl_variable" href="structcanvas__ity_1_1affine__matrix.html#ac8fa9558e05f63f452296d1ef2aba39a">d</a>);</div>
<div class="line"><a id="l02541" name="l02541"></a><span class="lineno"> 2541</span>            scale_x            = std::max(1.0f, std::min(scale_x, <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#ad4920132bc78f7e74a8b14319e8ff52c">width</a> * 0.25f));</div>
<div class="line"><a id="l02542" name="l02542"></a><span class="lineno"> 2542</span>            scale_y            = std::max(1.0f, std::min(scale_y, <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#acb61342cdc37dc89aee42e7087adbc50">height</a> * 0.25f));</div>
<div class="line"><a id="l02543" name="l02543"></a><span class="lineno"> 2543</span>            <span class="keywordtype">float</span> reciprocal_x = 1.0f / scale_x;</div>
<div class="line"><a id="l02544" name="l02544"></a><span class="lineno"> 2544</span>            <span class="keywordtype">float</span> reciprocal_y = 1.0f / scale_y;</div>
<div class="line"><a id="l02545" name="l02545"></a><span class="lineno"> 2545</span>            point -= xy(0.5f, 0.5f);</div>
<div class="line"><a id="l02546" name="l02546"></a><span class="lineno"> 2546</span>            <span class="keywordtype">int</span>   left         = <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(ceilf(point.x - scale_x * 2.0f));</div>
<div class="line"><a id="l02547" name="l02547"></a><span class="lineno"> 2547</span>            <span class="keywordtype">int</span>   <a class="code hl_enumvalue" href="namespacecanvas__ity.html#a4d285f5b6403d2455e1550ff00b66a68a9a249647210b2d2559a66e7aa00dcd4b">top</a>          = <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(ceilf(point.y - scale_y * 2.0f));</div>
<div class="line"><a id="l02548" name="l02548"></a><span class="lineno"> 2548</span>            <span class="keywordtype">int</span>   right        = <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(ceilf(point.x + scale_x * 2.0f));</div>
<div class="line"><a id="l02549" name="l02549"></a><span class="lineno"> 2549</span>            <span class="keywordtype">int</span>   <a class="code hl_enumvalue" href="namespacecanvas__ity.html#a4d285f5b6403d2455e1550ff00b66a68a9bb9d7bbd943523e378fd235f23cb243">bottom</a>       = <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(ceilf(point.y + scale_y * 2.0f));</div>
<div class="line"><a id="l02550" name="l02550"></a><span class="lineno"> 2550</span>            rgba  total_color  = rgba(0.0f, 0.0f, 0.0f, 0.0f);</div>
<div class="line"><a id="l02551" name="l02551"></a><span class="lineno"> 2551</span>            <span class="keywordtype">float</span> total_weight = 0.0f;</div>
<div class="line"><a id="l02552" name="l02552"></a><span class="lineno"> 2552</span>            <span class="keywordflow">for</span> (<span class="keywordtype">int</span> pattern_y = <a class="code hl_enumvalue" href="namespacecanvas__ity.html#a4d285f5b6403d2455e1550ff00b66a68a9a249647210b2d2559a66e7aa00dcd4b">top</a>; pattern_y &lt; <a class="code hl_enumvalue" href="namespacecanvas__ity.html#a4d285f5b6403d2455e1550ff00b66a68a9bb9d7bbd943523e378fd235f23cb243">bottom</a>; ++pattern_y)</div>
<div class="line"><a id="l02553" name="l02553"></a><span class="lineno"> 2553</span>            {</div>
<div class="line"><a id="l02554" name="l02554"></a><span class="lineno"> 2554</span>                <span class="keywordtype">float</span> y         = fabsf(reciprocal_y *</div>
<div class="line"><a id="l02555" name="l02555"></a><span class="lineno"> 2555</span>                                (<span class="keyword">static_cast&lt;</span><span class="keywordtype">float</span><span class="keyword">&gt;</span>(pattern_y) - point.y));</div>
<div class="line"><a id="l02556" name="l02556"></a><span class="lineno"> 2556</span>                <span class="keywordtype">float</span> weight_y  = (y &lt; 1.0f ? (1.5f * y - 2.5f) * y * y + 1.0f : ((-0.5f * y + 2.5f) * y - 4.0f) * y + 2.0f);</div>
<div class="line"><a id="l02557" name="l02557"></a><span class="lineno"> 2557</span>                <span class="keywordtype">int</span>   wrapped_y = pattern_y % brush.height;</div>
<div class="line"><a id="l02558" name="l02558"></a><span class="lineno"> 2558</span>                <span class="keywordflow">if</span> (wrapped_y &lt; 0)</div>
<div class="line"><a id="l02559" name="l02559"></a><span class="lineno"> 2559</span>                    wrapped_y += brush.height;</div>
<div class="line"><a id="l02560" name="l02560"></a><span class="lineno"> 2560</span>                <span class="keywordflow">if</span> (&amp;brush == &amp;<a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#a15db24a232ad11aedfd4f7b4cfc0b280">image_brush</a>)</div>
<div class="line"><a id="l02561" name="l02561"></a><span class="lineno"> 2561</span>                    wrapped_y = std::min(std::max(pattern_y, 0),</div>
<div class="line"><a id="l02562" name="l02562"></a><span class="lineno"> 2562</span>                                         brush.height - 1);</div>
<div class="line"><a id="l02563" name="l02563"></a><span class="lineno"> 2563</span>                <span class="keywordflow">for</span> (<span class="keywordtype">int</span> pattern_x = left; pattern_x &lt; right; ++pattern_x)</div>
<div class="line"><a id="l02564" name="l02564"></a><span class="lineno"> 2564</span>                {</div>
<div class="line"><a id="l02565" name="l02565"></a><span class="lineno"> 2565</span>                    <span class="keywordtype">float</span> x         = fabsf(reciprocal_x *</div>
<div class="line"><a id="l02566" name="l02566"></a><span class="lineno"> 2566</span>                                    (<span class="keyword">static_cast&lt;</span><span class="keywordtype">float</span><span class="keyword">&gt;</span>(pattern_x) - point.x));</div>
<div class="line"><a id="l02567" name="l02567"></a><span class="lineno"> 2567</span>                    <span class="keywordtype">float</span> weight_x  = (x &lt; 1.0f ? (1.5f * x - 2.5f) * x * x + 1.0f : ((-0.5f * x + 2.5f) * x - 4.0f) * x + 2.0f);</div>
<div class="line"><a id="l02568" name="l02568"></a><span class="lineno"> 2568</span>                    <span class="keywordtype">int</span>   wrapped_x = pattern_x % brush.width;</div>
<div class="line"><a id="l02569" name="l02569"></a><span class="lineno"> 2569</span>                    <span class="keywordflow">if</span> (wrapped_x &lt; 0)</div>
<div class="line"><a id="l02570" name="l02570"></a><span class="lineno"> 2570</span>                        wrapped_x += brush.width;</div>
<div class="line"><a id="l02571" name="l02571"></a><span class="lineno"> 2571</span>                    <span class="keywordflow">if</span> (&amp;brush == &amp;<a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#a15db24a232ad11aedfd4f7b4cfc0b280">image_brush</a>)</div>
<div class="line"><a id="l02572" name="l02572"></a><span class="lineno"> 2572</span>                        wrapped_x = std::min(std::max(pattern_x, 0),</div>
<div class="line"><a id="l02573" name="l02573"></a><span class="lineno"> 2573</span>                                             brush.width - 1);</div>
<div class="line"><a id="l02574" name="l02574"></a><span class="lineno"> 2574</span>                    <span class="keywordtype">float</span>  weight = weight_x * weight_y;</div>
<div class="line"><a id="l02575" name="l02575"></a><span class="lineno"> 2575</span>                    <span class="keywordtype">size_t</span> <a class="code hl_enumvalue" href="core_8h.html#a7fc0249f0f8ba720115d2430f5b86cbaa6a992d5529f459a44fee58c733255e86">index</a>  = <span class="keyword">static_cast&lt;</span><span class="keywordtype">size_t</span><span class="keyword">&gt;</span>(</div>
<div class="line"><a id="l02576" name="l02576"></a><span class="lineno"> 2576</span>                         wrapped_y * brush.width + wrapped_x);</div>
<div class="line"><a id="l02577" name="l02577"></a><span class="lineno"> 2577</span>                    total_color += weight * brush.colors[<a class="code hl_enumvalue" href="core_8h.html#a7fc0249f0f8ba720115d2430f5b86cbaa6a992d5529f459a44fee58c733255e86">index</a>];</div>
<div class="line"><a id="l02578" name="l02578"></a><span class="lineno"> 2578</span>                    total_weight += weight;</div>
<div class="line"><a id="l02579" name="l02579"></a><span class="lineno"> 2579</span>                }</div>
<div class="line"><a id="l02580" name="l02580"></a><span class="lineno"> 2580</span>            }</div>
<div class="line"><a id="l02581" name="l02581"></a><span class="lineno"> 2581</span>            <span class="keywordflow">return</span> (1.0f / total_weight) * total_color;</div>
<div class="line"><a id="l02582" name="l02582"></a><span class="lineno"> 2582</span>        }</div>
<div class="line"><a id="l02583" name="l02583"></a><span class="lineno"> 2583</span>        <span class="keywordtype">float</span> <a class="code hl_define" href="css__properties_8cpp.html#a5dfbcc916693656dd092ddc41ab25747">offset</a>   = 0;</div>
<div class="line"><a id="l02584" name="l02584"></a><span class="lineno"> 2584</span>        xy    relative = point - brush.start;</div>
<div class="line"><a id="l02585" name="l02585"></a><span class="lineno"> 2585</span>        xy    line     = brush.end - brush.start;</div>
<div class="line"><a id="l02586" name="l02586"></a><span class="lineno"> 2586</span>        <span class="keywordtype">float</span> gradient = dot(relative, line);</div>
<div class="line"><a id="l02587" name="l02587"></a><span class="lineno"> 2587</span>        <span class="keywordtype">float</span> <a class="code hl_variable" href="tag__strings_8h.html#a4676578af881b39f9fb1d101298d1778">span</a>     = dot(line, line);</div>
<div class="line"><a id="l02588" name="l02588"></a><span class="lineno"> 2588</span>        <span class="keywordflow">if</span> (brush.type == <a class="code hl_enumvalue" href="structcanvas__ity_1_1paint__brush.html#ab6686ae3436f145ab241196f2337e010ad457f51ef368f0241a8f41b510298fd9">paint_brush::linear</a>)</div>
<div class="line"><a id="l02589" name="l02589"></a><span class="lineno"> 2589</span>        {</div>
<div class="line"><a id="l02590" name="l02590"></a><span class="lineno"> 2590</span>            <span class="keywordflow">if</span> (<a class="code hl_variable" href="tag__strings_8h.html#a4676578af881b39f9fb1d101298d1778">span</a> == 0.0f)</div>
<div class="line"><a id="l02591" name="l02591"></a><span class="lineno"> 2591</span>                <span class="keywordflow">return</span> rgba(0.0f, 0.0f, 0.0f, 0.0f);</div>
<div class="line"><a id="l02592" name="l02592"></a><span class="lineno"> 2592</span>            <a class="code hl_define" href="css__properties_8cpp.html#a5dfbcc916693656dd092ddc41ab25747">offset</a> = gradient / <a class="code hl_variable" href="tag__strings_8h.html#a4676578af881b39f9fb1d101298d1778">span</a>;</div>
<div class="line"><a id="l02593" name="l02593"></a><span class="lineno"> 2593</span>        }</div>
<div class="line"><a id="l02594" name="l02594"></a><span class="lineno"> 2594</span>        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (brush.type == <a class="code hl_enumvalue" href="structcanvas__ity_1_1paint__brush.html#ab6686ae3436f145ab241196f2337e010a9441d4b111a1ff0bf1b075834adb9937">paint_brush::radial</a>)</div>
<div class="line"><a id="l02595" name="l02595"></a><span class="lineno"> 2595</span>        {</div>
<div class="line"><a id="l02596" name="l02596"></a><span class="lineno"> 2596</span>            <span class="keywordtype">float</span> initial      = brush.start_radius;</div>
<div class="line"><a id="l02597" name="l02597"></a><span class="lineno"> 2597</span>            <span class="keywordtype">float</span> change       = brush.end_radius - initial;</div>
<div class="line"><a id="l02598" name="l02598"></a><span class="lineno"> 2598</span>            <span class="keywordtype">float</span> <a class="code hl_variable" href="tag__strings_8h.html#a4124bc0a9335c27f086f24ba207a4912">a</a>            = <a class="code hl_variable" href="tag__strings_8h.html#a4676578af881b39f9fb1d101298d1778">span</a> - change * change;</div>
<div class="line"><a id="l02599" name="l02599"></a><span class="lineno"> 2599</span>            <span class="keywordtype">float</span> <a class="code hl_variable" href="tag__strings_8h.html#a21ad0bd836b90d08f4cf640b4c298e7c">b</a>            = -2.0f * (gradient + initial * change);</div>
<div class="line"><a id="l02600" name="l02600"></a><span class="lineno"> 2600</span>            <span class="keywordtype">float</span> c            = dot(relative, relative) - initial * initial;</div>
<div class="line"><a id="l02601" name="l02601"></a><span class="lineno"> 2601</span>            <span class="keywordtype">float</span> discriminant = <a class="code hl_variable" href="tag__strings_8h.html#a21ad0bd836b90d08f4cf640b4c298e7c">b</a> * <a class="code hl_variable" href="tag__strings_8h.html#a21ad0bd836b90d08f4cf640b4c298e7c">b</a> - 4.0f * <a class="code hl_variable" href="tag__strings_8h.html#a4124bc0a9335c27f086f24ba207a4912">a</a> * c;</div>
<div class="line"><a id="l02602" name="l02602"></a><span class="lineno"> 2602</span>            <span class="keywordflow">if</span> (discriminant &lt; 0.0f ||</div>
<div class="line"><a id="l02603" name="l02603"></a><span class="lineno"> 2603</span>                (<a class="code hl_variable" href="tag__strings_8h.html#a4676578af881b39f9fb1d101298d1778">span</a> == 0.0f &amp;&amp; change == 0.0f))</div>
<div class="line"><a id="l02604" name="l02604"></a><span class="lineno"> 2604</span>                <span class="keywordflow">return</span> rgba(0.0f, 0.0f, 0.0f, 0.0f);</div>
<div class="line"><a id="l02605" name="l02605"></a><span class="lineno"> 2605</span>            <span class="keywordtype">float</span> root       = sqrtf(discriminant);</div>
<div class="line"><a id="l02606" name="l02606"></a><span class="lineno"> 2606</span>            <span class="keywordtype">float</span> reciprocal = 1.0f / (2.0f * <a class="code hl_variable" href="tag__strings_8h.html#a4124bc0a9335c27f086f24ba207a4912">a</a>);</div>
<div class="line"><a id="l02607" name="l02607"></a><span class="lineno"> 2607</span>            <span class="keywordtype">float</span> offset_1   = (-<a class="code hl_variable" href="tag__strings_8h.html#a21ad0bd836b90d08f4cf640b4c298e7c">b</a> - root) * reciprocal;</div>
<div class="line"><a id="l02608" name="l02608"></a><span class="lineno"> 2608</span>            <span class="keywordtype">float</span> offset_2   = (-<a class="code hl_variable" href="tag__strings_8h.html#a21ad0bd836b90d08f4cf640b4c298e7c">b</a> + root) * reciprocal;</div>
<div class="line"><a id="l02609" name="l02609"></a><span class="lineno"> 2609</span>            <span class="keywordtype">float</span> radius_1   = initial + change * offset_1;</div>
<div class="line"><a id="l02610" name="l02610"></a><span class="lineno"> 2610</span>            <span class="keywordtype">float</span> radius_2   = initial + change * offset_2;</div>
<div class="line"><a id="l02611" name="l02611"></a><span class="lineno"> 2611</span>            <span class="keywordflow">if</span> (radius_2 &gt;= 0.0f)</div>
<div class="line"><a id="l02612" name="l02612"></a><span class="lineno"> 2612</span>                <a class="code hl_define" href="css__properties_8cpp.html#a5dfbcc916693656dd092ddc41ab25747">offset</a> = offset_2;</div>
<div class="line"><a id="l02613" name="l02613"></a><span class="lineno"> 2613</span>            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (radius_1 &gt;= 0.0f)</div>
<div class="line"><a id="l02614" name="l02614"></a><span class="lineno"> 2614</span>                <a class="code hl_define" href="css__properties_8cpp.html#a5dfbcc916693656dd092ddc41ab25747">offset</a> = offset_1;</div>
<div class="line"><a id="l02615" name="l02615"></a><span class="lineno"> 2615</span>            <span class="keywordflow">else</span></div>
<div class="line"><a id="l02616" name="l02616"></a><span class="lineno"> 2616</span>                <span class="keywordflow">return</span> rgba(0.0f, 0.0f, 0.0f, 0.0f);</div>
<div class="line"><a id="l02617" name="l02617"></a><span class="lineno"> 2617</span>        }</div>
<div class="line"><a id="l02618" name="l02618"></a><span class="lineno"> 2618</span>        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (brush.type == <a class="code hl_enumvalue" href="structcanvas__ity_1_1paint__brush.html#ab6686ae3436f145ab241196f2337e010aed9f68685c6e52ea8d0b31f8dc882a6e">paint_brush::css_radial</a>)</div>
<div class="line"><a id="l02619" name="l02619"></a><span class="lineno"> 2619</span>        {</div>
<div class="line"><a id="l02620" name="l02620"></a><span class="lineno"> 2620</span>            <span class="keywordflow">if</span> (brush.css_radius.x == 0 || brush.css_radius.y == 0)</div>
<div class="line"><a id="l02621" name="l02621"></a><span class="lineno"> 2621</span>                <a class="code hl_define" href="css__properties_8cpp.html#a5dfbcc916693656dd092ddc41ab25747">offset</a> = 1;</div>
<div class="line"><a id="l02622" name="l02622"></a><span class="lineno"> 2622</span>            <span class="keywordflow">else</span></div>
<div class="line"><a id="l02623" name="l02623"></a><span class="lineno"> 2623</span>            {</div>
<div class="line"><a id="l02624" name="l02624"></a><span class="lineno"> 2624</span>                xy rel = {relative.x / brush.css_radius.x, relative.y / brush.css_radius.y};</div>
<div class="line"><a id="l02625" name="l02625"></a><span class="lineno"> 2625</span>                <a class="code hl_define" href="css__properties_8cpp.html#a5dfbcc916693656dd092ddc41ab25747">offset</a> = length(rel);</div>
<div class="line"><a id="l02626" name="l02626"></a><span class="lineno"> 2626</span>            }</div>
<div class="line"><a id="l02627" name="l02627"></a><span class="lineno"> 2627</span>        }</div>
<div class="line"><a id="l02628" name="l02628"></a><span class="lineno"> 2628</span>        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (brush.type == <a class="code hl_enumvalue" href="structcanvas__ity_1_1paint__brush.html#ab6686ae3436f145ab241196f2337e010ad3adc95a76cdcb1c12fb911b9ae31d67">paint_brush::conic</a>)</div>
<div class="line"><a id="l02629" name="l02629"></a><span class="lineno"> 2629</span>        {</div>
<div class="line"><a id="l02630" name="l02630"></a><span class="lineno"> 2630</span>            <span class="keywordtype">float</span> angle = 90 + direction(relative) * 180 / <a class="code hl_variable" href="namespacelitehtml.html#a0ffa29477d59c5b5e76956561eb10a94">pi</a>;</div>
<div class="line"><a id="l02631" name="l02631"></a><span class="lineno"> 2631</span>            <a class="code hl_define" href="css__properties_8cpp.html#a5dfbcc916693656dd092ddc41ab25747">offset</a>      = normalize_angle(angle - brush.angle) / 360;</div>
<div class="line"><a id="l02632" name="l02632"></a><span class="lineno"> 2632</span>        }</div>
<div class="line"><a id="l02633" name="l02633"></a><span class="lineno"> 2633</span>        <span class="keywordtype">size_t</span> <a class="code hl_enumvalue" href="core_8h.html#a7fc0249f0f8ba720115d2430f5b86cbaa6a992d5529f459a44fee58c733255e86">index</a> = <span class="keyword">static_cast&lt;</span><span class="keywordtype">size_t</span><span class="keyword">&gt;</span>(</div>
<div class="line"><a id="l02634" name="l02634"></a><span class="lineno"> 2634</span>            std::upper_bound(brush.stops.begin(), brush.stops.end(), <a class="code hl_define" href="css__properties_8cpp.html#a5dfbcc916693656dd092ddc41ab25747">offset</a>) -</div>
<div class="line"><a id="l02635" name="l02635"></a><span class="lineno"> 2635</span>            brush.stops.begin());</div>
<div class="line"><a id="l02636" name="l02636"></a><span class="lineno"> 2636</span>        <span class="keywordflow">if</span> (<a class="code hl_enumvalue" href="core_8h.html#a7fc0249f0f8ba720115d2430f5b86cbaa6a992d5529f459a44fee58c733255e86">index</a> == 0)</div>
<div class="line"><a id="l02637" name="l02637"></a><span class="lineno"> 2637</span>            <span class="keywordflow">return</span> premultiplied(brush.colors.front());</div>
<div class="line"><a id="l02638" name="l02638"></a><span class="lineno"> 2638</span>        <span class="keywordflow">if</span> (<a class="code hl_enumvalue" href="core_8h.html#a7fc0249f0f8ba720115d2430f5b86cbaa6a992d5529f459a44fee58c733255e86">index</a> == brush.stops.size())</div>
<div class="line"><a id="l02639" name="l02639"></a><span class="lineno"> 2639</span>            <span class="keywordflow">return</span> premultiplied(brush.colors.back());</div>
<div class="line"><a id="l02640" name="l02640"></a><span class="lineno"> 2640</span>        <span class="keyword">struct</span></div>
<div class="line"><a id="l02641" name="l02641"></a><span class="lineno"> 2641</span>        {</div>
<div class="line"><a id="l02642" name="l02642"></a><span class="lineno"> 2642</span>            rgba                 <a class="code hl_struct" href="structcolor.html">color</a>;</div>
<div class="line"><a id="l02643" name="l02643"></a><span class="lineno"> 2643</span>            <span class="keywordtype">float</span>                stop;</div>
<div class="line"><a id="l02644" name="l02644"></a><span class="lineno"> 2644</span>            std::optional&lt;float&gt; hint;</div>
<div class="line"><a id="l02645" name="l02645"></a><span class="lineno"> 2645</span>        } A = {brush.colors[<a class="code hl_enumvalue" href="core_8h.html#a7fc0249f0f8ba720115d2430f5b86cbaa6a992d5529f459a44fee58c733255e86">index</a> - 1], brush.stops[<a class="code hl_enumvalue" href="core_8h.html#a7fc0249f0f8ba720115d2430f5b86cbaa6a992d5529f459a44fee58c733255e86">index</a> - 1], brush.hints[<a class="code hl_enumvalue" href="core_8h.html#a7fc0249f0f8ba720115d2430f5b86cbaa6a992d5529f459a44fee58c733255e86">index</a> - 1]},</div>
<div class="line"><a id="l02646" name="l02646"></a><span class="lineno"> 2646</span>          B = {brush.colors[<a class="code hl_enumvalue" href="core_8h.html#a7fc0249f0f8ba720115d2430f5b86cbaa6a992d5529f459a44fee58c733255e86">index</a>], brush.stops[<a class="code hl_enumvalue" href="core_8h.html#a7fc0249f0f8ba720115d2430f5b86cbaa6a992d5529f459a44fee58c733255e86">index</a>], {}};</div>
<div class="line"><a id="l02647" name="l02647"></a><span class="lineno"> 2647</span>        <span class="comment">// https://drafts.csswg.org/css-images-4/#coloring-gradient-line</span></div>
<div class="line"><a id="l02648" name="l02648"></a><span class="lineno"> 2648</span>        <span class="comment">// 1. Determine the location of the transition hint as a percentage of the distance between the two color stops, denoted as a number between 0 and 1</span></div>
<div class="line"><a id="l02649" name="l02649"></a><span class="lineno"> 2649</span>        <span class="keywordtype">float</span> H = !A.hint ? .5f : (*A.hint - A.stop) / (B.stop - A.stop);</div>
<div class="line"><a id="l02650" name="l02650"></a><span class="lineno"> 2650</span>        <span class="comment">// 2. For any given point between the two color stops, determine the point’s location as a percentage of the distance between the two color stops, in the same way as the previous step.</span></div>
<div class="line"><a id="l02651" name="l02651"></a><span class="lineno"> 2651</span>        <span class="keywordtype">float</span> P = (<a class="code hl_define" href="css__properties_8cpp.html#a5dfbcc916693656dd092ddc41ab25747">offset</a> - A.stop) / (B.stop - A.stop);</div>
<div class="line"><a id="l02652" name="l02652"></a><span class="lineno"> 2652</span>        <span class="comment">// 3. Let C, the color weighting at that point, be equal to P^logH(.5).</span></div>
<div class="line"><a id="l02653" name="l02653"></a><span class="lineno"> 2653</span>        <span class="keywordtype">float</span> C = pow(P, <a class="code hl_function" href="namespacespdlog.html#ab7004914a7898ecdf8dc0014e49aa6f6">log</a>(.5f) / <a class="code hl_function" href="namespacespdlog.html#ab7004914a7898ecdf8dc0014e49aa6f6">log</a>(H));</div>
<div class="line"><a id="l02654" name="l02654"></a><span class="lineno"> 2654</span>        <span class="comment">// 4. The color at that point is then a linear blend between the colors of the two color stops, blending (1 - C) of the first stop and C of the second stop.</span></div>
<div class="line"><a id="l02655" name="l02655"></a><span class="lineno"> 2655</span>        <span class="keywordflow">return</span> premultiplied((1 - C) * A.color + C * B.color);</div>
<div class="line"><a id="l02656" name="l02656"></a><span class="lineno"> 2656</span>    }</div>
<div class="line"><a id="l02657" name="l02657"></a><span class="lineno"> 2657</span> </div>
<div class="line"><a id="l02658" name="l02658"></a><span class="lineno"> 2658</span>    <span class="comment">// Render the shadow of the polylines into the pixel buffer if needed.  After</span></div>
<div class="line"><a id="l02659" name="l02659"></a><span class="lineno"> 2659</span>    <span class="comment">// computing the border as the maximum distance that one pixel can affect</span></div>
<div class="line"><a id="l02660" name="l02660"></a><span class="lineno"> 2660</span>    <span class="comment">// another via the blur, it scan-converts the lines to runs with the shadow</span></div>
<div class="line"><a id="l02661" name="l02661"></a><span class="lineno"> 2661</span>    <span class="comment">// offset and that extra amount of border padding.  Then it bounds the scan</span></div>
<div class="line"><a id="l02662" name="l02662"></a><span class="lineno"> 2662</span>    <span class="comment">// converted shape, pads this with border, clips that to the extended canvas</span></div>
<div class="line"><a id="l02663" name="l02663"></a><span class="lineno"> 2663</span>    <span class="comment">// size, and rasterizes to fill a working area with the alpha.  Next, a fast</span></div>
<div class="line"><a id="l02664" name="l02664"></a><span class="lineno"> 2664</span>    <span class="comment">// approximation of a Gaussian blur is done using three passes of box blurs</span></div>
<div class="line"><a id="l02665" name="l02665"></a><span class="lineno"> 2665</span>    <span class="comment">// each in the rows and columns.  Note that these box blurs have a small extra</span></div>
<div class="line"><a id="l02666" name="l02666"></a><span class="lineno"> 2666</span>    <span class="comment">// weight on the tails to allow for fractional widths.  See &quot;Theoretical</span></div>
<div class="line"><a id="l02667" name="l02667"></a><span class="lineno"> 2667</span>    <span class="comment">// Foundations of Gaussian Convolution by Extended Box Filtering&quot; by Gwosdek</span></div>
<div class="line"><a id="l02668" name="l02668"></a><span class="lineno"> 2668</span>    <span class="comment">// et al. for details.  Finally, it colors the blurred alpha image with</span></div>
<div class="line"><a id="l02669" name="l02669"></a><span class="lineno"> 2669</span>    <span class="comment">// the shadow color and blends this into the pixel buffer according to the</span></div>
<div class="line"><a id="l02670" name="l02670"></a><span class="lineno"> 2670</span>    <span class="comment">// compositing settings and clip mask.  Note that it does not bother clearing</span></div>
<div class="line"><a id="l02671" name="l02671"></a><span class="lineno"> 2671</span>    <span class="comment">// outside the area of the alpha image when the compositing settings require</span></div>
<div class="line"><a id="l02672" name="l02672"></a><span class="lineno"> 2672</span>    <span class="comment">// clearing; that will be done on the subsequent main rendering pass.</span></div>
<div class="line"><a id="l02673" name="l02673"></a><span class="lineno"> 2673</span>    <span class="comment">//</span></div>
<div class="line"><a id="l02674" name="l02674"></a><span class="lineno"> 2674</span>    <span class="keywordtype">void</span> <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#a157d3c554ce752f70cb447fe3b7f0f4d">canvas::render_shadow</a>(</div>
<div class="line"><a id="l02675" name="l02675"></a><span class="lineno"> 2675</span>        paint_brush <span class="keyword">const</span>&amp; brush)</div>
<div class="line"><a id="l02676" name="l02676"></a><span class="lineno"> 2676</span>    {</div>
<div class="line"><a id="l02677" name="l02677"></a><span class="lineno"> 2677</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ad1f1bcdb74c8c6dbcbd0815ba620f7d1">shadow_color</a>.<a class="code hl_variable" href="structcanvas__ity_1_1rgba.html#a56d4a13f86fa2eafafdb5d631e1dadfc">a</a> == 0.0f || (<a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#a93720138de6b5228b4154081aef29988">shadow_blur</a> == 0.0f &amp;&amp;</div>
<div class="line"><a id="l02678" name="l02678"></a><span class="lineno"> 2678</span>                                       <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#afec88bee82b83c1d8dda0f3ba81a3c5f">shadow_offset_x</a> == 0.0f &amp;&amp;</div>
<div class="line"><a id="l02679" name="l02679"></a><span class="lineno"> 2679</span>                                       <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#aeaae3e918b69a8467ef5f92ed1d5d02f">shadow_offset_y</a> == 0.0f))</div>
<div class="line"><a id="l02680" name="l02680"></a><span class="lineno"> 2680</span>            <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l02681" name="l02681"></a><span class="lineno"> 2681</span>        <span class="keywordtype">float</span>  sigma_squared = 0.25f * <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#a93720138de6b5228b4154081aef29988">shadow_blur</a> * <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#a93720138de6b5228b4154081aef29988">shadow_blur</a>;</div>
<div class="line"><a id="l02682" name="l02682"></a><span class="lineno"> 2682</span>        <span class="keywordtype">size_t</span> radius        = <span class="keyword">static_cast&lt;</span><span class="keywordtype">size_t</span><span class="keyword">&gt;</span>(</div>
<div class="line"><a id="l02683" name="l02683"></a><span class="lineno"> 2683</span>               0.5f * sqrtf(4.0f * sigma_squared + 1.0f) - 0.5f);</div>
<div class="line"><a id="l02684" name="l02684"></a><span class="lineno"> 2684</span>        <span class="keywordtype">int</span> border = 3 * (<span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(radius) + 1);</div>
<div class="line"><a id="l02685" name="l02685"></a><span class="lineno"> 2685</span>        xy  <a class="code hl_define" href="css__properties_8cpp.html#a5dfbcc916693656dd092ddc41ab25747">offset</a> = xy(<span class="keyword">static_cast&lt;</span><span class="keywordtype">float</span><span class="keyword">&gt;</span>(border) + <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#afec88bee82b83c1d8dda0f3ba81a3c5f">shadow_offset_x</a>,</div>
<div class="line"><a id="l02686" name="l02686"></a><span class="lineno"> 2686</span>                        <span class="keyword">static_cast&lt;</span><span class="keywordtype">float</span><span class="keyword">&gt;</span>(border) + <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#aeaae3e918b69a8467ef5f92ed1d5d02f">shadow_offset_y</a>);</div>
<div class="line"><a id="l02687" name="l02687"></a><span class="lineno"> 2687</span>        <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#a97cc5b1cc4d7e5b67ab3054fcdcfb3d4">lines_to_runs</a>(<a class="code hl_define" href="css__properties_8cpp.html#a5dfbcc916693656dd092ddc41ab25747">offset</a>, 2 * border);</div>
<div class="line"><a id="l02688" name="l02688"></a><span class="lineno"> 2688</span>        <span class="keywordtype">int</span> left   = <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#aab63b227be5d7786e5bf0b07362addfb">size_x</a> + 2 * border;</div>
<div class="line"><a id="l02689" name="l02689"></a><span class="lineno"> 2689</span>        <span class="keywordtype">int</span> right  = 0;</div>
<div class="line"><a id="l02690" name="l02690"></a><span class="lineno"> 2690</span>        <span class="keywordtype">int</span> <a class="code hl_enumvalue" href="namespacecanvas__ity.html#a4d285f5b6403d2455e1550ff00b66a68a9a249647210b2d2559a66e7aa00dcd4b">top</a>    = <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ae039e222157aef7c67de905bfbfaa1a7">size_y</a> + 2 * border;</div>
<div class="line"><a id="l02691" name="l02691"></a><span class="lineno"> 2691</span>        <span class="keywordtype">int</span> <a class="code hl_enumvalue" href="namespacecanvas__ity.html#a4d285f5b6403d2455e1550ff00b66a68a9bb9d7bbd943523e378fd235f23cb243">bottom</a> = 0;</div>
<div class="line"><a id="l02692" name="l02692"></a><span class="lineno"> 2692</span>        <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> <a class="code hl_enumvalue" href="core_8h.html#a7fc0249f0f8ba720115d2430f5b86cbaa6a992d5529f459a44fee58c733255e86">index</a> = 0; <a class="code hl_enumvalue" href="core_8h.html#a7fc0249f0f8ba720115d2430f5b86cbaa6a992d5529f459a44fee58c733255e86">index</a> &lt; <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#a4e8fe391327b93aaf006b52eaf3546f4">runs</a>.size(); ++<a class="code hl_enumvalue" href="core_8h.html#a7fc0249f0f8ba720115d2430f5b86cbaa6a992d5529f459a44fee58c733255e86">index</a>)</div>
<div class="line"><a id="l02693" name="l02693"></a><span class="lineno"> 2693</span>        {</div>
<div class="line"><a id="l02694" name="l02694"></a><span class="lineno"> 2694</span>            left   = std::min(left, <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(<a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#a4e8fe391327b93aaf006b52eaf3546f4">runs</a>[<a class="code hl_enumvalue" href="core_8h.html#a7fc0249f0f8ba720115d2430f5b86cbaa6a992d5529f459a44fee58c733255e86">index</a>].x));</div>
<div class="line"><a id="l02695" name="l02695"></a><span class="lineno"> 2695</span>            right  = std::max(right, <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(<a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#a4e8fe391327b93aaf006b52eaf3546f4">runs</a>[<a class="code hl_enumvalue" href="core_8h.html#a7fc0249f0f8ba720115d2430f5b86cbaa6a992d5529f459a44fee58c733255e86">index</a>].x));</div>
<div class="line"><a id="l02696" name="l02696"></a><span class="lineno"> 2696</span>            <a class="code hl_enumvalue" href="namespacecanvas__ity.html#a4d285f5b6403d2455e1550ff00b66a68a9a249647210b2d2559a66e7aa00dcd4b">top</a>    = std::min(<a class="code hl_enumvalue" href="namespacecanvas__ity.html#a4d285f5b6403d2455e1550ff00b66a68a9a249647210b2d2559a66e7aa00dcd4b">top</a>, <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(<a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#a4e8fe391327b93aaf006b52eaf3546f4">runs</a>[<a class="code hl_enumvalue" href="core_8h.html#a7fc0249f0f8ba720115d2430f5b86cbaa6a992d5529f459a44fee58c733255e86">index</a>].y));</div>
<div class="line"><a id="l02697" name="l02697"></a><span class="lineno"> 2697</span>            <a class="code hl_enumvalue" href="namespacecanvas__ity.html#a4d285f5b6403d2455e1550ff00b66a68a9bb9d7bbd943523e378fd235f23cb243">bottom</a> = std::max(<a class="code hl_enumvalue" href="namespacecanvas__ity.html#a4d285f5b6403d2455e1550ff00b66a68a9bb9d7bbd943523e378fd235f23cb243">bottom</a>, <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(<a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#a4e8fe391327b93aaf006b52eaf3546f4">runs</a>[<a class="code hl_enumvalue" href="core_8h.html#a7fc0249f0f8ba720115d2430f5b86cbaa6a992d5529f459a44fee58c733255e86">index</a>].y));</div>
<div class="line"><a id="l02698" name="l02698"></a><span class="lineno"> 2698</span>        }</div>
<div class="line"><a id="l02699" name="l02699"></a><span class="lineno"> 2699</span>        left           = std::max(left - border, 0);</div>
<div class="line"><a id="l02700" name="l02700"></a><span class="lineno"> 2700</span>        right          = std::min(right + border, <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#aab63b227be5d7786e5bf0b07362addfb">size_x</a> + 2 * border) + 1;</div>
<div class="line"><a id="l02701" name="l02701"></a><span class="lineno"> 2701</span>        <a class="code hl_enumvalue" href="namespacecanvas__ity.html#a4d285f5b6403d2455e1550ff00b66a68a9a249647210b2d2559a66e7aa00dcd4b">top</a>            = std::max(<a class="code hl_enumvalue" href="namespacecanvas__ity.html#a4d285f5b6403d2455e1550ff00b66a68a9a249647210b2d2559a66e7aa00dcd4b">top</a> - border, 0);</div>
<div class="line"><a id="l02702" name="l02702"></a><span class="lineno"> 2702</span>        <a class="code hl_enumvalue" href="namespacecanvas__ity.html#a4d285f5b6403d2455e1550ff00b66a68a9bb9d7bbd943523e378fd235f23cb243">bottom</a>         = std::min(<a class="code hl_enumvalue" href="namespacecanvas__ity.html#a4d285f5b6403d2455e1550ff00b66a68a9bb9d7bbd943523e378fd235f23cb243">bottom</a> + border, <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ae039e222157aef7c67de905bfbfaa1a7">size_y</a> + 2 * border);</div>
<div class="line"><a id="l02703" name="l02703"></a><span class="lineno"> 2703</span>        <span class="keywordtype">size_t</span> <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#ad4920132bc78f7e74a8b14319e8ff52c">width</a>   = <span class="keyword">static_cast&lt;</span><span class="keywordtype">size_t</span><span class="keyword">&gt;</span>(std::max(right - left, 0));</div>
<div class="line"><a id="l02704" name="l02704"></a><span class="lineno"> 2704</span>        <span class="keywordtype">size_t</span> <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#acb61342cdc37dc89aee42e7087adbc50">height</a>  = <span class="keyword">static_cast&lt;</span><span class="keywordtype">size_t</span><span class="keyword">&gt;</span>(std::max(<a class="code hl_enumvalue" href="namespacecanvas__ity.html#a4d285f5b6403d2455e1550ff00b66a68a9bb9d7bbd943523e378fd235f23cb243">bottom</a> - <a class="code hl_enumvalue" href="namespacecanvas__ity.html#a4d285f5b6403d2455e1550ff00b66a68a9a249647210b2d2559a66e7aa00dcd4b">top</a>, 0));</div>
<div class="line"><a id="l02705" name="l02705"></a><span class="lineno"> 2705</span>        <span class="keywordtype">size_t</span> working = <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#ad4920132bc78f7e74a8b14319e8ff52c">width</a> * <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#acb61342cdc37dc89aee42e7087adbc50">height</a>;</div>
<div class="line"><a id="l02706" name="l02706"></a><span class="lineno"> 2706</span>        <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ab3d978450725779c91b16e192ac264ef">shadow</a>.clear();</div>
<div class="line"><a id="l02707" name="l02707"></a><span class="lineno"> 2707</span>        <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ab3d978450725779c91b16e192ac264ef">shadow</a>.resize(working + std::max(<a class="code hl_function" href="classcanvas__ity_1_1canvas.html#ad4920132bc78f7e74a8b14319e8ff52c">width</a>, <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#acb61342cdc37dc89aee42e7087adbc50">height</a>));</div>
<div class="line"><a id="l02708" name="l02708"></a><span class="lineno"> 2708</span>        <span class="keyword">static</span> <span class="keywordtype">float</span> <span class="keyword">const</span> threshold = 1.0f / 8160.0f;</div>
<div class="line"><a id="l02709" name="l02709"></a><span class="lineno"> 2709</span>        {</div>
<div class="line"><a id="l02710" name="l02710"></a><span class="lineno"> 2710</span>            <span class="keywordtype">int</span>   x   = -1;</div>
<div class="line"><a id="l02711" name="l02711"></a><span class="lineno"> 2711</span>            <span class="keywordtype">int</span>   y   = -1;</div>
<div class="line"><a id="l02712" name="l02712"></a><span class="lineno"> 2712</span>            <span class="keywordtype">float</span> sum = 0.0f;</div>
<div class="line"><a id="l02713" name="l02713"></a><span class="lineno"> 2713</span>            <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> <a class="code hl_enumvalue" href="core_8h.html#a7fc0249f0f8ba720115d2430f5b86cbaa6a992d5529f459a44fee58c733255e86">index</a> = 0; <a class="code hl_enumvalue" href="core_8h.html#a7fc0249f0f8ba720115d2430f5b86cbaa6a992d5529f459a44fee58c733255e86">index</a> &lt; <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#a4e8fe391327b93aaf006b52eaf3546f4">runs</a>.size(); ++<a class="code hl_enumvalue" href="core_8h.html#a7fc0249f0f8ba720115d2430f5b86cbaa6a992d5529f459a44fee58c733255e86">index</a>)</div>
<div class="line"><a id="l02714" name="l02714"></a><span class="lineno"> 2714</span>            {</div>
<div class="line"><a id="l02715" name="l02715"></a><span class="lineno"> 2715</span>                pixel_run next     = <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#a4e8fe391327b93aaf006b52eaf3546f4">runs</a>[<a class="code hl_enumvalue" href="core_8h.html#a7fc0249f0f8ba720115d2430f5b86cbaa6a992d5529f459a44fee58c733255e86">index</a>];</div>
<div class="line"><a id="l02716" name="l02716"></a><span class="lineno"> 2716</span>                <span class="keywordtype">float</span>     coverage = std::min(fabsf(sum), 1.0f);</div>
<div class="line"><a id="l02717" name="l02717"></a><span class="lineno"> 2717</span>                <span class="keywordtype">int</span>       to       = next.y == y ? next.x : x + 1;</div>
<div class="line"><a id="l02718" name="l02718"></a><span class="lineno"> 2718</span>                <span class="keywordflow">if</span> (coverage &gt;= threshold)</div>
<div class="line"><a id="l02719" name="l02719"></a><span class="lineno"> 2719</span>                    <span class="keywordflow">for</span> (; x &lt; to; ++x)</div>
<div class="line"><a id="l02720" name="l02720"></a><span class="lineno"> 2720</span>                        <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ab3d978450725779c91b16e192ac264ef">shadow</a>[<span class="keyword">static_cast&lt;</span><span class="keywordtype">size_t</span><span class="keyword">&gt;</span>(y - <a class="code hl_enumvalue" href="namespacecanvas__ity.html#a4d285f5b6403d2455e1550ff00b66a68a9a249647210b2d2559a66e7aa00dcd4b">top</a>) * <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#ad4920132bc78f7e74a8b14319e8ff52c">width</a> +</div>
<div class="line"><a id="l02721" name="l02721"></a><span class="lineno"> 2721</span>                               <span class="keyword">static_cast&lt;</span><span class="keywordtype">size_t</span><span class="keyword">&gt;</span>(x - left)] = coverage *</div>
<div class="line"><a id="l02722" name="l02722"></a><span class="lineno"> 2722</span>                                                                <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#a4398d75300a84212897f80f34d634c6f">paint_pixel</a>(xy(<span class="keyword">static_cast&lt;</span><span class="keywordtype">float</span><span class="keyword">&gt;</span>(x) + 0.5f,</div>
<div class="line"><a id="l02723" name="l02723"></a><span class="lineno"> 2723</span>                                                                               <span class="keyword">static_cast&lt;</span><span class="keywordtype">float</span><span class="keyword">&gt;</span>(y) + 0.5f) -</div>
<div class="line"><a id="l02724" name="l02724"></a><span class="lineno"> 2724</span>                                                                                <a class="code hl_define" href="css__properties_8cpp.html#a5dfbcc916693656dd092ddc41ab25747">offset</a>,</div>
<div class="line"><a id="l02725" name="l02725"></a><span class="lineno"> 2725</span>                                                                            brush)</div>
<div class="line"><a id="l02726" name="l02726"></a><span class="lineno"> 2726</span>                                                                    .<a class="code hl_variable" href="tag__strings_8h.html#a4124bc0a9335c27f086f24ba207a4912">a</a>;</div>
<div class="line"><a id="l02727" name="l02727"></a><span class="lineno"> 2727</span>                <span class="keywordflow">if</span> (next.y != y)</div>
<div class="line"><a id="l02728" name="l02728"></a><span class="lineno"> 2728</span>                    sum = 0.0f;</div>
<div class="line"><a id="l02729" name="l02729"></a><span class="lineno"> 2729</span>                x = next.x;</div>
<div class="line"><a id="l02730" name="l02730"></a><span class="lineno"> 2730</span>                y = next.y;</div>
<div class="line"><a id="l02731" name="l02731"></a><span class="lineno"> 2731</span>                sum += next.delta;</div>
<div class="line"><a id="l02732" name="l02732"></a><span class="lineno"> 2732</span>            }</div>
<div class="line"><a id="l02733" name="l02733"></a><span class="lineno"> 2733</span>        }</div>
<div class="line"><a id="l02734" name="l02734"></a><span class="lineno"> 2734</span>        <span class="keywordtype">float</span> alpha = <span class="keyword">static_cast&lt;</span><span class="keywordtype">float</span><span class="keyword">&gt;</span>(2 * radius + 1) *</div>
<div class="line"><a id="l02735" name="l02735"></a><span class="lineno"> 2735</span>                      (<span class="keyword">static_cast&lt;</span><span class="keywordtype">float</span><span class="keyword">&gt;</span>(radius * (radius + 1)) - sigma_squared) /</div>
<div class="line"><a id="l02736" name="l02736"></a><span class="lineno"> 2736</span>                      (2.0f * sigma_squared -</div>
<div class="line"><a id="l02737" name="l02737"></a><span class="lineno"> 2737</span>                       <span class="keyword">static_cast&lt;</span><span class="keywordtype">float</span><span class="keyword">&gt;</span>(6 * (radius + 1) * (radius + 1)));</div>
<div class="line"><a id="l02738" name="l02738"></a><span class="lineno"> 2738</span>        <span class="keywordtype">float</span> <a class="code hl_variable" href="namespacedetail_1_1dragonbox.html#a55ee9571cc13bd8f6efffbdf22c6931f">divisor</a>  = 2.0f * (alpha + <span class="keyword">static_cast&lt;</span><span class="keywordtype">float</span><span class="keyword">&gt;</span>(radius)) + 1.0f;</div>
<div class="line"><a id="l02739" name="l02739"></a><span class="lineno"> 2739</span>        <span class="keywordtype">float</span> weight_1 = alpha / <a class="code hl_variable" href="namespacedetail_1_1dragonbox.html#a55ee9571cc13bd8f6efffbdf22c6931f">divisor</a>;</div>
<div class="line"><a id="l02740" name="l02740"></a><span class="lineno"> 2740</span>        <span class="keywordtype">float</span> weight_2 = (1.0f - alpha) / divisor;</div>
<div class="line"><a id="l02741" name="l02741"></a><span class="lineno"> 2741</span>        <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> y = 0; y &lt; <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#acb61342cdc37dc89aee42e7087adbc50">height</a>; ++y)</div>
<div class="line"><a id="l02742" name="l02742"></a><span class="lineno"> 2742</span>            <span class="keywordflow">for</span> (<span class="keywordtype">int</span> pass = 0; pass &lt; 3; ++pass)</div>
<div class="line"><a id="l02743" name="l02743"></a><span class="lineno"> 2743</span>            {</div>
<div class="line"><a id="l02744" name="l02744"></a><span class="lineno"> 2744</span>                <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> x = 0; x &lt; <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#ad4920132bc78f7e74a8b14319e8ff52c">width</a>; ++x)</div>
<div class="line"><a id="l02745" name="l02745"></a><span class="lineno"> 2745</span>                    <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ab3d978450725779c91b16e192ac264ef">shadow</a>[working + x] = <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ab3d978450725779c91b16e192ac264ef">shadow</a>[y * <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#ad4920132bc78f7e74a8b14319e8ff52c">width</a> + x];</div>
<div class="line"><a id="l02746" name="l02746"></a><span class="lineno"> 2746</span>                <span class="keywordtype">float</span> running = weight_1 * <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ab3d978450725779c91b16e192ac264ef">shadow</a>[working + radius + 1];</div>
<div class="line"><a id="l02747" name="l02747"></a><span class="lineno"> 2747</span>                <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> x = 0; x &lt;= radius; ++x)</div>
<div class="line"><a id="l02748" name="l02748"></a><span class="lineno"> 2748</span>                    running += (weight_1 + weight_2) * <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ab3d978450725779c91b16e192ac264ef">shadow</a>[working + x];</div>
<div class="line"><a id="l02749" name="l02749"></a><span class="lineno"> 2749</span>                <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ab3d978450725779c91b16e192ac264ef">shadow</a>[y * <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#ad4920132bc78f7e74a8b14319e8ff52c">width</a>] = running;</div>
<div class="line"><a id="l02750" name="l02750"></a><span class="lineno"> 2750</span>                <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> x = 1; x &lt; <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#ad4920132bc78f7e74a8b14319e8ff52c">width</a>; ++x)</div>
<div class="line"><a id="l02751" name="l02751"></a><span class="lineno"> 2751</span>                {</div>
<div class="line"><a id="l02752" name="l02752"></a><span class="lineno"> 2752</span>                    <span class="keywordflow">if</span> (x &gt;= radius + 1)</div>
<div class="line"><a id="l02753" name="l02753"></a><span class="lineno"> 2753</span>                        running -= weight_2 * <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ab3d978450725779c91b16e192ac264ef">shadow</a>[working + x - radius - 1];</div>
<div class="line"><a id="l02754" name="l02754"></a><span class="lineno"> 2754</span>                    <span class="keywordflow">if</span> (x &gt;= radius + 2)</div>
<div class="line"><a id="l02755" name="l02755"></a><span class="lineno"> 2755</span>                        running -= weight_1 * <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ab3d978450725779c91b16e192ac264ef">shadow</a>[working + x - radius - 2];</div>
<div class="line"><a id="l02756" name="l02756"></a><span class="lineno"> 2756</span>                    <span class="keywordflow">if</span> (x + radius &lt; <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#ad4920132bc78f7e74a8b14319e8ff52c">width</a>)</div>
<div class="line"><a id="l02757" name="l02757"></a><span class="lineno"> 2757</span>                        running += weight_2 * <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ab3d978450725779c91b16e192ac264ef">shadow</a>[working + x + radius];</div>
<div class="line"><a id="l02758" name="l02758"></a><span class="lineno"> 2758</span>                    <span class="keywordflow">if</span> (x + radius + 1 &lt; <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#ad4920132bc78f7e74a8b14319e8ff52c">width</a>)</div>
<div class="line"><a id="l02759" name="l02759"></a><span class="lineno"> 2759</span>                        running += weight_1 * <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ab3d978450725779c91b16e192ac264ef">shadow</a>[working + x + radius + 1];</div>
<div class="line"><a id="l02760" name="l02760"></a><span class="lineno"> 2760</span>                    <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ab3d978450725779c91b16e192ac264ef">shadow</a>[y * <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#ad4920132bc78f7e74a8b14319e8ff52c">width</a> + x] = running;</div>
<div class="line"><a id="l02761" name="l02761"></a><span class="lineno"> 2761</span>                }</div>
<div class="line"><a id="l02762" name="l02762"></a><span class="lineno"> 2762</span>            }</div>
<div class="line"><a id="l02763" name="l02763"></a><span class="lineno"> 2763</span>        <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> x = 0; x &lt; <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#ad4920132bc78f7e74a8b14319e8ff52c">width</a>; ++x)</div>
<div class="line"><a id="l02764" name="l02764"></a><span class="lineno"> 2764</span>            <span class="keywordflow">for</span> (<span class="keywordtype">int</span> pass = 0; pass &lt; 3; ++pass)</div>
<div class="line"><a id="l02765" name="l02765"></a><span class="lineno"> 2765</span>            {</div>
<div class="line"><a id="l02766" name="l02766"></a><span class="lineno"> 2766</span>                <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> y = 0; y &lt; <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#acb61342cdc37dc89aee42e7087adbc50">height</a>; ++y)</div>
<div class="line"><a id="l02767" name="l02767"></a><span class="lineno"> 2767</span>                    <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ab3d978450725779c91b16e192ac264ef">shadow</a>[working + y] = <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ab3d978450725779c91b16e192ac264ef">shadow</a>[y * <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#ad4920132bc78f7e74a8b14319e8ff52c">width</a> + x];</div>
<div class="line"><a id="l02768" name="l02768"></a><span class="lineno"> 2768</span>                <span class="keywordtype">float</span> running = weight_1 * <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ab3d978450725779c91b16e192ac264ef">shadow</a>[working + radius + 1];</div>
<div class="line"><a id="l02769" name="l02769"></a><span class="lineno"> 2769</span>                <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> y = 0; y &lt;= radius; ++y)</div>
<div class="line"><a id="l02770" name="l02770"></a><span class="lineno"> 2770</span>                    running += (weight_1 + weight_2) * <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ab3d978450725779c91b16e192ac264ef">shadow</a>[working + y];</div>
<div class="line"><a id="l02771" name="l02771"></a><span class="lineno"> 2771</span>                <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ab3d978450725779c91b16e192ac264ef">shadow</a>[x] = running;</div>
<div class="line"><a id="l02772" name="l02772"></a><span class="lineno"> 2772</span>                <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> y = 1; y &lt; <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#acb61342cdc37dc89aee42e7087adbc50">height</a>; ++y)</div>
<div class="line"><a id="l02773" name="l02773"></a><span class="lineno"> 2773</span>                {</div>
<div class="line"><a id="l02774" name="l02774"></a><span class="lineno"> 2774</span>                    <span class="keywordflow">if</span> (y &gt;= radius + 1)</div>
<div class="line"><a id="l02775" name="l02775"></a><span class="lineno"> 2775</span>                        running -= weight_2 * <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ab3d978450725779c91b16e192ac264ef">shadow</a>[working + y - radius - 1];</div>
<div class="line"><a id="l02776" name="l02776"></a><span class="lineno"> 2776</span>                    <span class="keywordflow">if</span> (y &gt;= radius + 2)</div>
<div class="line"><a id="l02777" name="l02777"></a><span class="lineno"> 2777</span>                        running -= weight_1 * <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ab3d978450725779c91b16e192ac264ef">shadow</a>[working + y - radius - 2];</div>
<div class="line"><a id="l02778" name="l02778"></a><span class="lineno"> 2778</span>                    <span class="keywordflow">if</span> (y + radius &lt; <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#acb61342cdc37dc89aee42e7087adbc50">height</a>)</div>
<div class="line"><a id="l02779" name="l02779"></a><span class="lineno"> 2779</span>                        running += weight_2 * <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ab3d978450725779c91b16e192ac264ef">shadow</a>[working + y + radius];</div>
<div class="line"><a id="l02780" name="l02780"></a><span class="lineno"> 2780</span>                    <span class="keywordflow">if</span> (y + radius + 1 &lt; <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#acb61342cdc37dc89aee42e7087adbc50">height</a>)</div>
<div class="line"><a id="l02781" name="l02781"></a><span class="lineno"> 2781</span>                        running += weight_1 * <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ab3d978450725779c91b16e192ac264ef">shadow</a>[working + y + radius + 1];</div>
<div class="line"><a id="l02782" name="l02782"></a><span class="lineno"> 2782</span>                    <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ab3d978450725779c91b16e192ac264ef">shadow</a>[y * <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#ad4920132bc78f7e74a8b14319e8ff52c">width</a> + x] = running;</div>
<div class="line"><a id="l02783" name="l02783"></a><span class="lineno"> 2783</span>                }</div>
<div class="line"><a id="l02784" name="l02784"></a><span class="lineno"> 2784</span>            }</div>
<div class="line"><a id="l02785" name="l02785"></a><span class="lineno"> 2785</span>        <span class="keywordtype">int</span>   operation = <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#af6f748374ad333a49e8b379c0e368a34">global_composite_operation</a>;</div>
<div class="line"><a id="l02786" name="l02786"></a><span class="lineno"> 2786</span>        <span class="keywordtype">int</span>   x         = -1;</div>
<div class="line"><a id="l02787" name="l02787"></a><span class="lineno"> 2787</span>        <span class="keywordtype">int</span>   y         = -1;</div>
<div class="line"><a id="l02788" name="l02788"></a><span class="lineno"> 2788</span>        <span class="keywordtype">float</span> sum       = 0.0f;</div>
<div class="line"><a id="l02789" name="l02789"></a><span class="lineno"> 2789</span>        <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> <a class="code hl_enumvalue" href="core_8h.html#a7fc0249f0f8ba720115d2430f5b86cbaa6a992d5529f459a44fee58c733255e86">index</a> = 0; <a class="code hl_enumvalue" href="core_8h.html#a7fc0249f0f8ba720115d2430f5b86cbaa6a992d5529f459a44fee58c733255e86">index</a> &lt; <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#afac766bb79ebdf29a1d4094c91b3291e">mask</a>.size(); ++<a class="code hl_enumvalue" href="core_8h.html#a7fc0249f0f8ba720115d2430f5b86cbaa6a992d5529f459a44fee58c733255e86">index</a>)</div>
<div class="line"><a id="l02790" name="l02790"></a><span class="lineno"> 2790</span>        {</div>
<div class="line"><a id="l02791" name="l02791"></a><span class="lineno"> 2791</span>            pixel_run next       = <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#afac766bb79ebdf29a1d4094c91b3291e">mask</a>[<a class="code hl_enumvalue" href="core_8h.html#a7fc0249f0f8ba720115d2430f5b86cbaa6a992d5529f459a44fee58c733255e86">index</a>];</div>
<div class="line"><a id="l02792" name="l02792"></a><span class="lineno"> 2792</span>            <span class="keywordtype">float</span>     <a class="code hl_enumeration" href="namespacelitehtml.html#ab711d815656d45400e7c3d6830fc74e1">visibility</a> = std::min(fabsf(sum), 1.0f);</div>
<div class="line"><a id="l02793" name="l02793"></a><span class="lineno"> 2793</span>            <span class="keywordtype">int</span>       to         = std::min(next.y == y ? next.x : x + 1, right - border);</div>
<div class="line"><a id="l02794" name="l02794"></a><span class="lineno"> 2794</span>            <span class="keywordflow">if</span> (visibility &gt;= threshold &amp;&amp;</div>
<div class="line"><a id="l02795" name="l02795"></a><span class="lineno"> 2795</span>                <a class="code hl_enumvalue" href="namespacecanvas__ity.html#a4d285f5b6403d2455e1550ff00b66a68a9a249647210b2d2559a66e7aa00dcd4b">top</a> &lt;= y + border &amp;&amp; y + border &lt; <a class="code hl_enumvalue" href="namespacecanvas__ity.html#a4d285f5b6403d2455e1550ff00b66a68a9bb9d7bbd943523e378fd235f23cb243">bottom</a>)</div>
<div class="line"><a id="l02796" name="l02796"></a><span class="lineno"> 2796</span>                <span class="keywordflow">for</span> (; x &lt; to; ++x)</div>
<div class="line"><a id="l02797" name="l02797"></a><span class="lineno"> 2797</span>                {</div>
<div class="line"><a id="l02798" name="l02798"></a><span class="lineno"> 2798</span>                    rgba&amp; back = <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#afd6171d5075070f02637262085db2bb2">bitmap</a>[y * <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#aab63b227be5d7786e5bf0b07362addfb">size_x</a> + x];</div>
<div class="line"><a id="l02799" name="l02799"></a><span class="lineno"> 2799</span>                    rgba  fore = <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#a5fc985877d0bb100bebbf1658d0b52b5">global_alpha</a> *</div>
<div class="line"><a id="l02800" name="l02800"></a><span class="lineno"> 2800</span>                                <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ab3d978450725779c91b16e192ac264ef">shadow</a>[<span class="keyword">static_cast&lt;</span><span class="keywordtype">size_t</span><span class="keyword">&gt;</span>(y + border - <a class="code hl_enumvalue" href="namespacecanvas__ity.html#a4d285f5b6403d2455e1550ff00b66a68a9a249647210b2d2559a66e7aa00dcd4b">top</a>) * <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#ad4920132bc78f7e74a8b14319e8ff52c">width</a> +</div>
<div class="line"><a id="l02801" name="l02801"></a><span class="lineno"> 2801</span>                                       <span class="keyword">static_cast&lt;</span><span class="keywordtype">size_t</span><span class="keyword">&gt;</span>(x + border - left)] *</div>
<div class="line"><a id="l02802" name="l02802"></a><span class="lineno"> 2802</span>                                <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ad1f1bcdb74c8c6dbcbd0815ba620f7d1">shadow_color</a>;</div>
<div class="line"><a id="l02803" name="l02803"></a><span class="lineno"> 2803</span>                    <span class="keywordtype">float</span> mix_fore = operation &amp; 1 ? back.<a class="code hl_variable" href="structcanvas__ity_1_1rgba.html#a56d4a13f86fa2eafafdb5d631e1dadfc">a</a> : 0.0f;</div>
<div class="line"><a id="l02804" name="l02804"></a><span class="lineno"> 2804</span>                    <span class="keywordflow">if</span> (operation &amp; 2)</div>
<div class="line"><a id="l02805" name="l02805"></a><span class="lineno"> 2805</span>                        mix_fore = 1.0f - mix_fore;</div>
<div class="line"><a id="l02806" name="l02806"></a><span class="lineno"> 2806</span>                    <span class="keywordtype">float</span> mix_back = operation &amp; 4 ? fore.a : 0.0f;</div>
<div class="line"><a id="l02807" name="l02807"></a><span class="lineno"> 2807</span>                    <span class="keywordflow">if</span> (operation &amp; 8)</div>
<div class="line"><a id="l02808" name="l02808"></a><span class="lineno"> 2808</span>                        mix_back = 1.0f - mix_back;</div>
<div class="line"><a id="l02809" name="l02809"></a><span class="lineno"> 2809</span>                    rgba blend = mix_fore * fore + mix_back * back;</div>
<div class="line"><a id="l02810" name="l02810"></a><span class="lineno"> 2810</span>                    blend.a    = std::min(blend.a, 1.0f);</div>
<div class="line"><a id="l02811" name="l02811"></a><span class="lineno"> 2811</span>                    back       = <a class="code hl_enumeration" href="namespacelitehtml.html#ab711d815656d45400e7c3d6830fc74e1">visibility</a> * blend + (1.0f - <a class="code hl_enumeration" href="namespacelitehtml.html#ab711d815656d45400e7c3d6830fc74e1">visibility</a>) * back;</div>
<div class="line"><a id="l02812" name="l02812"></a><span class="lineno"> 2812</span>                }</div>
<div class="line"><a id="l02813" name="l02813"></a><span class="lineno"> 2813</span>            <span class="keywordflow">if</span> (next.y != y)</div>
<div class="line"><a id="l02814" name="l02814"></a><span class="lineno"> 2814</span>                sum = 0.0f;</div>
<div class="line"><a id="l02815" name="l02815"></a><span class="lineno"> 2815</span>            x = std::max(<span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(next.x), left - border);</div>
<div class="line"><a id="l02816" name="l02816"></a><span class="lineno"> 2816</span>            y = next.y;</div>
<div class="line"><a id="l02817" name="l02817"></a><span class="lineno"> 2817</span>            sum += next.delta;</div>
<div class="line"><a id="l02818" name="l02818"></a><span class="lineno"> 2818</span>        }</div>
<div class="line"><a id="l02819" name="l02819"></a><span class="lineno"> 2819</span>    }</div>
<div class="line"><a id="l02820" name="l02820"></a><span class="lineno"> 2820</span> </div>
<div class="line"><a id="l02821" name="l02821"></a><span class="lineno"> 2821</span>    <span class="comment">// Render the polylines into the pixel buffer.  It scan-converts the lines</span></div>
<div class="line"><a id="l02822" name="l02822"></a><span class="lineno"> 2822</span>    <span class="comment">// to runs which represent changes to the signed fractional coverage when</span></div>
<div class="line"><a id="l02823" name="l02823"></a><span class="lineno"> 2823</span>    <span class="comment">// read from left-to-right, top-to-bottom.  It scans through these to</span></div>
<div class="line"><a id="l02824" name="l02824"></a><span class="lineno"> 2824</span>    <span class="comment">// determine spans of pixels that need to be drawn, paints those pixels</span></div>
<div class="line"><a id="l02825" name="l02825"></a><span class="lineno"> 2825</span>    <span class="comment">// according to the brush, and then blends them into the buffer according</span></div>
<div class="line"><a id="l02826" name="l02826"></a><span class="lineno"> 2826</span>    <span class="comment">// to the current compositing settings.  This is slightly more complicated</span></div>
<div class="line"><a id="l02827" name="l02827"></a><span class="lineno"> 2827</span>    <span class="comment">// because it interleaves this with a simultaneous scan through a similar</span></div>
<div class="line"><a id="l02828" name="l02828"></a><span class="lineno"> 2828</span>    <span class="comment">// set of runs representing the current clip mask to determine which pixels</span></div>
<div class="line"><a id="l02829" name="l02829"></a><span class="lineno"> 2829</span>    <span class="comment">// it can composite into.  Note that shadows are always drawn first.</span></div>
<div class="line"><a id="l02830" name="l02830"></a><span class="lineno"> 2830</span>    <span class="comment">//</span></div>
<div class="line"><a id="l02831" name="l02831"></a><span class="lineno"> 2831</span>    <span class="keywordtype">void</span> <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#a7f8ab830d6326620f52816979a9b5586">canvas::render_main</a>(</div>
<div class="line"><a id="l02832" name="l02832"></a><span class="lineno"> 2832</span>        paint_brush <span class="keyword">const</span>&amp; brush)</div>
<div class="line"><a id="l02833" name="l02833"></a><span class="lineno"> 2833</span>    {</div>
<div class="line"><a id="l02834" name="l02834"></a><span class="lineno"> 2834</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ac5da3224f86f284b4ac7efbde3942e27">forward</a>.<a class="code hl_variable" href="structcanvas__ity_1_1affine__matrix.html#a06279a73c160cc47458ff2f08f25b566">a</a> * <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ac5da3224f86f284b4ac7efbde3942e27">forward</a>.<a class="code hl_variable" href="structcanvas__ity_1_1affine__matrix.html#ac8fa9558e05f63f452296d1ef2aba39a">d</a> - <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ac5da3224f86f284b4ac7efbde3942e27">forward</a>.<a class="code hl_variable" href="structcanvas__ity_1_1affine__matrix.html#a3abbeddf9bbf1b7c7d81c2b0339c4123">b</a> * <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ac5da3224f86f284b4ac7efbde3942e27">forward</a>.<a class="code hl_variable" href="structcanvas__ity_1_1affine__matrix.html#ae34446b5fed7e778e2a62a436e47f12e">c</a> == 0.0f)</div>
<div class="line"><a id="l02835" name="l02835"></a><span class="lineno"> 2835</span>            <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l02836" name="l02836"></a><span class="lineno"> 2836</span>        <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#a157d3c554ce752f70cb447fe3b7f0f4d">render_shadow</a>(brush);</div>
<div class="line"><a id="l02837" name="l02837"></a><span class="lineno"> 2837</span>        <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#a97cc5b1cc4d7e5b67ab3054fcdcfb3d4">lines_to_runs</a>(xy(0.0f, 0.0f), 0);</div>
<div class="line"><a id="l02838" name="l02838"></a><span class="lineno"> 2838</span>        <span class="keywordtype">int</span>    operation  = <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#af6f748374ad333a49e8b379c0e368a34">global_composite_operation</a>;</div>
<div class="line"><a id="l02839" name="l02839"></a><span class="lineno"> 2839</span>        <span class="keywordtype">int</span>    x          = -1;</div>
<div class="line"><a id="l02840" name="l02840"></a><span class="lineno"> 2840</span>        <span class="keywordtype">int</span>    y          = -1;</div>
<div class="line"><a id="l02841" name="l02841"></a><span class="lineno"> 2841</span>        <span class="keywordtype">float</span>  path_sum   = 0.0f;</div>
<div class="line"><a id="l02842" name="l02842"></a><span class="lineno"> 2842</span>        <span class="keywordtype">float</span>  clip_sum   = 0.0f;</div>
<div class="line"><a id="l02843" name="l02843"></a><span class="lineno"> 2843</span>        <span class="keywordtype">size_t</span> path_index = 0;</div>
<div class="line"><a id="l02844" name="l02844"></a><span class="lineno"> 2844</span>        <span class="keywordtype">size_t</span> clip_index = 0;</div>
<div class="line"><a id="l02845" name="l02845"></a><span class="lineno"> 2845</span>        <span class="keywordflow">while</span> (clip_index &lt; <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#afac766bb79ebdf29a1d4094c91b3291e">mask</a>.size())</div>
<div class="line"><a id="l02846" name="l02846"></a><span class="lineno"> 2846</span>        {</div>
<div class="line"><a id="l02847" name="l02847"></a><span class="lineno"> 2847</span>            <span class="keywordtype">bool</span>               which      = (path_index &lt; <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#a4e8fe391327b93aaf006b52eaf3546f4">runs</a>.size() &amp;&amp;</div>
<div class="line"><a id="l02848" name="l02848"></a><span class="lineno"> 2848</span>                             <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#a4e8fe391327b93aaf006b52eaf3546f4">runs</a>[path_index] &lt; <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#afac766bb79ebdf29a1d4094c91b3291e">mask</a>[clip_index]);</div>
<div class="line"><a id="l02849" name="l02849"></a><span class="lineno"> 2849</span>            pixel_run          next       = which ? <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#a4e8fe391327b93aaf006b52eaf3546f4">runs</a>[path_index] : <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#afac766bb79ebdf29a1d4094c91b3291e">mask</a>[clip_index];</div>
<div class="line"><a id="l02850" name="l02850"></a><span class="lineno"> 2850</span>            <span class="keywordtype">float</span>              coverage   = std::min(fabsf(path_sum), 1.0f);</div>
<div class="line"><a id="l02851" name="l02851"></a><span class="lineno"> 2851</span>            <span class="keywordtype">float</span>              <a class="code hl_enumeration" href="namespacelitehtml.html#ab711d815656d45400e7c3d6830fc74e1">visibility</a> = std::min(fabsf(clip_sum), 1.0f);</div>
<div class="line"><a id="l02852" name="l02852"></a><span class="lineno"> 2852</span>            <span class="keywordtype">int</span>                to         = next.y == y ? next.x : x + 1;</div>
<div class="line"><a id="l02853" name="l02853"></a><span class="lineno"> 2853</span>            <span class="keyword">static</span> <span class="keywordtype">float</span> <span class="keyword">const</span> threshold  = 1.0f / 8160.0f;</div>
<div class="line"><a id="l02854" name="l02854"></a><span class="lineno"> 2854</span>            <span class="keywordflow">if</span> ((coverage &gt;= threshold || ~operation &amp; 8) &amp;&amp;</div>
<div class="line"><a id="l02855" name="l02855"></a><span class="lineno"> 2855</span>                visibility &gt;= threshold)</div>
<div class="line"><a id="l02856" name="l02856"></a><span class="lineno"> 2856</span>                <span class="keywordflow">for</span> (; x &lt; to; ++x)</div>
<div class="line"><a id="l02857" name="l02857"></a><span class="lineno"> 2857</span>                {</div>
<div class="line"><a id="l02858" name="l02858"></a><span class="lineno"> 2858</span>                    rgba&amp; back = <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#afd6171d5075070f02637262085db2bb2">bitmap</a>[y * <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#aab63b227be5d7786e5bf0b07362addfb">size_x</a> + x];</div>
<div class="line"><a id="l02859" name="l02859"></a><span class="lineno"> 2859</span>                    rgba  fore = coverage * <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#a5fc985877d0bb100bebbf1658d0b52b5">global_alpha</a> *</div>
<div class="line"><a id="l02860" name="l02860"></a><span class="lineno"> 2860</span>                                <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#a4398d75300a84212897f80f34d634c6f">paint_pixel</a>(xy(<span class="keyword">static_cast&lt;</span><span class="keywordtype">float</span><span class="keyword">&gt;</span>(x) + 0.5f,</div>
<div class="line"><a id="l02861" name="l02861"></a><span class="lineno"> 2861</span>                                               <span class="keyword">static_cast&lt;</span><span class="keywordtype">float</span><span class="keyword">&gt;</span>(y) + 0.5f),</div>
<div class="line"><a id="l02862" name="l02862"></a><span class="lineno"> 2862</span>                                            brush);</div>
<div class="line"><a id="l02863" name="l02863"></a><span class="lineno"> 2863</span>                    <span class="keywordtype">float</span> mix_fore = operation &amp; 1 ? back.a : 0.0f;</div>
<div class="line"><a id="l02864" name="l02864"></a><span class="lineno"> 2864</span>                    <span class="keywordflow">if</span> (operation &amp; 2)</div>
<div class="line"><a id="l02865" name="l02865"></a><span class="lineno"> 2865</span>                        mix_fore = 1.0f - mix_fore;</div>
<div class="line"><a id="l02866" name="l02866"></a><span class="lineno"> 2866</span>                    <span class="keywordtype">float</span> mix_back = operation &amp; 4 ? fore.a : 0.0f;</div>
<div class="line"><a id="l02867" name="l02867"></a><span class="lineno"> 2867</span>                    <span class="keywordflow">if</span> (operation &amp; 8)</div>
<div class="line"><a id="l02868" name="l02868"></a><span class="lineno"> 2868</span>                        mix_back = 1.0f - mix_back;</div>
<div class="line"><a id="l02869" name="l02869"></a><span class="lineno"> 2869</span>                    rgba blend = mix_fore * fore + mix_back * back;</div>
<div class="line"><a id="l02870" name="l02870"></a><span class="lineno"> 2870</span>                    blend.a    = std::min(blend.a, 1.0f);</div>
<div class="line"><a id="l02871" name="l02871"></a><span class="lineno"> 2871</span>                    back       = <a class="code hl_enumeration" href="namespacelitehtml.html#ab711d815656d45400e7c3d6830fc74e1">visibility</a> * blend + (1.0f - <a class="code hl_enumeration" href="namespacelitehtml.html#ab711d815656d45400e7c3d6830fc74e1">visibility</a>) * back;</div>
<div class="line"><a id="l02872" name="l02872"></a><span class="lineno"> 2872</span>                }</div>
<div class="line"><a id="l02873" name="l02873"></a><span class="lineno"> 2873</span>            x = next.x;</div>
<div class="line"><a id="l02874" name="l02874"></a><span class="lineno"> 2874</span>            <span class="keywordflow">if</span> (next.y != y)</div>
<div class="line"><a id="l02875" name="l02875"></a><span class="lineno"> 2875</span>            {</div>
<div class="line"><a id="l02876" name="l02876"></a><span class="lineno"> 2876</span>                y        = next.y;</div>
<div class="line"><a id="l02877" name="l02877"></a><span class="lineno"> 2877</span>                path_sum = 0.0f;</div>
<div class="line"><a id="l02878" name="l02878"></a><span class="lineno"> 2878</span>                clip_sum = 0.0f;</div>
<div class="line"><a id="l02879" name="l02879"></a><span class="lineno"> 2879</span>            }</div>
<div class="line"><a id="l02880" name="l02880"></a><span class="lineno"> 2880</span>            <span class="keywordflow">if</span> (which)</div>
<div class="line"><a id="l02881" name="l02881"></a><span class="lineno"> 2881</span>                path_sum += <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#a4e8fe391327b93aaf006b52eaf3546f4">runs</a>[path_index++].delta;</div>
<div class="line"><a id="l02882" name="l02882"></a><span class="lineno"> 2882</span>            <span class="keywordflow">else</span></div>
<div class="line"><a id="l02883" name="l02883"></a><span class="lineno"> 2883</span>                clip_sum += <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#afac766bb79ebdf29a1d4094c91b3291e">mask</a>[clip_index++].delta;</div>
<div class="line"><a id="l02884" name="l02884"></a><span class="lineno"> 2884</span>        }</div>
<div class="line"><a id="l02885" name="l02885"></a><span class="lineno"> 2885</span>    }</div>
<div class="line"><a id="l02886" name="l02886"></a><span class="lineno"> 2886</span> </div>
<div class="line"><a id="l02887" name="l02887"></a><span class="lineno"> 2887</span>    <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#a3176c99f113de2815855f8d3bbd273f3">canvas::canvas</a>(</div>
<div class="line"><a id="l02888" name="l02888"></a><span class="lineno"> 2888</span>        <span class="keywordtype">int</span> width,</div>
<div class="line"><a id="l02889" name="l02889"></a><span class="lineno"> 2889</span>        <span class="keywordtype">int</span> height)</div>
<div class="line"><a id="l02890" name="l02890"></a><span class="lineno"> 2890</span>        : global_composite_operation(<a class="code hl_enumvalue" href="namespacecanvas__ity.html#a89843026830c0d4312f395e2e8c5992aa1e08030289f7c45d56752efe751fd4fb">source_over</a>),</div>
<div class="line"><a id="l02891" name="l02891"></a><span class="lineno"> 2891</span>          shadow_offset_x(0.0f),</div>
<div class="line"><a id="l02892" name="l02892"></a><span class="lineno"> 2892</span>          shadow_offset_y(0.0f),</div>
<div class="line"><a id="l02893" name="l02893"></a><span class="lineno"> 2893</span>          line_cap(<a class="code hl_enumvalue" href="namespacecanvas__ity.html#ac31761ebfc503cc7b7e5a9d359fa4431aed96d21acb9c340b362bbb6e414fac7a">butt</a>),</div>
<div class="line"><a id="l02894" name="l02894"></a><span class="lineno"> 2894</span>          line_join(<a class="code hl_enumvalue" href="namespacecanvas__ity.html#ac351ff9340ea3c0b196f8788ddfa0f1aa10b6beb5c0a396ea09bbac8b03c9e696">miter</a>),</div>
<div class="line"><a id="l02895" name="l02895"></a><span class="lineno"> 2895</span>          line_dash_offset(0.0f),</div>
<div class="line"><a id="l02896" name="l02896"></a><span class="lineno"> 2896</span>          <a class="code hl_enumeration" href="namespacelitehtml.html#ad2b7f7ce0ff04797df9c7233760d9c80">text_align</a>(<a class="code hl_enumvalue" href="namespacecanvas__ity.html#a64892b31b00c006299d47bb71542b765a9cf9c0ad231023d5663cf9fb19993567">start</a>),</div>
<div class="line"><a id="l02897" name="l02897"></a><span class="lineno"> 2897</span>          text_baseline(<a class="code hl_enumvalue" href="namespacecanvas__ity.html#a4d285f5b6403d2455e1550ff00b66a68a353775772d990c09479a46118fb472a9">alphabetic</a>),</div>
<div class="line"><a id="l02898" name="l02898"></a><span class="lineno"> 2898</span>          size_x(width),</div>
<div class="line"><a id="l02899" name="l02899"></a><span class="lineno"> 2899</span>          size_y(height),</div>
<div class="line"><a id="l02900" name="l02900"></a><span class="lineno"> 2900</span>          global_alpha(1.0f),</div>
<div class="line"><a id="l02901" name="l02901"></a><span class="lineno"> 2901</span>          shadow_blur(0.0f),</div>
<div class="line"><a id="l02902" name="l02902"></a><span class="lineno"> 2902</span>          line_width(1.0f),</div>
<div class="line"><a id="l02903" name="l02903"></a><span class="lineno"> 2903</span>          miter_limit(10.0f),</div>
<div class="line"><a id="l02904" name="l02904"></a><span class="lineno"> 2904</span>          fill_brush(),</div>
<div class="line"><a id="l02905" name="l02905"></a><span class="lineno"> 2905</span>          stroke_brush(),</div>
<div class="line"><a id="l02906" name="l02906"></a><span class="lineno"> 2906</span>          image_brush(),</div>
<div class="line"><a id="l02907" name="l02907"></a><span class="lineno"> 2907</span>          face(),</div>
<div class="line"><a id="l02908" name="l02908"></a><span class="lineno"> 2908</span>          bitmap(new rgba[width * height]),</div>
<div class="line"><a id="l02909" name="l02909"></a><span class="lineno"> 2909</span>          saves(0)</div>
<div class="line"><a id="l02910" name="l02910"></a><span class="lineno"> 2910</span>    {</div>
<div class="line"><a id="l02911" name="l02911"></a><span class="lineno"> 2911</span>        affine_matrix identity = {1.0f, 0.0f, 0.0f, 1.0f, 0.0f, 0.0f};</div>
<div class="line"><a id="l02912" name="l02912"></a><span class="lineno"> 2912</span>        <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ac5da3224f86f284b4ac7efbde3942e27">forward</a>                = identity;</div>
<div class="line"><a id="l02913" name="l02913"></a><span class="lineno"> 2913</span>        <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ade344370cc819a35ed35233e02f09859">inverse</a>                = identity;</div>
<div class="line"><a id="l02914" name="l02914"></a><span class="lineno"> 2914</span>        <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#ac45236e8c3359456117d7e92f019cdf4">set_color</a>(<a class="code hl_enumvalue" href="namespacecanvas__ity.html#a43021a4a19378b8a045cf40f27a3bb57a1e6269b4d68ba7a58b54ef61b8f7fb0f">fill_style</a>, 0.0f, 0.0f, 0.0f, 1.0f);</div>
<div class="line"><a id="l02915" name="l02915"></a><span class="lineno"> 2915</span>        <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#ac45236e8c3359456117d7e92f019cdf4">set_color</a>(<a class="code hl_enumvalue" href="namespacecanvas__ity.html#a43021a4a19378b8a045cf40f27a3bb57a8007c46114f5b82c1f6f36d0522d6bf7">stroke_style</a>, 0.0f, 0.0f, 0.0f, 1.0f);</div>
<div class="line"><a id="l02916" name="l02916"></a><span class="lineno"> 2916</span>        <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> y = 0; y &lt; <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ae039e222157aef7c67de905bfbfaa1a7">size_y</a>; ++y)</div>
<div class="line"><a id="l02917" name="l02917"></a><span class="lineno"> 2917</span>        {</div>
<div class="line"><a id="l02918" name="l02918"></a><span class="lineno"> 2918</span>            pixel_run piece_1 = {0, y, 1.0f};</div>
<div class="line"><a id="l02919" name="l02919"></a><span class="lineno"> 2919</span>            pixel_run piece_2 = {<span class="keyword">static_cast&lt;</span><span class="keywordtype">unsigned</span> <span class="keywordtype">short</span><span class="keyword">&gt;</span>(<a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#aab63b227be5d7786e5bf0b07362addfb">size_x</a>), y,</div>
<div class="line"><a id="l02920" name="l02920"></a><span class="lineno"> 2920</span>                                 -1.0f};</div>
<div class="line"><a id="l02921" name="l02921"></a><span class="lineno"> 2921</span>            <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#afac766bb79ebdf29a1d4094c91b3291e">mask</a>.push_back(piece_1);</div>
<div class="line"><a id="l02922" name="l02922"></a><span class="lineno"> 2922</span>            <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#afac766bb79ebdf29a1d4094c91b3291e">mask</a>.push_back(piece_2);</div>
<div class="line"><a id="l02923" name="l02923"></a><span class="lineno"> 2923</span>        }</div>
<div class="line"><a id="l02924" name="l02924"></a><span class="lineno"> 2924</span>    }</div>
<div class="line"><a id="l02925" name="l02925"></a><span class="lineno"> 2925</span> </div>
<div class="line"><a id="l02926" name="l02926"></a><span class="lineno"> 2926</span>    <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#a3176c99f113de2815855f8d3bbd273f3">canvas::canvas</a>(<span class="keywordtype">int</span> width, <span class="keywordtype">int</span> height, rgba c)</div>
<div class="line"><a id="l02927" name="l02927"></a><span class="lineno"> 2927</span>        : <a class="code hl_variable" href="tag__strings_8h.html#afa9e9838abb44338f7cbe41dc6f846d4">canvas</a>(width, height)</div>
<div class="line"><a id="l02928" name="l02928"></a><span class="lineno"> 2928</span>    {</div>
<div class="line"><a id="l02929" name="l02929"></a><span class="lineno"> 2929</span>        <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#a54dd82e22a5bf04609da7d905d4cb260">save</a>();</div>
<div class="line"><a id="l02930" name="l02930"></a><span class="lineno"> 2930</span>        <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#ac45236e8c3359456117d7e92f019cdf4">set_color</a>(<a class="code hl_enumvalue" href="namespacecanvas__ity.html#a43021a4a19378b8a045cf40f27a3bb57a1e6269b4d68ba7a58b54ef61b8f7fb0f">fill_style</a>, c.r, c.g, c.b, c.a);</div>
<div class="line"><a id="l02931" name="l02931"></a><span class="lineno"> 2931</span>        <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#aa948748b43becb53a34e013938a96299">fill_rectangle</a>(0, 0, (<span class="keywordtype">float</span>)<a class="code hl_function" href="classcanvas__ity_1_1canvas.html#ad4920132bc78f7e74a8b14319e8ff52c">width</a>, (<span class="keywordtype">float</span>)<a class="code hl_function" href="classcanvas__ity_1_1canvas.html#acb61342cdc37dc89aee42e7087adbc50">height</a>);</div>
<div class="line"><a id="l02932" name="l02932"></a><span class="lineno"> 2932</span>        <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#a70778b3d277bfaa5d2c456fcf8992dd2">restore</a>();</div>
<div class="line"><a id="l02933" name="l02933"></a><span class="lineno"> 2933</span>    }</div>
<div class="line"><a id="l02934" name="l02934"></a><span class="lineno"> 2934</span> </div>
<div class="line"><a id="l02935" name="l02935"></a><span class="lineno"> 2935</span>    <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#a962182e05f7478c06c9e349f32b1f5ab">canvas::~canvas</a>()</div>
<div class="line"><a id="l02936" name="l02936"></a><span class="lineno"> 2936</span>    {</div>
<div class="line"><a id="l02937" name="l02937"></a><span class="lineno"> 2937</span>        <span class="keyword">delete</span>[] <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#afd6171d5075070f02637262085db2bb2">bitmap</a>;</div>
<div class="line"><a id="l02938" name="l02938"></a><span class="lineno"> 2938</span>        <span class="keywordflow">while</span> (<a class="code hl_function" href="classcanvas__ity_1_1canvas.html#a3176c99f113de2815855f8d3bbd273f3">canvas</a>* <a class="code hl_variable" href="tag__strings_8h.html#a434acd167ada209c34621739b6b8c583">head</a> = <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#a2309d72383256afad1d28a40c4a837dc">saves</a>)</div>
<div class="line"><a id="l02939" name="l02939"></a><span class="lineno"> 2939</span>        {</div>
<div class="line"><a id="l02940" name="l02940"></a><span class="lineno"> 2940</span>            <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#a2309d72383256afad1d28a40c4a837dc">saves</a>       = <a class="code hl_variable" href="tag__strings_8h.html#a434acd167ada209c34621739b6b8c583">head</a>-&gt;<a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#a2309d72383256afad1d28a40c4a837dc">saves</a>;</div>
<div class="line"><a id="l02941" name="l02941"></a><span class="lineno"> 2941</span>            <a class="code hl_variable" href="tag__strings_8h.html#a434acd167ada209c34621739b6b8c583">head</a>-&gt;<a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#a2309d72383256afad1d28a40c4a837dc">saves</a> = 0;</div>
<div class="line"><a id="l02942" name="l02942"></a><span class="lineno"> 2942</span>            <span class="keyword">delete</span> <a class="code hl_variable" href="tag__strings_8h.html#a434acd167ada209c34621739b6b8c583">head</a>;</div>
<div class="line"><a id="l02943" name="l02943"></a><span class="lineno"> 2943</span>        }</div>
<div class="line"><a id="l02944" name="l02944"></a><span class="lineno"> 2944</span>    }</div>
<div class="line"><a id="l02945" name="l02945"></a><span class="lineno"> 2945</span> </div>
<div class="line"><a id="l02946" name="l02946"></a><span class="lineno"> 2946</span>    <span class="keywordtype">void</span> <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#a62869dd9efcbf81eca82c19e5cc397d7">canvas::scale</a>(</div>
<div class="line"><a id="l02947" name="l02947"></a><span class="lineno"> 2947</span>        <span class="keywordtype">float</span> x,</div>
<div class="line"><a id="l02948" name="l02948"></a><span class="lineno"> 2948</span>        <span class="keywordtype">float</span> y)</div>
<div class="line"><a id="l02949" name="l02949"></a><span class="lineno"> 2949</span>    {</div>
<div class="line"><a id="l02950" name="l02950"></a><span class="lineno"> 2950</span>        <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#a9ef5f65d2eca3518b5ea22eb76badce1">transform</a>(x, 0.0f, 0.0f, y, 0.0f, 0.0f);</div>
<div class="line"><a id="l02951" name="l02951"></a><span class="lineno"> 2951</span>    }</div>
<div class="line"><a id="l02952" name="l02952"></a><span class="lineno"> 2952</span> </div>
<div class="line"><a id="l02953" name="l02953"></a><span class="lineno"> 2953</span>    <span class="keywordtype">void</span> <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#a4689020b4b9f4a2900986727cc0f8767">canvas::rotate</a>(</div>
<div class="line"><a id="l02954" name="l02954"></a><span class="lineno"> 2954</span>        <span class="keywordtype">float</span> angle)</div>
<div class="line"><a id="l02955" name="l02955"></a><span class="lineno"> 2955</span>    {</div>
<div class="line"><a id="l02956" name="l02956"></a><span class="lineno"> 2956</span>        <span class="keywordtype">float</span> cosine = cosf(angle);</div>
<div class="line"><a id="l02957" name="l02957"></a><span class="lineno"> 2957</span>        <span class="keywordtype">float</span> sine   = sinf(angle);</div>
<div class="line"><a id="l02958" name="l02958"></a><span class="lineno"> 2958</span>        <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#a9ef5f65d2eca3518b5ea22eb76badce1">transform</a>(cosine, sine, -sine, cosine, 0.0f, 0.0f);</div>
<div class="line"><a id="l02959" name="l02959"></a><span class="lineno"> 2959</span>    }</div>
<div class="line"><a id="l02960" name="l02960"></a><span class="lineno"> 2960</span> </div>
<div class="line"><a id="l02961" name="l02961"></a><span class="lineno"> 2961</span>    <span class="keywordtype">void</span> <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#ab593aa24c0e84a2a0513bb9c96b37841">canvas::translate</a>(</div>
<div class="line"><a id="l02962" name="l02962"></a><span class="lineno"> 2962</span>        <span class="keywordtype">float</span> x,</div>
<div class="line"><a id="l02963" name="l02963"></a><span class="lineno"> 2963</span>        <span class="keywordtype">float</span> y)</div>
<div class="line"><a id="l02964" name="l02964"></a><span class="lineno"> 2964</span>    {</div>
<div class="line"><a id="l02965" name="l02965"></a><span class="lineno"> 2965</span>        <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#a9ef5f65d2eca3518b5ea22eb76badce1">transform</a>(1.0f, 0.0f, 0.0f, 1.0f, x, y);</div>
<div class="line"><a id="l02966" name="l02966"></a><span class="lineno"> 2966</span>    }</div>
<div class="line"><a id="l02967" name="l02967"></a><span class="lineno"> 2967</span> </div>
<div class="line"><a id="l02968" name="l02968"></a><span class="lineno"> 2968</span>    <span class="keywordtype">void</span> <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#a9ef5f65d2eca3518b5ea22eb76badce1">canvas::transform</a>(</div>
<div class="line"><a id="l02969" name="l02969"></a><span class="lineno"> 2969</span>        <span class="keywordtype">float</span> <a class="code hl_variable" href="tag__strings_8h.html#a4124bc0a9335c27f086f24ba207a4912">a</a>,</div>
<div class="line"><a id="l02970" name="l02970"></a><span class="lineno"> 2970</span>        <span class="keywordtype">float</span> <a class="code hl_variable" href="tag__strings_8h.html#a21ad0bd836b90d08f4cf640b4c298e7c">b</a>,</div>
<div class="line"><a id="l02971" name="l02971"></a><span class="lineno"> 2971</span>        <span class="keywordtype">float</span> c,</div>
<div class="line"><a id="l02972" name="l02972"></a><span class="lineno"> 2972</span>        <span class="keywordtype">float</span> d,</div>
<div class="line"><a id="l02973" name="l02973"></a><span class="lineno"> 2973</span>        <span class="keywordtype">float</span> e,</div>
<div class="line"><a id="l02974" name="l02974"></a><span class="lineno"> 2974</span>        <span class="keywordtype">float</span> f)</div>
<div class="line"><a id="l02975" name="l02975"></a><span class="lineno"> 2975</span>    {</div>
<div class="line"><a id="l02976" name="l02976"></a><span class="lineno"> 2976</span>        <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#ae24350ddfad86b73976a042ef95e12ae">set_transform</a>(<a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ac5da3224f86f284b4ac7efbde3942e27">forward</a>.<a class="code hl_variable" href="structcanvas__ity_1_1affine__matrix.html#a06279a73c160cc47458ff2f08f25b566">a</a> * <a class="code hl_variable" href="tag__strings_8h.html#a4124bc0a9335c27f086f24ba207a4912">a</a> + <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ac5da3224f86f284b4ac7efbde3942e27">forward</a>.<a class="code hl_variable" href="structcanvas__ity_1_1affine__matrix.html#ae34446b5fed7e778e2a62a436e47f12e">c</a> * <a class="code hl_variable" href="tag__strings_8h.html#a21ad0bd836b90d08f4cf640b4c298e7c">b</a>,</div>
<div class="line"><a id="l02977" name="l02977"></a><span class="lineno"> 2977</span>                      <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ac5da3224f86f284b4ac7efbde3942e27">forward</a>.<a class="code hl_variable" href="structcanvas__ity_1_1affine__matrix.html#a3abbeddf9bbf1b7c7d81c2b0339c4123">b</a> * <a class="code hl_variable" href="tag__strings_8h.html#a4124bc0a9335c27f086f24ba207a4912">a</a> + <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ac5da3224f86f284b4ac7efbde3942e27">forward</a>.<a class="code hl_variable" href="structcanvas__ity_1_1affine__matrix.html#ac8fa9558e05f63f452296d1ef2aba39a">d</a> * <a class="code hl_variable" href="tag__strings_8h.html#a21ad0bd836b90d08f4cf640b4c298e7c">b</a>,</div>
<div class="line"><a id="l02978" name="l02978"></a><span class="lineno"> 2978</span>                      <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ac5da3224f86f284b4ac7efbde3942e27">forward</a>.<a class="code hl_variable" href="structcanvas__ity_1_1affine__matrix.html#a06279a73c160cc47458ff2f08f25b566">a</a> * c + <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ac5da3224f86f284b4ac7efbde3942e27">forward</a>.<a class="code hl_variable" href="structcanvas__ity_1_1affine__matrix.html#ae34446b5fed7e778e2a62a436e47f12e">c</a> * d,</div>
<div class="line"><a id="l02979" name="l02979"></a><span class="lineno"> 2979</span>                      <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ac5da3224f86f284b4ac7efbde3942e27">forward</a>.<a class="code hl_variable" href="structcanvas__ity_1_1affine__matrix.html#a3abbeddf9bbf1b7c7d81c2b0339c4123">b</a> * c + <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ac5da3224f86f284b4ac7efbde3942e27">forward</a>.<a class="code hl_variable" href="structcanvas__ity_1_1affine__matrix.html#ac8fa9558e05f63f452296d1ef2aba39a">d</a> * d,</div>
<div class="line"><a id="l02980" name="l02980"></a><span class="lineno"> 2980</span>                      <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ac5da3224f86f284b4ac7efbde3942e27">forward</a>.<a class="code hl_variable" href="structcanvas__ity_1_1affine__matrix.html#a06279a73c160cc47458ff2f08f25b566">a</a> * e + <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ac5da3224f86f284b4ac7efbde3942e27">forward</a>.<a class="code hl_variable" href="structcanvas__ity_1_1affine__matrix.html#ae34446b5fed7e778e2a62a436e47f12e">c</a> * f + <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ac5da3224f86f284b4ac7efbde3942e27">forward</a>.<a class="code hl_variable" href="structcanvas__ity_1_1affine__matrix.html#a6702d95c040b895c87a2152a6a8609b6">e</a>,</div>
<div class="line"><a id="l02981" name="l02981"></a><span class="lineno"> 2981</span>                      <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ac5da3224f86f284b4ac7efbde3942e27">forward</a>.<a class="code hl_variable" href="structcanvas__ity_1_1affine__matrix.html#a3abbeddf9bbf1b7c7d81c2b0339c4123">b</a> * e + <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ac5da3224f86f284b4ac7efbde3942e27">forward</a>.<a class="code hl_variable" href="structcanvas__ity_1_1affine__matrix.html#ac8fa9558e05f63f452296d1ef2aba39a">d</a> * f + <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ac5da3224f86f284b4ac7efbde3942e27">forward</a>.<a class="code hl_variable" href="structcanvas__ity_1_1affine__matrix.html#aa59db5a3cdec4569f31143c0cc74242d">f</a>);</div>
<div class="line"><a id="l02982" name="l02982"></a><span class="lineno"> 2982</span>    }</div>
<div class="line"><a id="l02983" name="l02983"></a><span class="lineno"> 2983</span> </div>
<div class="line"><a id="l02984" name="l02984"></a><span class="lineno"> 2984</span>    <span class="keywordtype">void</span> <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#ae24350ddfad86b73976a042ef95e12ae">canvas::set_transform</a>(</div>
<div class="line"><a id="l02985" name="l02985"></a><span class="lineno"> 2985</span>        <span class="keywordtype">float</span> <a class="code hl_variable" href="tag__strings_8h.html#a4124bc0a9335c27f086f24ba207a4912">a</a>,</div>
<div class="line"><a id="l02986" name="l02986"></a><span class="lineno"> 2986</span>        <span class="keywordtype">float</span> <a class="code hl_variable" href="tag__strings_8h.html#a21ad0bd836b90d08f4cf640b4c298e7c">b</a>,</div>
<div class="line"><a id="l02987" name="l02987"></a><span class="lineno"> 2987</span>        <span class="keywordtype">float</span> c,</div>
<div class="line"><a id="l02988" name="l02988"></a><span class="lineno"> 2988</span>        <span class="keywordtype">float</span> d,</div>
<div class="line"><a id="l02989" name="l02989"></a><span class="lineno"> 2989</span>        <span class="keywordtype">float</span> e,</div>
<div class="line"><a id="l02990" name="l02990"></a><span class="lineno"> 2990</span>        <span class="keywordtype">float</span> f)</div>
<div class="line"><a id="l02991" name="l02991"></a><span class="lineno"> 2991</span>    {</div>
<div class="line"><a id="l02992" name="l02992"></a><span class="lineno"> 2992</span>        <span class="keywordtype">float</span>         determinant = <a class="code hl_variable" href="tag__strings_8h.html#a4124bc0a9335c27f086f24ba207a4912">a</a> * d - <a class="code hl_variable" href="tag__strings_8h.html#a21ad0bd836b90d08f4cf640b4c298e7c">b</a> * c;</div>
<div class="line"><a id="l02993" name="l02993"></a><span class="lineno"> 2993</span>        <span class="keywordtype">float</span>         scaling     = determinant != 0.0f ? 1.0f / determinant : 0.0f;</div>
<div class="line"><a id="l02994" name="l02994"></a><span class="lineno"> 2994</span>        affine_matrix new_forward = {<a class="code hl_variable" href="tag__strings_8h.html#a4124bc0a9335c27f086f24ba207a4912">a</a>, <a class="code hl_variable" href="tag__strings_8h.html#a21ad0bd836b90d08f4cf640b4c298e7c">b</a>, c, d, e, f};</div>
<div class="line"><a id="l02995" name="l02995"></a><span class="lineno"> 2995</span>        affine_matrix new_inverse = {</div>
<div class="line"><a id="l02996" name="l02996"></a><span class="lineno"> 2996</span>            scaling * d, scaling * -<a class="code hl_variable" href="tag__strings_8h.html#a21ad0bd836b90d08f4cf640b4c298e7c">b</a>, scaling * -c, scaling * <a class="code hl_variable" href="tag__strings_8h.html#a4124bc0a9335c27f086f24ba207a4912">a</a>,</div>
<div class="line"><a id="l02997" name="l02997"></a><span class="lineno"> 2997</span>            scaling * (c * f - d * e), scaling * (<a class="code hl_variable" href="tag__strings_8h.html#a21ad0bd836b90d08f4cf640b4c298e7c">b</a> * e - <a class="code hl_variable" href="tag__strings_8h.html#a4124bc0a9335c27f086f24ba207a4912">a</a> * f)};</div>
<div class="line"><a id="l02998" name="l02998"></a><span class="lineno"> 2998</span>        <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ac5da3224f86f284b4ac7efbde3942e27">forward</a> = new_forward;</div>
<div class="line"><a id="l02999" name="l02999"></a><span class="lineno"> 2999</span>        <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ade344370cc819a35ed35233e02f09859">inverse</a> = new_inverse;</div>
<div class="line"><a id="l03000" name="l03000"></a><span class="lineno"> 3000</span>    }</div>
<div class="line"><a id="l03001" name="l03001"></a><span class="lineno"> 3001</span> </div>
<div class="line"><a id="l03002" name="l03002"></a><span class="lineno"> 3002</span>    <span class="keywordtype">void</span> <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#a06fe0eb1caa896d0b567389bd35f6c18">canvas::set_global_alpha</a>(</div>
<div class="line"><a id="l03003" name="l03003"></a><span class="lineno"> 3003</span>        <span class="keywordtype">float</span> alpha)</div>
<div class="line"><a id="l03004" name="l03004"></a><span class="lineno"> 3004</span>    {</div>
<div class="line"><a id="l03005" name="l03005"></a><span class="lineno"> 3005</span>        <span class="keywordflow">if</span> (0.0f &lt;= alpha &amp;&amp; alpha &lt;= 1.0f)</div>
<div class="line"><a id="l03006" name="l03006"></a><span class="lineno"> 3006</span>            <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#a5fc985877d0bb100bebbf1658d0b52b5">global_alpha</a> = alpha;</div>
<div class="line"><a id="l03007" name="l03007"></a><span class="lineno"> 3007</span>    }</div>
<div class="line"><a id="l03008" name="l03008"></a><span class="lineno"> 3008</span> </div>
<div class="line"><a id="l03009" name="l03009"></a><span class="lineno"> 3009</span>    <span class="keywordtype">void</span> <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#a4bb7aab216b2b868ce9a4cb2f52b0c94">canvas::set_shadow_color</a>(</div>
<div class="line"><a id="l03010" name="l03010"></a><span class="lineno"> 3010</span>        <span class="keywordtype">float</span> <a class="code hl_enumvalue" href="color_8h.html#a80d1dc5f416b97f92939a4166d41203cabda9643ac6601722a28f238714274da4">red</a>,</div>
<div class="line"><a id="l03011" name="l03011"></a><span class="lineno"> 3011</span>        <span class="keywordtype">float</span> <a class="code hl_enumvalue" href="color_8h.html#a80d1dc5f416b97f92939a4166d41203ca9f27410725ab8cc8854a2769c7a516b8">green</a>,</div>
<div class="line"><a id="l03012" name="l03012"></a><span class="lineno"> 3012</span>        <span class="keywordtype">float</span> <a class="code hl_enumvalue" href="color_8h.html#a80d1dc5f416b97f92939a4166d41203ca48d6215903dff56238e52e8891380c8f">blue</a>,</div>
<div class="line"><a id="l03013" name="l03013"></a><span class="lineno"> 3013</span>        <span class="keywordtype">float</span> alpha)</div>
<div class="line"><a id="l03014" name="l03014"></a><span class="lineno"> 3014</span>    {</div>
<div class="line"><a id="l03015" name="l03015"></a><span class="lineno"> 3015</span>        <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ad1f1bcdb74c8c6dbcbd0815ba620f7d1">shadow_color</a> = premultiplied(linearized(clamped(</div>
<div class="line"><a id="l03016" name="l03016"></a><span class="lineno"> 3016</span>            rgba(<a class="code hl_enumvalue" href="color_8h.html#a80d1dc5f416b97f92939a4166d41203cabda9643ac6601722a28f238714274da4">red</a>, <a class="code hl_enumvalue" href="color_8h.html#a80d1dc5f416b97f92939a4166d41203ca9f27410725ab8cc8854a2769c7a516b8">green</a>, <a class="code hl_enumvalue" href="color_8h.html#a80d1dc5f416b97f92939a4166d41203ca48d6215903dff56238e52e8891380c8f">blue</a>, alpha))));</div>
<div class="line"><a id="l03017" name="l03017"></a><span class="lineno"> 3017</span>    }</div>
<div class="line"><a id="l03018" name="l03018"></a><span class="lineno"> 3018</span> </div>
<div class="line"><a id="l03019" name="l03019"></a><span class="lineno"> 3019</span>    <span class="keywordtype">void</span> <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#a31f2427ebe2f8b4e4246796d43f7e9e1">canvas::set_shadow_blur</a>(</div>
<div class="line"><a id="l03020" name="l03020"></a><span class="lineno"> 3020</span>        <span class="keywordtype">float</span> level)</div>
<div class="line"><a id="l03021" name="l03021"></a><span class="lineno"> 3021</span>    {</div>
<div class="line"><a id="l03022" name="l03022"></a><span class="lineno"> 3022</span>        <span class="keywordflow">if</span> (0.0f &lt;= level)</div>
<div class="line"><a id="l03023" name="l03023"></a><span class="lineno"> 3023</span>            <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#a93720138de6b5228b4154081aef29988">shadow_blur</a> = level;</div>
<div class="line"><a id="l03024" name="l03024"></a><span class="lineno"> 3024</span>    }</div>
<div class="line"><a id="l03025" name="l03025"></a><span class="lineno"> 3025</span> </div>
<div class="line"><a id="l03026" name="l03026"></a><span class="lineno"> 3026</span>    <span class="keywordtype">void</span> <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#a474c24301d18e988c6ee7c8b3af3c816">canvas::set_line_width</a>(</div>
<div class="line"><a id="l03027" name="l03027"></a><span class="lineno"> 3027</span>        <span class="keywordtype">float</span> width)</div>
<div class="line"><a id="l03028" name="l03028"></a><span class="lineno"> 3028</span>    {</div>
<div class="line"><a id="l03029" name="l03029"></a><span class="lineno"> 3029</span>        <span class="keywordflow">if</span> (0.0f &lt; <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#ad4920132bc78f7e74a8b14319e8ff52c">width</a>)</div>
<div class="line"><a id="l03030" name="l03030"></a><span class="lineno"> 3030</span>            <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#a9928b93ce97d8ec8fbfa6c450edbc96c">line_width</a> = <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#ad4920132bc78f7e74a8b14319e8ff52c">width</a>;</div>
<div class="line"><a id="l03031" name="l03031"></a><span class="lineno"> 3031</span>    }</div>
<div class="line"><a id="l03032" name="l03032"></a><span class="lineno"> 3032</span> </div>
<div class="line"><a id="l03033" name="l03033"></a><span class="lineno"> 3033</span>    <span class="keywordtype">void</span> <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#a3f1c83b992274a94eb5448465e10edaf">canvas::set_miter_limit</a>(</div>
<div class="line"><a id="l03034" name="l03034"></a><span class="lineno"> 3034</span>        <span class="keywordtype">float</span> limit)</div>
<div class="line"><a id="l03035" name="l03035"></a><span class="lineno"> 3035</span>    {</div>
<div class="line"><a id="l03036" name="l03036"></a><span class="lineno"> 3036</span>        <span class="keywordflow">if</span> (0.0f &lt; limit)</div>
<div class="line"><a id="l03037" name="l03037"></a><span class="lineno"> 3037</span>            <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#a374c2313aab5ee0c35d0a747bbfb3f88">miter_limit</a> = limit;</div>
<div class="line"><a id="l03038" name="l03038"></a><span class="lineno"> 3038</span>    }</div>
<div class="line"><a id="l03039" name="l03039"></a><span class="lineno"> 3039</span> </div>
<div class="line"><a id="l03040" name="l03040"></a><span class="lineno"> 3040</span>    <span class="keywordtype">void</span> <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#a7b0a51755d45e8f931dcd7691ebc4709">canvas::set_line_dash</a>(</div>
<div class="line"><a id="l03041" name="l03041"></a><span class="lineno"> 3041</span>        <span class="keywordtype">float</span> <span class="keyword">const</span>* segments,</div>
<div class="line"><a id="l03042" name="l03042"></a><span class="lineno"> 3042</span>        <span class="keywordtype">int</span>          <a class="code hl_function" href="core_8h.html#a501bb1bb2f0cc5706178ed237958e73b">count</a>)</div>
<div class="line"><a id="l03043" name="l03043"></a><span class="lineno"> 3043</span>    {</div>
<div class="line"><a id="l03044" name="l03044"></a><span class="lineno"> 3044</span>        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code hl_enumvalue" href="core_8h.html#a7fc0249f0f8ba720115d2430f5b86cbaa6a992d5529f459a44fee58c733255e86">index</a> = 0; <a class="code hl_enumvalue" href="core_8h.html#a7fc0249f0f8ba720115d2430f5b86cbaa6a992d5529f459a44fee58c733255e86">index</a> &lt; <a class="code hl_function" href="core_8h.html#a501bb1bb2f0cc5706178ed237958e73b">count</a>; ++<a class="code hl_enumvalue" href="core_8h.html#a7fc0249f0f8ba720115d2430f5b86cbaa6a992d5529f459a44fee58c733255e86">index</a>)</div>
<div class="line"><a id="l03045" name="l03045"></a><span class="lineno"> 3045</span>            <span class="keywordflow">if</span> (segments &amp;&amp; segments[<a class="code hl_enumvalue" href="core_8h.html#a7fc0249f0f8ba720115d2430f5b86cbaa6a992d5529f459a44fee58c733255e86">index</a>] &lt; 0.0f)</div>
<div class="line"><a id="l03046" name="l03046"></a><span class="lineno"> 3046</span>                <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l03047" name="l03047"></a><span class="lineno"> 3047</span>        <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#a3f34a73605c566ec786c89a18bc076b2">line_dash</a>.clear();</div>
<div class="line"><a id="l03048" name="l03048"></a><span class="lineno"> 3048</span>        <span class="keywordflow">if</span> (!segments)</div>
<div class="line"><a id="l03049" name="l03049"></a><span class="lineno"> 3049</span>            <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l03050" name="l03050"></a><span class="lineno"> 3050</span>        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code hl_enumvalue" href="core_8h.html#a7fc0249f0f8ba720115d2430f5b86cbaa6a992d5529f459a44fee58c733255e86">index</a> = 0; <a class="code hl_enumvalue" href="core_8h.html#a7fc0249f0f8ba720115d2430f5b86cbaa6a992d5529f459a44fee58c733255e86">index</a> &lt; <a class="code hl_function" href="core_8h.html#a501bb1bb2f0cc5706178ed237958e73b">count</a>; ++<a class="code hl_enumvalue" href="core_8h.html#a7fc0249f0f8ba720115d2430f5b86cbaa6a992d5529f459a44fee58c733255e86">index</a>)</div>
<div class="line"><a id="l03051" name="l03051"></a><span class="lineno"> 3051</span>            <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#a3f34a73605c566ec786c89a18bc076b2">line_dash</a>.push_back(segments[<a class="code hl_enumvalue" href="core_8h.html#a7fc0249f0f8ba720115d2430f5b86cbaa6a992d5529f459a44fee58c733255e86">index</a>]);</div>
<div class="line"><a id="l03052" name="l03052"></a><span class="lineno"> 3052</span>        <span class="keywordflow">if</span> (<a class="code hl_function" href="core_8h.html#a501bb1bb2f0cc5706178ed237958e73b">count</a> &amp; 1)</div>
<div class="line"><a id="l03053" name="l03053"></a><span class="lineno"> 3053</span>            <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code hl_enumvalue" href="core_8h.html#a7fc0249f0f8ba720115d2430f5b86cbaa6a992d5529f459a44fee58c733255e86">index</a> = 0; <a class="code hl_enumvalue" href="core_8h.html#a7fc0249f0f8ba720115d2430f5b86cbaa6a992d5529f459a44fee58c733255e86">index</a> &lt; <a class="code hl_function" href="core_8h.html#a501bb1bb2f0cc5706178ed237958e73b">count</a>; ++<a class="code hl_enumvalue" href="core_8h.html#a7fc0249f0f8ba720115d2430f5b86cbaa6a992d5529f459a44fee58c733255e86">index</a>)</div>
<div class="line"><a id="l03054" name="l03054"></a><span class="lineno"> 3054</span>                <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#a3f34a73605c566ec786c89a18bc076b2">line_dash</a>.push_back(segments[<a class="code hl_enumvalue" href="core_8h.html#a7fc0249f0f8ba720115d2430f5b86cbaa6a992d5529f459a44fee58c733255e86">index</a>]);</div>
<div class="line"><a id="l03055" name="l03055"></a><span class="lineno"> 3055</span>    }</div>
<div class="line"><a id="l03056" name="l03056"></a><span class="lineno"> 3056</span> </div>
<div class="line"><a id="l03057" name="l03057"></a><span class="lineno"> 3057</span>    <span class="keywordtype">void</span> <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#ac45236e8c3359456117d7e92f019cdf4">canvas::set_color</a>(</div>
<div class="line"><a id="l03058" name="l03058"></a><span class="lineno"> 3058</span>        <a class="code hl_enumeration" href="namespacecanvas__ity.html#a43021a4a19378b8a045cf40f27a3bb57">brush_type</a> <a class="code hl_enumeration" href="core_8h.html#a7aead736a07eaf25623ad7bfa1f0ee2d">type</a>,</div>
<div class="line"><a id="l03059" name="l03059"></a><span class="lineno"> 3059</span>        <span class="keywordtype">float</span>      <a class="code hl_enumvalue" href="color_8h.html#a80d1dc5f416b97f92939a4166d41203cabda9643ac6601722a28f238714274da4">red</a>,</div>
<div class="line"><a id="l03060" name="l03060"></a><span class="lineno"> 3060</span>        <span class="keywordtype">float</span>      <a class="code hl_enumvalue" href="color_8h.html#a80d1dc5f416b97f92939a4166d41203ca9f27410725ab8cc8854a2769c7a516b8">green</a>,</div>
<div class="line"><a id="l03061" name="l03061"></a><span class="lineno"> 3061</span>        <span class="keywordtype">float</span>      <a class="code hl_enumvalue" href="color_8h.html#a80d1dc5f416b97f92939a4166d41203ca48d6215903dff56238e52e8891380c8f">blue</a>,</div>
<div class="line"><a id="l03062" name="l03062"></a><span class="lineno"> 3062</span>        <span class="keywordtype">float</span>      alpha)</div>
<div class="line"><a id="l03063" name="l03063"></a><span class="lineno"> 3063</span>    {</div>
<div class="line"><a id="l03064" name="l03064"></a><span class="lineno"> 3064</span>        paint_brush&amp; brush = <a class="code hl_enumeration" href="core_8h.html#a7aead736a07eaf25623ad7bfa1f0ee2d">type</a> == <a class="code hl_enumvalue" href="namespacecanvas__ity.html#a43021a4a19378b8a045cf40f27a3bb57a1e6269b4d68ba7a58b54ef61b8f7fb0f">fill_style</a> ? <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#a8a2e78359bde16efa2f89127b119a1b2">fill_brush</a> : <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#a989dabb052e2c1a7400db979069dee52">stroke_brush</a>;</div>
<div class="line"><a id="l03065" name="l03065"></a><span class="lineno"> 3065</span>        brush.<a class="code hl_variable" href="structcanvas__ity_1_1paint__brush.html#aff0e7b3da803021f501dd60016e10748">type</a>         = <a class="code hl_enumvalue" href="structcanvas__ity_1_1paint__brush.html#ab6686ae3436f145ab241196f2337e010afba9224071f073610edf89517f965566">paint_brush::color</a>;</div>
<div class="line"><a id="l03066" name="l03066"></a><span class="lineno"> 3066</span>        brush.colors.clear();</div>
<div class="line"><a id="l03067" name="l03067"></a><span class="lineno"> 3067</span>        brush.colors.push_back(premultiplied(linearized(clamped(</div>
<div class="line"><a id="l03068" name="l03068"></a><span class="lineno"> 3068</span>            rgba(<a class="code hl_enumvalue" href="color_8h.html#a80d1dc5f416b97f92939a4166d41203cabda9643ac6601722a28f238714274da4">red</a>, <a class="code hl_enumvalue" href="color_8h.html#a80d1dc5f416b97f92939a4166d41203ca9f27410725ab8cc8854a2769c7a516b8">green</a>, <a class="code hl_enumvalue" href="color_8h.html#a80d1dc5f416b97f92939a4166d41203ca48d6215903dff56238e52e8891380c8f">blue</a>, alpha)))));</div>
<div class="line"><a id="l03069" name="l03069"></a><span class="lineno"> 3069</span>    }</div>
<div class="line"><a id="l03070" name="l03070"></a><span class="lineno"> 3070</span> </div>
<div class="line"><a id="l03071" name="l03071"></a><span class="lineno"> 3071</span>    <span class="keywordtype">void</span> <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#add26fbf936386d5acd21524097da4598">canvas::set_linear_gradient</a>(</div>
<div class="line"><a id="l03072" name="l03072"></a><span class="lineno"> 3072</span>        <a class="code hl_enumeration" href="namespacecanvas__ity.html#a43021a4a19378b8a045cf40f27a3bb57">brush_type</a> <a class="code hl_enumeration" href="core_8h.html#a7aead736a07eaf25623ad7bfa1f0ee2d">type</a>,</div>
<div class="line"><a id="l03073" name="l03073"></a><span class="lineno"> 3073</span>        <span class="keywordtype">float</span>      start_x,</div>
<div class="line"><a id="l03074" name="l03074"></a><span class="lineno"> 3074</span>        <span class="keywordtype">float</span>      start_y,</div>
<div class="line"><a id="l03075" name="l03075"></a><span class="lineno"> 3075</span>        <span class="keywordtype">float</span>      end_x,</div>
<div class="line"><a id="l03076" name="l03076"></a><span class="lineno"> 3076</span>        <span class="keywordtype">float</span>      end_y)</div>
<div class="line"><a id="l03077" name="l03077"></a><span class="lineno"> 3077</span>    {</div>
<div class="line"><a id="l03078" name="l03078"></a><span class="lineno"> 3078</span>        paint_brush&amp; brush = <a class="code hl_enumeration" href="core_8h.html#a7aead736a07eaf25623ad7bfa1f0ee2d">type</a> == <a class="code hl_enumvalue" href="namespacecanvas__ity.html#a43021a4a19378b8a045cf40f27a3bb57a1e6269b4d68ba7a58b54ef61b8f7fb0f">fill_style</a> ? <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#a8a2e78359bde16efa2f89127b119a1b2">fill_brush</a> : <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#a989dabb052e2c1a7400db979069dee52">stroke_brush</a>;</div>
<div class="line"><a id="l03079" name="l03079"></a><span class="lineno"> 3079</span>        brush.<a class="code hl_variable" href="structcanvas__ity_1_1paint__brush.html#aff0e7b3da803021f501dd60016e10748">type</a>         = <a class="code hl_enumvalue" href="structcanvas__ity_1_1paint__brush.html#ab6686ae3436f145ab241196f2337e010ad457f51ef368f0241a8f41b510298fd9">paint_brush::linear</a>;</div>
<div class="line"><a id="l03080" name="l03080"></a><span class="lineno"> 3080</span>        brush.colors.clear();</div>
<div class="line"><a id="l03081" name="l03081"></a><span class="lineno"> 3081</span>        brush.stops.clear();</div>
<div class="line"><a id="l03082" name="l03082"></a><span class="lineno"> 3082</span>        brush.hints.clear();</div>
<div class="line"><a id="l03083" name="l03083"></a><span class="lineno"> 3083</span>        brush.start = xy(start_x, start_y);</div>
<div class="line"><a id="l03084" name="l03084"></a><span class="lineno"> 3084</span>        brush.end   = xy(end_x, end_y);</div>
<div class="line"><a id="l03085" name="l03085"></a><span class="lineno"> 3085</span>    }</div>
<div class="line"><a id="l03086" name="l03086"></a><span class="lineno"> 3086</span> </div>
<div class="line"><a id="l03087" name="l03087"></a><span class="lineno"> 3087</span>    <span class="keywordtype">void</span> <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#ad66a122ecd2ceb5c9ac8effabb1ad60d">canvas::set_radial_gradient</a>(</div>
<div class="line"><a id="l03088" name="l03088"></a><span class="lineno"> 3088</span>        <a class="code hl_enumeration" href="namespacecanvas__ity.html#a43021a4a19378b8a045cf40f27a3bb57">brush_type</a> <a class="code hl_enumeration" href="core_8h.html#a7aead736a07eaf25623ad7bfa1f0ee2d">type</a>,</div>
<div class="line"><a id="l03089" name="l03089"></a><span class="lineno"> 3089</span>        <span class="keywordtype">float</span>      start_x,</div>
<div class="line"><a id="l03090" name="l03090"></a><span class="lineno"> 3090</span>        <span class="keywordtype">float</span>      start_y,</div>
<div class="line"><a id="l03091" name="l03091"></a><span class="lineno"> 3091</span>        <span class="keywordtype">float</span>      start_radius,</div>
<div class="line"><a id="l03092" name="l03092"></a><span class="lineno"> 3092</span>        <span class="keywordtype">float</span>      end_x,</div>
<div class="line"><a id="l03093" name="l03093"></a><span class="lineno"> 3093</span>        <span class="keywordtype">float</span>      end_y,</div>
<div class="line"><a id="l03094" name="l03094"></a><span class="lineno"> 3094</span>        <span class="keywordtype">float</span>      end_radius)</div>
<div class="line"><a id="l03095" name="l03095"></a><span class="lineno"> 3095</span>    {</div>
<div class="line"><a id="l03096" name="l03096"></a><span class="lineno"> 3096</span>        <span class="keywordflow">if</span> (start_radius &lt; 0.0f || end_radius &lt; 0.0f)</div>
<div class="line"><a id="l03097" name="l03097"></a><span class="lineno"> 3097</span>            <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l03098" name="l03098"></a><span class="lineno"> 3098</span>        paint_brush&amp; brush = <a class="code hl_enumeration" href="core_8h.html#a7aead736a07eaf25623ad7bfa1f0ee2d">type</a> == <a class="code hl_enumvalue" href="namespacecanvas__ity.html#a43021a4a19378b8a045cf40f27a3bb57a1e6269b4d68ba7a58b54ef61b8f7fb0f">fill_style</a> ? <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#a8a2e78359bde16efa2f89127b119a1b2">fill_brush</a> : <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#a989dabb052e2c1a7400db979069dee52">stroke_brush</a>;</div>
<div class="line"><a id="l03099" name="l03099"></a><span class="lineno"> 3099</span>        brush.<a class="code hl_variable" href="structcanvas__ity_1_1paint__brush.html#aff0e7b3da803021f501dd60016e10748">type</a>         = <a class="code hl_enumvalue" href="structcanvas__ity_1_1paint__brush.html#ab6686ae3436f145ab241196f2337e010a9441d4b111a1ff0bf1b075834adb9937">paint_brush::radial</a>;</div>
<div class="line"><a id="l03100" name="l03100"></a><span class="lineno"> 3100</span>        brush.colors.clear();</div>
<div class="line"><a id="l03101" name="l03101"></a><span class="lineno"> 3101</span>        brush.stops.clear();</div>
<div class="line"><a id="l03102" name="l03102"></a><span class="lineno"> 3102</span>        brush.hints.clear();</div>
<div class="line"><a id="l03103" name="l03103"></a><span class="lineno"> 3103</span>        brush.start        = xy(start_x, start_y);</div>
<div class="line"><a id="l03104" name="l03104"></a><span class="lineno"> 3104</span>        brush.end          = xy(end_x, end_y);</div>
<div class="line"><a id="l03105" name="l03105"></a><span class="lineno"> 3105</span>        brush.start_radius = start_radius;</div>
<div class="line"><a id="l03106" name="l03106"></a><span class="lineno"> 3106</span>        brush.end_radius   = end_radius;</div>
<div class="line"><a id="l03107" name="l03107"></a><span class="lineno"> 3107</span>    }</div>
<div class="line"><a id="l03108" name="l03108"></a><span class="lineno"> 3108</span> </div>
<div class="line"><a id="l03109" name="l03109"></a><span class="lineno"> 3109</span>    <span class="keywordtype">void</span> <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#a4821c78398a5edebfdcad0c8ae15358e">canvas::set_css_radial_gradient</a>(</div>
<div class="line"><a id="l03110" name="l03110"></a><span class="lineno"> 3110</span>        <a class="code hl_enumeration" href="namespacecanvas__ity.html#a43021a4a19378b8a045cf40f27a3bb57">brush_type</a> <a class="code hl_enumeration" href="core_8h.html#a7aead736a07eaf25623ad7bfa1f0ee2d">type</a>,</div>
<div class="line"><a id="l03111" name="l03111"></a><span class="lineno"> 3111</span>        <span class="keywordtype">float</span>      x,</div>
<div class="line"><a id="l03112" name="l03112"></a><span class="lineno"> 3112</span>        <span class="keywordtype">float</span>      y,</div>
<div class="line"><a id="l03113" name="l03113"></a><span class="lineno"> 3113</span>        <span class="keywordtype">float</span>      radius_x,</div>
<div class="line"><a id="l03114" name="l03114"></a><span class="lineno"> 3114</span>        <span class="keywordtype">float</span>      radius_y)</div>
<div class="line"><a id="l03115" name="l03115"></a><span class="lineno"> 3115</span>    {</div>
<div class="line"><a id="l03116" name="l03116"></a><span class="lineno"> 3116</span>        <span class="keywordflow">if</span> (radius_x &lt; 0.0f || radius_y &lt; 0.0f)</div>
<div class="line"><a id="l03117" name="l03117"></a><span class="lineno"> 3117</span>            <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l03118" name="l03118"></a><span class="lineno"> 3118</span>        paint_brush&amp; brush = <a class="code hl_enumeration" href="core_8h.html#a7aead736a07eaf25623ad7bfa1f0ee2d">type</a> == <a class="code hl_enumvalue" href="namespacecanvas__ity.html#a43021a4a19378b8a045cf40f27a3bb57a1e6269b4d68ba7a58b54ef61b8f7fb0f">fill_style</a> ? <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#a8a2e78359bde16efa2f89127b119a1b2">fill_brush</a> : <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#a989dabb052e2c1a7400db979069dee52">stroke_brush</a>;</div>
<div class="line"><a id="l03119" name="l03119"></a><span class="lineno"> 3119</span>        brush.<a class="code hl_variable" href="structcanvas__ity_1_1paint__brush.html#aff0e7b3da803021f501dd60016e10748">type</a>         = <a class="code hl_enumvalue" href="structcanvas__ity_1_1paint__brush.html#ab6686ae3436f145ab241196f2337e010aed9f68685c6e52ea8d0b31f8dc882a6e">paint_brush::css_radial</a>;</div>
<div class="line"><a id="l03120" name="l03120"></a><span class="lineno"> 3120</span>        brush.colors.clear();</div>
<div class="line"><a id="l03121" name="l03121"></a><span class="lineno"> 3121</span>        brush.stops.clear();</div>
<div class="line"><a id="l03122" name="l03122"></a><span class="lineno"> 3122</span>        brush.hints.clear();</div>
<div class="line"><a id="l03123" name="l03123"></a><span class="lineno"> 3123</span>        brush.start      = {x, y};</div>
<div class="line"><a id="l03124" name="l03124"></a><span class="lineno"> 3124</span>        brush.css_radius = {radius_x, radius_y};</div>
<div class="line"><a id="l03125" name="l03125"></a><span class="lineno"> 3125</span>    }</div>
<div class="line"><a id="l03126" name="l03126"></a><span class="lineno"> 3126</span> </div>
<div class="line"><a id="l03127" name="l03127"></a><span class="lineno"> 3127</span>    <span class="keywordtype">void</span> <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#a7eb04f30065a6356d7bb8a61b3b514e7">canvas::set_conic_gradient</a>(</div>
<div class="line"><a id="l03128" name="l03128"></a><span class="lineno"> 3128</span>        <a class="code hl_enumeration" href="namespacecanvas__ity.html#a43021a4a19378b8a045cf40f27a3bb57">brush_type</a> <a class="code hl_enumeration" href="core_8h.html#a7aead736a07eaf25623ad7bfa1f0ee2d">type</a>,</div>
<div class="line"><a id="l03129" name="l03129"></a><span class="lineno"> 3129</span>        <span class="keywordtype">float</span>      x,</div>
<div class="line"><a id="l03130" name="l03130"></a><span class="lineno"> 3130</span>        <span class="keywordtype">float</span>      y,</div>
<div class="line"><a id="l03131" name="l03131"></a><span class="lineno"> 3131</span>        <span class="keywordtype">float</span>      angle)</div>
<div class="line"><a id="l03132" name="l03132"></a><span class="lineno"> 3132</span>    {</div>
<div class="line"><a id="l03133" name="l03133"></a><span class="lineno"> 3133</span>        paint_brush&amp; brush = <a class="code hl_enumeration" href="core_8h.html#a7aead736a07eaf25623ad7bfa1f0ee2d">type</a> == <a class="code hl_enumvalue" href="namespacecanvas__ity.html#a43021a4a19378b8a045cf40f27a3bb57a1e6269b4d68ba7a58b54ef61b8f7fb0f">fill_style</a> ? <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#a8a2e78359bde16efa2f89127b119a1b2">fill_brush</a> : <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#a989dabb052e2c1a7400db979069dee52">stroke_brush</a>;</div>
<div class="line"><a id="l03134" name="l03134"></a><span class="lineno"> 3134</span>        brush.<a class="code hl_variable" href="structcanvas__ity_1_1paint__brush.html#aff0e7b3da803021f501dd60016e10748">type</a>         = <a class="code hl_enumvalue" href="structcanvas__ity_1_1paint__brush.html#ab6686ae3436f145ab241196f2337e010ad3adc95a76cdcb1c12fb911b9ae31d67">paint_brush::conic</a>;</div>
<div class="line"><a id="l03135" name="l03135"></a><span class="lineno"> 3135</span>        brush.colors       = {};</div>
<div class="line"><a id="l03136" name="l03136"></a><span class="lineno"> 3136</span>        brush.stops        = {};</div>
<div class="line"><a id="l03137" name="l03137"></a><span class="lineno"> 3137</span>        brush.hints        = {};</div>
<div class="line"><a id="l03138" name="l03138"></a><span class="lineno"> 3138</span>        brush.start        = {x, y};</div>
<div class="line"><a id="l03139" name="l03139"></a><span class="lineno"> 3139</span>        brush.angle        = angle;</div>
<div class="line"><a id="l03140" name="l03140"></a><span class="lineno"> 3140</span>    }</div>
<div class="line"><a id="l03141" name="l03141"></a><span class="lineno"> 3141</span> </div>
<div class="line"><a id="l03142" name="l03142"></a><span class="lineno"> 3142</span>    <span class="keywordtype">void</span> <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#a99a81e86ef5f77747c86ece9bc4c33b3">canvas::add_color_stop</a>(</div>
<div class="line"><a id="l03143" name="l03143"></a><span class="lineno"> 3143</span>        <a class="code hl_enumeration" href="namespacecanvas__ity.html#a43021a4a19378b8a045cf40f27a3bb57">brush_type</a>           <a class="code hl_enumeration" href="core_8h.html#a7aead736a07eaf25623ad7bfa1f0ee2d">type</a>,</div>
<div class="line"><a id="l03144" name="l03144"></a><span class="lineno"> 3144</span>        <span class="keywordtype">float</span>                <a class="code hl_define" href="css__properties_8cpp.html#a5dfbcc916693656dd092ddc41ab25747">offset</a>,</div>
<div class="line"><a id="l03145" name="l03145"></a><span class="lineno"> 3145</span>        <span class="keywordtype">float</span>                <a class="code hl_enumvalue" href="color_8h.html#a80d1dc5f416b97f92939a4166d41203cabda9643ac6601722a28f238714274da4">red</a>,</div>
<div class="line"><a id="l03146" name="l03146"></a><span class="lineno"> 3146</span>        <span class="keywordtype">float</span>                <a class="code hl_enumvalue" href="color_8h.html#a80d1dc5f416b97f92939a4166d41203ca9f27410725ab8cc8854a2769c7a516b8">green</a>,</div>
<div class="line"><a id="l03147" name="l03147"></a><span class="lineno"> 3147</span>        <span class="keywordtype">float</span>                <a class="code hl_enumvalue" href="color_8h.html#a80d1dc5f416b97f92939a4166d41203ca48d6215903dff56238e52e8891380c8f">blue</a>,</div>
<div class="line"><a id="l03148" name="l03148"></a><span class="lineno"> 3148</span>        <span class="keywordtype">float</span>                alpha,</div>
<div class="line"><a id="l03149" name="l03149"></a><span class="lineno"> 3149</span>        std::optional&lt;float&gt; hint)</div>
<div class="line"><a id="l03150" name="l03150"></a><span class="lineno"> 3150</span>    {</div>
<div class="line"><a id="l03151" name="l03151"></a><span class="lineno"> 3151</span>        paint_brush&amp; brush = <a class="code hl_enumeration" href="core_8h.html#a7aead736a07eaf25623ad7bfa1f0ee2d">type</a> == <a class="code hl_enumvalue" href="namespacecanvas__ity.html#a43021a4a19378b8a045cf40f27a3bb57a1e6269b4d68ba7a58b54ef61b8f7fb0f">fill_style</a> ? <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#a8a2e78359bde16efa2f89127b119a1b2">fill_brush</a> : <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#a989dabb052e2c1a7400db979069dee52">stroke_brush</a>;</div>
<div class="line"><a id="l03152" name="l03152"></a><span class="lineno"> 3152</span>        <span class="keywordflow">if</span> ((brush.type != <a class="code hl_enumvalue" href="structcanvas__ity_1_1paint__brush.html#ab6686ae3436f145ab241196f2337e010ad457f51ef368f0241a8f41b510298fd9">paint_brush::linear</a> &amp;&amp;</div>
<div class="line"><a id="l03153" name="l03153"></a><span class="lineno"> 3153</span>             brush.type != <a class="code hl_enumvalue" href="structcanvas__ity_1_1paint__brush.html#ab6686ae3436f145ab241196f2337e010a9441d4b111a1ff0bf1b075834adb9937">paint_brush::radial</a> &amp;&amp;</div>
<div class="line"><a id="l03154" name="l03154"></a><span class="lineno"> 3154</span>             brush.type != <a class="code hl_enumvalue" href="structcanvas__ity_1_1paint__brush.html#ab6686ae3436f145ab241196f2337e010aed9f68685c6e52ea8d0b31f8dc882a6e">paint_brush::css_radial</a> &amp;&amp;</div>
<div class="line"><a id="l03155" name="l03155"></a><span class="lineno"> 3155</span>             brush.type != <a class="code hl_enumvalue" href="structcanvas__ity_1_1paint__brush.html#ab6686ae3436f145ab241196f2337e010ad3adc95a76cdcb1c12fb911b9ae31d67">paint_brush::conic</a>) ||</div>
<div class="line"><a id="l03156" name="l03156"></a><span class="lineno"> 3156</span>            <a class="code hl_define" href="css__properties_8cpp.html#a5dfbcc916693656dd092ddc41ab25747">offset</a> &lt; 0.0f || 1.0f &lt; <a class="code hl_define" href="css__properties_8cpp.html#a5dfbcc916693656dd092ddc41ab25747">offset</a>)</div>
<div class="line"><a id="l03157" name="l03157"></a><span class="lineno"> 3157</span>            <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l03158" name="l03158"></a><span class="lineno"> 3158</span>        ptrdiff_t <a class="code hl_enumvalue" href="core_8h.html#a7fc0249f0f8ba720115d2430f5b86cbaa6a992d5529f459a44fee58c733255e86">index</a> = std::upper_bound(</div>
<div class="line"><a id="l03159" name="l03159"></a><span class="lineno"> 3159</span>                              brush.stops.begin(), brush.stops.end(), <a class="code hl_define" href="css__properties_8cpp.html#a5dfbcc916693656dd092ddc41ab25747">offset</a>) -</div>
<div class="line"><a id="l03160" name="l03160"></a><span class="lineno"> 3160</span>                          brush.<a class="code hl_variable" href="structcanvas__ity_1_1paint__brush.html#a91d8bc53347a4c08c8ab4ed077d21a0e">stops</a>.begin();</div>
<div class="line"><a id="l03161" name="l03161"></a><span class="lineno"> 3161</span>        rgba <a class="code hl_struct" href="structcolor.html">color</a> = linearized(clamped(rgba(<a class="code hl_enumvalue" href="color_8h.html#a80d1dc5f416b97f92939a4166d41203cabda9643ac6601722a28f238714274da4">red</a>, <a class="code hl_enumvalue" href="color_8h.html#a80d1dc5f416b97f92939a4166d41203ca9f27410725ab8cc8854a2769c7a516b8">green</a>, <a class="code hl_enumvalue" href="color_8h.html#a80d1dc5f416b97f92939a4166d41203ca48d6215903dff56238e52e8891380c8f">blue</a>, alpha)));</div>
<div class="line"><a id="l03162" name="l03162"></a><span class="lineno"> 3162</span>        brush.colors.insert(brush.colors.begin() + <a class="code hl_enumvalue" href="core_8h.html#a7fc0249f0f8ba720115d2430f5b86cbaa6a992d5529f459a44fee58c733255e86">index</a>, <a class="code hl_struct" href="structcolor.html">color</a>);</div>
<div class="line"><a id="l03163" name="l03163"></a><span class="lineno"> 3163</span>        brush.stops.insert(brush.stops.begin() + <a class="code hl_enumvalue" href="core_8h.html#a7fc0249f0f8ba720115d2430f5b86cbaa6a992d5529f459a44fee58c733255e86">index</a>, <a class="code hl_define" href="css__properties_8cpp.html#a5dfbcc916693656dd092ddc41ab25747">offset</a>);</div>
<div class="line"><a id="l03164" name="l03164"></a><span class="lineno"> 3164</span>        brush.hints.insert(brush.hints.begin() + <a class="code hl_enumvalue" href="core_8h.html#a7fc0249f0f8ba720115d2430f5b86cbaa6a992d5529f459a44fee58c733255e86">index</a>, hint);</div>
<div class="line"><a id="l03165" name="l03165"></a><span class="lineno"> 3165</span>    }</div>
<div class="line"><a id="l03166" name="l03166"></a><span class="lineno"> 3166</span> </div>
<div class="line"><a id="l03167" name="l03167"></a><span class="lineno"> 3167</span>    <span class="keywordtype">void</span> <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#a1b0e0ddf684f7eb4d3093ccfce576152">canvas::set_pattern</a>(</div>
<div class="line"><a id="l03168" name="l03168"></a><span class="lineno"> 3168</span>        <a class="code hl_enumeration" href="namespacecanvas__ity.html#a43021a4a19378b8a045cf40f27a3bb57">brush_type</a>           <a class="code hl_enumeration" href="core_8h.html#a7aead736a07eaf25623ad7bfa1f0ee2d">type</a>,</div>
<div class="line"><a id="l03169" name="l03169"></a><span class="lineno"> 3169</span>        <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> <span class="keyword">const</span>* <a class="code hl_variable" href="tag__strings_8h.html#a42cb5f5737262947250c709931232c69">image</a>,</div>
<div class="line"><a id="l03170" name="l03170"></a><span class="lineno"> 3170</span>        <span class="keywordtype">int</span>                  width,</div>
<div class="line"><a id="l03171" name="l03171"></a><span class="lineno"> 3171</span>        <span class="keywordtype">int</span>                  height,</div>
<div class="line"><a id="l03172" name="l03172"></a><span class="lineno"> 3172</span>        <span class="keywordtype">int</span>                  stride,</div>
<div class="line"><a id="l03173" name="l03173"></a><span class="lineno"> 3173</span>        <a class="code hl_enumeration" href="namespacecanvas__ity.html#ad73c575b59800b5698624c6545d925b1">repetition_style</a>     repetition)</div>
<div class="line"><a id="l03174" name="l03174"></a><span class="lineno"> 3174</span>    {</div>
<div class="line"><a id="l03175" name="l03175"></a><span class="lineno"> 3175</span>        <span class="keywordflow">if</span> (!<a class="code hl_variable" href="tag__strings_8h.html#a42cb5f5737262947250c709931232c69">image</a> || <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#ad4920132bc78f7e74a8b14319e8ff52c">width</a> &lt;= 0 || <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#acb61342cdc37dc89aee42e7087adbc50">height</a> &lt;= 0)</div>
<div class="line"><a id="l03176" name="l03176"></a><span class="lineno"> 3176</span>            <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l03177" name="l03177"></a><span class="lineno"> 3177</span>        paint_brush&amp; brush = <a class="code hl_enumeration" href="core_8h.html#a7aead736a07eaf25623ad7bfa1f0ee2d">type</a> == <a class="code hl_enumvalue" href="namespacecanvas__ity.html#a43021a4a19378b8a045cf40f27a3bb57a1e6269b4d68ba7a58b54ef61b8f7fb0f">fill_style</a> ? <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#a8a2e78359bde16efa2f89127b119a1b2">fill_brush</a> : <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#a989dabb052e2c1a7400db979069dee52">stroke_brush</a>;</div>
<div class="line"><a id="l03178" name="l03178"></a><span class="lineno"> 3178</span>        brush.<a class="code hl_variable" href="structcanvas__ity_1_1paint__brush.html#aff0e7b3da803021f501dd60016e10748">type</a>         = <a class="code hl_enumvalue" href="structcanvas__ity_1_1paint__brush.html#ab6686ae3436f145ab241196f2337e010acee0286b8cd79b2f387c15a5d1462aaf">paint_brush::pattern</a>;</div>
<div class="line"><a id="l03179" name="l03179"></a><span class="lineno"> 3179</span>        brush.colors.clear();</div>
<div class="line"><a id="l03180" name="l03180"></a><span class="lineno"> 3180</span>        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> y = 0; y &lt; <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#acb61342cdc37dc89aee42e7087adbc50">height</a>; ++y)</div>
<div class="line"><a id="l03181" name="l03181"></a><span class="lineno"> 3181</span>            <span class="keywordflow">for</span> (<span class="keywordtype">int</span> x = 0; x &lt; <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#ad4920132bc78f7e74a8b14319e8ff52c">width</a>; ++x)</div>
<div class="line"><a id="l03182" name="l03182"></a><span class="lineno"> 3182</span>            {</div>
<div class="line"><a id="l03183" name="l03183"></a><span class="lineno"> 3183</span>                <span class="keywordtype">int</span>  <a class="code hl_enumvalue" href="core_8h.html#a7fc0249f0f8ba720115d2430f5b86cbaa6a992d5529f459a44fee58c733255e86">index</a> = y * stride + x * 4;</div>
<div class="line"><a id="l03184" name="l03184"></a><span class="lineno"> 3184</span>                rgba <a class="code hl_struct" href="structcolor.html">color</a> = rgba(</div>
<div class="line"><a id="l03185" name="l03185"></a><span class="lineno"> 3185</span>                    <a class="code hl_variable" href="tag__strings_8h.html#a42cb5f5737262947250c709931232c69">image</a>[<a class="code hl_enumvalue" href="core_8h.html#a7fc0249f0f8ba720115d2430f5b86cbaa6a992d5529f459a44fee58c733255e86">index</a> + 0] / 255.0f, <a class="code hl_variable" href="tag__strings_8h.html#a42cb5f5737262947250c709931232c69">image</a>[<a class="code hl_enumvalue" href="core_8h.html#a7fc0249f0f8ba720115d2430f5b86cbaa6a992d5529f459a44fee58c733255e86">index</a> + 1] / 255.0f,</div>
<div class="line"><a id="l03186" name="l03186"></a><span class="lineno"> 3186</span>                    <a class="code hl_variable" href="tag__strings_8h.html#a42cb5f5737262947250c709931232c69">image</a>[<a class="code hl_enumvalue" href="core_8h.html#a7fc0249f0f8ba720115d2430f5b86cbaa6a992d5529f459a44fee58c733255e86">index</a> + 2] / 255.0f, <a class="code hl_variable" href="tag__strings_8h.html#a42cb5f5737262947250c709931232c69">image</a>[<a class="code hl_enumvalue" href="core_8h.html#a7fc0249f0f8ba720115d2430f5b86cbaa6a992d5529f459a44fee58c733255e86">index</a> + 3] / 255.0f);</div>
<div class="line"><a id="l03187" name="l03187"></a><span class="lineno"> 3187</span>                brush.colors.push_back(premultiplied(linearized(<a class="code hl_struct" href="structcolor.html">color</a>)));</div>
<div class="line"><a id="l03188" name="l03188"></a><span class="lineno"> 3188</span>            }</div>
<div class="line"><a id="l03189" name="l03189"></a><span class="lineno"> 3189</span>        brush.width      = <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#ad4920132bc78f7e74a8b14319e8ff52c">width</a>;</div>
<div class="line"><a id="l03190" name="l03190"></a><span class="lineno"> 3190</span>        brush.height     = <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#acb61342cdc37dc89aee42e7087adbc50">height</a>;</div>
<div class="line"><a id="l03191" name="l03191"></a><span class="lineno"> 3191</span>        brush.repetition = repetition;</div>
<div class="line"><a id="l03192" name="l03192"></a><span class="lineno"> 3192</span>    }</div>
<div class="line"><a id="l03193" name="l03193"></a><span class="lineno"> 3193</span> </div>
<div class="line"><a id="l03194" name="l03194"></a><span class="lineno"> 3194</span>    <span class="keywordtype">void</span> <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#aa4e9cd5047183018446aa43f7f7d4795">canvas::begin_path</a>()</div>
<div class="line"><a id="l03195" name="l03195"></a><span class="lineno"> 3195</span>    {</div>
<div class="line"><a id="l03196" name="l03196"></a><span class="lineno"> 3196</span>        <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ae8488ab90d9a55ebf96175ff662c6ede">path</a>.<a class="code hl_variable" href="structcanvas__ity_1_1bezier__path.html#a1b9a6aa5d044117cf45d1e193c09c9c6">points</a>.clear();</div>
<div class="line"><a id="l03197" name="l03197"></a><span class="lineno"> 3197</span>        <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ae8488ab90d9a55ebf96175ff662c6ede">path</a>.<a class="code hl_variable" href="structcanvas__ity_1_1bezier__path.html#aa9c8932defdc8f64781d16e72fef19a3">subpaths</a>.clear();</div>
<div class="line"><a id="l03198" name="l03198"></a><span class="lineno"> 3198</span>    }</div>
<div class="line"><a id="l03199" name="l03199"></a><span class="lineno"> 3199</span> </div>
<div class="line"><a id="l03200" name="l03200"></a><span class="lineno"> 3200</span>    <span class="keywordtype">void</span> <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#a327cdd2c64047affe6d03416bcb6a568">canvas::move_to</a>(</div>
<div class="line"><a id="l03201" name="l03201"></a><span class="lineno"> 3201</span>        <span class="keywordtype">float</span> x,</div>
<div class="line"><a id="l03202" name="l03202"></a><span class="lineno"> 3202</span>        <span class="keywordtype">float</span> y)</div>
<div class="line"><a id="l03203" name="l03203"></a><span class="lineno"> 3203</span>    {</div>
<div class="line"><a id="l03204" name="l03204"></a><span class="lineno"> 3204</span>        <span class="keywordflow">if</span> (!<a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ae8488ab90d9a55ebf96175ff662c6ede">path</a>.<a class="code hl_variable" href="structcanvas__ity_1_1bezier__path.html#aa9c8932defdc8f64781d16e72fef19a3">subpaths</a>.empty() &amp;&amp; <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ae8488ab90d9a55ebf96175ff662c6ede">path</a>.<a class="code hl_variable" href="structcanvas__ity_1_1bezier__path.html#aa9c8932defdc8f64781d16e72fef19a3">subpaths</a>.back().count == 1)</div>
<div class="line"><a id="l03205" name="l03205"></a><span class="lineno"> 3205</span>        {</div>
<div class="line"><a id="l03206" name="l03206"></a><span class="lineno"> 3206</span>            <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ae8488ab90d9a55ebf96175ff662c6ede">path</a>.<a class="code hl_variable" href="structcanvas__ity_1_1bezier__path.html#a1b9a6aa5d044117cf45d1e193c09c9c6">points</a>.back() = <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ac5da3224f86f284b4ac7efbde3942e27">forward</a> * xy(x, y);</div>
<div class="line"><a id="l03207" name="l03207"></a><span class="lineno"> 3207</span>            <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l03208" name="l03208"></a><span class="lineno"> 3208</span>        }</div>
<div class="line"><a id="l03209" name="l03209"></a><span class="lineno"> 3209</span>        subpath_data subpath = {1, <span class="keyword">false</span>};</div>
<div class="line"><a id="l03210" name="l03210"></a><span class="lineno"> 3210</span>        <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ae8488ab90d9a55ebf96175ff662c6ede">path</a>.<a class="code hl_variable" href="structcanvas__ity_1_1bezier__path.html#a1b9a6aa5d044117cf45d1e193c09c9c6">points</a>.push_back(<a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ac5da3224f86f284b4ac7efbde3942e27">forward</a> * xy(x, y));</div>
<div class="line"><a id="l03211" name="l03211"></a><span class="lineno"> 3211</span>        <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ae8488ab90d9a55ebf96175ff662c6ede">path</a>.<a class="code hl_variable" href="structcanvas__ity_1_1bezier__path.html#aa9c8932defdc8f64781d16e72fef19a3">subpaths</a>.push_back(subpath);</div>
<div class="line"><a id="l03212" name="l03212"></a><span class="lineno"> 3212</span>    }</div>
<div class="line"><a id="l03213" name="l03213"></a><span class="lineno"> 3213</span> </div>
<div class="line"><a id="l03214" name="l03214"></a><span class="lineno"> 3214</span>    <span class="keywordtype">void</span> <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#aab76d29f5555824f8d76e1a17b10644e">canvas::close_path</a>()</div>
<div class="line"><a id="l03215" name="l03215"></a><span class="lineno"> 3215</span>    {</div>
<div class="line"><a id="l03216" name="l03216"></a><span class="lineno"> 3216</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ae8488ab90d9a55ebf96175ff662c6ede">path</a>.<a class="code hl_variable" href="structcanvas__ity_1_1bezier__path.html#aa9c8932defdc8f64781d16e72fef19a3">subpaths</a>.empty())</div>
<div class="line"><a id="l03217" name="l03217"></a><span class="lineno"> 3217</span>            <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l03218" name="l03218"></a><span class="lineno"> 3218</span>        xy            <a class="code hl_function" href="namespacedetail.html#a7c8bc5fb5ef4750d192614dd7f0cf396">first</a>         = <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ae8488ab90d9a55ebf96175ff662c6ede">path</a>.<a class="code hl_variable" href="structcanvas__ity_1_1bezier__path.html#a1b9a6aa5d044117cf45d1e193c09c9c6">points</a>[<a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ae8488ab90d9a55ebf96175ff662c6ede">path</a>.<a class="code hl_variable" href="structcanvas__ity_1_1bezier__path.html#a1b9a6aa5d044117cf45d1e193c09c9c6">points</a>.size() - <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ae8488ab90d9a55ebf96175ff662c6ede">path</a>.<a class="code hl_variable" href="structcanvas__ity_1_1bezier__path.html#aa9c8932defdc8f64781d16e72fef19a3">subpaths</a>.back().count];</div>
<div class="line"><a id="l03219" name="l03219"></a><span class="lineno"> 3219</span>        affine_matrix saved_forward = <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ac5da3224f86f284b4ac7efbde3942e27">forward</a>;</div>
<div class="line"><a id="l03220" name="l03220"></a><span class="lineno"> 3220</span>        affine_matrix identity      = {1.0f, 0.0f, 0.0f, 1.0f, 0.0f, 0.0f};</div>
<div class="line"><a id="l03221" name="l03221"></a><span class="lineno"> 3221</span>        <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ac5da3224f86f284b4ac7efbde3942e27">forward</a>                     = identity;</div>
<div class="line"><a id="l03222" name="l03222"></a><span class="lineno"> 3222</span>        <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#ac85d0e71edbc57918a6cfe12ec5083ac">line_to</a>(<a class="code hl_function" href="namespacedetail.html#a7c8bc5fb5ef4750d192614dd7f0cf396">first</a>.x, <a class="code hl_function" href="namespacedetail.html#a7c8bc5fb5ef4750d192614dd7f0cf396">first</a>.y);</div>
<div class="line"><a id="l03223" name="l03223"></a><span class="lineno"> 3223</span>        <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ae8488ab90d9a55ebf96175ff662c6ede">path</a>.<a class="code hl_variable" href="structcanvas__ity_1_1bezier__path.html#aa9c8932defdc8f64781d16e72fef19a3">subpaths</a>.back().closed = <span class="keyword">true</span>;</div>
<div class="line"><a id="l03224" name="l03224"></a><span class="lineno"> 3224</span>        <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#a327cdd2c64047affe6d03416bcb6a568">move_to</a>(<a class="code hl_function" href="namespacedetail.html#a7c8bc5fb5ef4750d192614dd7f0cf396">first</a>.x, <a class="code hl_function" href="namespacedetail.html#a7c8bc5fb5ef4750d192614dd7f0cf396">first</a>.y);</div>
<div class="line"><a id="l03225" name="l03225"></a><span class="lineno"> 3225</span>        <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ac5da3224f86f284b4ac7efbde3942e27">forward</a> = saved_forward;</div>
<div class="line"><a id="l03226" name="l03226"></a><span class="lineno"> 3226</span>    }</div>
<div class="line"><a id="l03227" name="l03227"></a><span class="lineno"> 3227</span> </div>
<div class="line"><a id="l03228" name="l03228"></a><span class="lineno"> 3228</span>    <span class="keywordtype">void</span> <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#ac85d0e71edbc57918a6cfe12ec5083ac">canvas::line_to</a>(</div>
<div class="line"><a id="l03229" name="l03229"></a><span class="lineno"> 3229</span>        <span class="keywordtype">float</span> x,</div>
<div class="line"><a id="l03230" name="l03230"></a><span class="lineno"> 3230</span>        <span class="keywordtype">float</span> y)</div>
<div class="line"><a id="l03231" name="l03231"></a><span class="lineno"> 3231</span>    {</div>
<div class="line"><a id="l03232" name="l03232"></a><span class="lineno"> 3232</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ae8488ab90d9a55ebf96175ff662c6ede">path</a>.<a class="code hl_variable" href="structcanvas__ity_1_1bezier__path.html#aa9c8932defdc8f64781d16e72fef19a3">subpaths</a>.empty())</div>
<div class="line"><a id="l03233" name="l03233"></a><span class="lineno"> 3233</span>        {</div>
<div class="line"><a id="l03234" name="l03234"></a><span class="lineno"> 3234</span>            <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#a327cdd2c64047affe6d03416bcb6a568">move_to</a>(x, y);</div>
<div class="line"><a id="l03235" name="l03235"></a><span class="lineno"> 3235</span>            <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l03236" name="l03236"></a><span class="lineno"> 3236</span>        }</div>
<div class="line"><a id="l03237" name="l03237"></a><span class="lineno"> 3237</span>        xy point_1 = <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ae8488ab90d9a55ebf96175ff662c6ede">path</a>.<a class="code hl_variable" href="structcanvas__ity_1_1bezier__path.html#a1b9a6aa5d044117cf45d1e193c09c9c6">points</a>.back();</div>
<div class="line"><a id="l03238" name="l03238"></a><span class="lineno"> 3238</span>        xy point_2 = <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ac5da3224f86f284b4ac7efbde3942e27">forward</a> * xy(x, y);</div>
<div class="line"><a id="l03239" name="l03239"></a><span class="lineno"> 3239</span>        <span class="keywordflow">if</span> (dot(point_2 - point_1, point_2 - point_1) == 0.0f)</div>
<div class="line"><a id="l03240" name="l03240"></a><span class="lineno"> 3240</span>            <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l03241" name="l03241"></a><span class="lineno"> 3241</span>        <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ae8488ab90d9a55ebf96175ff662c6ede">path</a>.<a class="code hl_variable" href="structcanvas__ity_1_1bezier__path.html#a1b9a6aa5d044117cf45d1e193c09c9c6">points</a>.push_back(point_1);</div>
<div class="line"><a id="l03242" name="l03242"></a><span class="lineno"> 3242</span>        <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ae8488ab90d9a55ebf96175ff662c6ede">path</a>.<a class="code hl_variable" href="structcanvas__ity_1_1bezier__path.html#a1b9a6aa5d044117cf45d1e193c09c9c6">points</a>.push_back(point_2);</div>
<div class="line"><a id="l03243" name="l03243"></a><span class="lineno"> 3243</span>        <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ae8488ab90d9a55ebf96175ff662c6ede">path</a>.<a class="code hl_variable" href="structcanvas__ity_1_1bezier__path.html#a1b9a6aa5d044117cf45d1e193c09c9c6">points</a>.push_back(point_2);</div>
<div class="line"><a id="l03244" name="l03244"></a><span class="lineno"> 3244</span>        <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ae8488ab90d9a55ebf96175ff662c6ede">path</a>.<a class="code hl_variable" href="structcanvas__ity_1_1bezier__path.html#aa9c8932defdc8f64781d16e72fef19a3">subpaths</a>.back().count += 3;</div>
<div class="line"><a id="l03245" name="l03245"></a><span class="lineno"> 3245</span>    }</div>
<div class="line"><a id="l03246" name="l03246"></a><span class="lineno"> 3246</span> </div>
<div class="line"><a id="l03247" name="l03247"></a><span class="lineno"> 3247</span>    <span class="keywordtype">void</span> <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#ae2b7f2f2525f838ea0a812bb8555b58e">canvas::quadratic_curve_to</a>(</div>
<div class="line"><a id="l03248" name="l03248"></a><span class="lineno"> 3248</span>        <span class="keywordtype">float</span> control_x,</div>
<div class="line"><a id="l03249" name="l03249"></a><span class="lineno"> 3249</span>        <span class="keywordtype">float</span> control_y,</div>
<div class="line"><a id="l03250" name="l03250"></a><span class="lineno"> 3250</span>        <span class="keywordtype">float</span> x,</div>
<div class="line"><a id="l03251" name="l03251"></a><span class="lineno"> 3251</span>        <span class="keywordtype">float</span> y)</div>
<div class="line"><a id="l03252" name="l03252"></a><span class="lineno"> 3252</span>    {</div>
<div class="line"><a id="l03253" name="l03253"></a><span class="lineno"> 3253</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ae8488ab90d9a55ebf96175ff662c6ede">path</a>.<a class="code hl_variable" href="structcanvas__ity_1_1bezier__path.html#aa9c8932defdc8f64781d16e72fef19a3">subpaths</a>.empty())</div>
<div class="line"><a id="l03254" name="l03254"></a><span class="lineno"> 3254</span>            <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#a327cdd2c64047affe6d03416bcb6a568">move_to</a>(control_x, control_y);</div>
<div class="line"><a id="l03255" name="l03255"></a><span class="lineno"> 3255</span>        xy point_1   = <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ae8488ab90d9a55ebf96175ff662c6ede">path</a>.<a class="code hl_variable" href="structcanvas__ity_1_1bezier__path.html#a1b9a6aa5d044117cf45d1e193c09c9c6">points</a>.back();</div>
<div class="line"><a id="l03256" name="l03256"></a><span class="lineno"> 3256</span>        xy control   = <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ac5da3224f86f284b4ac7efbde3942e27">forward</a> * xy(control_x, control_y);</div>
<div class="line"><a id="l03257" name="l03257"></a><span class="lineno"> 3257</span>        xy point_2   = <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ac5da3224f86f284b4ac7efbde3942e27">forward</a> * xy(x, y);</div>
<div class="line"><a id="l03258" name="l03258"></a><span class="lineno"> 3258</span>        xy control_1 = lerp(point_1, control, 2.0f / 3.0f);</div>
<div class="line"><a id="l03259" name="l03259"></a><span class="lineno"> 3259</span>        xy control_2 = lerp(point_2, control, 2.0f / 3.0f);</div>
<div class="line"><a id="l03260" name="l03260"></a><span class="lineno"> 3260</span>        <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ae8488ab90d9a55ebf96175ff662c6ede">path</a>.<a class="code hl_variable" href="structcanvas__ity_1_1bezier__path.html#a1b9a6aa5d044117cf45d1e193c09c9c6">points</a>.push_back(control_1);</div>
<div class="line"><a id="l03261" name="l03261"></a><span class="lineno"> 3261</span>        <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ae8488ab90d9a55ebf96175ff662c6ede">path</a>.<a class="code hl_variable" href="structcanvas__ity_1_1bezier__path.html#a1b9a6aa5d044117cf45d1e193c09c9c6">points</a>.push_back(control_2);</div>
<div class="line"><a id="l03262" name="l03262"></a><span class="lineno"> 3262</span>        <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ae8488ab90d9a55ebf96175ff662c6ede">path</a>.<a class="code hl_variable" href="structcanvas__ity_1_1bezier__path.html#a1b9a6aa5d044117cf45d1e193c09c9c6">points</a>.push_back(point_2);</div>
<div class="line"><a id="l03263" name="l03263"></a><span class="lineno"> 3263</span>        <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ae8488ab90d9a55ebf96175ff662c6ede">path</a>.<a class="code hl_variable" href="structcanvas__ity_1_1bezier__path.html#aa9c8932defdc8f64781d16e72fef19a3">subpaths</a>.back().count += 3;</div>
<div class="line"><a id="l03264" name="l03264"></a><span class="lineno"> 3264</span>    }</div>
<div class="line"><a id="l03265" name="l03265"></a><span class="lineno"> 3265</span> </div>
<div class="line"><a id="l03266" name="l03266"></a><span class="lineno"> 3266</span>    <span class="keywordtype">void</span> <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#a5f7befd4ac9f8adf859454859d8093a9">canvas::bezier_curve_to</a>(</div>
<div class="line"><a id="l03267" name="l03267"></a><span class="lineno"> 3267</span>        <span class="keywordtype">float</span> control_1_x,</div>
<div class="line"><a id="l03268" name="l03268"></a><span class="lineno"> 3268</span>        <span class="keywordtype">float</span> control_1_y,</div>
<div class="line"><a id="l03269" name="l03269"></a><span class="lineno"> 3269</span>        <span class="keywordtype">float</span> control_2_x,</div>
<div class="line"><a id="l03270" name="l03270"></a><span class="lineno"> 3270</span>        <span class="keywordtype">float</span> control_2_y,</div>
<div class="line"><a id="l03271" name="l03271"></a><span class="lineno"> 3271</span>        <span class="keywordtype">float</span> x,</div>
<div class="line"><a id="l03272" name="l03272"></a><span class="lineno"> 3272</span>        <span class="keywordtype">float</span> y)</div>
<div class="line"><a id="l03273" name="l03273"></a><span class="lineno"> 3273</span>    {</div>
<div class="line"><a id="l03274" name="l03274"></a><span class="lineno"> 3274</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ae8488ab90d9a55ebf96175ff662c6ede">path</a>.<a class="code hl_variable" href="structcanvas__ity_1_1bezier__path.html#aa9c8932defdc8f64781d16e72fef19a3">subpaths</a>.empty())</div>
<div class="line"><a id="l03275" name="l03275"></a><span class="lineno"> 3275</span>            <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#a327cdd2c64047affe6d03416bcb6a568">move_to</a>(control_1_x, control_1_y);</div>
<div class="line"><a id="l03276" name="l03276"></a><span class="lineno"> 3276</span>        xy control_1 = <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ac5da3224f86f284b4ac7efbde3942e27">forward</a> * xy(control_1_x, control_1_y);</div>
<div class="line"><a id="l03277" name="l03277"></a><span class="lineno"> 3277</span>        xy control_2 = <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ac5da3224f86f284b4ac7efbde3942e27">forward</a> * xy(control_2_x, control_2_y);</div>
<div class="line"><a id="l03278" name="l03278"></a><span class="lineno"> 3278</span>        xy point_2   = <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ac5da3224f86f284b4ac7efbde3942e27">forward</a> * xy(x, y);</div>
<div class="line"><a id="l03279" name="l03279"></a><span class="lineno"> 3279</span>        <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ae8488ab90d9a55ebf96175ff662c6ede">path</a>.<a class="code hl_variable" href="structcanvas__ity_1_1bezier__path.html#a1b9a6aa5d044117cf45d1e193c09c9c6">points</a>.push_back(control_1);</div>
<div class="line"><a id="l03280" name="l03280"></a><span class="lineno"> 3280</span>        <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ae8488ab90d9a55ebf96175ff662c6ede">path</a>.<a class="code hl_variable" href="structcanvas__ity_1_1bezier__path.html#a1b9a6aa5d044117cf45d1e193c09c9c6">points</a>.push_back(control_2);</div>
<div class="line"><a id="l03281" name="l03281"></a><span class="lineno"> 3281</span>        <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ae8488ab90d9a55ebf96175ff662c6ede">path</a>.<a class="code hl_variable" href="structcanvas__ity_1_1bezier__path.html#a1b9a6aa5d044117cf45d1e193c09c9c6">points</a>.push_back(point_2);</div>
<div class="line"><a id="l03282" name="l03282"></a><span class="lineno"> 3282</span>        <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ae8488ab90d9a55ebf96175ff662c6ede">path</a>.<a class="code hl_variable" href="structcanvas__ity_1_1bezier__path.html#aa9c8932defdc8f64781d16e72fef19a3">subpaths</a>.back().count += 3;</div>
<div class="line"><a id="l03283" name="l03283"></a><span class="lineno"> 3283</span>    }</div>
<div class="line"><a id="l03284" name="l03284"></a><span class="lineno"> 3284</span> </div>
<div class="line"><a id="l03285" name="l03285"></a><span class="lineno"> 3285</span>    <span class="keywordtype">void</span> <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#addeff553c8e798317f0314204db87e57">canvas::arc_to</a>(</div>
<div class="line"><a id="l03286" name="l03286"></a><span class="lineno"> 3286</span>        <span class="keywordtype">float</span> vertex_x,</div>
<div class="line"><a id="l03287" name="l03287"></a><span class="lineno"> 3287</span>        <span class="keywordtype">float</span> vertex_y,</div>
<div class="line"><a id="l03288" name="l03288"></a><span class="lineno"> 3288</span>        <span class="keywordtype">float</span> x,</div>
<div class="line"><a id="l03289" name="l03289"></a><span class="lineno"> 3289</span>        <span class="keywordtype">float</span> y,</div>
<div class="line"><a id="l03290" name="l03290"></a><span class="lineno"> 3290</span>        <span class="keywordtype">float</span> radius)</div>
<div class="line"><a id="l03291" name="l03291"></a><span class="lineno"> 3291</span>    {</div>
<div class="line"><a id="l03292" name="l03292"></a><span class="lineno"> 3292</span>        <span class="keywordflow">if</span> (radius &lt; 0.0f ||</div>
<div class="line"><a id="l03293" name="l03293"></a><span class="lineno"> 3293</span>            <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ac5da3224f86f284b4ac7efbde3942e27">forward</a>.<a class="code hl_variable" href="structcanvas__ity_1_1affine__matrix.html#a06279a73c160cc47458ff2f08f25b566">a</a> * <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ac5da3224f86f284b4ac7efbde3942e27">forward</a>.<a class="code hl_variable" href="structcanvas__ity_1_1affine__matrix.html#ac8fa9558e05f63f452296d1ef2aba39a">d</a> - <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ac5da3224f86f284b4ac7efbde3942e27">forward</a>.<a class="code hl_variable" href="structcanvas__ity_1_1affine__matrix.html#a3abbeddf9bbf1b7c7d81c2b0339c4123">b</a> * <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ac5da3224f86f284b4ac7efbde3942e27">forward</a>.<a class="code hl_variable" href="structcanvas__ity_1_1affine__matrix.html#ae34446b5fed7e778e2a62a436e47f12e">c</a> == 0.0f)</div>
<div class="line"><a id="l03294" name="l03294"></a><span class="lineno"> 3294</span>            <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l03295" name="l03295"></a><span class="lineno"> 3295</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ae8488ab90d9a55ebf96175ff662c6ede">path</a>.<a class="code hl_variable" href="structcanvas__ity_1_1bezier__path.html#aa9c8932defdc8f64781d16e72fef19a3">subpaths</a>.empty())</div>
<div class="line"><a id="l03296" name="l03296"></a><span class="lineno"> 3296</span>            <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#a327cdd2c64047affe6d03416bcb6a568">move_to</a>(vertex_x, vertex_y);</div>
<div class="line"><a id="l03297" name="l03297"></a><span class="lineno"> 3297</span>        xy                 point_1 = <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ade344370cc819a35ed35233e02f09859">inverse</a> * <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ae8488ab90d9a55ebf96175ff662c6ede">path</a>.<a class="code hl_variable" href="structcanvas__ity_1_1bezier__path.html#a1b9a6aa5d044117cf45d1e193c09c9c6">points</a>.back();</div>
<div class="line"><a id="l03298" name="l03298"></a><span class="lineno"> 3298</span>        xy                 vertex  = xy(vertex_x, vertex_y);</div>
<div class="line"><a id="l03299" name="l03299"></a><span class="lineno"> 3299</span>        xy                 point_2 = xy(x, y);</div>
<div class="line"><a id="l03300" name="l03300"></a><span class="lineno"> 3300</span>        xy                 edge_1  = normalized(point_1 - vertex);</div>
<div class="line"><a id="l03301" name="l03301"></a><span class="lineno"> 3301</span>        xy                 edge_2  = normalized(point_2 - vertex);</div>
<div class="line"><a id="l03302" name="l03302"></a><span class="lineno"> 3302</span>        <span class="keywordtype">float</span>              sine    = fabsf(dot(perpendicular(edge_1), edge_2));</div>
<div class="line"><a id="l03303" name="l03303"></a><span class="lineno"> 3303</span>        <span class="keyword">static</span> <span class="keywordtype">float</span> <span class="keyword">const</span> epsilon = 1.0e-4f;</div>
<div class="line"><a id="l03304" name="l03304"></a><span class="lineno"> 3304</span>        <span class="keywordflow">if</span> (sine &lt; epsilon)</div>
<div class="line"><a id="l03305" name="l03305"></a><span class="lineno"> 3305</span>        {</div>
<div class="line"><a id="l03306" name="l03306"></a><span class="lineno"> 3306</span>            <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#ac85d0e71edbc57918a6cfe12ec5083ac">line_to</a>(vertex_x, vertex_y);</div>
<div class="line"><a id="l03307" name="l03307"></a><span class="lineno"> 3307</span>            <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l03308" name="l03308"></a><span class="lineno"> 3308</span>        }</div>
<div class="line"><a id="l03309" name="l03309"></a><span class="lineno"> 3309</span>        xy    <a class="code hl_define" href="css__properties_8cpp.html#a5dfbcc916693656dd092ddc41ab25747">offset</a>  = radius / sine * (edge_1 + edge_2);</div>
<div class="line"><a id="l03310" name="l03310"></a><span class="lineno"> 3310</span>        xy    <a class="code hl_enumvalue" href="namespacecanvas__ity.html#a64892b31b00c006299d47bb71542b765a5db08d7fa14da6c1e37ae6aaad87a53d">center</a>  = vertex + <a class="code hl_define" href="css__properties_8cpp.html#a5dfbcc916693656dd092ddc41ab25747">offset</a>;</div>
<div class="line"><a id="l03311" name="l03311"></a><span class="lineno"> 3311</span>        <span class="keywordtype">float</span> angle_1 = direction(dot(<a class="code hl_define" href="css__properties_8cpp.html#a5dfbcc916693656dd092ddc41ab25747">offset</a>, edge_1) * edge_1 - <a class="code hl_define" href="css__properties_8cpp.html#a5dfbcc916693656dd092ddc41ab25747">offset</a>);</div>
<div class="line"><a id="l03312" name="l03312"></a><span class="lineno"> 3312</span>        <span class="keywordtype">float</span> angle_2 = direction(dot(<a class="code hl_define" href="css__properties_8cpp.html#a5dfbcc916693656dd092ddc41ab25747">offset</a>, edge_2) * edge_2 - <a class="code hl_define" href="css__properties_8cpp.html#a5dfbcc916693656dd092ddc41ab25747">offset</a>);</div>
<div class="line"><a id="l03313" name="l03313"></a><span class="lineno"> 3313</span>        <span class="keywordtype">bool</span>  <a class="code hl_enumvalue" href="color_8h.html#a535b59b8edc8902bb3c4f254625f91baa4d9c2073afa3c2abb817dceb22c34de6">reverse</a> = <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(</div>
<div class="line"><a id="l03314" name="l03314"></a><span class="lineno"> 3314</span>                            floorf((angle_2 - angle_1) / pi)) &amp;</div>
<div class="line"><a id="l03315" name="l03315"></a><span class="lineno"> 3315</span>                       1;</div>
<div class="line"><a id="l03316" name="l03316"></a><span class="lineno"> 3316</span>        <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#a655b2fb6b29e9d66122fe222b3de6e08">arc</a>(<a class="code hl_enumvalue" href="namespacecanvas__ity.html#a64892b31b00c006299d47bb71542b765a5db08d7fa14da6c1e37ae6aaad87a53d">center</a>.x, <a class="code hl_enumvalue" href="namespacecanvas__ity.html#a64892b31b00c006299d47bb71542b765a5db08d7fa14da6c1e37ae6aaad87a53d">center</a>.y, radius, angle_1, angle_2, <a class="code hl_enumvalue" href="color_8h.html#a535b59b8edc8902bb3c4f254625f91baa4d9c2073afa3c2abb817dceb22c34de6">reverse</a>);</div>
<div class="line"><a id="l03317" name="l03317"></a><span class="lineno"> 3317</span>    }</div>
<div class="line"><a id="l03318" name="l03318"></a><span class="lineno"> 3318</span> </div>
<div class="line"><a id="l03319" name="l03319"></a><span class="lineno"> 3319</span>    <span class="keywordtype">void</span> <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#a655b2fb6b29e9d66122fe222b3de6e08">canvas::arc</a>(</div>
<div class="line"><a id="l03320" name="l03320"></a><span class="lineno"> 3320</span>        <span class="keywordtype">float</span> x,</div>
<div class="line"><a id="l03321" name="l03321"></a><span class="lineno"> 3321</span>        <span class="keywordtype">float</span> y,</div>
<div class="line"><a id="l03322" name="l03322"></a><span class="lineno"> 3322</span>        <span class="keywordtype">float</span> radius,</div>
<div class="line"><a id="l03323" name="l03323"></a><span class="lineno"> 3323</span>        <span class="keywordtype">float</span> start_angle,</div>
<div class="line"><a id="l03324" name="l03324"></a><span class="lineno"> 3324</span>        <span class="keywordtype">float</span> end_angle,</div>
<div class="line"><a id="l03325" name="l03325"></a><span class="lineno"> 3325</span>        <span class="keywordtype">bool</span>  counter_clockwise)</div>
<div class="line"><a id="l03326" name="l03326"></a><span class="lineno"> 3326</span>    {</div>
<div class="line"><a id="l03327" name="l03327"></a><span class="lineno"> 3327</span>        <span class="keywordflow">if</span> (radius &lt; 0.0f)</div>
<div class="line"><a id="l03328" name="l03328"></a><span class="lineno"> 3328</span>            <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l03329" name="l03329"></a><span class="lineno"> 3329</span>        <span class="keyword">static</span> <span class="keywordtype">float</span> <span class="keyword">const</span> tau     = 2 * <a class="code hl_variable" href="namespacelitehtml.html#a0ffa29477d59c5b5e76956561eb10a94">pi</a>;</div>
<div class="line"><a id="l03330" name="l03330"></a><span class="lineno"> 3330</span>        <span class="keywordtype">float</span>              winding = counter_clockwise ? -1.0f : 1.0f;</div>
<div class="line"><a id="l03331" name="l03331"></a><span class="lineno"> 3331</span>        <span class="keywordtype">float</span>              from    = fmodf(start_angle, tau);</div>
<div class="line"><a id="l03332" name="l03332"></a><span class="lineno"> 3332</span>        <span class="keywordtype">float</span>              <a class="code hl_variable" href="tag__strings_8h.html#a4676578af881b39f9fb1d101298d1778">span</a>    = fmodf(end_angle, tau) - from;</div>
<div class="line"><a id="l03333" name="l03333"></a><span class="lineno"> 3333</span>        <span class="keywordflow">if</span> ((end_angle - start_angle) * winding &gt;= tau)</div>
<div class="line"><a id="l03334" name="l03334"></a><span class="lineno"> 3334</span>            <a class="code hl_variable" href="tag__strings_8h.html#a4676578af881b39f9fb1d101298d1778">span</a> = tau * winding;</div>
<div class="line"><a id="l03335" name="l03335"></a><span class="lineno"> 3335</span>        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code hl_variable" href="tag__strings_8h.html#a4676578af881b39f9fb1d101298d1778">span</a> * winding &lt; 0.0f)</div>
<div class="line"><a id="l03336" name="l03336"></a><span class="lineno"> 3336</span>            <a class="code hl_variable" href="tag__strings_8h.html#a4676578af881b39f9fb1d101298d1778">span</a> += tau * winding;</div>
<div class="line"><a id="l03337" name="l03337"></a><span class="lineno"> 3337</span>        xy centered_1 = radius * xy(cosf(from), sinf(from));</div>
<div class="line"><a id="l03338" name="l03338"></a><span class="lineno"> 3338</span>        <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#ac85d0e71edbc57918a6cfe12ec5083ac">line_to</a>(x + centered_1.x, y + centered_1.y);</div>
<div class="line"><a id="l03339" name="l03339"></a><span class="lineno"> 3339</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="tag__strings_8h.html#a4676578af881b39f9fb1d101298d1778">span</a> == 0.0f)</div>
<div class="line"><a id="l03340" name="l03340"></a><span class="lineno"> 3340</span>            <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l03341" name="l03341"></a><span class="lineno"> 3341</span>        <span class="keywordtype">int</span> steps = <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(</div>
<div class="line"><a id="l03342" name="l03342"></a><span class="lineno"> 3342</span>            std::max(1.0f, roundf(16.0f / tau * <a class="code hl_variable" href="tag__strings_8h.html#a4676578af881b39f9fb1d101298d1778">span</a> * winding)));</div>
<div class="line"><a id="l03343" name="l03343"></a><span class="lineno"> 3343</span>        <span class="keywordtype">float</span> segment = <a class="code hl_variable" href="tag__strings_8h.html#a4676578af881b39f9fb1d101298d1778">span</a> / <span class="keyword">static_cast&lt;</span><span class="keywordtype">float</span><span class="keyword">&gt;</span>(steps);</div>
<div class="line"><a id="l03344" name="l03344"></a><span class="lineno"> 3344</span>        <span class="keywordtype">float</span> alpha   = 4.0f / 3.0f * tanf(0.25f * segment);</div>
<div class="line"><a id="l03345" name="l03345"></a><span class="lineno"> 3345</span>        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> step = 0; step &lt; steps; ++step)</div>
<div class="line"><a id="l03346" name="l03346"></a><span class="lineno"> 3346</span>        {</div>
<div class="line"><a id="l03347" name="l03347"></a><span class="lineno"> 3347</span>            <span class="keywordtype">float</span> angle      = from + <span class="keyword">static_cast&lt;</span><span class="keywordtype">float</span><span class="keyword">&gt;</span>(step + 1) * segment;</div>
<div class="line"><a id="l03348" name="l03348"></a><span class="lineno"> 3348</span>            xy    centered_2 = radius * xy(cosf(angle), sinf(angle));</div>
<div class="line"><a id="l03349" name="l03349"></a><span class="lineno"> 3349</span>            xy    point_1    = xy(x, y) + centered_1;</div>
<div class="line"><a id="l03350" name="l03350"></a><span class="lineno"> 3350</span>            xy    point_2    = xy(x, y) + centered_2;</div>
<div class="line"><a id="l03351" name="l03351"></a><span class="lineno"> 3351</span>            xy    control_1  = point_1 + alpha * perpendicular(centered_1);</div>
<div class="line"><a id="l03352" name="l03352"></a><span class="lineno"> 3352</span>            xy    control_2  = point_2 - alpha * perpendicular(centered_2);</div>
<div class="line"><a id="l03353" name="l03353"></a><span class="lineno"> 3353</span>            <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#a5f7befd4ac9f8adf859454859d8093a9">bezier_curve_to</a>(control_1.x, control_1.y,</div>
<div class="line"><a id="l03354" name="l03354"></a><span class="lineno"> 3354</span>                            control_2.x, control_2.y,</div>
<div class="line"><a id="l03355" name="l03355"></a><span class="lineno"> 3355</span>                            point_2.x, point_2.y);</div>
<div class="line"><a id="l03356" name="l03356"></a><span class="lineno"> 3356</span>            centered_1 = centered_2;</div>
<div class="line"><a id="l03357" name="l03357"></a><span class="lineno"> 3357</span>        }</div>
<div class="line"><a id="l03358" name="l03358"></a><span class="lineno"> 3358</span>    }</div>
<div class="line"><a id="l03359" name="l03359"></a><span class="lineno"> 3359</span> </div>
<div class="line"><a id="l03360" name="l03360"></a><span class="lineno"> 3360</span>    <span class="keywordtype">void</span> <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#a06d4869ba1a23b6b1a2bd10a2f524ec0">canvas::rectangle</a>(</div>
<div class="line"><a id="l03361" name="l03361"></a><span class="lineno"> 3361</span>        <span class="keywordtype">float</span> x,</div>
<div class="line"><a id="l03362" name="l03362"></a><span class="lineno"> 3362</span>        <span class="keywordtype">float</span> y,</div>
<div class="line"><a id="l03363" name="l03363"></a><span class="lineno"> 3363</span>        <span class="keywordtype">float</span> width,</div>
<div class="line"><a id="l03364" name="l03364"></a><span class="lineno"> 3364</span>        <span class="keywordtype">float</span> height)</div>
<div class="line"><a id="l03365" name="l03365"></a><span class="lineno"> 3365</span>    {</div>
<div class="line"><a id="l03366" name="l03366"></a><span class="lineno"> 3366</span>        <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#a327cdd2c64047affe6d03416bcb6a568">move_to</a>(x, y);</div>
<div class="line"><a id="l03367" name="l03367"></a><span class="lineno"> 3367</span>        <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#ac85d0e71edbc57918a6cfe12ec5083ac">line_to</a>(x + <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#ad4920132bc78f7e74a8b14319e8ff52c">width</a>, y);</div>
<div class="line"><a id="l03368" name="l03368"></a><span class="lineno"> 3368</span>        <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#ac85d0e71edbc57918a6cfe12ec5083ac">line_to</a>(x + <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#ad4920132bc78f7e74a8b14319e8ff52c">width</a>, y + <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#acb61342cdc37dc89aee42e7087adbc50">height</a>);</div>
<div class="line"><a id="l03369" name="l03369"></a><span class="lineno"> 3369</span>        <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#ac85d0e71edbc57918a6cfe12ec5083ac">line_to</a>(x, y + <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#acb61342cdc37dc89aee42e7087adbc50">height</a>);</div>
<div class="line"><a id="l03370" name="l03370"></a><span class="lineno"> 3370</span>        <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#aab76d29f5555824f8d76e1a17b10644e">close_path</a>();</div>
<div class="line"><a id="l03371" name="l03371"></a><span class="lineno"> 3371</span>    }</div>
<div class="line"><a id="l03372" name="l03372"></a><span class="lineno"> 3372</span> </div>
<div class="line"><a id="l03373" name="l03373"></a><span class="lineno"> 3373</span>    <span class="keywordtype">void</span> <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#a489a8d4d82cde63ca8f3bc9c3d9ced9d">canvas::polygon</a>(std::vector&lt;xy&gt; points)</div>
<div class="line"><a id="l03374" name="l03374"></a><span class="lineno"> 3374</span>    {</div>
<div class="line"><a id="l03375" name="l03375"></a><span class="lineno"> 3375</span>        <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#a327cdd2c64047affe6d03416bcb6a568">move_to</a>(points[0].x, points[0].y);</div>
<div class="line"><a id="l03376" name="l03376"></a><span class="lineno"> 3376</span>        <span class="keywordflow">for</span> (<span class="keyword">auto</span> pt : points)</div>
<div class="line"><a id="l03377" name="l03377"></a><span class="lineno"> 3377</span>            <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#ac85d0e71edbc57918a6cfe12ec5083ac">line_to</a>(pt.x, pt.y);</div>
<div class="line"><a id="l03378" name="l03378"></a><span class="lineno"> 3378</span>        <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#aab76d29f5555824f8d76e1a17b10644e">close_path</a>();</div>
<div class="line"><a id="l03379" name="l03379"></a><span class="lineno"> 3379</span>    }</div>
<div class="line"><a id="l03380" name="l03380"></a><span class="lineno"> 3380</span> </div>
<div class="line"><a id="l03381" name="l03381"></a><span class="lineno"> 3381</span>    <span class="keywordtype">void</span> <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#af9b368755ab028232964cf37b0dd4118">canvas::fill</a>()</div>
<div class="line"><a id="l03382" name="l03382"></a><span class="lineno"> 3382</span>    {</div>
<div class="line"><a id="l03383" name="l03383"></a><span class="lineno"> 3383</span>        <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#ae1dee2675c55bc9421de7fb1cebc3cd9">path_to_lines</a>(<span class="keyword">false</span>);</div>
<div class="line"><a id="l03384" name="l03384"></a><span class="lineno"> 3384</span>        <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#a7f8ab830d6326620f52816979a9b5586">render_main</a>(<a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#a8a2e78359bde16efa2f89127b119a1b2">fill_brush</a>);</div>
<div class="line"><a id="l03385" name="l03385"></a><span class="lineno"> 3385</span>    }</div>
<div class="line"><a id="l03386" name="l03386"></a><span class="lineno"> 3386</span> </div>
<div class="line"><a id="l03387" name="l03387"></a><span class="lineno"> 3387</span>    <span class="keywordtype">void</span> <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#af8a5baf58b3557ec405b0545ba913dc5">canvas::stroke</a>()</div>
<div class="line"><a id="l03388" name="l03388"></a><span class="lineno"> 3388</span>    {</div>
<div class="line"><a id="l03389" name="l03389"></a><span class="lineno"> 3389</span>        <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#ae1dee2675c55bc9421de7fb1cebc3cd9">path_to_lines</a>(<span class="keyword">true</span>);</div>
<div class="line"><a id="l03390" name="l03390"></a><span class="lineno"> 3390</span>        <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#ade2814d673a6a799438a54f85040ef95">stroke_lines</a>();</div>
<div class="line"><a id="l03391" name="l03391"></a><span class="lineno"> 3391</span>        <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#a7f8ab830d6326620f52816979a9b5586">render_main</a>(<a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#a989dabb052e2c1a7400db979069dee52">stroke_brush</a>);</div>
<div class="line"><a id="l03392" name="l03392"></a><span class="lineno"> 3392</span>    }</div>
<div class="line"><a id="l03393" name="l03393"></a><span class="lineno"> 3393</span> </div>
<div class="line"><a id="l03394" name="l03394"></a><span class="lineno"> 3394</span>    <span class="keywordtype">void</span> <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#a4056f856f4f19aa460a88678ea18731f">canvas::clip</a>()</div>
<div class="line"><a id="l03395" name="l03395"></a><span class="lineno"> 3395</span>    {</div>
<div class="line"><a id="l03396" name="l03396"></a><span class="lineno"> 3396</span>        <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#ae1dee2675c55bc9421de7fb1cebc3cd9">path_to_lines</a>(<span class="keyword">false</span>);</div>
<div class="line"><a id="l03397" name="l03397"></a><span class="lineno"> 3397</span>        <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#a97cc5b1cc4d7e5b67ab3054fcdcfb3d4">lines_to_runs</a>(xy(0.0f, 0.0f), 0);</div>
<div class="line"><a id="l03398" name="l03398"></a><span class="lineno"> 3398</span>        <span class="keywordtype">size_t</span> part = <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#a4e8fe391327b93aaf006b52eaf3546f4">runs</a>.size();</div>
<div class="line"><a id="l03399" name="l03399"></a><span class="lineno"> 3399</span>        <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#a4e8fe391327b93aaf006b52eaf3546f4">runs</a>.insert(<a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#a4e8fe391327b93aaf006b52eaf3546f4">runs</a>.end(), <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#afac766bb79ebdf29a1d4094c91b3291e">mask</a>.begin(), <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#afac766bb79ebdf29a1d4094c91b3291e">mask</a>.end());</div>
<div class="line"><a id="l03400" name="l03400"></a><span class="lineno"> 3400</span>        <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#afac766bb79ebdf29a1d4094c91b3291e">mask</a>.clear();</div>
<div class="line"><a id="l03401" name="l03401"></a><span class="lineno"> 3401</span>        <span class="keywordtype">int</span>    y       = -1;</div>
<div class="line"><a id="l03402" name="l03402"></a><span class="lineno"> 3402</span>        <span class="keywordtype">float</span>  last    = 0.0f;</div>
<div class="line"><a id="l03403" name="l03403"></a><span class="lineno"> 3403</span>        <span class="keywordtype">float</span>  sum_1   = 0.0f;</div>
<div class="line"><a id="l03404" name="l03404"></a><span class="lineno"> 3404</span>        <span class="keywordtype">float</span>  sum_2   = 0.0f;</div>
<div class="line"><a id="l03405" name="l03405"></a><span class="lineno"> 3405</span>        <span class="keywordtype">size_t</span> index_1 = 0;</div>
<div class="line"><a id="l03406" name="l03406"></a><span class="lineno"> 3406</span>        <span class="keywordtype">size_t</span> index_2 = part;</div>
<div class="line"><a id="l03407" name="l03407"></a><span class="lineno"> 3407</span>        <span class="keywordflow">while</span> (index_1 &lt; part &amp;&amp; index_2 &lt; <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#a4e8fe391327b93aaf006b52eaf3546f4">runs</a>.size())</div>
<div class="line"><a id="l03408" name="l03408"></a><span class="lineno"> 3408</span>        {</div>
<div class="line"><a id="l03409" name="l03409"></a><span class="lineno"> 3409</span>            <span class="keywordtype">bool</span>      which = <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#a4e8fe391327b93aaf006b52eaf3546f4">runs</a>[index_1] &lt; <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#a4e8fe391327b93aaf006b52eaf3546f4">runs</a>[index_2];</div>
<div class="line"><a id="l03410" name="l03410"></a><span class="lineno"> 3410</span>            pixel_run next  = which ? <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#a4e8fe391327b93aaf006b52eaf3546f4">runs</a>[index_1] : <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#a4e8fe391327b93aaf006b52eaf3546f4">runs</a>[index_2];</div>
<div class="line"><a id="l03411" name="l03411"></a><span class="lineno"> 3411</span>            <span class="keywordflow">if</span> (next.y != y)</div>
<div class="line"><a id="l03412" name="l03412"></a><span class="lineno"> 3412</span>            {</div>
<div class="line"><a id="l03413" name="l03413"></a><span class="lineno"> 3413</span>                y     = next.y;</div>
<div class="line"><a id="l03414" name="l03414"></a><span class="lineno"> 3414</span>                last  = 0.0f;</div>
<div class="line"><a id="l03415" name="l03415"></a><span class="lineno"> 3415</span>                sum_1 = 0.0f;</div>
<div class="line"><a id="l03416" name="l03416"></a><span class="lineno"> 3416</span>                sum_2 = 0.0f;</div>
<div class="line"><a id="l03417" name="l03417"></a><span class="lineno"> 3417</span>            }</div>
<div class="line"><a id="l03418" name="l03418"></a><span class="lineno"> 3418</span>            <span class="keywordflow">if</span> (which)</div>
<div class="line"><a id="l03419" name="l03419"></a><span class="lineno"> 3419</span>                sum_1 += <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#a4e8fe391327b93aaf006b52eaf3546f4">runs</a>[index_1++].delta;</div>
<div class="line"><a id="l03420" name="l03420"></a><span class="lineno"> 3420</span>            <span class="keywordflow">else</span></div>
<div class="line"><a id="l03421" name="l03421"></a><span class="lineno"> 3421</span>                sum_2 += <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#a4e8fe391327b93aaf006b52eaf3546f4">runs</a>[index_2++].delta;</div>
<div class="line"><a id="l03422" name="l03422"></a><span class="lineno"> 3422</span>            <span class="keywordtype">float</span> <a class="code hl_enumeration" href="namespacelitehtml.html#ab711d815656d45400e7c3d6830fc74e1">visibility</a> = (std::min(fabsf(sum_1), 1.0f) *</div>
<div class="line"><a id="l03423" name="l03423"></a><span class="lineno"> 3423</span>                                std::min(fabsf(sum_2), 1.0f));</div>
<div class="line"><a id="l03424" name="l03424"></a><span class="lineno"> 3424</span>            <span class="keywordflow">if</span> (visibility == last)</div>
<div class="line"><a id="l03425" name="l03425"></a><span class="lineno"> 3425</span>                <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l03426" name="l03426"></a><span class="lineno"> 3426</span>            <span class="keywordflow">if</span> (!<a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#afac766bb79ebdf29a1d4094c91b3291e">mask</a>.empty() &amp;&amp;</div>
<div class="line"><a id="l03427" name="l03427"></a><span class="lineno"> 3427</span>                <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#afac766bb79ebdf29a1d4094c91b3291e">mask</a>.back().x == next.x &amp;&amp; <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#afac766bb79ebdf29a1d4094c91b3291e">mask</a>.back().y == next.y)</div>
<div class="line"><a id="l03428" name="l03428"></a><span class="lineno"> 3428</span>                <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#afac766bb79ebdf29a1d4094c91b3291e">mask</a>.back().delta += <a class="code hl_enumeration" href="namespacelitehtml.html#ab711d815656d45400e7c3d6830fc74e1">visibility</a> - last;</div>
<div class="line"><a id="l03429" name="l03429"></a><span class="lineno"> 3429</span>            <span class="keywordflow">else</span></div>
<div class="line"><a id="l03430" name="l03430"></a><span class="lineno"> 3430</span>            {</div>
<div class="line"><a id="l03431" name="l03431"></a><span class="lineno"> 3431</span>                pixel_run piece = {next.x, next.y, <a class="code hl_enumeration" href="namespacelitehtml.html#ab711d815656d45400e7c3d6830fc74e1">visibility</a> - last};</div>
<div class="line"><a id="l03432" name="l03432"></a><span class="lineno"> 3432</span>                <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#afac766bb79ebdf29a1d4094c91b3291e">mask</a>.push_back(piece);</div>
<div class="line"><a id="l03433" name="l03433"></a><span class="lineno"> 3433</span>            }</div>
<div class="line"><a id="l03434" name="l03434"></a><span class="lineno"> 3434</span>            last = <a class="code hl_enumeration" href="namespacelitehtml.html#ab711d815656d45400e7c3d6830fc74e1">visibility</a>;</div>
<div class="line"><a id="l03435" name="l03435"></a><span class="lineno"> 3435</span>        }</div>
<div class="line"><a id="l03436" name="l03436"></a><span class="lineno"> 3436</span>    }</div>
<div class="line"><a id="l03437" name="l03437"></a><span class="lineno"> 3437</span> </div>
<div class="line"><a id="l03438" name="l03438"></a><span class="lineno"> 3438</span>    <span class="keywordtype">bool</span> <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#ac7c357a7c46207837884ce48845906d5">canvas::is_point_in_path</a>(</div>
<div class="line"><a id="l03439" name="l03439"></a><span class="lineno"> 3439</span>        <span class="keywordtype">float</span> x,</div>
<div class="line"><a id="l03440" name="l03440"></a><span class="lineno"> 3440</span>        <span class="keywordtype">float</span> y)</div>
<div class="line"><a id="l03441" name="l03441"></a><span class="lineno"> 3441</span>    {</div>
<div class="line"><a id="l03442" name="l03442"></a><span class="lineno"> 3442</span>        <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#ae1dee2675c55bc9421de7fb1cebc3cd9">path_to_lines</a>(<span class="keyword">false</span>);</div>
<div class="line"><a id="l03443" name="l03443"></a><span class="lineno"> 3443</span>        <span class="keywordtype">int</span>    winding   = 0;</div>
<div class="line"><a id="l03444" name="l03444"></a><span class="lineno"> 3444</span>        <span class="keywordtype">size_t</span> subpath   = 0;</div>
<div class="line"><a id="l03445" name="l03445"></a><span class="lineno"> 3445</span>        <span class="keywordtype">size_t</span> beginning = 0;</div>
<div class="line"><a id="l03446" name="l03446"></a><span class="lineno"> 3446</span>        <span class="keywordtype">size_t</span> <a class="code hl_enumvalue" href="namespacecanvas__ity.html#a64892b31b00c006299d47bb71542b765ad5800f9a6ff0499528d888aafa6c0d31">ending</a>    = 0;</div>
<div class="line"><a id="l03447" name="l03447"></a><span class="lineno"> 3447</span>        <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> <a class="code hl_enumvalue" href="core_8h.html#a7fc0249f0f8ba720115d2430f5b86cbaa6a992d5529f459a44fee58c733255e86">index</a> = 0; <a class="code hl_enumvalue" href="core_8h.html#a7fc0249f0f8ba720115d2430f5b86cbaa6a992d5529f459a44fee58c733255e86">index</a> &lt; <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#afd8f9880a251b532bf619b3ea93aff5f">lines</a>.<a class="code hl_variable" href="structcanvas__ity_1_1line__path.html#a27efd4b0dec6d85e4ba861c34bacdbf4">points</a>.size(); ++<a class="code hl_enumvalue" href="core_8h.html#a7fc0249f0f8ba720115d2430f5b86cbaa6a992d5529f459a44fee58c733255e86">index</a>)</div>
<div class="line"><a id="l03448" name="l03448"></a><span class="lineno"> 3448</span>        {</div>
<div class="line"><a id="l03449" name="l03449"></a><span class="lineno"> 3449</span>            <span class="keywordflow">while</span> (<a class="code hl_enumvalue" href="core_8h.html#a7fc0249f0f8ba720115d2430f5b86cbaa6a992d5529f459a44fee58c733255e86">index</a> &gt;= <a class="code hl_enumvalue" href="namespacecanvas__ity.html#a64892b31b00c006299d47bb71542b765ad5800f9a6ff0499528d888aafa6c0d31">ending</a>)</div>
<div class="line"><a id="l03450" name="l03450"></a><span class="lineno"> 3450</span>            {</div>
<div class="line"><a id="l03451" name="l03451"></a><span class="lineno"> 3451</span>                beginning = <a class="code hl_enumvalue" href="namespacecanvas__ity.html#a64892b31b00c006299d47bb71542b765ad5800f9a6ff0499528d888aafa6c0d31">ending</a>;</div>
<div class="line"><a id="l03452" name="l03452"></a><span class="lineno"> 3452</span>                <a class="code hl_enumvalue" href="namespacecanvas__ity.html#a64892b31b00c006299d47bb71542b765ad5800f9a6ff0499528d888aafa6c0d31">ending</a> += <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#afd8f9880a251b532bf619b3ea93aff5f">lines</a>.<a class="code hl_variable" href="structcanvas__ity_1_1line__path.html#acfec22d114fac137ae0a70af069874d8">subpaths</a>[subpath++].count;</div>
<div class="line"><a id="l03453" name="l03453"></a><span class="lineno"> 3453</span>            }</div>
<div class="line"><a id="l03454" name="l03454"></a><span class="lineno"> 3454</span>            xy from = <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#afd8f9880a251b532bf619b3ea93aff5f">lines</a>.<a class="code hl_variable" href="structcanvas__ity_1_1line__path.html#a27efd4b0dec6d85e4ba861c34bacdbf4">points</a>[<a class="code hl_enumvalue" href="core_8h.html#a7fc0249f0f8ba720115d2430f5b86cbaa6a992d5529f459a44fee58c733255e86">index</a>];</div>
<div class="line"><a id="l03455" name="l03455"></a><span class="lineno"> 3455</span>            xy to   = <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#afd8f9880a251b532bf619b3ea93aff5f">lines</a>.<a class="code hl_variable" href="structcanvas__ity_1_1line__path.html#a27efd4b0dec6d85e4ba861c34bacdbf4">points</a>[<a class="code hl_enumvalue" href="core_8h.html#a7fc0249f0f8ba720115d2430f5b86cbaa6a992d5529f459a44fee58c733255e86">index</a> + 1 &lt; <a class="code hl_enumvalue" href="namespacecanvas__ity.html#a64892b31b00c006299d47bb71542b765ad5800f9a6ff0499528d888aafa6c0d31">ending</a> ? <a class="code hl_enumvalue" href="core_8h.html#a7fc0249f0f8ba720115d2430f5b86cbaa6a992d5529f459a44fee58c733255e86">index</a> + 1 : beginning];</div>
<div class="line"><a id="l03456" name="l03456"></a><span class="lineno"> 3456</span>            <span class="keywordflow">if</span> ((from.y &lt; y &amp;&amp; y &lt;= to.y) || (to.y &lt; y &amp;&amp; y &lt;= from.y))</div>
<div class="line"><a id="l03457" name="l03457"></a><span class="lineno"> 3457</span>            {</div>
<div class="line"><a id="l03458" name="l03458"></a><span class="lineno"> 3458</span>                <span class="keywordtype">float</span> side = dot(perpendicular(to - from), xy(x, y) - from);</div>
<div class="line"><a id="l03459" name="l03459"></a><span class="lineno"> 3459</span>                <span class="keywordflow">if</span> (side == 0.0f)</div>
<div class="line"><a id="l03460" name="l03460"></a><span class="lineno"> 3460</span>                    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l03461" name="l03461"></a><span class="lineno"> 3461</span>                winding += side &gt; 0.0f ? 1 : -1;</div>
<div class="line"><a id="l03462" name="l03462"></a><span class="lineno"> 3462</span>            }</div>
<div class="line"><a id="l03463" name="l03463"></a><span class="lineno"> 3463</span>            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (from.y == y &amp;&amp; y == to.y &amp;&amp;</div>
<div class="line"><a id="l03464" name="l03464"></a><span class="lineno"> 3464</span>                     ((from.x &lt;= x &amp;&amp; x &lt;= to.x) ||</div>
<div class="line"><a id="l03465" name="l03465"></a><span class="lineno"> 3465</span>                      (to.x &lt;= x &amp;&amp; x &lt;= from.x)))</div>
<div class="line"><a id="l03466" name="l03466"></a><span class="lineno"> 3466</span>                <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l03467" name="l03467"></a><span class="lineno"> 3467</span>        }</div>
<div class="line"><a id="l03468" name="l03468"></a><span class="lineno"> 3468</span>        <span class="keywordflow">return</span> winding;</div>
<div class="line"><a id="l03469" name="l03469"></a><span class="lineno"> 3469</span>    }</div>
<div class="line"><a id="l03470" name="l03470"></a><span class="lineno"> 3470</span> </div>
<div class="line"><a id="l03471" name="l03471"></a><span class="lineno"> 3471</span>    <span class="keywordtype">void</span> <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#aff1100c359d8b75483c11e7cb74d7400">canvas::clear_rectangle</a>(</div>
<div class="line"><a id="l03472" name="l03472"></a><span class="lineno"> 3472</span>        <span class="keywordtype">float</span> x,</div>
<div class="line"><a id="l03473" name="l03473"></a><span class="lineno"> 3473</span>        <span class="keywordtype">float</span> y,</div>
<div class="line"><a id="l03474" name="l03474"></a><span class="lineno"> 3474</span>        <span class="keywordtype">float</span> width,</div>
<div class="line"><a id="l03475" name="l03475"></a><span class="lineno"> 3475</span>        <span class="keywordtype">float</span> height)</div>
<div class="line"><a id="l03476" name="l03476"></a><span class="lineno"> 3476</span>    {</div>
<div class="line"><a id="l03477" name="l03477"></a><span class="lineno"> 3477</span>        <a class="code hl_enumeration" href="namespacecanvas__ity.html#a89843026830c0d4312f395e2e8c5992a">composite_operation</a> saved_operation    = <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#af6f748374ad333a49e8b379c0e368a34">global_composite_operation</a>;</div>
<div class="line"><a id="l03478" name="l03478"></a><span class="lineno"> 3478</span>        <span class="keywordtype">float</span>               saved_global_alpha = <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#a5fc985877d0bb100bebbf1658d0b52b5">global_alpha</a>;</div>
<div class="line"><a id="l03479" name="l03479"></a><span class="lineno"> 3479</span>        <span class="keywordtype">float</span>               saved_alpha        = <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ad1f1bcdb74c8c6dbcbd0815ba620f7d1">shadow_color</a>.<a class="code hl_variable" href="structcanvas__ity_1_1rgba.html#a56d4a13f86fa2eafafdb5d631e1dadfc">a</a>;</div>
<div class="line"><a id="l03480" name="l03480"></a><span class="lineno"> 3480</span>        <a class="code hl_enumeration" href="structcanvas__ity_1_1paint__brush.html#ab6686ae3436f145ab241196f2337e010">paint_brush::types</a>  saved_type         = <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#a8a2e78359bde16efa2f89127b119a1b2">fill_brush</a>.<a class="code hl_variable" href="structcanvas__ity_1_1paint__brush.html#aff0e7b3da803021f501dd60016e10748">type</a>;</div>
<div class="line"><a id="l03481" name="l03481"></a><span class="lineno"> 3481</span>        <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#af6f748374ad333a49e8b379c0e368a34">global_composite_operation</a>             = <a class="code hl_enumvalue" href="namespacecanvas__ity.html#a89843026830c0d4312f395e2e8c5992aa5463ab8f1b6e223c9e071b27376bb0da">destination_out</a>;</div>
<div class="line"><a id="l03482" name="l03482"></a><span class="lineno"> 3482</span>        <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#a5fc985877d0bb100bebbf1658d0b52b5">global_alpha</a>                           = 1.0f;</div>
<div class="line"><a id="l03483" name="l03483"></a><span class="lineno"> 3483</span>        <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ad1f1bcdb74c8c6dbcbd0815ba620f7d1">shadow_color</a>.<a class="code hl_variable" href="structcanvas__ity_1_1rgba.html#a56d4a13f86fa2eafafdb5d631e1dadfc">a</a>                         = 0.0f;</div>
<div class="line"><a id="l03484" name="l03484"></a><span class="lineno"> 3484</span>        <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#a8a2e78359bde16efa2f89127b119a1b2">fill_brush</a>.<a class="code hl_variable" href="structcanvas__ity_1_1paint__brush.html#aff0e7b3da803021f501dd60016e10748">type</a>                        = <a class="code hl_enumvalue" href="structcanvas__ity_1_1paint__brush.html#ab6686ae3436f145ab241196f2337e010afba9224071f073610edf89517f965566">paint_brush::color</a>;</div>
<div class="line"><a id="l03485" name="l03485"></a><span class="lineno"> 3485</span>        <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#aa948748b43becb53a34e013938a96299">fill_rectangle</a>(x, y, <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#ad4920132bc78f7e74a8b14319e8ff52c">width</a>, <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#acb61342cdc37dc89aee42e7087adbc50">height</a>);</div>
<div class="line"><a id="l03486" name="l03486"></a><span class="lineno"> 3486</span>        <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#a8a2e78359bde16efa2f89127b119a1b2">fill_brush</a>.<a class="code hl_variable" href="structcanvas__ity_1_1paint__brush.html#aff0e7b3da803021f501dd60016e10748">type</a>            = saved_type;</div>
<div class="line"><a id="l03487" name="l03487"></a><span class="lineno"> 3487</span>        <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ad1f1bcdb74c8c6dbcbd0815ba620f7d1">shadow_color</a>.<a class="code hl_variable" href="structcanvas__ity_1_1rgba.html#a56d4a13f86fa2eafafdb5d631e1dadfc">a</a>             = saved_alpha;</div>
<div class="line"><a id="l03488" name="l03488"></a><span class="lineno"> 3488</span>        <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#a5fc985877d0bb100bebbf1658d0b52b5">global_alpha</a>               = saved_global_alpha;</div>
<div class="line"><a id="l03489" name="l03489"></a><span class="lineno"> 3489</span>        <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#af6f748374ad333a49e8b379c0e368a34">global_composite_operation</a> = saved_operation;</div>
<div class="line"><a id="l03490" name="l03490"></a><span class="lineno"> 3490</span>    }</div>
<div class="line"><a id="l03491" name="l03491"></a><span class="lineno"> 3491</span> </div>
<div class="line"><a id="l03492" name="l03492"></a><span class="lineno"> 3492</span>    <span class="keywordtype">void</span> <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#aa948748b43becb53a34e013938a96299">canvas::fill_rectangle</a>(</div>
<div class="line"><a id="l03493" name="l03493"></a><span class="lineno"> 3493</span>        <span class="keywordtype">float</span> x,</div>
<div class="line"><a id="l03494" name="l03494"></a><span class="lineno"> 3494</span>        <span class="keywordtype">float</span> y,</div>
<div class="line"><a id="l03495" name="l03495"></a><span class="lineno"> 3495</span>        <span class="keywordtype">float</span> width,</div>
<div class="line"><a id="l03496" name="l03496"></a><span class="lineno"> 3496</span>        <span class="keywordtype">float</span> height)</div>
<div class="line"><a id="l03497" name="l03497"></a><span class="lineno"> 3497</span>    {</div>
<div class="line"><a id="l03498" name="l03498"></a><span class="lineno"> 3498</span>        <span class="keywordflow">if</span> (<a class="code hl_function" href="classcanvas__ity_1_1canvas.html#ad4920132bc78f7e74a8b14319e8ff52c">width</a> == 0.0f || <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#acb61342cdc37dc89aee42e7087adbc50">height</a> == 0.0f)</div>
<div class="line"><a id="l03499" name="l03499"></a><span class="lineno"> 3499</span>            <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l03500" name="l03500"></a><span class="lineno"> 3500</span>        <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#afd8f9880a251b532bf619b3ea93aff5f">lines</a>.<a class="code hl_variable" href="structcanvas__ity_1_1line__path.html#a27efd4b0dec6d85e4ba861c34bacdbf4">points</a>.clear();</div>
<div class="line"><a id="l03501" name="l03501"></a><span class="lineno"> 3501</span>        <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#afd8f9880a251b532bf619b3ea93aff5f">lines</a>.<a class="code hl_variable" href="structcanvas__ity_1_1line__path.html#acfec22d114fac137ae0a70af069874d8">subpaths</a>.clear();</div>
<div class="line"><a id="l03502" name="l03502"></a><span class="lineno"> 3502</span>        <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#afd8f9880a251b532bf619b3ea93aff5f">lines</a>.<a class="code hl_variable" href="structcanvas__ity_1_1line__path.html#a27efd4b0dec6d85e4ba861c34bacdbf4">points</a>.push_back(<a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ac5da3224f86f284b4ac7efbde3942e27">forward</a> * xy(x, y));</div>
<div class="line"><a id="l03503" name="l03503"></a><span class="lineno"> 3503</span>        <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#afd8f9880a251b532bf619b3ea93aff5f">lines</a>.<a class="code hl_variable" href="structcanvas__ity_1_1line__path.html#a27efd4b0dec6d85e4ba861c34bacdbf4">points</a>.push_back(<a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ac5da3224f86f284b4ac7efbde3942e27">forward</a> * xy(x + <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#ad4920132bc78f7e74a8b14319e8ff52c">width</a>, y));</div>
<div class="line"><a id="l03504" name="l03504"></a><span class="lineno"> 3504</span>        <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#afd8f9880a251b532bf619b3ea93aff5f">lines</a>.<a class="code hl_variable" href="structcanvas__ity_1_1line__path.html#a27efd4b0dec6d85e4ba861c34bacdbf4">points</a>.push_back(<a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ac5da3224f86f284b4ac7efbde3942e27">forward</a> * xy(x + <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#ad4920132bc78f7e74a8b14319e8ff52c">width</a>, y + <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#acb61342cdc37dc89aee42e7087adbc50">height</a>));</div>
<div class="line"><a id="l03505" name="l03505"></a><span class="lineno"> 3505</span>        <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#afd8f9880a251b532bf619b3ea93aff5f">lines</a>.<a class="code hl_variable" href="structcanvas__ity_1_1line__path.html#a27efd4b0dec6d85e4ba861c34bacdbf4">points</a>.push_back(<a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ac5da3224f86f284b4ac7efbde3942e27">forward</a> * xy(x, y + <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#acb61342cdc37dc89aee42e7087adbc50">height</a>));</div>
<div class="line"><a id="l03506" name="l03506"></a><span class="lineno"> 3506</span>        subpath_data entry = {4, <span class="keyword">true</span>};</div>
<div class="line"><a id="l03507" name="l03507"></a><span class="lineno"> 3507</span>        <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#afd8f9880a251b532bf619b3ea93aff5f">lines</a>.<a class="code hl_variable" href="structcanvas__ity_1_1line__path.html#acfec22d114fac137ae0a70af069874d8">subpaths</a>.push_back(entry);</div>
<div class="line"><a id="l03508" name="l03508"></a><span class="lineno"> 3508</span>        <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#a7f8ab830d6326620f52816979a9b5586">render_main</a>(<a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#a8a2e78359bde16efa2f89127b119a1b2">fill_brush</a>);</div>
<div class="line"><a id="l03509" name="l03509"></a><span class="lineno"> 3509</span>    }</div>
<div class="line"><a id="l03510" name="l03510"></a><span class="lineno"> 3510</span> </div>
<div class="line"><a id="l03511" name="l03511"></a><span class="lineno"> 3511</span>    <span class="keywordtype">void</span> <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#a3015bd86fb23f123a09d89d04dd1131a">canvas::stroke_rectangle</a>(</div>
<div class="line"><a id="l03512" name="l03512"></a><span class="lineno"> 3512</span>        <span class="keywordtype">float</span> x,</div>
<div class="line"><a id="l03513" name="l03513"></a><span class="lineno"> 3513</span>        <span class="keywordtype">float</span> y,</div>
<div class="line"><a id="l03514" name="l03514"></a><span class="lineno"> 3514</span>        <span class="keywordtype">float</span> width,</div>
<div class="line"><a id="l03515" name="l03515"></a><span class="lineno"> 3515</span>        <span class="keywordtype">float</span> height)</div>
<div class="line"><a id="l03516" name="l03516"></a><span class="lineno"> 3516</span>    {</div>
<div class="line"><a id="l03517" name="l03517"></a><span class="lineno"> 3517</span>        <span class="keywordflow">if</span> (<a class="code hl_function" href="classcanvas__ity_1_1canvas.html#ad4920132bc78f7e74a8b14319e8ff52c">width</a> == 0.0f &amp;&amp; <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#acb61342cdc37dc89aee42e7087adbc50">height</a> == 0.0f)</div>
<div class="line"><a id="l03518" name="l03518"></a><span class="lineno"> 3518</span>            <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l03519" name="l03519"></a><span class="lineno"> 3519</span>        <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#afd8f9880a251b532bf619b3ea93aff5f">lines</a>.<a class="code hl_variable" href="structcanvas__ity_1_1line__path.html#a27efd4b0dec6d85e4ba861c34bacdbf4">points</a>.clear();</div>
<div class="line"><a id="l03520" name="l03520"></a><span class="lineno"> 3520</span>        <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#afd8f9880a251b532bf619b3ea93aff5f">lines</a>.<a class="code hl_variable" href="structcanvas__ity_1_1line__path.html#acfec22d114fac137ae0a70af069874d8">subpaths</a>.clear();</div>
<div class="line"><a id="l03521" name="l03521"></a><span class="lineno"> 3521</span>        <span class="keywordflow">if</span> (<a class="code hl_function" href="classcanvas__ity_1_1canvas.html#ad4920132bc78f7e74a8b14319e8ff52c">width</a> == 0.0f || <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#acb61342cdc37dc89aee42e7087adbc50">height</a> == 0.0f)</div>
<div class="line"><a id="l03522" name="l03522"></a><span class="lineno"> 3522</span>        {</div>
<div class="line"><a id="l03523" name="l03523"></a><span class="lineno"> 3523</span>            <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#afd8f9880a251b532bf619b3ea93aff5f">lines</a>.<a class="code hl_variable" href="structcanvas__ity_1_1line__path.html#a27efd4b0dec6d85e4ba861c34bacdbf4">points</a>.push_back(<a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ac5da3224f86f284b4ac7efbde3942e27">forward</a> * xy(x, y));</div>
<div class="line"><a id="l03524" name="l03524"></a><span class="lineno"> 3524</span>            <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#afd8f9880a251b532bf619b3ea93aff5f">lines</a>.<a class="code hl_variable" href="structcanvas__ity_1_1line__path.html#a27efd4b0dec6d85e4ba861c34bacdbf4">points</a>.push_back(<a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ac5da3224f86f284b4ac7efbde3942e27">forward</a> * xy(x + <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#ad4920132bc78f7e74a8b14319e8ff52c">width</a>, y + <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#acb61342cdc37dc89aee42e7087adbc50">height</a>));</div>
<div class="line"><a id="l03525" name="l03525"></a><span class="lineno"> 3525</span>            subpath_data entry = {2, <span class="keyword">false</span>};</div>
<div class="line"><a id="l03526" name="l03526"></a><span class="lineno"> 3526</span>            <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#afd8f9880a251b532bf619b3ea93aff5f">lines</a>.<a class="code hl_variable" href="structcanvas__ity_1_1line__path.html#acfec22d114fac137ae0a70af069874d8">subpaths</a>.push_back(entry);</div>
<div class="line"><a id="l03527" name="l03527"></a><span class="lineno"> 3527</span>        }</div>
<div class="line"><a id="l03528" name="l03528"></a><span class="lineno"> 3528</span>        <span class="keywordflow">else</span></div>
<div class="line"><a id="l03529" name="l03529"></a><span class="lineno"> 3529</span>        {</div>
<div class="line"><a id="l03530" name="l03530"></a><span class="lineno"> 3530</span>            <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#afd8f9880a251b532bf619b3ea93aff5f">lines</a>.<a class="code hl_variable" href="structcanvas__ity_1_1line__path.html#a27efd4b0dec6d85e4ba861c34bacdbf4">points</a>.push_back(<a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ac5da3224f86f284b4ac7efbde3942e27">forward</a> * xy(x, y));</div>
<div class="line"><a id="l03531" name="l03531"></a><span class="lineno"> 3531</span>            <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#afd8f9880a251b532bf619b3ea93aff5f">lines</a>.<a class="code hl_variable" href="structcanvas__ity_1_1line__path.html#a27efd4b0dec6d85e4ba861c34bacdbf4">points</a>.push_back(<a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ac5da3224f86f284b4ac7efbde3942e27">forward</a> * xy(x + <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#ad4920132bc78f7e74a8b14319e8ff52c">width</a>, y));</div>
<div class="line"><a id="l03532" name="l03532"></a><span class="lineno"> 3532</span>            <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#afd8f9880a251b532bf619b3ea93aff5f">lines</a>.<a class="code hl_variable" href="structcanvas__ity_1_1line__path.html#a27efd4b0dec6d85e4ba861c34bacdbf4">points</a>.push_back(<a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ac5da3224f86f284b4ac7efbde3942e27">forward</a> * xy(x + <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#ad4920132bc78f7e74a8b14319e8ff52c">width</a>, y + <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#acb61342cdc37dc89aee42e7087adbc50">height</a>));</div>
<div class="line"><a id="l03533" name="l03533"></a><span class="lineno"> 3533</span>            <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#afd8f9880a251b532bf619b3ea93aff5f">lines</a>.<a class="code hl_variable" href="structcanvas__ity_1_1line__path.html#a27efd4b0dec6d85e4ba861c34bacdbf4">points</a>.push_back(<a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ac5da3224f86f284b4ac7efbde3942e27">forward</a> * xy(x, y + <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#acb61342cdc37dc89aee42e7087adbc50">height</a>));</div>
<div class="line"><a id="l03534" name="l03534"></a><span class="lineno"> 3534</span>            <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#afd8f9880a251b532bf619b3ea93aff5f">lines</a>.<a class="code hl_variable" href="structcanvas__ity_1_1line__path.html#a27efd4b0dec6d85e4ba861c34bacdbf4">points</a>.push_back(<a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ac5da3224f86f284b4ac7efbde3942e27">forward</a> * xy(x, y));</div>
<div class="line"><a id="l03535" name="l03535"></a><span class="lineno"> 3535</span>            subpath_data entry = {5, <span class="keyword">true</span>};</div>
<div class="line"><a id="l03536" name="l03536"></a><span class="lineno"> 3536</span>            <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#afd8f9880a251b532bf619b3ea93aff5f">lines</a>.<a class="code hl_variable" href="structcanvas__ity_1_1line__path.html#acfec22d114fac137ae0a70af069874d8">subpaths</a>.push_back(entry);</div>
<div class="line"><a id="l03537" name="l03537"></a><span class="lineno"> 3537</span>        }</div>
<div class="line"><a id="l03538" name="l03538"></a><span class="lineno"> 3538</span>        <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#ade2814d673a6a799438a54f85040ef95">stroke_lines</a>();</div>
<div class="line"><a id="l03539" name="l03539"></a><span class="lineno"> 3539</span>        <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#a7f8ab830d6326620f52816979a9b5586">render_main</a>(<a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#a989dabb052e2c1a7400db979069dee52">stroke_brush</a>);</div>
<div class="line"><a id="l03540" name="l03540"></a><span class="lineno"> 3540</span>    }</div>
<div class="line"><a id="l03541" name="l03541"></a><span class="lineno"> 3541</span> </div>
<div class="line"><a id="l03542" name="l03542"></a><span class="lineno"> 3542</span>    <span class="keywordtype">bool</span> <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#a1f310e77dded29179958b0e424b532c6">canvas::set_font</a>(</div>
<div class="line"><a id="l03543" name="l03543"></a><span class="lineno"> 3543</span>        <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> <span class="keyword">const</span>* <a class="code hl_variable" href="tag__strings_8h.html#a8277d5a773fad745b5c98c8c498f9a05">font</a>,</div>
<div class="line"><a id="l03544" name="l03544"></a><span class="lineno"> 3544</span>        <span class="keywordtype">int</span>                  <a class="code hl_class" href="classbytes.html">bytes</a>,</div>
<div class="line"><a id="l03545" name="l03545"></a><span class="lineno"> 3545</span>        <span class="keywordtype">float</span>                size)</div>
<div class="line"><a id="l03546" name="l03546"></a><span class="lineno"> 3546</span>    {</div>
<div class="line"><a id="l03547" name="l03547"></a><span class="lineno"> 3547</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="tag__strings_8h.html#a8277d5a773fad745b5c98c8c498f9a05">font</a> &amp;&amp; <a class="code hl_class" href="classbytes.html">bytes</a>)</div>
<div class="line"><a id="l03548" name="l03548"></a><span class="lineno"> 3548</span>        {</div>
<div class="line"><a id="l03549" name="l03549"></a><span class="lineno"> 3549</span>            <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ae1aa377c064c039eb6c3bac8f6d2fb1b">face</a>.<a class="code hl_variable" href="structcanvas__ity_1_1font__face.html#a3a90e69c33234ccde6923be3056750ec">data</a>.clear();</div>
<div class="line"><a id="l03550" name="l03550"></a><span class="lineno"> 3550</span>            <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ae1aa377c064c039eb6c3bac8f6d2fb1b">face</a>.<a class="code hl_variable" href="structcanvas__ity_1_1font__face.html#abc046249f63b83f8168e447240f3e226">cmap</a> = 0;</div>
<div class="line"><a id="l03551" name="l03551"></a><span class="lineno"> 3551</span>            <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ae1aa377c064c039eb6c3bac8f6d2fb1b">face</a>.<a class="code hl_variable" href="structcanvas__ity_1_1font__face.html#ac8800d40f09123ed5287bbf390a49971">glyf</a> = 0;</div>
<div class="line"><a id="l03552" name="l03552"></a><span class="lineno"> 3552</span>            <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ae1aa377c064c039eb6c3bac8f6d2fb1b">face</a>.<a class="code hl_variable" href="structcanvas__ity_1_1font__face.html#acfdadcc7998b631ce831be49b7cc22d9">head</a> = 0;</div>
<div class="line"><a id="l03553" name="l03553"></a><span class="lineno"> 3553</span>            <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ae1aa377c064c039eb6c3bac8f6d2fb1b">face</a>.<a class="code hl_variable" href="structcanvas__ity_1_1font__face.html#a4e4fb482b9b9b7eec91997680b30cd25">hhea</a> = 0;</div>
<div class="line"><a id="l03554" name="l03554"></a><span class="lineno"> 3554</span>            <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ae1aa377c064c039eb6c3bac8f6d2fb1b">face</a>.<a class="code hl_variable" href="structcanvas__ity_1_1font__face.html#aae90819c2cb1ab8241bfee97d14602d0">hmtx</a> = 0;</div>
<div class="line"><a id="l03555" name="l03555"></a><span class="lineno"> 3555</span>            <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ae1aa377c064c039eb6c3bac8f6d2fb1b">face</a>.<a class="code hl_variable" href="structcanvas__ity_1_1font__face.html#a62ca6aac39a43f0e1f8794e1feb63321">loca</a> = 0;</div>
<div class="line"><a id="l03556" name="l03556"></a><span class="lineno"> 3556</span>            <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ae1aa377c064c039eb6c3bac8f6d2fb1b">face</a>.<a class="code hl_variable" href="structcanvas__ity_1_1font__face.html#a16fbf4a8de00a34df30326cadc78c8c6">maxp</a> = 0;</div>
<div class="line"><a id="l03557" name="l03557"></a><span class="lineno"> 3557</span>            <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ae1aa377c064c039eb6c3bac8f6d2fb1b">face</a>.<a class="code hl_variable" href="structcanvas__ity_1_1font__face.html#a75fb403a4159fe65601fb200d2692cda">os_2</a> = 0;</div>
<div class="line"><a id="l03558" name="l03558"></a><span class="lineno"> 3558</span>            <span class="keywordflow">if</span> (<a class="code hl_class" href="classbytes.html">bytes</a> &lt; 6)</div>
<div class="line"><a id="l03559" name="l03559"></a><span class="lineno"> 3559</span>                <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l03560" name="l03560"></a><span class="lineno"> 3560</span>            <span class="keywordtype">int</span> version = (<a class="code hl_variable" href="tag__strings_8h.html#a8277d5a773fad745b5c98c8c498f9a05">font</a>[0] &lt;&lt; 24 | <a class="code hl_variable" href="tag__strings_8h.html#a8277d5a773fad745b5c98c8c498f9a05">font</a>[1] &lt;&lt; 16 |</div>
<div class="line"><a id="l03561" name="l03561"></a><span class="lineno"> 3561</span>                           <a class="code hl_variable" href="tag__strings_8h.html#a8277d5a773fad745b5c98c8c498f9a05">font</a>[2] &lt;&lt; 8 | <a class="code hl_variable" href="tag__strings_8h.html#a8277d5a773fad745b5c98c8c498f9a05">font</a>[3] &lt;&lt; 0);</div>
<div class="line"><a id="l03562" name="l03562"></a><span class="lineno"> 3562</span>            <span class="keywordtype">int</span> tables  = <a class="code hl_variable" href="tag__strings_8h.html#a8277d5a773fad745b5c98c8c498f9a05">font</a>[4] &lt;&lt; 8 | <a class="code hl_variable" href="tag__strings_8h.html#a8277d5a773fad745b5c98c8c498f9a05">font</a>[5];</div>
<div class="line"><a id="l03563" name="l03563"></a><span class="lineno"> 3563</span>            <span class="keywordflow">if</span> ((version != 0x00010000 &amp;&amp; version != 0x74727565) ||</div>
<div class="line"><a id="l03564" name="l03564"></a><span class="lineno"> 3564</span>                <a class="code hl_class" href="classbytes.html">bytes</a> &lt; tables * 16 + 12)</div>
<div class="line"><a id="l03565" name="l03565"></a><span class="lineno"> 3565</span>                <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l03566" name="l03566"></a><span class="lineno"> 3566</span>            <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ae1aa377c064c039eb6c3bac8f6d2fb1b">face</a>.<a class="code hl_variable" href="structcanvas__ity_1_1font__face.html#a3a90e69c33234ccde6923be3056750ec">data</a>.insert(<a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ae1aa377c064c039eb6c3bac8f6d2fb1b">face</a>.<a class="code hl_variable" href="structcanvas__ity_1_1font__face.html#a3a90e69c33234ccde6923be3056750ec">data</a>.end(), <a class="code hl_variable" href="tag__strings_8h.html#a8277d5a773fad745b5c98c8c498f9a05">font</a>, <a class="code hl_variable" href="tag__strings_8h.html#a8277d5a773fad745b5c98c8c498f9a05">font</a> + tables * 16 + 12);</div>
<div class="line"><a id="l03567" name="l03567"></a><span class="lineno"> 3567</span>            <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code hl_enumvalue" href="core_8h.html#a7fc0249f0f8ba720115d2430f5b86cbaa6a992d5529f459a44fee58c733255e86">index</a> = 0; <a class="code hl_enumvalue" href="core_8h.html#a7fc0249f0f8ba720115d2430f5b86cbaa6a992d5529f459a44fee58c733255e86">index</a> &lt; tables; ++<a class="code hl_enumvalue" href="core_8h.html#a7fc0249f0f8ba720115d2430f5b86cbaa6a992d5529f459a44fee58c733255e86">index</a>)</div>
<div class="line"><a id="l03568" name="l03568"></a><span class="lineno"> 3568</span>            {</div>
<div class="line"><a id="l03569" name="l03569"></a><span class="lineno"> 3569</span>                <span class="keywordtype">int</span> tag    = signed_32(<a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ae1aa377c064c039eb6c3bac8f6d2fb1b">face</a>.<a class="code hl_variable" href="structcanvas__ity_1_1font__face.html#a3a90e69c33234ccde6923be3056750ec">data</a>, <a class="code hl_enumvalue" href="core_8h.html#a7fc0249f0f8ba720115d2430f5b86cbaa6a992d5529f459a44fee58c733255e86">index</a> * 16 + 12);</div>
<div class="line"><a id="l03570" name="l03570"></a><span class="lineno"> 3570</span>                <span class="keywordtype">int</span> <a class="code hl_define" href="css__properties_8cpp.html#a5dfbcc916693656dd092ddc41ab25747">offset</a> = signed_32(<a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ae1aa377c064c039eb6c3bac8f6d2fb1b">face</a>.<a class="code hl_variable" href="structcanvas__ity_1_1font__face.html#a3a90e69c33234ccde6923be3056750ec">data</a>, <a class="code hl_enumvalue" href="core_8h.html#a7fc0249f0f8ba720115d2430f5b86cbaa6a992d5529f459a44fee58c733255e86">index</a> * 16 + 20);</div>
<div class="line"><a id="l03571" name="l03571"></a><span class="lineno"> 3571</span>                <span class="keywordtype">int</span> <a class="code hl_variable" href="tag__strings_8h.html#a4676578af881b39f9fb1d101298d1778">span</a>   = signed_32(<a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ae1aa377c064c039eb6c3bac8f6d2fb1b">face</a>.<a class="code hl_variable" href="structcanvas__ity_1_1font__face.html#a3a90e69c33234ccde6923be3056750ec">data</a>, <a class="code hl_enumvalue" href="core_8h.html#a7fc0249f0f8ba720115d2430f5b86cbaa6a992d5529f459a44fee58c733255e86">index</a> * 16 + 24);</div>
<div class="line"><a id="l03572" name="l03572"></a><span class="lineno"> 3572</span>                <span class="keywordflow">if</span> (<a class="code hl_class" href="classbytes.html">bytes</a> &lt; <a class="code hl_define" href="css__properties_8cpp.html#a5dfbcc916693656dd092ddc41ab25747">offset</a> + <a class="code hl_variable" href="tag__strings_8h.html#a4676578af881b39f9fb1d101298d1778">span</a>)</div>
<div class="line"><a id="l03573" name="l03573"></a><span class="lineno"> 3573</span>                {</div>
<div class="line"><a id="l03574" name="l03574"></a><span class="lineno"> 3574</span>                    <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ae1aa377c064c039eb6c3bac8f6d2fb1b">face</a>.<a class="code hl_variable" href="structcanvas__ity_1_1font__face.html#a3a90e69c33234ccde6923be3056750ec">data</a>.clear();</div>
<div class="line"><a id="l03575" name="l03575"></a><span class="lineno"> 3575</span>                    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l03576" name="l03576"></a><span class="lineno"> 3576</span>                }</div>
<div class="line"><a id="l03577" name="l03577"></a><span class="lineno"> 3577</span>                <span class="keywordtype">int</span> place = <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(<a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ae1aa377c064c039eb6c3bac8f6d2fb1b">face</a>.<a class="code hl_variable" href="structcanvas__ity_1_1font__face.html#a3a90e69c33234ccde6923be3056750ec">data</a>.size());</div>
<div class="line"><a id="l03578" name="l03578"></a><span class="lineno"> 3578</span>                <span class="keywordflow">if</span> (tag == 0x636d6170)</div>
<div class="line"><a id="l03579" name="l03579"></a><span class="lineno"> 3579</span>                    <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ae1aa377c064c039eb6c3bac8f6d2fb1b">face</a>.<a class="code hl_variable" href="structcanvas__ity_1_1font__face.html#abc046249f63b83f8168e447240f3e226">cmap</a> = place;</div>
<div class="line"><a id="l03580" name="l03580"></a><span class="lineno"> 3580</span>                <span class="keywordflow">else</span> <span class="keywordflow">if</span> (tag == 0x676c7966)</div>
<div class="line"><a id="l03581" name="l03581"></a><span class="lineno"> 3581</span>                    <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ae1aa377c064c039eb6c3bac8f6d2fb1b">face</a>.<a class="code hl_variable" href="structcanvas__ity_1_1font__face.html#ac8800d40f09123ed5287bbf390a49971">glyf</a> = place;</div>
<div class="line"><a id="l03582" name="l03582"></a><span class="lineno"> 3582</span>                <span class="keywordflow">else</span> <span class="keywordflow">if</span> (tag == 0x68656164)</div>
<div class="line"><a id="l03583" name="l03583"></a><span class="lineno"> 3583</span>                    <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ae1aa377c064c039eb6c3bac8f6d2fb1b">face</a>.<a class="code hl_variable" href="structcanvas__ity_1_1font__face.html#acfdadcc7998b631ce831be49b7cc22d9">head</a> = place;</div>
<div class="line"><a id="l03584" name="l03584"></a><span class="lineno"> 3584</span>                <span class="keywordflow">else</span> <span class="keywordflow">if</span> (tag == 0x68686561)</div>
<div class="line"><a id="l03585" name="l03585"></a><span class="lineno"> 3585</span>                    <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ae1aa377c064c039eb6c3bac8f6d2fb1b">face</a>.<a class="code hl_variable" href="structcanvas__ity_1_1font__face.html#a4e4fb482b9b9b7eec91997680b30cd25">hhea</a> = place;</div>
<div class="line"><a id="l03586" name="l03586"></a><span class="lineno"> 3586</span>                <span class="keywordflow">else</span> <span class="keywordflow">if</span> (tag == 0x686d7478)</div>
<div class="line"><a id="l03587" name="l03587"></a><span class="lineno"> 3587</span>                    <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ae1aa377c064c039eb6c3bac8f6d2fb1b">face</a>.<a class="code hl_variable" href="structcanvas__ity_1_1font__face.html#aae90819c2cb1ab8241bfee97d14602d0">hmtx</a> = place;</div>
<div class="line"><a id="l03588" name="l03588"></a><span class="lineno"> 3588</span>                <span class="keywordflow">else</span> <span class="keywordflow">if</span> (tag == 0x6c6f6361)</div>
<div class="line"><a id="l03589" name="l03589"></a><span class="lineno"> 3589</span>                    <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ae1aa377c064c039eb6c3bac8f6d2fb1b">face</a>.<a class="code hl_variable" href="structcanvas__ity_1_1font__face.html#a62ca6aac39a43f0e1f8794e1feb63321">loca</a> = place;</div>
<div class="line"><a id="l03590" name="l03590"></a><span class="lineno"> 3590</span>                <span class="keywordflow">else</span> <span class="keywordflow">if</span> (tag == 0x6d617870)</div>
<div class="line"><a id="l03591" name="l03591"></a><span class="lineno"> 3591</span>                    <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ae1aa377c064c039eb6c3bac8f6d2fb1b">face</a>.<a class="code hl_variable" href="structcanvas__ity_1_1font__face.html#a16fbf4a8de00a34df30326cadc78c8c6">maxp</a> = place;</div>
<div class="line"><a id="l03592" name="l03592"></a><span class="lineno"> 3592</span>                <span class="keywordflow">else</span> <span class="keywordflow">if</span> (tag == 0x4f532f32)</div>
<div class="line"><a id="l03593" name="l03593"></a><span class="lineno"> 3593</span>                    <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ae1aa377c064c039eb6c3bac8f6d2fb1b">face</a>.<a class="code hl_variable" href="structcanvas__ity_1_1font__face.html#a75fb403a4159fe65601fb200d2692cda">os_2</a> = place;</div>
<div class="line"><a id="l03594" name="l03594"></a><span class="lineno"> 3594</span>                <span class="keywordflow">else</span></div>
<div class="line"><a id="l03595" name="l03595"></a><span class="lineno"> 3595</span>                    <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l03596" name="l03596"></a><span class="lineno"> 3596</span>                <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ae1aa377c064c039eb6c3bac8f6d2fb1b">face</a>.<a class="code hl_variable" href="structcanvas__ity_1_1font__face.html#a3a90e69c33234ccde6923be3056750ec">data</a>.insert(</div>
<div class="line"><a id="l03597" name="l03597"></a><span class="lineno"> 3597</span>                    <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ae1aa377c064c039eb6c3bac8f6d2fb1b">face</a>.<a class="code hl_variable" href="structcanvas__ity_1_1font__face.html#a3a90e69c33234ccde6923be3056750ec">data</a>.end(), <a class="code hl_variable" href="tag__strings_8h.html#a8277d5a773fad745b5c98c8c498f9a05">font</a> + <a class="code hl_define" href="css__properties_8cpp.html#a5dfbcc916693656dd092ddc41ab25747">offset</a>, <a class="code hl_variable" href="tag__strings_8h.html#a8277d5a773fad745b5c98c8c498f9a05">font</a> + <a class="code hl_define" href="css__properties_8cpp.html#a5dfbcc916693656dd092ddc41ab25747">offset</a> + <a class="code hl_variable" href="tag__strings_8h.html#a4676578af881b39f9fb1d101298d1778">span</a>);</div>
<div class="line"><a id="l03598" name="l03598"></a><span class="lineno"> 3598</span>            }</div>
<div class="line"><a id="l03599" name="l03599"></a><span class="lineno"> 3599</span>            <span class="keywordflow">if</span> (!<a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ae1aa377c064c039eb6c3bac8f6d2fb1b">face</a>.<a class="code hl_variable" href="structcanvas__ity_1_1font__face.html#abc046249f63b83f8168e447240f3e226">cmap</a> || !<a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ae1aa377c064c039eb6c3bac8f6d2fb1b">face</a>.<a class="code hl_variable" href="structcanvas__ity_1_1font__face.html#ac8800d40f09123ed5287bbf390a49971">glyf</a> || !<a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ae1aa377c064c039eb6c3bac8f6d2fb1b">face</a>.<a class="code hl_variable" href="structcanvas__ity_1_1font__face.html#acfdadcc7998b631ce831be49b7cc22d9">head</a> || !<a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ae1aa377c064c039eb6c3bac8f6d2fb1b">face</a>.<a class="code hl_variable" href="structcanvas__ity_1_1font__face.html#a4e4fb482b9b9b7eec91997680b30cd25">hhea</a> ||</div>
<div class="line"><a id="l03600" name="l03600"></a><span class="lineno"> 3600</span>                !<a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ae1aa377c064c039eb6c3bac8f6d2fb1b">face</a>.<a class="code hl_variable" href="structcanvas__ity_1_1font__face.html#aae90819c2cb1ab8241bfee97d14602d0">hmtx</a> || !<a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ae1aa377c064c039eb6c3bac8f6d2fb1b">face</a>.<a class="code hl_variable" href="structcanvas__ity_1_1font__face.html#a62ca6aac39a43f0e1f8794e1feb63321">loca</a> || !<a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ae1aa377c064c039eb6c3bac8f6d2fb1b">face</a>.<a class="code hl_variable" href="structcanvas__ity_1_1font__face.html#a16fbf4a8de00a34df30326cadc78c8c6">maxp</a> || !<a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ae1aa377c064c039eb6c3bac8f6d2fb1b">face</a>.<a class="code hl_variable" href="structcanvas__ity_1_1font__face.html#a75fb403a4159fe65601fb200d2692cda">os_2</a>)</div>
<div class="line"><a id="l03601" name="l03601"></a><span class="lineno"> 3601</span>            {</div>
<div class="line"><a id="l03602" name="l03602"></a><span class="lineno"> 3602</span>                <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ae1aa377c064c039eb6c3bac8f6d2fb1b">face</a>.<a class="code hl_variable" href="structcanvas__ity_1_1font__face.html#a3a90e69c33234ccde6923be3056750ec">data</a>.clear();</div>
<div class="line"><a id="l03603" name="l03603"></a><span class="lineno"> 3603</span>                <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l03604" name="l03604"></a><span class="lineno"> 3604</span>            }</div>
<div class="line"><a id="l03605" name="l03605"></a><span class="lineno"> 3605</span>        }</div>
<div class="line"><a id="l03606" name="l03606"></a><span class="lineno"> 3606</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ae1aa377c064c039eb6c3bac8f6d2fb1b">face</a>.<a class="code hl_variable" href="structcanvas__ity_1_1font__face.html#a3a90e69c33234ccde6923be3056750ec">data</a>.empty())</div>
<div class="line"><a id="l03607" name="l03607"></a><span class="lineno"> 3607</span>            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l03608" name="l03608"></a><span class="lineno"> 3608</span>        <span class="keywordtype">int</span> units_per_em = unsigned_16(<a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ae1aa377c064c039eb6c3bac8f6d2fb1b">face</a>.<a class="code hl_variable" href="structcanvas__ity_1_1font__face.html#a3a90e69c33234ccde6923be3056750ec">data</a>, <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ae1aa377c064c039eb6c3bac8f6d2fb1b">face</a>.<a class="code hl_variable" href="structcanvas__ity_1_1font__face.html#acfdadcc7998b631ce831be49b7cc22d9">head</a> + 18);</div>
<div class="line"><a id="l03609" name="l03609"></a><span class="lineno"> 3609</span>        <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ae1aa377c064c039eb6c3bac8f6d2fb1b">face</a>.<a class="code hl_variable" href="structcanvas__ity_1_1font__face.html#ae9187b1026b81d08dd5000c7b8c246c2">scale</a>       = size / <span class="keyword">static_cast&lt;</span><span class="keywordtype">float</span><span class="keyword">&gt;</span>(units_per_em);</div>
<div class="line"><a id="l03610" name="l03610"></a><span class="lineno"> 3610</span>        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l03611" name="l03611"></a><span class="lineno"> 3611</span>    }</div>
<div class="line"><a id="l03612" name="l03612"></a><span class="lineno"> 3612</span> </div>
<div class="line"><a id="l03613" name="l03613"></a><span class="lineno"> 3613</span>    <span class="keywordtype">void</span> <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#aa46c414baa520dcc21be5f52a263bfdb">canvas::fill_text</a>(</div>
<div class="line"><a id="l03614" name="l03614"></a><span class="lineno"> 3614</span>        <span class="keywordtype">char</span> <span class="keyword">const</span>* text,</div>
<div class="line"><a id="l03615" name="l03615"></a><span class="lineno"> 3615</span>        <span class="keywordtype">float</span>       x,</div>
<div class="line"><a id="l03616" name="l03616"></a><span class="lineno"> 3616</span>        <span class="keywordtype">float</span>       y,</div>
<div class="line"><a id="l03617" name="l03617"></a><span class="lineno"> 3617</span>        <span class="keywordtype">float</span>       maximum_width)</div>
<div class="line"><a id="l03618" name="l03618"></a><span class="lineno"> 3618</span>    {</div>
<div class="line"><a id="l03619" name="l03619"></a><span class="lineno"> 3619</span>        <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#a4dd3608e9ac1d67b267aff7710377118">text_to_lines</a>(text, xy(x, y), maximum_width, <span class="keyword">false</span>);</div>
<div class="line"><a id="l03620" name="l03620"></a><span class="lineno"> 3620</span>        <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#a7f8ab830d6326620f52816979a9b5586">render_main</a>(<a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#a8a2e78359bde16efa2f89127b119a1b2">fill_brush</a>);</div>
<div class="line"><a id="l03621" name="l03621"></a><span class="lineno"> 3621</span>    }</div>
<div class="line"><a id="l03622" name="l03622"></a><span class="lineno"> 3622</span> </div>
<div class="line"><a id="l03623" name="l03623"></a><span class="lineno"> 3623</span>    <span class="keywordtype">void</span> <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#a143d5a0c98e4f2fc25572cbe30926287">canvas::stroke_text</a>(</div>
<div class="line"><a id="l03624" name="l03624"></a><span class="lineno"> 3624</span>        <span class="keywordtype">char</span> <span class="keyword">const</span>* text,</div>
<div class="line"><a id="l03625" name="l03625"></a><span class="lineno"> 3625</span>        <span class="keywordtype">float</span>       x,</div>
<div class="line"><a id="l03626" name="l03626"></a><span class="lineno"> 3626</span>        <span class="keywordtype">float</span>       y,</div>
<div class="line"><a id="l03627" name="l03627"></a><span class="lineno"> 3627</span>        <span class="keywordtype">float</span>       maximum_width)</div>
<div class="line"><a id="l03628" name="l03628"></a><span class="lineno"> 3628</span>    {</div>
<div class="line"><a id="l03629" name="l03629"></a><span class="lineno"> 3629</span>        <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#a4dd3608e9ac1d67b267aff7710377118">text_to_lines</a>(text, xy(x, y), maximum_width, <span class="keyword">true</span>);</div>
<div class="line"><a id="l03630" name="l03630"></a><span class="lineno"> 3630</span>        <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#ade2814d673a6a799438a54f85040ef95">stroke_lines</a>();</div>
<div class="line"><a id="l03631" name="l03631"></a><span class="lineno"> 3631</span>        <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#a7f8ab830d6326620f52816979a9b5586">render_main</a>(<a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#a989dabb052e2c1a7400db979069dee52">stroke_brush</a>);</div>
<div class="line"><a id="l03632" name="l03632"></a><span class="lineno"> 3632</span>    }</div>
<div class="line"><a id="l03633" name="l03633"></a><span class="lineno"> 3633</span> </div>
<div class="line"><a id="l03634" name="l03634"></a><span class="lineno"> 3634</span>    <span class="keywordtype">float</span> <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#ad15a54d6f83e96c430736671c4f82d8d">canvas::measure_text</a>(</div>
<div class="line"><a id="l03635" name="l03635"></a><span class="lineno"> 3635</span>        <span class="keywordtype">char</span> <span class="keyword">const</span>* text)</div>
<div class="line"><a id="l03636" name="l03636"></a><span class="lineno"> 3636</span>    {</div>
<div class="line"><a id="l03637" name="l03637"></a><span class="lineno"> 3637</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ae1aa377c064c039eb6c3bac8f6d2fb1b">face</a>.<a class="code hl_variable" href="structcanvas__ity_1_1font__face.html#a3a90e69c33234ccde6923be3056750ec">data</a>.empty() || !text)</div>
<div class="line"><a id="l03638" name="l03638"></a><span class="lineno"> 3638</span>            <span class="keywordflow">return</span> 0.0f;</div>
<div class="line"><a id="l03639" name="l03639"></a><span class="lineno"> 3639</span>        <span class="keywordtype">int</span> hmetrics = unsigned_16(<a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ae1aa377c064c039eb6c3bac8f6d2fb1b">face</a>.<a class="code hl_variable" href="structcanvas__ity_1_1font__face.html#a3a90e69c33234ccde6923be3056750ec">data</a>, <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ae1aa377c064c039eb6c3bac8f6d2fb1b">face</a>.<a class="code hl_variable" href="structcanvas__ity_1_1font__face.html#a4e4fb482b9b9b7eec91997680b30cd25">hhea</a> + 34);</div>
<div class="line"><a id="l03640" name="l03640"></a><span class="lineno"> 3640</span>        <span class="keywordtype">int</span> <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#ad4920132bc78f7e74a8b14319e8ff52c">width</a>    = 0;</div>
<div class="line"><a id="l03641" name="l03641"></a><span class="lineno"> 3641</span>        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code hl_enumvalue" href="core_8h.html#a7fc0249f0f8ba720115d2430f5b86cbaa6a992d5529f459a44fee58c733255e86">index</a> = 0; text[<a class="code hl_enumvalue" href="core_8h.html#a7fc0249f0f8ba720115d2430f5b86cbaa6a992d5529f459a44fee58c733255e86">index</a>];)</div>
<div class="line"><a id="l03642" name="l03642"></a><span class="lineno"> 3642</span>        {</div>
<div class="line"><a id="l03643" name="l03643"></a><span class="lineno"> 3643</span>            <span class="keywordtype">int</span> glyph = <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#ac677bb99b93a767bf42075a0e5969890">character_to_glyph</a>(text, <a class="code hl_enumvalue" href="core_8h.html#a7fc0249f0f8ba720115d2430f5b86cbaa6a992d5529f459a44fee58c733255e86">index</a>);</div>
<div class="line"><a id="l03644" name="l03644"></a><span class="lineno"> 3644</span>            <span class="keywordtype">int</span> entry = std::min(glyph, hmetrics - 1);</div>
<div class="line"><a id="l03645" name="l03645"></a><span class="lineno"> 3645</span>            <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#ad4920132bc78f7e74a8b14319e8ff52c">width</a> += unsigned_16(<a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ae1aa377c064c039eb6c3bac8f6d2fb1b">face</a>.<a class="code hl_variable" href="structcanvas__ity_1_1font__face.html#a3a90e69c33234ccde6923be3056750ec">data</a>, <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ae1aa377c064c039eb6c3bac8f6d2fb1b">face</a>.<a class="code hl_variable" href="structcanvas__ity_1_1font__face.html#aae90819c2cb1ab8241bfee97d14602d0">hmtx</a> + entry * 4);</div>
<div class="line"><a id="l03646" name="l03646"></a><span class="lineno"> 3646</span>        }</div>
<div class="line"><a id="l03647" name="l03647"></a><span class="lineno"> 3647</span>        <span class="keywordflow">return</span> <span class="keyword">static_cast&lt;</span><span class="keywordtype">float</span><span class="keyword">&gt;</span>(<a class="code hl_function" href="classcanvas__ity_1_1canvas.html#ad4920132bc78f7e74a8b14319e8ff52c">width</a>) * <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ae1aa377c064c039eb6c3bac8f6d2fb1b">face</a>.<a class="code hl_variable" href="structcanvas__ity_1_1font__face.html#ae9187b1026b81d08dd5000c7b8c246c2">scale</a>;</div>
<div class="line"><a id="l03648" name="l03648"></a><span class="lineno"> 3648</span>    }</div>
<div class="line"><a id="l03649" name="l03649"></a><span class="lineno"> 3649</span> </div>
<div class="line"><a id="l03650" name="l03650"></a><span class="lineno"> 3650</span>    <span class="keywordtype">void</span> <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#a49d7f8f26539bae43d23ac6f7555e2a5">canvas::draw_image</a>(</div>
<div class="line"><a id="l03651" name="l03651"></a><span class="lineno"> 3651</span>        <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> <span class="keyword">const</span>* <a class="code hl_variable" href="tag__strings_8h.html#a42cb5f5737262947250c709931232c69">image</a>,</div>
<div class="line"><a id="l03652" name="l03652"></a><span class="lineno"> 3652</span>        <span class="keywordtype">int</span>                  width,</div>
<div class="line"><a id="l03653" name="l03653"></a><span class="lineno"> 3653</span>        <span class="keywordtype">int</span>                  height,</div>
<div class="line"><a id="l03654" name="l03654"></a><span class="lineno"> 3654</span>        <span class="keywordtype">int</span>                  stride,</div>
<div class="line"><a id="l03655" name="l03655"></a><span class="lineno"> 3655</span>        <span class="keywordtype">float</span>                x,</div>
<div class="line"><a id="l03656" name="l03656"></a><span class="lineno"> 3656</span>        <span class="keywordtype">float</span>                y,</div>
<div class="line"><a id="l03657" name="l03657"></a><span class="lineno"> 3657</span>        <span class="keywordtype">float</span>                to_width,</div>
<div class="line"><a id="l03658" name="l03658"></a><span class="lineno"> 3658</span>        <span class="keywordtype">float</span>                to_height)</div>
<div class="line"><a id="l03659" name="l03659"></a><span class="lineno"> 3659</span>    {</div>
<div class="line"><a id="l03660" name="l03660"></a><span class="lineno"> 3660</span>        <span class="keywordflow">if</span> (!<a class="code hl_variable" href="tag__strings_8h.html#a42cb5f5737262947250c709931232c69">image</a> || <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#ad4920132bc78f7e74a8b14319e8ff52c">width</a> &lt;= 0 || <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#acb61342cdc37dc89aee42e7087adbc50">height</a> &lt;= 0 ||</div>
<div class="line"><a id="l03661" name="l03661"></a><span class="lineno"> 3661</span>            to_width == 0.0f || to_height == 0.0f)</div>
<div class="line"><a id="l03662" name="l03662"></a><span class="lineno"> 3662</span>            <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l03663" name="l03663"></a><span class="lineno"> 3663</span>        std::swap(<a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#a8a2e78359bde16efa2f89127b119a1b2">fill_brush</a>, <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#a15db24a232ad11aedfd4f7b4cfc0b280">image_brush</a>);</div>
<div class="line"><a id="l03664" name="l03664"></a><span class="lineno"> 3664</span>        <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#a1b0e0ddf684f7eb4d3093ccfce576152">set_pattern</a>(<a class="code hl_enumvalue" href="namespacecanvas__ity.html#a43021a4a19378b8a045cf40f27a3bb57a1e6269b4d68ba7a58b54ef61b8f7fb0f">fill_style</a>, <a class="code hl_variable" href="tag__strings_8h.html#a42cb5f5737262947250c709931232c69">image</a>, <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#ad4920132bc78f7e74a8b14319e8ff52c">width</a>, <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#acb61342cdc37dc89aee42e7087adbc50">height</a>, stride, <a class="code hl_enumvalue" href="namespacecanvas__ity.html#ad73c575b59800b5698624c6545d925b1a17b822bfdfba59ca705c9fbea739b6ad">repeat</a>);</div>
<div class="line"><a id="l03665" name="l03665"></a><span class="lineno"> 3665</span>        std::swap(<a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#a8a2e78359bde16efa2f89127b119a1b2">fill_brush</a>, <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#a15db24a232ad11aedfd4f7b4cfc0b280">image_brush</a>);</div>
<div class="line"><a id="l03666" name="l03666"></a><span class="lineno"> 3666</span>        <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#afd8f9880a251b532bf619b3ea93aff5f">lines</a>.<a class="code hl_variable" href="structcanvas__ity_1_1line__path.html#a27efd4b0dec6d85e4ba861c34bacdbf4">points</a>.clear();</div>
<div class="line"><a id="l03667" name="l03667"></a><span class="lineno"> 3667</span>        <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#afd8f9880a251b532bf619b3ea93aff5f">lines</a>.<a class="code hl_variable" href="structcanvas__ity_1_1line__path.html#acfec22d114fac137ae0a70af069874d8">subpaths</a>.clear();</div>
<div class="line"><a id="l03668" name="l03668"></a><span class="lineno"> 3668</span>        <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#afd8f9880a251b532bf619b3ea93aff5f">lines</a>.<a class="code hl_variable" href="structcanvas__ity_1_1line__path.html#a27efd4b0dec6d85e4ba861c34bacdbf4">points</a>.push_back(<a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ac5da3224f86f284b4ac7efbde3942e27">forward</a> * xy(x, y));</div>
<div class="line"><a id="l03669" name="l03669"></a><span class="lineno"> 3669</span>        <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#afd8f9880a251b532bf619b3ea93aff5f">lines</a>.<a class="code hl_variable" href="structcanvas__ity_1_1line__path.html#a27efd4b0dec6d85e4ba861c34bacdbf4">points</a>.push_back(<a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ac5da3224f86f284b4ac7efbde3942e27">forward</a> * xy(x + to_width, y));</div>
<div class="line"><a id="l03670" name="l03670"></a><span class="lineno"> 3670</span>        <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#afd8f9880a251b532bf619b3ea93aff5f">lines</a>.<a class="code hl_variable" href="structcanvas__ity_1_1line__path.html#a27efd4b0dec6d85e4ba861c34bacdbf4">points</a>.push_back(<a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ac5da3224f86f284b4ac7efbde3942e27">forward</a> * xy(x + to_width, y + to_height));</div>
<div class="line"><a id="l03671" name="l03671"></a><span class="lineno"> 3671</span>        <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#afd8f9880a251b532bf619b3ea93aff5f">lines</a>.<a class="code hl_variable" href="structcanvas__ity_1_1line__path.html#a27efd4b0dec6d85e4ba861c34bacdbf4">points</a>.push_back(<a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ac5da3224f86f284b4ac7efbde3942e27">forward</a> * xy(x, y + to_height));</div>
<div class="line"><a id="l03672" name="l03672"></a><span class="lineno"> 3672</span>        subpath_data entry = {4, <span class="keyword">true</span>};</div>
<div class="line"><a id="l03673" name="l03673"></a><span class="lineno"> 3673</span>        <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#afd8f9880a251b532bf619b3ea93aff5f">lines</a>.<a class="code hl_variable" href="structcanvas__ity_1_1line__path.html#acfec22d114fac137ae0a70af069874d8">subpaths</a>.push_back(entry);</div>
<div class="line"><a id="l03674" name="l03674"></a><span class="lineno"> 3674</span>        affine_matrix saved_forward = <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ac5da3224f86f284b4ac7efbde3942e27">forward</a>;</div>
<div class="line"><a id="l03675" name="l03675"></a><span class="lineno"> 3675</span>        affine_matrix saved_inverse = <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ade344370cc819a35ed35233e02f09859">inverse</a>;</div>
<div class="line"><a id="l03676" name="l03676"></a><span class="lineno"> 3676</span>        <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#ab593aa24c0e84a2a0513bb9c96b37841">translate</a>(x + std::min(0.0f, to_width),</div>
<div class="line"><a id="l03677" name="l03677"></a><span class="lineno"> 3677</span>                  y + std::min(0.0f, to_height));</div>
<div class="line"><a id="l03678" name="l03678"></a><span class="lineno"> 3678</span>        <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#a62869dd9efcbf81eca82c19e5cc397d7">scale</a>(fabsf(to_width) / <span class="keyword">static_cast&lt;</span><span class="keywordtype">float</span><span class="keyword">&gt;</span>(<a class="code hl_function" href="classcanvas__ity_1_1canvas.html#ad4920132bc78f7e74a8b14319e8ff52c">width</a>),</div>
<div class="line"><a id="l03679" name="l03679"></a><span class="lineno"> 3679</span>              fabsf(to_height) / <span class="keyword">static_cast&lt;</span><span class="keywordtype">float</span><span class="keyword">&gt;</span>(<a class="code hl_function" href="classcanvas__ity_1_1canvas.html#acb61342cdc37dc89aee42e7087adbc50">height</a>));</div>
<div class="line"><a id="l03680" name="l03680"></a><span class="lineno"> 3680</span>        <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#a7f8ab830d6326620f52816979a9b5586">render_main</a>(<a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#a15db24a232ad11aedfd4f7b4cfc0b280">image_brush</a>);</div>
<div class="line"><a id="l03681" name="l03681"></a><span class="lineno"> 3681</span>        <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ac5da3224f86f284b4ac7efbde3942e27">forward</a> = saved_forward;</div>
<div class="line"><a id="l03682" name="l03682"></a><span class="lineno"> 3682</span>        <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ade344370cc819a35ed35233e02f09859">inverse</a> = saved_inverse;</div>
<div class="line"><a id="l03683" name="l03683"></a><span class="lineno"> 3683</span>    }</div>
<div class="line"><a id="l03684" name="l03684"></a><span class="lineno"> 3684</span> </div>
<div class="line"><a id="l03685" name="l03685"></a><span class="lineno"> 3685</span>    <span class="keywordtype">void</span> <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#a1ad5831a81f603fbe4cdf0a3917c7403">canvas::get_image_data</a>(</div>
<div class="line"><a id="l03686" name="l03686"></a><span class="lineno"> 3686</span>        <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>* <a class="code hl_variable" href="tag__strings_8h.html#a42cb5f5737262947250c709931232c69">image</a>,</div>
<div class="line"><a id="l03687" name="l03687"></a><span class="lineno"> 3687</span>        <span class="keywordtype">int</span>            width,</div>
<div class="line"><a id="l03688" name="l03688"></a><span class="lineno"> 3688</span>        <span class="keywordtype">int</span>            height,</div>
<div class="line"><a id="l03689" name="l03689"></a><span class="lineno"> 3689</span>        <span class="keywordtype">int</span>            stride,</div>
<div class="line"><a id="l03690" name="l03690"></a><span class="lineno"> 3690</span>        <span class="keywordtype">int</span>            x,</div>
<div class="line"><a id="l03691" name="l03691"></a><span class="lineno"> 3691</span>        <span class="keywordtype">int</span>            y)</div>
<div class="line"><a id="l03692" name="l03692"></a><span class="lineno"> 3692</span>    {</div>
<div class="line"><a id="l03693" name="l03693"></a><span class="lineno"> 3693</span>        <span class="keywordflow">if</span> (!<a class="code hl_variable" href="tag__strings_8h.html#a42cb5f5737262947250c709931232c69">image</a>)</div>
<div class="line"><a id="l03694" name="l03694"></a><span class="lineno"> 3694</span>            <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l03695" name="l03695"></a><span class="lineno"> 3695</span>        <span class="keyword">static</span> <span class="keywordtype">float</span> <span class="keyword">const</span> bayer[][4] = {</div>
<div class="line"><a id="l03696" name="l03696"></a><span class="lineno"> 3696</span>            {0.03125f, 0.53125f, 0.15625f, 0.65625f},</div>
<div class="line"><a id="l03697" name="l03697"></a><span class="lineno"> 3697</span>            {0.78125f, 0.28125f, 0.90625f, 0.40625f},</div>
<div class="line"><a id="l03698" name="l03698"></a><span class="lineno"> 3698</span>            {0.21875f, 0.71875f, 0.09375f, 0.59375f},</div>
<div class="line"><a id="l03699" name="l03699"></a><span class="lineno"> 3699</span>            {0.96875f, 0.46875f, 0.84375f, 0.34375f}};</div>
<div class="line"><a id="l03700" name="l03700"></a><span class="lineno"> 3700</span>        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> image_y = 0; image_y &lt; <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#acb61342cdc37dc89aee42e7087adbc50">height</a>; ++image_y)</div>
<div class="line"><a id="l03701" name="l03701"></a><span class="lineno"> 3701</span>            <span class="keywordflow">for</span> (<span class="keywordtype">int</span> image_x = 0; image_x &lt; <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#ad4920132bc78f7e74a8b14319e8ff52c">width</a>; ++image_x)</div>
<div class="line"><a id="l03702" name="l03702"></a><span class="lineno"> 3702</span>            {</div>
<div class="line"><a id="l03703" name="l03703"></a><span class="lineno"> 3703</span>                <span class="keywordtype">int</span>  <a class="code hl_enumvalue" href="core_8h.html#a7fc0249f0f8ba720115d2430f5b86cbaa6a992d5529f459a44fee58c733255e86">index</a>    = image_y * stride + image_x * 4;</div>
<div class="line"><a id="l03704" name="l03704"></a><span class="lineno"> 3704</span>                <span class="keywordtype">int</span>  canvas_x = x + image_x;</div>
<div class="line"><a id="l03705" name="l03705"></a><span class="lineno"> 3705</span>                <span class="keywordtype">int</span>  canvas_y = y + image_y;</div>
<div class="line"><a id="l03706" name="l03706"></a><span class="lineno"> 3706</span>                rgba <a class="code hl_struct" href="structcolor.html">color</a>    = rgba(0.0f, 0.0f, 0.0f, 0.0f);</div>
<div class="line"><a id="l03707" name="l03707"></a><span class="lineno"> 3707</span>                <span class="keywordflow">if</span> (0 &lt;= canvas_x &amp;&amp; canvas_x &lt; <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#aab63b227be5d7786e5bf0b07362addfb">size_x</a> &amp;&amp;</div>
<div class="line"><a id="l03708" name="l03708"></a><span class="lineno"> 3708</span>                    0 &lt;= canvas_y &amp;&amp; canvas_y &lt; <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ae039e222157aef7c67de905bfbfaa1a7">size_y</a>)</div>
<div class="line"><a id="l03709" name="l03709"></a><span class="lineno"> 3709</span>                    <a class="code hl_struct" href="structcolor.html">color</a> = <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#afd6171d5075070f02637262085db2bb2">bitmap</a>[canvas_y * <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#aab63b227be5d7786e5bf0b07362addfb">size_x</a> + canvas_x];</div>
<div class="line"><a id="l03710" name="l03710"></a><span class="lineno"> 3710</span>                <span class="keywordtype">float</span> threshold = bayer[canvas_y &amp; 3][canvas_x &amp; 3];</div>
<div class="line"><a id="l03711" name="l03711"></a><span class="lineno"> 3711</span>                <a class="code hl_struct" href="structcolor.html">color</a>           = rgba(threshold, threshold, threshold, threshold) +</div>
<div class="line"><a id="l03712" name="l03712"></a><span class="lineno"> 3712</span>                        255.0f * delinearized(clamped(unpremultiplied(<a class="code hl_struct" href="structcolor.html">color</a>)));</div>
<div class="line"><a id="l03713" name="l03713"></a><span class="lineno"> 3713</span>                <a class="code hl_variable" href="tag__strings_8h.html#a42cb5f5737262947250c709931232c69">image</a>[<a class="code hl_enumvalue" href="core_8h.html#a7fc0249f0f8ba720115d2430f5b86cbaa6a992d5529f459a44fee58c733255e86">index</a> + 0] = <span class="keyword">static_cast&lt;</span><span class="keywordtype">unsigned</span> <span class="keywordtype">char</span><span class="keyword">&gt;</span>(<a class="code hl_struct" href="structcolor.html">color</a>.<a class="code hl_variable" href="structcolor.html#abdd01e7f85b6d9af6f95b50efa25675a">r</a>);</div>
<div class="line"><a id="l03714" name="l03714"></a><span class="lineno"> 3714</span>                <a class="code hl_variable" href="tag__strings_8h.html#a42cb5f5737262947250c709931232c69">image</a>[<a class="code hl_enumvalue" href="core_8h.html#a7fc0249f0f8ba720115d2430f5b86cbaa6a992d5529f459a44fee58c733255e86">index</a> + 1] = <span class="keyword">static_cast&lt;</span><span class="keywordtype">unsigned</span> <span class="keywordtype">char</span><span class="keyword">&gt;</span>(<a class="code hl_struct" href="structcolor.html">color</a>.<a class="code hl_variable" href="structcolor.html#acf7ab1f06261eb6f6faa2be62e426261">g</a>);</div>
<div class="line"><a id="l03715" name="l03715"></a><span class="lineno"> 3715</span>                <a class="code hl_variable" href="tag__strings_8h.html#a42cb5f5737262947250c709931232c69">image</a>[<a class="code hl_enumvalue" href="core_8h.html#a7fc0249f0f8ba720115d2430f5b86cbaa6a992d5529f459a44fee58c733255e86">index</a> + 2] = <span class="keyword">static_cast&lt;</span><span class="keywordtype">unsigned</span> <span class="keywordtype">char</span><span class="keyword">&gt;</span>(<a class="code hl_struct" href="structcolor.html">color</a>.<a class="code hl_variable" href="structcolor.html#a54c0fe3a59d6f43a47d365c545de1693">b</a>);</div>
<div class="line"><a id="l03716" name="l03716"></a><span class="lineno"> 3716</span>                <a class="code hl_variable" href="tag__strings_8h.html#a42cb5f5737262947250c709931232c69">image</a>[<a class="code hl_enumvalue" href="core_8h.html#a7fc0249f0f8ba720115d2430f5b86cbaa6a992d5529f459a44fee58c733255e86">index</a> + 3] = <span class="keyword">static_cast&lt;</span><span class="keywordtype">unsigned</span> <span class="keywordtype">char</span><span class="keyword">&gt;</span>(<a class="code hl_struct" href="structcolor.html">color</a>.<a class="code hl_variable" href="structcolor.html#a09936f14d9a1791aea4f418eb5dbf13b">a</a>);</div>
<div class="line"><a id="l03717" name="l03717"></a><span class="lineno"> 3717</span>            }</div>
<div class="line"><a id="l03718" name="l03718"></a><span class="lineno"> 3718</span>    }</div>
<div class="line"><a id="l03719" name="l03719"></a><span class="lineno"> 3719</span> </div>
<div class="line"><a id="l03720" name="l03720"></a><span class="lineno"> 3720</span>    <span class="keywordtype">void</span> <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#a0785388fa079ed8b15e9979dc3da8ca4">canvas::put_image_data</a>(</div>
<div class="line"><a id="l03721" name="l03721"></a><span class="lineno"> 3721</span>        <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> <span class="keyword">const</span>* <a class="code hl_variable" href="tag__strings_8h.html#a42cb5f5737262947250c709931232c69">image</a>,</div>
<div class="line"><a id="l03722" name="l03722"></a><span class="lineno"> 3722</span>        <span class="keywordtype">int</span>                  width,</div>
<div class="line"><a id="l03723" name="l03723"></a><span class="lineno"> 3723</span>        <span class="keywordtype">int</span>                  height,</div>
<div class="line"><a id="l03724" name="l03724"></a><span class="lineno"> 3724</span>        <span class="keywordtype">int</span>                  stride,</div>
<div class="line"><a id="l03725" name="l03725"></a><span class="lineno"> 3725</span>        <span class="keywordtype">int</span>                  x,</div>
<div class="line"><a id="l03726" name="l03726"></a><span class="lineno"> 3726</span>        <span class="keywordtype">int</span>                  y)</div>
<div class="line"><a id="l03727" name="l03727"></a><span class="lineno"> 3727</span>    {</div>
<div class="line"><a id="l03728" name="l03728"></a><span class="lineno"> 3728</span>        <span class="keywordflow">if</span> (!<a class="code hl_variable" href="tag__strings_8h.html#a42cb5f5737262947250c709931232c69">image</a>)</div>
<div class="line"><a id="l03729" name="l03729"></a><span class="lineno"> 3729</span>            <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l03730" name="l03730"></a><span class="lineno"> 3730</span>        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> image_y = 0; image_y &lt; <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#acb61342cdc37dc89aee42e7087adbc50">height</a>; ++image_y)</div>
<div class="line"><a id="l03731" name="l03731"></a><span class="lineno"> 3731</span>            <span class="keywordflow">for</span> (<span class="keywordtype">int</span> image_x = 0; image_x &lt; <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#ad4920132bc78f7e74a8b14319e8ff52c">width</a>; ++image_x)</div>
<div class="line"><a id="l03732" name="l03732"></a><span class="lineno"> 3732</span>            {</div>
<div class="line"><a id="l03733" name="l03733"></a><span class="lineno"> 3733</span>                <span class="keywordtype">int</span> <a class="code hl_enumvalue" href="core_8h.html#a7fc0249f0f8ba720115d2430f5b86cbaa6a992d5529f459a44fee58c733255e86">index</a>    = image_y * stride + image_x * 4;</div>
<div class="line"><a id="l03734" name="l03734"></a><span class="lineno"> 3734</span>                <span class="keywordtype">int</span> canvas_x = x + image_x;</div>
<div class="line"><a id="l03735" name="l03735"></a><span class="lineno"> 3735</span>                <span class="keywordtype">int</span> canvas_y = y + image_y;</div>
<div class="line"><a id="l03736" name="l03736"></a><span class="lineno"> 3736</span>                <span class="keywordflow">if</span> (canvas_x &lt; 0 || <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#aab63b227be5d7786e5bf0b07362addfb">size_x</a> &lt;= canvas_x ||</div>
<div class="line"><a id="l03737" name="l03737"></a><span class="lineno"> 3737</span>                    canvas_y &lt; 0 || <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ae039e222157aef7c67de905bfbfaa1a7">size_y</a> &lt;= canvas_y)</div>
<div class="line"><a id="l03738" name="l03738"></a><span class="lineno"> 3738</span>                    <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l03739" name="l03739"></a><span class="lineno"> 3739</span>                rgba <a class="code hl_struct" href="structcolor.html">color</a> = rgba(</div>
<div class="line"><a id="l03740" name="l03740"></a><span class="lineno"> 3740</span>                    <a class="code hl_variable" href="tag__strings_8h.html#a42cb5f5737262947250c709931232c69">image</a>[<a class="code hl_enumvalue" href="core_8h.html#a7fc0249f0f8ba720115d2430f5b86cbaa6a992d5529f459a44fee58c733255e86">index</a> + 0] / 255.0f, <a class="code hl_variable" href="tag__strings_8h.html#a42cb5f5737262947250c709931232c69">image</a>[<a class="code hl_enumvalue" href="core_8h.html#a7fc0249f0f8ba720115d2430f5b86cbaa6a992d5529f459a44fee58c733255e86">index</a> + 1] / 255.0f,</div>
<div class="line"><a id="l03741" name="l03741"></a><span class="lineno"> 3741</span>                    <a class="code hl_variable" href="tag__strings_8h.html#a42cb5f5737262947250c709931232c69">image</a>[<a class="code hl_enumvalue" href="core_8h.html#a7fc0249f0f8ba720115d2430f5b86cbaa6a992d5529f459a44fee58c733255e86">index</a> + 2] / 255.0f, <a class="code hl_variable" href="tag__strings_8h.html#a42cb5f5737262947250c709931232c69">image</a>[<a class="code hl_enumvalue" href="core_8h.html#a7fc0249f0f8ba720115d2430f5b86cbaa6a992d5529f459a44fee58c733255e86">index</a> + 3] / 255.0f);</div>
<div class="line"><a id="l03742" name="l03742"></a><span class="lineno"> 3742</span>                <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#afd6171d5075070f02637262085db2bb2">bitmap</a>[canvas_y * <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#aab63b227be5d7786e5bf0b07362addfb">size_x</a> + canvas_x] =</div>
<div class="line"><a id="l03743" name="l03743"></a><span class="lineno"> 3743</span>                    premultiplied(linearized(<a class="code hl_struct" href="structcolor.html">color</a>));</div>
<div class="line"><a id="l03744" name="l03744"></a><span class="lineno"> 3744</span>            }</div>
<div class="line"><a id="l03745" name="l03745"></a><span class="lineno"> 3745</span>    }</div>
<div class="line"><a id="l03746" name="l03746"></a><span class="lineno"> 3746</span> </div>
<div class="line"><a id="l03747" name="l03747"></a><span class="lineno"> 3747</span>    <span class="keywordtype">void</span> <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#a54dd82e22a5bf04609da7d905d4cb260">canvas::save</a>()</div>
<div class="line"><a id="l03748" name="l03748"></a><span class="lineno"> 3748</span>    {</div>
<div class="line"><a id="l03749" name="l03749"></a><span class="lineno"> 3749</span>        <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#a3176c99f113de2815855f8d3bbd273f3">canvas</a>* state                     = <span class="keyword">new</span> <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#a3176c99f113de2815855f8d3bbd273f3">canvas</a>(0, 0);</div>
<div class="line"><a id="l03750" name="l03750"></a><span class="lineno"> 3750</span>        state-&gt;global_composite_operation = <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#af6f748374ad333a49e8b379c0e368a34">global_composite_operation</a>;</div>
<div class="line"><a id="l03751" name="l03751"></a><span class="lineno"> 3751</span>        state-&gt;shadow_offset_x            = <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#afec88bee82b83c1d8dda0f3ba81a3c5f">shadow_offset_x</a>;</div>
<div class="line"><a id="l03752" name="l03752"></a><span class="lineno"> 3752</span>        state-&gt;shadow_offset_y            = <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#aeaae3e918b69a8467ef5f92ed1d5d02f">shadow_offset_y</a>;</div>
<div class="line"><a id="l03753" name="l03753"></a><span class="lineno"> 3753</span>        state-&gt;line_cap                   = <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#a3d9bb3308af32fca293d3e6be3092b85">line_cap</a>;</div>
<div class="line"><a id="l03754" name="l03754"></a><span class="lineno"> 3754</span>        state-&gt;line_join                  = <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#a9bab8e895dc0a3d6592452124288050d">line_join</a>;</div>
<div class="line"><a id="l03755" name="l03755"></a><span class="lineno"> 3755</span>        state-&gt;line_dash_offset           = <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#aa922b5d6eb6469829217ceff878354fa">line_dash_offset</a>;</div>
<div class="line"><a id="l03756" name="l03756"></a><span class="lineno"> 3756</span>        state-&gt;text_align                 = <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#a6b86e63b6b1ed3d08d0bcaa65968a82a">text_align</a>;</div>
<div class="line"><a id="l03757" name="l03757"></a><span class="lineno"> 3757</span>        state-&gt;text_baseline              = <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#a408fc5a50caaf825e1c3f6110e40fefa">text_baseline</a>;</div>
<div class="line"><a id="l03758" name="l03758"></a><span class="lineno"> 3758</span>        state-&gt;forward                    = <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ac5da3224f86f284b4ac7efbde3942e27">forward</a>;</div>
<div class="line"><a id="l03759" name="l03759"></a><span class="lineno"> 3759</span>        state-&gt;inverse                    = <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ade344370cc819a35ed35233e02f09859">inverse</a>;</div>
<div class="line"><a id="l03760" name="l03760"></a><span class="lineno"> 3760</span>        state-&gt;global_alpha               = <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#a5fc985877d0bb100bebbf1658d0b52b5">global_alpha</a>;</div>
<div class="line"><a id="l03761" name="l03761"></a><span class="lineno"> 3761</span>        state-&gt;shadow_color               = <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ad1f1bcdb74c8c6dbcbd0815ba620f7d1">shadow_color</a>;</div>
<div class="line"><a id="l03762" name="l03762"></a><span class="lineno"> 3762</span>        state-&gt;shadow_blur                = <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#a93720138de6b5228b4154081aef29988">shadow_blur</a>;</div>
<div class="line"><a id="l03763" name="l03763"></a><span class="lineno"> 3763</span>        state-&gt;line_width                 = <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#a9928b93ce97d8ec8fbfa6c450edbc96c">line_width</a>;</div>
<div class="line"><a id="l03764" name="l03764"></a><span class="lineno"> 3764</span>        state-&gt;miter_limit                = <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#a374c2313aab5ee0c35d0a747bbfb3f88">miter_limit</a>;</div>
<div class="line"><a id="l03765" name="l03765"></a><span class="lineno"> 3765</span>        state-&gt;line_dash                  = <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#a3f34a73605c566ec786c89a18bc076b2">line_dash</a>;</div>
<div class="line"><a id="l03766" name="l03766"></a><span class="lineno"> 3766</span>        state-&gt;fill_brush                 = <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#a8a2e78359bde16efa2f89127b119a1b2">fill_brush</a>;</div>
<div class="line"><a id="l03767" name="l03767"></a><span class="lineno"> 3767</span>        state-&gt;stroke_brush               = <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#a989dabb052e2c1a7400db979069dee52">stroke_brush</a>;</div>
<div class="line"><a id="l03768" name="l03768"></a><span class="lineno"> 3768</span>        state-&gt;mask                       = <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#afac766bb79ebdf29a1d4094c91b3291e">mask</a>;</div>
<div class="line"><a id="l03769" name="l03769"></a><span class="lineno"> 3769</span>        state-&gt;face                       = <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ae1aa377c064c039eb6c3bac8f6d2fb1b">face</a>;</div>
<div class="line"><a id="l03770" name="l03770"></a><span class="lineno"> 3770</span>        state-&gt;saves                      = <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#a2309d72383256afad1d28a40c4a837dc">saves</a>;</div>
<div class="line"><a id="l03771" name="l03771"></a><span class="lineno"> 3771</span>        <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#a2309d72383256afad1d28a40c4a837dc">saves</a>                             = state;</div>
<div class="line"><a id="l03772" name="l03772"></a><span class="lineno"> 3772</span>    }</div>
<div class="line"><a id="l03773" name="l03773"></a><span class="lineno"> 3773</span> </div>
<div class="line"><a id="l03774" name="l03774"></a><span class="lineno"> 3774</span>    <span class="keywordtype">void</span> <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#a70778b3d277bfaa5d2c456fcf8992dd2">canvas::restore</a>()</div>
<div class="line"><a id="l03775" name="l03775"></a><span class="lineno"> 3775</span>    {</div>
<div class="line"><a id="l03776" name="l03776"></a><span class="lineno"> 3776</span>        <span class="keywordflow">if</span> (!<a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#a2309d72383256afad1d28a40c4a837dc">saves</a>)</div>
<div class="line"><a id="l03777" name="l03777"></a><span class="lineno"> 3777</span>            <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l03778" name="l03778"></a><span class="lineno"> 3778</span>        <a class="code hl_function" href="classcanvas__ity_1_1canvas.html#a3176c99f113de2815855f8d3bbd273f3">canvas</a>* state              = <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#a2309d72383256afad1d28a40c4a837dc">saves</a>;</div>
<div class="line"><a id="l03779" name="l03779"></a><span class="lineno"> 3779</span>        <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#af6f748374ad333a49e8b379c0e368a34">global_composite_operation</a> = state-&gt;<a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#af6f748374ad333a49e8b379c0e368a34">global_composite_operation</a>;</div>
<div class="line"><a id="l03780" name="l03780"></a><span class="lineno"> 3780</span>        <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#afec88bee82b83c1d8dda0f3ba81a3c5f">shadow_offset_x</a>            = state-&gt;shadow_offset_x;</div>
<div class="line"><a id="l03781" name="l03781"></a><span class="lineno"> 3781</span>        <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#aeaae3e918b69a8467ef5f92ed1d5d02f">shadow_offset_y</a>            = state-&gt;shadow_offset_y;</div>
<div class="line"><a id="l03782" name="l03782"></a><span class="lineno"> 3782</span>        <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#a3d9bb3308af32fca293d3e6be3092b85">line_cap</a>                   = state-&gt;line_cap;</div>
<div class="line"><a id="l03783" name="l03783"></a><span class="lineno"> 3783</span>        <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#a9bab8e895dc0a3d6592452124288050d">line_join</a>                  = state-&gt;line_join;</div>
<div class="line"><a id="l03784" name="l03784"></a><span class="lineno"> 3784</span>        <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#aa922b5d6eb6469829217ceff878354fa">line_dash_offset</a>           = state-&gt;line_dash_offset;</div>
<div class="line"><a id="l03785" name="l03785"></a><span class="lineno"> 3785</span>        <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#a6b86e63b6b1ed3d08d0bcaa65968a82a">text_align</a>                 = state-&gt;text_align;</div>
<div class="line"><a id="l03786" name="l03786"></a><span class="lineno"> 3786</span>        <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#a408fc5a50caaf825e1c3f6110e40fefa">text_baseline</a>              = state-&gt;text_baseline;</div>
<div class="line"><a id="l03787" name="l03787"></a><span class="lineno"> 3787</span>        <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ac5da3224f86f284b4ac7efbde3942e27">forward</a>                    = state-&gt;forward;</div>
<div class="line"><a id="l03788" name="l03788"></a><span class="lineno"> 3788</span>        <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ade344370cc819a35ed35233e02f09859">inverse</a>                    = state-&gt;inverse;</div>
<div class="line"><a id="l03789" name="l03789"></a><span class="lineno"> 3789</span>        <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#a5fc985877d0bb100bebbf1658d0b52b5">global_alpha</a>               = state-&gt;global_alpha;</div>
<div class="line"><a id="l03790" name="l03790"></a><span class="lineno"> 3790</span>        <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ad1f1bcdb74c8c6dbcbd0815ba620f7d1">shadow_color</a>               = state-&gt;shadow_color;</div>
<div class="line"><a id="l03791" name="l03791"></a><span class="lineno"> 3791</span>        <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#a93720138de6b5228b4154081aef29988">shadow_blur</a>                = state-&gt;shadow_blur;</div>
<div class="line"><a id="l03792" name="l03792"></a><span class="lineno"> 3792</span>        <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#a9928b93ce97d8ec8fbfa6c450edbc96c">line_width</a>                 = state-&gt;line_width;</div>
<div class="line"><a id="l03793" name="l03793"></a><span class="lineno"> 3793</span>        <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#a374c2313aab5ee0c35d0a747bbfb3f88">miter_limit</a>                = state-&gt;miter_limit;</div>
<div class="line"><a id="l03794" name="l03794"></a><span class="lineno"> 3794</span>        <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#a3f34a73605c566ec786c89a18bc076b2">line_dash</a>                  = state-&gt;line_dash;</div>
<div class="line"><a id="l03795" name="l03795"></a><span class="lineno"> 3795</span>        <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#a8a2e78359bde16efa2f89127b119a1b2">fill_brush</a>                 = state-&gt;fill_brush;</div>
<div class="line"><a id="l03796" name="l03796"></a><span class="lineno"> 3796</span>        <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#a989dabb052e2c1a7400db979069dee52">stroke_brush</a>               = state-&gt;stroke_brush;</div>
<div class="line"><a id="l03797" name="l03797"></a><span class="lineno"> 3797</span>        <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#afac766bb79ebdf29a1d4094c91b3291e">mask</a>                       = state-&gt;mask;</div>
<div class="line"><a id="l03798" name="l03798"></a><span class="lineno"> 3798</span>        <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#ae1aa377c064c039eb6c3bac8f6d2fb1b">face</a>                       = state-&gt;face;</div>
<div class="line"><a id="l03799" name="l03799"></a><span class="lineno"> 3799</span>        <a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#a2309d72383256afad1d28a40c4a837dc">saves</a>                      = state-&gt;<a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#a2309d72383256afad1d28a40c4a837dc">saves</a>;</div>
<div class="line"><a id="l03800" name="l03800"></a><span class="lineno"> 3800</span>        state-&gt;<a class="code hl_variable" href="classcanvas__ity_1_1canvas.html#a2309d72383256afad1d28a40c4a837dc">saves</a>               = 0;</div>
<div class="line"><a id="l03801" name="l03801"></a><span class="lineno"> 3801</span>        <span class="keyword">delete</span> state;</div>
<div class="line"><a id="l03802" name="l03802"></a><span class="lineno"> 3802</span>    }</div>
<div class="line"><a id="l03803" name="l03803"></a><span class="lineno"> 3803</span> </div>
<div class="line"><a id="l03804" name="l03804"></a><span class="lineno"> 3804</span>} <span class="comment">// namespace canvas_ity</span></div>
<div class="line"><a id="l03805" name="l03805"></a><span class="lineno"> 3805</span> </div>
<div class="line"><a id="l03806" name="l03806"></a><span class="lineno"> 3806</span><span class="preprocessor">#endif </span><span class="comment">// CANVAS_ITY_IMPLEMENTATION</span></div>
<div class="ttc" id="aclassbytes_html"><div class="ttname"><a href="classbytes.html">bytes</a></div><div class="ttdef"><b>Definition</b> format.h:4610</div></div>
<div class="ttc" id="aclasscanvas__ity_1_1canvas_html"><div class="ttname"><a href="classcanvas__ity_1_1canvas.html">canvas_ity::canvas</a></div><div class="ttdef"><b>Definition</b> canvas_ity.hpp:276</div></div>
<div class="ttc" id="aclasscanvas__ity_1_1canvas_html_a06d4869ba1a23b6b1a2bd10a2f524ec0"><div class="ttname"><a href="classcanvas__ity_1_1canvas.html#a06d4869ba1a23b6b1a2bd10a2f524ec0">canvas_ity::canvas::rectangle</a></div><div class="ttdeci">void rectangle(float x, float y, float width, float height)</div><div class="ttdoc">Add a closed subpath in the shape of a rectangle.</div></div>
<div class="ttc" id="aclasscanvas__ity_1_1canvas_html_a06fe0eb1caa896d0b567389bd35f6c18"><div class="ttname"><a href="classcanvas__ity_1_1canvas.html#a06fe0eb1caa896d0b567389bd35f6c18">canvas_ity::canvas::set_global_alpha</a></div><div class="ttdeci">void set_global_alpha(float alpha)</div><div class="ttdoc">Set the degree of opacity applied to all drawing operations.</div></div>
<div class="ttc" id="aclasscanvas__ity_1_1canvas_html_a0785388fa079ed8b15e9979dc3da8ca4"><div class="ttname"><a href="classcanvas__ity_1_1canvas.html#a0785388fa079ed8b15e9979dc3da8ca4">canvas_ity::canvas::put_image_data</a></div><div class="ttdeci">void put_image_data(unsigned char const *image, int width, int height, int stride, int x, int y)</div><div class="ttdoc">Replace a rectangle of pixels on the canvas with an image.</div></div>
<div class="ttc" id="aclasscanvas__ity_1_1canvas_html_a143d5a0c98e4f2fc25572cbe30926287"><div class="ttname"><a href="classcanvas__ity_1_1canvas.html#a143d5a0c98e4f2fc25572cbe30926287">canvas_ity::canvas::stroke_text</a></div><div class="ttdeci">void stroke_text(char const *text, float x, float y, float maximum_width=1.0e30f)</div><div class="ttdoc">Draw a line of text by stroking its outline.</div></div>
<div class="ttc" id="aclasscanvas__ity_1_1canvas_html_a157d3c554ce752f70cb447fe3b7f0f4d"><div class="ttname"><a href="classcanvas__ity_1_1canvas.html#a157d3c554ce752f70cb447fe3b7f0f4d">canvas_ity::canvas::render_shadow</a></div><div class="ttdeci">void render_shadow(paint_brush const &amp;)</div></div>
<div class="ttc" id="aclasscanvas__ity_1_1canvas_html_a15db24a232ad11aedfd4f7b4cfc0b280"><div class="ttname"><a href="classcanvas__ity_1_1canvas.html#a15db24a232ad11aedfd4f7b4cfc0b280">canvas_ity::canvas::image_brush</a></div><div class="ttdeci">paint_brush image_brush</div><div class="ttdef"><b>Definition</b> canvas_ity.hpp:1305</div></div>
<div class="ttc" id="aclasscanvas__ity_1_1canvas_html_a1ad5831a81f603fbe4cdf0a3917c7403"><div class="ttname"><a href="classcanvas__ity_1_1canvas.html#a1ad5831a81f603fbe4cdf0a3917c7403">canvas_ity::canvas::get_image_data</a></div><div class="ttdeci">void get_image_data(unsigned char *image, int width, int height, int stride, int x, int y)</div><div class="ttdoc">Fetch a rectangle of pixels from the canvas to an image.</div></div>
<div class="ttc" id="aclasscanvas__ity_1_1canvas_html_a1b0e0ddf684f7eb4d3093ccfce576152"><div class="ttname"><a href="classcanvas__ity_1_1canvas.html#a1b0e0ddf684f7eb4d3093ccfce576152">canvas_ity::canvas::set_pattern</a></div><div class="ttdeci">void set_pattern(brush_type type, unsigned char const *image, int width, int height, int stride, repetition_style repetition)</div><div class="ttdoc">Set filling or stroking to draw with an image pattern.</div></div>
<div class="ttc" id="aclasscanvas__ity_1_1canvas_html_a1f310e77dded29179958b0e424b532c6"><div class="ttname"><a href="classcanvas__ity_1_1canvas.html#a1f310e77dded29179958b0e424b532c6">canvas_ity::canvas::set_font</a></div><div class="ttdeci">bool set_font(unsigned char const *font, int bytes, float size)</div><div class="ttdoc">Set the font to use for text drawing.</div></div>
<div class="ttc" id="aclasscanvas__ity_1_1canvas_html_a2309d72383256afad1d28a40c4a837dc"><div class="ttname"><a href="classcanvas__ity_1_1canvas.html#a2309d72383256afad1d28a40c4a837dc">canvas_ity::canvas::saves</a></div><div class="ttdeci">canvas * saves</div><div class="ttdef"><b>Definition</b> canvas_ity.hpp:1313</div></div>
<div class="ttc" id="aclasscanvas__ity_1_1canvas_html_a3015bd86fb23f123a09d89d04dd1131a"><div class="ttname"><a href="classcanvas__ity_1_1canvas.html#a3015bd86fb23f123a09d89d04dd1131a">canvas_ity::canvas::stroke_rectangle</a></div><div class="ttdeci">void stroke_rectangle(float x, float y, float width, float height)</div><div class="ttdoc">Stroke a rectangular area.</div></div>
<div class="ttc" id="aclasscanvas__ity_1_1canvas_html_a3176c99f113de2815855f8d3bbd273f3"><div class="ttname"><a href="classcanvas__ity_1_1canvas.html#a3176c99f113de2815855f8d3bbd273f3">canvas_ity::canvas::canvas</a></div><div class="ttdeci">canvas()</div><div class="ttdef"><b>Definition</b> canvas_ity.hpp:300</div></div>
<div class="ttc" id="aclasscanvas__ity_1_1canvas_html_a31f2427ebe2f8b4e4246796d43f7e9e1"><div class="ttname"><a href="classcanvas__ity_1_1canvas.html#a31f2427ebe2f8b4e4246796d43f7e9e1">canvas_ity::canvas::set_shadow_blur</a></div><div class="ttdeci">void set_shadow_blur(float level)</div><div class="ttdoc">Set the level of Gaussian blurring on the shadow.</div></div>
<div class="ttc" id="aclasscanvas__ity_1_1canvas_html_a327cdd2c64047affe6d03416bcb6a568"><div class="ttname"><a href="classcanvas__ity_1_1canvas.html#a327cdd2c64047affe6d03416bcb6a568">canvas_ity::canvas::move_to</a></div><div class="ttdeci">void move_to(float x, float y)</div><div class="ttdoc">Create a new subpath.</div></div>
<div class="ttc" id="aclasscanvas__ity_1_1canvas_html_a374c2313aab5ee0c35d0a747bbfb3f88"><div class="ttname"><a href="classcanvas__ity_1_1canvas.html#a374c2313aab5ee0c35d0a747bbfb3f88">canvas_ity::canvas::miter_limit</a></div><div class="ttdeci">float miter_limit</div><div class="ttdef"><b>Definition</b> canvas_ity.hpp:1301</div></div>
<div class="ttc" id="aclasscanvas__ity_1_1canvas_html_a3d9bb3308af32fca293d3e6be3092b85"><div class="ttname"><a href="classcanvas__ity_1_1canvas.html#a3d9bb3308af32fca293d3e6be3092b85">canvas_ity::canvas::line_cap</a></div><div class="ttdeci">cap_style line_cap</div><div class="ttdoc">Cap style for the ends of open subpaths and dash segments.</div><div class="ttdef"><b>Definition</b> canvas_ity.hpp:511</div></div>
<div class="ttc" id="aclasscanvas__ity_1_1canvas_html_a3f1c83b992274a94eb5448465e10edaf"><div class="ttname"><a href="classcanvas__ity_1_1canvas.html#a3f1c83b992274a94eb5448465e10edaf">canvas_ity::canvas::set_miter_limit</a></div><div class="ttdeci">void set_miter_limit(float limit)</div><div class="ttdoc">Set the limit on maximum pointiness allowed for miter joins.</div></div>
<div class="ttc" id="aclasscanvas__ity_1_1canvas_html_a3f34a73605c566ec786c89a18bc076b2"><div class="ttname"><a href="classcanvas__ity_1_1canvas.html#a3f34a73605c566ec786c89a18bc076b2">canvas_ity::canvas::line_dash</a></div><div class="ttdeci">std::vector&lt; float &gt; line_dash</div><div class="ttdef"><b>Definition</b> canvas_ity.hpp:1302</div></div>
<div class="ttc" id="aclasscanvas__ity_1_1canvas_html_a4056f856f4f19aa460a88678ea18731f"><div class="ttname"><a href="classcanvas__ity_1_1canvas.html#a4056f856f4f19aa460a88678ea18731f">canvas_ity::canvas::clip</a></div><div class="ttdeci">void clip()</div><div class="ttdoc">Restrict the clip region by the current path.</div></div>
<div class="ttc" id="aclasscanvas__ity_1_1canvas_html_a408fc5a50caaf825e1c3f6110e40fefa"><div class="ttname"><a href="classcanvas__ity_1_1canvas.html#a408fc5a50caaf825e1c3f6110e40fefa">canvas_ity::canvas::text_baseline</a></div><div class="ttdeci">baseline_style text_baseline</div><div class="ttdoc">Vertical position of the text relative to the anchor point.</div><div class="ttdef"><b>Definition</b> canvas_ity.hpp:1067</div></div>
<div class="ttc" id="aclasscanvas__ity_1_1canvas_html_a4398d75300a84212897f80f34d634c6f"><div class="ttname"><a href="classcanvas__ity_1_1canvas.html#a4398d75300a84212897f80f34d634c6f">canvas_ity::canvas::paint_pixel</a></div><div class="ttdeci">rgba paint_pixel(xy, paint_brush const &amp;)</div></div>
<div class="ttc" id="aclasscanvas__ity_1_1canvas_html_a4689020b4b9f4a2900986727cc0f8767"><div class="ttname"><a href="classcanvas__ity_1_1canvas.html#a4689020b4b9f4a2900986727cc0f8767">canvas_ity::canvas::rotate</a></div><div class="ttdeci">void rotate(float angle)</div><div class="ttdoc">Rotate the current transform.</div></div>
<div class="ttc" id="aclasscanvas__ity_1_1canvas_html_a474c24301d18e988c6ee7c8b3af3c816"><div class="ttname"><a href="classcanvas__ity_1_1canvas.html#a474c24301d18e988c6ee7c8b3af3c816">canvas_ity::canvas::set_line_width</a></div><div class="ttdeci">void set_line_width(float width)</div><div class="ttdoc">Set the width of the lines when stroking.</div></div>
<div class="ttc" id="aclasscanvas__ity_1_1canvas_html_a4821c78398a5edebfdcad0c8ae15358e"><div class="ttname"><a href="classcanvas__ity_1_1canvas.html#a4821c78398a5edebfdcad0c8ae15358e">canvas_ity::canvas::set_css_radial_gradient</a></div><div class="ttdeci">void set_css_radial_gradient(brush_type type, float x, float y, float radius_x, float radius_y)</div></div>
<div class="ttc" id="aclasscanvas__ity_1_1canvas_html_a489a8d4d82cde63ca8f3bc9c3d9ced9d"><div class="ttname"><a href="classcanvas__ity_1_1canvas.html#a489a8d4d82cde63ca8f3bc9c3d9ced9d">canvas_ity::canvas::polygon</a></div><div class="ttdeci">void polygon(std::vector&lt; xy &gt; points)</div></div>
<div class="ttc" id="aclasscanvas__ity_1_1canvas_html_a49d7f8f26539bae43d23ac6f7555e2a5"><div class="ttname"><a href="classcanvas__ity_1_1canvas.html#a49d7f8f26539bae43d23ac6f7555e2a5">canvas_ity::canvas::draw_image</a></div><div class="ttdeci">void draw_image(unsigned char const *image, int width, int height, int stride, float x, float y, float to_width, float to_height)</div><div class="ttdoc">Draw an image onto the canvas.</div></div>
<div class="ttc" id="aclasscanvas__ity_1_1canvas_html_a4bb7aab216b2b868ce9a4cb2f52b0c94"><div class="ttname"><a href="classcanvas__ity_1_1canvas.html#a4bb7aab216b2b868ce9a4cb2f52b0c94">canvas_ity::canvas::set_shadow_color</a></div><div class="ttdeci">void set_shadow_color(float red, float green, float blue, float alpha)</div><div class="ttdoc">Set the color and opacity of the shadow.</div></div>
<div class="ttc" id="aclasscanvas__ity_1_1canvas_html_a4dd3608e9ac1d67b267aff7710377118"><div class="ttname"><a href="classcanvas__ity_1_1canvas.html#a4dd3608e9ac1d67b267aff7710377118">canvas_ity::canvas::text_to_lines</a></div><div class="ttdeci">void text_to_lines(char const *, xy, float, bool)</div></div>
<div class="ttc" id="aclasscanvas__ity_1_1canvas_html_a4dfa9eb9567537bc2769c654fb356292"><div class="ttname"><a href="classcanvas__ity_1_1canvas.html#a4dfa9eb9567537bc2769c654fb356292">canvas_ity::canvas::get_font_metrics</a></div><div class="ttdeci">void get_font_metrics(int &amp;ascent, int &amp;descent, int &amp;height, int &amp;x_height)</div></div>
<div class="ttc" id="aclasscanvas__ity_1_1canvas_html_a4e8fe391327b93aaf006b52eaf3546f4"><div class="ttname"><a href="classcanvas__ity_1_1canvas.html#a4e8fe391327b93aaf006b52eaf3546f4">canvas_ity::canvas::runs</a></div><div class="ttdeci">pixel_runs runs</div><div class="ttdef"><b>Definition</b> canvas_ity.hpp:1309</div></div>
<div class="ttc" id="aclasscanvas__ity_1_1canvas_html_a54dd82e22a5bf04609da7d905d4cb260"><div class="ttname"><a href="classcanvas__ity_1_1canvas.html#a54dd82e22a5bf04609da7d905d4cb260">canvas_ity::canvas::save</a></div><div class="ttdeci">void save()</div><div class="ttdoc">Save the current state as though to a stack.</div></div>
<div class="ttc" id="aclasscanvas__ity_1_1canvas_html_a5959c046fdd90657075cb68e24c6e3ae"><div class="ttname"><a href="classcanvas__ity_1_1canvas.html#a5959c046fdd90657075cb68e24c6e3ae">canvas_ity::canvas::add_bezier</a></div><div class="ttdeci">void add_bezier(xy, xy, xy, xy, float)</div></div>
<div class="ttc" id="aclasscanvas__ity_1_1canvas_html_a5f5340853be67ae67fe66d29d186b7a4"><div class="ttname"><a href="classcanvas__ity_1_1canvas.html#a5f5340853be67ae67fe66d29d186b7a4">canvas_ity::canvas::add_runs</a></div><div class="ttdeci">void add_runs(xy, xy)</div></div>
<div class="ttc" id="aclasscanvas__ity_1_1canvas_html_a5f7befd4ac9f8adf859454859d8093a9"><div class="ttname"><a href="classcanvas__ity_1_1canvas.html#a5f7befd4ac9f8adf859454859d8093a9">canvas_ity::canvas::bezier_curve_to</a></div><div class="ttdeci">void bezier_curve_to(float control_1_x, float control_1_y, float control_2_x, float control_2_y, float x, float y)</div><div class="ttdoc">Extend the current subpath with a cubic Bezier curve.</div></div>
<div class="ttc" id="aclasscanvas__ity_1_1canvas_html_a5fc985877d0bb100bebbf1658d0b52b5"><div class="ttname"><a href="classcanvas__ity_1_1canvas.html#a5fc985877d0bb100bebbf1658d0b52b5">canvas_ity::canvas::global_alpha</a></div><div class="ttdeci">float global_alpha</div><div class="ttdef"><b>Definition</b> canvas_ity.hpp:1296</div></div>
<div class="ttc" id="aclasscanvas__ity_1_1canvas_html_a62869dd9efcbf81eca82c19e5cc397d7"><div class="ttname"><a href="classcanvas__ity_1_1canvas.html#a62869dd9efcbf81eca82c19e5cc397d7">canvas_ity::canvas::scale</a></div><div class="ttdeci">void scale(float x, float y)</div><div class="ttdoc">Scale the current transform.</div></div>
<div class="ttc" id="aclasscanvas__ity_1_1canvas_html_a655b2fb6b29e9d66122fe222b3de6e08"><div class="ttname"><a href="classcanvas__ity_1_1canvas.html#a655b2fb6b29e9d66122fe222b3de6e08">canvas_ity::canvas::arc</a></div><div class="ttdeci">void arc(float x, float y, float radius, float start_angle, float end_angle, bool counter_clockwise=false)</div><div class="ttdoc">Extend the current subpath with an arc between two angles.</div></div>
<div class="ttc" id="aclasscanvas__ity_1_1canvas_html_a6b86e63b6b1ed3d08d0bcaa65968a82a"><div class="ttname"><a href="classcanvas__ity_1_1canvas.html#a6b86e63b6b1ed3d08d0bcaa65968a82a">canvas_ity::canvas::text_align</a></div><div class="ttdeci">align_style text_align</div><div class="ttdoc">Horizontal position of the text relative to the anchor point.</div><div class="ttdef"><b>Definition</b> canvas_ity.hpp:1054</div></div>
<div class="ttc" id="aclasscanvas__ity_1_1canvas_html_a70778b3d277bfaa5d2c456fcf8992dd2"><div class="ttname"><a href="classcanvas__ity_1_1canvas.html#a70778b3d277bfaa5d2c456fcf8992dd2">canvas_ity::canvas::restore</a></div><div class="ttdeci">void restore()</div><div class="ttdoc">Restore a previously saved state as though from a stack.</div></div>
<div class="ttc" id="aclasscanvas__ity_1_1canvas_html_a76f919fb3dfead1b60ae57d578b649a2"><div class="ttname"><a href="classcanvas__ity_1_1canvas.html#a76f919fb3dfead1b60ae57d578b649a2">canvas_ity::canvas::add_glyph</a></div><div class="ttdeci">void add_glyph(int, float)</div></div>
<div class="ttc" id="aclasscanvas__ity_1_1canvas_html_a7b0a51755d45e8f931dcd7691ebc4709"><div class="ttname"><a href="classcanvas__ity_1_1canvas.html#a7b0a51755d45e8f931dcd7691ebc4709">canvas_ity::canvas::set_line_dash</a></div><div class="ttdeci">void set_line_dash(float const *segments, int count)</div><div class="ttdoc">Set or clear the line dash pattern.</div></div>
<div class="ttc" id="aclasscanvas__ity_1_1canvas_html_a7eb04f30065a6356d7bb8a61b3b514e7"><div class="ttname"><a href="classcanvas__ity_1_1canvas.html#a7eb04f30065a6356d7bb8a61b3b514e7">canvas_ity::canvas::set_conic_gradient</a></div><div class="ttdeci">void set_conic_gradient(brush_type type, float x, float y, float angle)</div></div>
<div class="ttc" id="aclasscanvas__ity_1_1canvas_html_a7f8ab830d6326620f52816979a9b5586"><div class="ttname"><a href="classcanvas__ity_1_1canvas.html#a7f8ab830d6326620f52816979a9b5586">canvas_ity::canvas::render_main</a></div><div class="ttdeci">void render_main(paint_brush const &amp;)</div></div>
<div class="ttc" id="aclasscanvas__ity_1_1canvas_html_a83866e4110e5cba47c30a28cc85a1e84"><div class="ttname"><a href="classcanvas__ity_1_1canvas.html#a83866e4110e5cba47c30a28cc85a1e84">canvas_ity::canvas::canvas</a></div><div class="ttdeci">canvas(int width, int height, rgba color)</div></div>
<div class="ttc" id="aclasscanvas__ity_1_1canvas_html_a8a2e78359bde16efa2f89127b119a1b2"><div class="ttname"><a href="classcanvas__ity_1_1canvas.html#a8a2e78359bde16efa2f89127b119a1b2">canvas_ity::canvas::fill_brush</a></div><div class="ttdeci">paint_brush fill_brush</div><div class="ttdef"><b>Definition</b> canvas_ity.hpp:1303</div></div>
<div class="ttc" id="aclasscanvas__ity_1_1canvas_html_a93720138de6b5228b4154081aef29988"><div class="ttname"><a href="classcanvas__ity_1_1canvas.html#a93720138de6b5228b4154081aef29988">canvas_ity::canvas::shadow_blur</a></div><div class="ttdeci">float shadow_blur</div><div class="ttdef"><b>Definition</b> canvas_ity.hpp:1298</div></div>
<div class="ttc" id="aclasscanvas__ity_1_1canvas_html_a962182e05f7478c06c9e349f32b1f5ab"><div class="ttname"><a href="classcanvas__ity_1_1canvas.html#a962182e05f7478c06c9e349f32b1f5ab">canvas_ity::canvas::~canvas</a></div><div class="ttdeci">~canvas()</div><div class="ttdoc">Destroy the canvas and release all associated memory.</div></div>
<div class="ttc" id="aclasscanvas__ity_1_1canvas_html_a97cc5b1cc4d7e5b67ab3054fcdcfb3d4"><div class="ttname"><a href="classcanvas__ity_1_1canvas.html#a97cc5b1cc4d7e5b67ab3054fcdcfb3d4">canvas_ity::canvas::lines_to_runs</a></div><div class="ttdeci">void lines_to_runs(xy, int)</div></div>
<div class="ttc" id="aclasscanvas__ity_1_1canvas_html_a989dabb052e2c1a7400db979069dee52"><div class="ttname"><a href="classcanvas__ity_1_1canvas.html#a989dabb052e2c1a7400db979069dee52">canvas_ity::canvas::stroke_brush</a></div><div class="ttdeci">paint_brush stroke_brush</div><div class="ttdef"><b>Definition</b> canvas_ity.hpp:1304</div></div>
<div class="ttc" id="aclasscanvas__ity_1_1canvas_html_a9928b93ce97d8ec8fbfa6c450edbc96c"><div class="ttname"><a href="classcanvas__ity_1_1canvas.html#a9928b93ce97d8ec8fbfa6c450edbc96c">canvas_ity::canvas::line_width</a></div><div class="ttdeci">float line_width</div><div class="ttdef"><b>Definition</b> canvas_ity.hpp:1300</div></div>
<div class="ttc" id="aclasscanvas__ity_1_1canvas_html_a99a81e86ef5f77747c86ece9bc4c33b3"><div class="ttname"><a href="classcanvas__ity_1_1canvas.html#a99a81e86ef5f77747c86ece9bc4c33b3">canvas_ity::canvas::add_color_stop</a></div><div class="ttdeci">void add_color_stop(brush_type type, float offset, float red, float green, float blue, float alpha, std::optional&lt; float &gt; hint={})</div><div class="ttdoc">Add a color stop to a linear or radial gradient.</div></div>
<div class="ttc" id="aclasscanvas__ity_1_1canvas_html_a9bab8e895dc0a3d6592452124288050d"><div class="ttname"><a href="classcanvas__ity_1_1canvas.html#a9bab8e895dc0a3d6592452124288050d">canvas_ity::canvas::line_join</a></div><div class="ttdeci">join_style line_join</div><div class="ttdoc">Join style for connecting lines within the paths.</div><div class="ttdef"><b>Definition</b> canvas_ity.hpp:522</div></div>
<div class="ttc" id="aclasscanvas__ity_1_1canvas_html_a9ef5f65d2eca3518b5ea22eb76badce1"><div class="ttname"><a href="classcanvas__ity_1_1canvas.html#a9ef5f65d2eca3518b5ea22eb76badce1">canvas_ity::canvas::transform</a></div><div class="ttdeci">void transform(float a, float b, float c, float d, float e, float f)</div><div class="ttdoc">Add an arbitrary transform to the current transform.</div></div>
<div class="ttc" id="aclasscanvas__ity_1_1canvas_html_aa32bb49090a1a1b75ea808488bfc309b"><div class="ttname"><a href="classcanvas__ity_1_1canvas.html#aa32bb49090a1a1b75ea808488bfc309b">canvas_ity::canvas::dash_lines</a></div><div class="ttdeci">void dash_lines()</div></div>
<div class="ttc" id="aclasscanvas__ity_1_1canvas_html_aa46c414baa520dcc21be5f52a263bfdb"><div class="ttname"><a href="classcanvas__ity_1_1canvas.html#aa46c414baa520dcc21be5f52a263bfdb">canvas_ity::canvas::fill_text</a></div><div class="ttdeci">void fill_text(char const *text, float x, float y, float maximum_width=1.0e30f)</div><div class="ttdoc">Draw a line of text by filling its outline.</div></div>
<div class="ttc" id="aclasscanvas__ity_1_1canvas_html_aa4e9cd5047183018446aa43f7f7d4795"><div class="ttname"><a href="classcanvas__ity_1_1canvas.html#aa4e9cd5047183018446aa43f7f7d4795">canvas_ity::canvas::begin_path</a></div><div class="ttdeci">void begin_path()</div><div class="ttdoc">Reset the current path.</div></div>
<div class="ttc" id="aclasscanvas__ity_1_1canvas_html_aa922b5d6eb6469829217ceff878354fa"><div class="ttname"><a href="classcanvas__ity_1_1canvas.html#aa922b5d6eb6469829217ceff878354fa">canvas_ity::canvas::line_dash_offset</a></div><div class="ttdeci">float line_dash_offset</div><div class="ttdoc">Offset where each subpath starts the dash pattern.</div><div class="ttdef"><b>Definition</b> canvas_ity.hpp:547</div></div>
<div class="ttc" id="aclasscanvas__ity_1_1canvas_html_aa948748b43becb53a34e013938a96299"><div class="ttname"><a href="classcanvas__ity_1_1canvas.html#aa948748b43becb53a34e013938a96299">canvas_ity::canvas::fill_rectangle</a></div><div class="ttdeci">void fill_rectangle(float x, float y, float width, float height)</div><div class="ttdoc">Fill a rectangular area.</div></div>
<div class="ttc" id="aclasscanvas__ity_1_1canvas_html_aab63b227be5d7786e5bf0b07362addfb"><div class="ttname"><a href="classcanvas__ity_1_1canvas.html#aab63b227be5d7786e5bf0b07362addfb">canvas_ity::canvas::size_x</a></div><div class="ttdeci">int size_x</div><div class="ttdef"><b>Definition</b> canvas_ity.hpp:1292</div></div>
<div class="ttc" id="aclasscanvas__ity_1_1canvas_html_aab6951705e9efb55d545239161de8f01"><div class="ttname"><a href="classcanvas__ity_1_1canvas.html#aab6951705e9efb55d545239161de8f01">canvas_ity::canvas::add_half_stroke</a></div><div class="ttdeci">void add_half_stroke(size_t, size_t, bool)</div></div>
<div class="ttc" id="aclasscanvas__ity_1_1canvas_html_aab76d29f5555824f8d76e1a17b10644e"><div class="ttname"><a href="classcanvas__ity_1_1canvas.html#aab76d29f5555824f8d76e1a17b10644e">canvas_ity::canvas::close_path</a></div><div class="ttdeci">void close_path()</div><div class="ttdoc">Close the current subpath.</div></div>
<div class="ttc" id="aclasscanvas__ity_1_1canvas_html_ab3d978450725779c91b16e192ac264ef"><div class="ttname"><a href="classcanvas__ity_1_1canvas.html#ab3d978450725779c91b16e192ac264ef">canvas_ity::canvas::shadow</a></div><div class="ttdeci">std::vector&lt; float &gt; shadow</div><div class="ttdef"><b>Definition</b> canvas_ity.hpp:1299</div></div>
<div class="ttc" id="aclasscanvas__ity_1_1canvas_html_ab593aa24c0e84a2a0513bb9c96b37841"><div class="ttname"><a href="classcanvas__ity_1_1canvas.html#ab593aa24c0e84a2a0513bb9c96b37841">canvas_ity::canvas::translate</a></div><div class="ttdeci">void translate(float x, float y)</div><div class="ttdoc">Translate the current transform.</div></div>
<div class="ttc" id="aclasscanvas__ity_1_1canvas_html_ab859d5ae4e62d7c4395f06fc422f9e8f"><div class="ttname"><a href="classcanvas__ity_1_1canvas.html#ab859d5ae4e62d7c4395f06fc422f9e8f">canvas_ity::canvas::add_tessellation</a></div><div class="ttdeci">void add_tessellation(xy, xy, xy, xy, float, int)</div></div>
<div class="ttc" id="aclasscanvas__ity_1_1canvas_html_ac0de7db31d4e6e464adca380a32ff2f8"><div class="ttname"><a href="classcanvas__ity_1_1canvas.html#ac0de7db31d4e6e464adca380a32ff2f8">canvas_ity::canvas::set_color</a></div><div class="ttdeci">void set_color(brush_type type, rgba c)</div><div class="ttdef"><b>Definition</b> canvas_ity.hpp:592</div></div>
<div class="ttc" id="aclasscanvas__ity_1_1canvas_html_ac45236e8c3359456117d7e92f019cdf4"><div class="ttname"><a href="classcanvas__ity_1_1canvas.html#ac45236e8c3359456117d7e92f019cdf4">canvas_ity::canvas::set_color</a></div><div class="ttdeci">void set_color(brush_type type, float red, float green, float blue, float alpha)</div><div class="ttdoc">Set filling or stroking to use a constant color and opacity.</div></div>
<div class="ttc" id="aclasscanvas__ity_1_1canvas_html_ac5da3224f86f284b4ac7efbde3942e27"><div class="ttname"><a href="classcanvas__ity_1_1canvas.html#ac5da3224f86f284b4ac7efbde3942e27">canvas_ity::canvas::forward</a></div><div class="ttdeci">affine_matrix forward</div><div class="ttdef"><b>Definition</b> canvas_ity.hpp:1294</div></div>
<div class="ttc" id="aclasscanvas__ity_1_1canvas_html_ac677bb99b93a767bf42075a0e5969890"><div class="ttname"><a href="classcanvas__ity_1_1canvas.html#ac677bb99b93a767bf42075a0e5969890">canvas_ity::canvas::character_to_glyph</a></div><div class="ttdeci">int character_to_glyph(char const *, int &amp;)</div></div>
<div class="ttc" id="aclasscanvas__ity_1_1canvas_html_ac7c357a7c46207837884ce48845906d5"><div class="ttname"><a href="classcanvas__ity_1_1canvas.html#ac7c357a7c46207837884ce48845906d5">canvas_ity::canvas::is_point_in_path</a></div><div class="ttdeci">bool is_point_in_path(float x, float y)</div><div class="ttdoc">Tests whether a point is in or on the current path.</div></div>
<div class="ttc" id="aclasscanvas__ity_1_1canvas_html_ac85d0e71edbc57918a6cfe12ec5083ac"><div class="ttname"><a href="classcanvas__ity_1_1canvas.html#ac85d0e71edbc57918a6cfe12ec5083ac">canvas_ity::canvas::line_to</a></div><div class="ttdeci">void line_to(float x, float y)</div><div class="ttdoc">Extend the current subpath with a straight line.</div></div>
<div class="ttc" id="aclasscanvas__ity_1_1canvas_html_acb61342cdc37dc89aee42e7087adbc50"><div class="ttname"><a href="classcanvas__ity_1_1canvas.html#acb61342cdc37dc89aee42e7087adbc50">canvas_ity::canvas::height</a></div><div class="ttdeci">int height()</div><div class="ttdef"><b>Definition</b> canvas_ity.hpp:1267</div></div>
<div class="ttc" id="aclasscanvas__ity_1_1canvas_html_ad15a54d6f83e96c430736671c4f82d8d"><div class="ttname"><a href="classcanvas__ity_1_1canvas.html#ad15a54d6f83e96c430736671c4f82d8d">canvas_ity::canvas::measure_text</a></div><div class="ttdeci">float measure_text(char const *text)</div><div class="ttdoc">Measure the width in pixels of a line of text.</div></div>
<div class="ttc" id="aclasscanvas__ity_1_1canvas_html_ad1f1bcdb74c8c6dbcbd0815ba620f7d1"><div class="ttname"><a href="classcanvas__ity_1_1canvas.html#ad1f1bcdb74c8c6dbcbd0815ba620f7d1">canvas_ity::canvas::shadow_color</a></div><div class="ttdeci">rgba shadow_color</div><div class="ttdef"><b>Definition</b> canvas_ity.hpp:1297</div></div>
<div class="ttc" id="aclasscanvas__ity_1_1canvas_html_ad4920132bc78f7e74a8b14319e8ff52c"><div class="ttname"><a href="classcanvas__ity_1_1canvas.html#ad4920132bc78f7e74a8b14319e8ff52c">canvas_ity::canvas::width</a></div><div class="ttdeci">int width()</div><div class="ttdef"><b>Definition</b> canvas_ity.hpp:1263</div></div>
<div class="ttc" id="aclasscanvas__ity_1_1canvas_html_ad66a122ecd2ceb5c9ac8effabb1ad60d"><div class="ttname"><a href="classcanvas__ity_1_1canvas.html#ad66a122ecd2ceb5c9ac8effabb1ad60d">canvas_ity::canvas::set_radial_gradient</a></div><div class="ttdeci">void set_radial_gradient(brush_type type, float start_x, float start_y, float start_radius, float end_x, float end_y, float end_radius)</div><div class="ttdoc">Set filling or stroking to use a radial gradient.</div></div>
<div class="ttc" id="aclasscanvas__ity_1_1canvas_html_adc09699f5374cd99debeb90b8827993e"><div class="ttname"><a href="classcanvas__ity_1_1canvas.html#adc09699f5374cd99debeb90b8827993e">canvas_ity::canvas::canvas</a></div><div class="ttdeci">canvas(canvas const &amp;)</div></div>
<div class="ttc" id="aclasscanvas__ity_1_1canvas_html_add26fbf936386d5acd21524097da4598"><div class="ttname"><a href="classcanvas__ity_1_1canvas.html#add26fbf936386d5acd21524097da4598">canvas_ity::canvas::set_linear_gradient</a></div><div class="ttdeci">void set_linear_gradient(brush_type type, float start_x, float start_y, float end_x, float end_y)</div><div class="ttdoc">Set filling or stroking to use a linear gradient.</div></div>
<div class="ttc" id="aclasscanvas__ity_1_1canvas_html_addeff553c8e798317f0314204db87e57"><div class="ttname"><a href="classcanvas__ity_1_1canvas.html#addeff553c8e798317f0314204db87e57">canvas_ity::canvas::arc_to</a></div><div class="ttdeci">void arc_to(float vertex_x, float vertex_y, float x, float y, float radius)</div><div class="ttdoc">Extend the current subpath with an arc tangent to two lines.</div></div>
<div class="ttc" id="aclasscanvas__ity_1_1canvas_html_ade2814d673a6a799438a54f85040ef95"><div class="ttname"><a href="classcanvas__ity_1_1canvas.html#ade2814d673a6a799438a54f85040ef95">canvas_ity::canvas::stroke_lines</a></div><div class="ttdeci">void stroke_lines()</div></div>
<div class="ttc" id="aclasscanvas__ity_1_1canvas_html_ade344370cc819a35ed35233e02f09859"><div class="ttname"><a href="classcanvas__ity_1_1canvas.html#ade344370cc819a35ed35233e02f09859">canvas_ity::canvas::inverse</a></div><div class="ttdeci">affine_matrix inverse</div><div class="ttdef"><b>Definition</b> canvas_ity.hpp:1295</div></div>
<div class="ttc" id="aclasscanvas__ity_1_1canvas_html_ae039e222157aef7c67de905bfbfaa1a7"><div class="ttname"><a href="classcanvas__ity_1_1canvas.html#ae039e222157aef7c67de905bfbfaa1a7">canvas_ity::canvas::size_y</a></div><div class="ttdeci">int size_y</div><div class="ttdef"><b>Definition</b> canvas_ity.hpp:1293</div></div>
<div class="ttc" id="aclasscanvas__ity_1_1canvas_html_ae1aa377c064c039eb6c3bac8f6d2fb1b"><div class="ttname"><a href="classcanvas__ity_1_1canvas.html#ae1aa377c064c039eb6c3bac8f6d2fb1b">canvas_ity::canvas::face</a></div><div class="ttdeci">font_face face</div><div class="ttdef"><b>Definition</b> canvas_ity.hpp:1311</div></div>
<div class="ttc" id="aclasscanvas__ity_1_1canvas_html_ae1dee2675c55bc9421de7fb1cebc3cd9"><div class="ttname"><a href="classcanvas__ity_1_1canvas.html#ae1dee2675c55bc9421de7fb1cebc3cd9">canvas_ity::canvas::path_to_lines</a></div><div class="ttdeci">void path_to_lines(bool)</div></div>
<div class="ttc" id="aclasscanvas__ity_1_1canvas_html_ae24350ddfad86b73976a042ef95e12ae"><div class="ttname"><a href="classcanvas__ity_1_1canvas.html#ae24350ddfad86b73976a042ef95e12ae">canvas_ity::canvas::set_transform</a></div><div class="ttdeci">void set_transform(float a, float b, float c, float d, float e, float f)</div><div class="ttdoc">Replace the current transform.</div></div>
<div class="ttc" id="aclasscanvas__ity_1_1canvas_html_ae2b7f2f2525f838ea0a812bb8555b58e"><div class="ttname"><a href="classcanvas__ity_1_1canvas.html#ae2b7f2f2525f838ea0a812bb8555b58e">canvas_ity::canvas::quadratic_curve_to</a></div><div class="ttdeci">void quadratic_curve_to(float control_x, float control_y, float x, float y)</div><div class="ttdoc">Extend the current subpath with a quadratic Bezier curve.</div></div>
<div class="ttc" id="aclasscanvas__ity_1_1canvas_html_ae82297859869bd71ddf70725ee0b6bbe"><div class="ttname"><a href="classcanvas__ity_1_1canvas.html#ae82297859869bd71ddf70725ee0b6bbe">canvas_ity::canvas::operator=</a></div><div class="ttdeci">canvas &amp; operator=(canvas const &amp;)</div></div>
<div class="ttc" id="aclasscanvas__ity_1_1canvas_html_ae8488ab90d9a55ebf96175ff662c6ede"><div class="ttname"><a href="classcanvas__ity_1_1canvas.html#ae8488ab90d9a55ebf96175ff662c6ede">canvas_ity::canvas::path</a></div><div class="ttdeci">bezier_path path</div><div class="ttdef"><b>Definition</b> canvas_ity.hpp:1306</div></div>
<div class="ttc" id="aclasscanvas__ity_1_1canvas_html_aeaae3e918b69a8467ef5f92ed1d5d02f"><div class="ttname"><a href="classcanvas__ity_1_1canvas.html#aeaae3e918b69a8467ef5f92ed1d5d02f">canvas_ity::canvas::shadow_offset_y</a></div><div class="ttdeci">float shadow_offset_y</div><div class="ttdoc">Vertical offset of the shadow in pixels.</div><div class="ttdef"><b>Definition</b> canvas_ity.hpp:475</div></div>
<div class="ttc" id="aclasscanvas__ity_1_1canvas_html_af6f748374ad333a49e8b379c0e368a34"><div class="ttname"><a href="classcanvas__ity_1_1canvas.html#af6f748374ad333a49e8b379c0e368a34">canvas_ity::canvas::global_composite_operation</a></div><div class="ttdeci">composite_operation global_composite_operation</div><div class="ttdoc">Compositing operation for blending new drawing and old pixels.</div><div class="ttdef"><b>Definition</b> canvas_ity.hpp:437</div></div>
<div class="ttc" id="aclasscanvas__ity_1_1canvas_html_af8a5baf58b3557ec405b0545ba913dc5"><div class="ttname"><a href="classcanvas__ity_1_1canvas.html#af8a5baf58b3557ec405b0545ba913dc5">canvas_ity::canvas::stroke</a></div><div class="ttdeci">void stroke()</div><div class="ttdoc">Draw the edges of the current path using the stroke style.</div></div>
<div class="ttc" id="aclasscanvas__ity_1_1canvas_html_af9b368755ab028232964cf37b0dd4118"><div class="ttname"><a href="classcanvas__ity_1_1canvas.html#af9b368755ab028232964cf37b0dd4118">canvas_ity::canvas::fill</a></div><div class="ttdeci">void fill()</div><div class="ttdoc">Draw the interior of the current path using the fill style.</div></div>
<div class="ttc" id="aclasscanvas__ity_1_1canvas_html_afa49f996733e1100b7b8165aec6d6fe2"><div class="ttname"><a href="classcanvas__ity_1_1canvas.html#afa49f996733e1100b7b8165aec6d6fe2">canvas_ity::canvas::canvas</a></div><div class="ttdeci">canvas(int width, int height)</div><div class="ttdoc">Construct a new canvas.</div></div>
<div class="ttc" id="aclasscanvas__ity_1_1canvas_html_afac766bb79ebdf29a1d4094c91b3291e"><div class="ttname"><a href="classcanvas__ity_1_1canvas.html#afac766bb79ebdf29a1d4094c91b3291e">canvas_ity::canvas::mask</a></div><div class="ttdeci">pixel_runs mask</div><div class="ttdef"><b>Definition</b> canvas_ity.hpp:1310</div></div>
<div class="ttc" id="aclasscanvas__ity_1_1canvas_html_afaf3d6c584853157fb64bf463648f65c"><div class="ttname"><a href="classcanvas__ity_1_1canvas.html#afaf3d6c584853157fb64bf463648f65c">canvas_ity::canvas::scratch</a></div><div class="ttdeci">line_path scratch</div><div class="ttdef"><b>Definition</b> canvas_ity.hpp:1308</div></div>
<div class="ttc" id="aclasscanvas__ity_1_1canvas_html_afd6171d5075070f02637262085db2bb2"><div class="ttname"><a href="classcanvas__ity_1_1canvas.html#afd6171d5075070f02637262085db2bb2">canvas_ity::canvas::bitmap</a></div><div class="ttdeci">rgba * bitmap</div><div class="ttdef"><b>Definition</b> canvas_ity.hpp:1312</div></div>
<div class="ttc" id="aclasscanvas__ity_1_1canvas_html_afd8f9880a251b532bf619b3ea93aff5f"><div class="ttname"><a href="classcanvas__ity_1_1canvas.html#afd8f9880a251b532bf619b3ea93aff5f">canvas_ity::canvas::lines</a></div><div class="ttdeci">line_path lines</div><div class="ttdef"><b>Definition</b> canvas_ity.hpp:1307</div></div>
<div class="ttc" id="aclasscanvas__ity_1_1canvas_html_afec88bee82b83c1d8dda0f3ba81a3c5f"><div class="ttname"><a href="classcanvas__ity_1_1canvas.html#afec88bee82b83c1d8dda0f3ba81a3c5f">canvas_ity::canvas::shadow_offset_x</a></div><div class="ttdeci">float shadow_offset_x</div><div class="ttdoc">Horizontal offset of the shadow in pixels.</div><div class="ttdef"><b>Definition</b> canvas_ity.hpp:468</div></div>
<div class="ttc" id="aclasscanvas__ity_1_1canvas_html_aff1100c359d8b75483c11e7cb74d7400"><div class="ttname"><a href="classcanvas__ity_1_1canvas.html#aff1100c359d8b75483c11e7cb74d7400">canvas_ity::canvas::clear_rectangle</a></div><div class="ttdeci">void clear_rectangle(float x, float y, float width, float height)</div><div class="ttdoc">Clear a rectangular area back to transparent black.</div></div>
<div class="ttc" id="aclassvalue_html"><div class="ttname"><a href="classvalue.html">value</a></div><div class="ttdef"><b>Definition</b> core.h:1598</div></div>
<div class="ttc" id="acolor_8h_html_a535b59b8edc8902bb3c4f254625f91baa4d9c2073afa3c2abb817dceb22c34de6"><div class="ttname"><a href="color_8h.html#a535b59b8edc8902bb3c4f254625f91baa4d9c2073afa3c2abb817dceb22c34de6">emphasis::reverse</a></div><div class="ttdeci">@ reverse</div></div>
<div class="ttc" id="acolor_8h_html_a80d1dc5f416b97f92939a4166d41203ca48d6215903dff56238e52e8891380c8f"><div class="ttname"><a href="color_8h.html#a80d1dc5f416b97f92939a4166d41203ca48d6215903dff56238e52e8891380c8f">color::blue</a></div><div class="ttdeci">@ blue</div></div>
<div class="ttc" id="acolor_8h_html_a80d1dc5f416b97f92939a4166d41203ca9f27410725ab8cc8854a2769c7a516b8"><div class="ttname"><a href="color_8h.html#a80d1dc5f416b97f92939a4166d41203ca9f27410725ab8cc8854a2769c7a516b8">color::green</a></div><div class="ttdeci">@ green</div></div>
<div class="ttc" id="acolor_8h_html_a80d1dc5f416b97f92939a4166d41203cabda9643ac6601722a28f238714274da4"><div class="ttname"><a href="color_8h.html#a80d1dc5f416b97f92939a4166d41203cabda9643ac6601722a28f238714274da4">color::red</a></div><div class="ttdeci">@ red</div></div>
<div class="ttc" id="acolor_8h_html_a8b34a9364f5d6ca43a8a24f96a6db55b"><div class="ttname"><a href="color_8h.html#a8b34a9364f5d6ca43a8a24f96a6db55b">format</a></div><div class="ttdeci">std::basic_string&lt; Char &gt; format(const text_style &amp;ts, const S &amp;format_str, const Args &amp;... args)</div><div class="ttdef"><b>Definition</b> color.h:646</div></div>
<div class="ttc" id="acore_8h_html_a501bb1bb2f0cc5706178ed237958e73b"><div class="ttname"><a href="core_8h.html#a501bb1bb2f0cc5706178ed237958e73b">count</a></div><div class="ttdeci">constexpr auto count() -&gt; size_t</div><div class="ttdef"><b>Definition</b> core.h:1538</div></div>
<div class="ttc" id="acore_8h_html_a7aead736a07eaf25623ad7bfa1f0ee2d"><div class="ttname"><a href="core_8h.html#a7aead736a07eaf25623ad7bfa1f0ee2d">type</a></div><div class="ttdeci">type</div><div class="ttdef"><b>Definition</b> core.h:681</div></div>
<div class="ttc" id="acore_8h_html_a7fc0249f0f8ba720115d2430f5b86cbaa6a992d5529f459a44fee58c733255e86"><div class="ttname"><a href="core_8h.html#a7fc0249f0f8ba720115d2430f5b86cbaa6a992d5529f459a44fee58c733255e86">arg_id_kind::index</a></div><div class="ttdeci">@ index</div></div>
<div class="ttc" id="acss__properties_8cpp_html_a5dfbcc916693656dd092ddc41ab25747"><div class="ttname"><a href="css__properties_8cpp.html#a5dfbcc916693656dd092ddc41ab25747">offset</a></div><div class="ttdeci">#define offset(member)</div><div class="ttdef"><b>Definition</b> css_properties.cpp:5</div></div>
<div class="ttc" id="aformat_8h_html_a53543fa01d0b37fd6ccfe73e2976e139"><div class="ttname"><a href="format_8h.html#a53543fa01d0b37fd6ccfe73e2976e139">operator*</a></div><div class="ttdeci">FMT_CONSTEXPR fp operator*(fp x, fp y)</div><div class="ttdef"><b>Definition</b> format.h:1766</div></div>
<div class="ttc" id="anamespacecanvas__ity_html"><div class="ttname"><a href="namespacecanvas__ity.html">canvas_ity</a></div><div class="ttdef"><b>Definition</b> Bitmap.h:5</div></div>
<div class="ttc" id="anamespacecanvas__ity_html_a43021a4a19378b8a045cf40f27a3bb57"><div class="ttname"><a href="namespacecanvas__ity.html#a43021a4a19378b8a045cf40f27a3bb57">canvas_ity::brush_type</a></div><div class="ttdeci">brush_type</div><div class="ttdef"><b>Definition</b> canvas_ity.hpp:180</div></div>
<div class="ttc" id="anamespacecanvas__ity_html_a43021a4a19378b8a045cf40f27a3bb57a1e6269b4d68ba7a58b54ef61b8f7fb0f"><div class="ttname"><a href="namespacecanvas__ity.html#a43021a4a19378b8a045cf40f27a3bb57a1e6269b4d68ba7a58b54ef61b8f7fb0f">canvas_ity::fill_style</a></div><div class="ttdeci">@ fill_style</div><div class="ttdef"><b>Definition</b> canvas_ity.hpp:181</div></div>
<div class="ttc" id="anamespacecanvas__ity_html_a43021a4a19378b8a045cf40f27a3bb57a8007c46114f5b82c1f6f36d0522d6bf7"><div class="ttname"><a href="namespacecanvas__ity.html#a43021a4a19378b8a045cf40f27a3bb57a8007c46114f5b82c1f6f36d0522d6bf7">canvas_ity::stroke_style</a></div><div class="ttdeci">@ stroke_style</div><div class="ttdef"><b>Definition</b> canvas_ity.hpp:182</div></div>
<div class="ttc" id="anamespacecanvas__ity_html_a4d285f5b6403d2455e1550ff00b66a68"><div class="ttname"><a href="namespacecanvas__ity.html#a4d285f5b6403d2455e1550ff00b66a68">canvas_ity::baseline_style</a></div><div class="ttdeci">baseline_style</div><div class="ttdef"><b>Definition</b> canvas_ity.hpp:200</div></div>
<div class="ttc" id="anamespacecanvas__ity_html_a4d285f5b6403d2455e1550ff00b66a68a11cc80e28201c55b410440ff51640997"><div class="ttname"><a href="namespacecanvas__ity.html#a4d285f5b6403d2455e1550ff00b66a68a11cc80e28201c55b410440ff51640997">canvas_ity::middle</a></div><div class="ttdeci">@ middle</div><div class="ttdef"><b>Definition</b> canvas_ity.hpp:203</div></div>
<div class="ttc" id="anamespacecanvas__ity_html_a4d285f5b6403d2455e1550ff00b66a68a353775772d990c09479a46118fb472a9"><div class="ttname"><a href="namespacecanvas__ity.html#a4d285f5b6403d2455e1550ff00b66a68a353775772d990c09479a46118fb472a9">canvas_ity::alphabetic</a></div><div class="ttdeci">@ alphabetic</div><div class="ttdef"><b>Definition</b> canvas_ity.hpp:201</div></div>
<div class="ttc" id="anamespacecanvas__ity_html_a4d285f5b6403d2455e1550ff00b66a68a4c6c4d70fb820aa393a6f169df5d9680"><div class="ttname"><a href="namespacecanvas__ity.html#a4d285f5b6403d2455e1550ff00b66a68a4c6c4d70fb820aa393a6f169df5d9680">canvas_ity::hanging</a></div><div class="ttdeci">@ hanging</div><div class="ttdef"><b>Definition</b> canvas_ity.hpp:205</div></div>
<div class="ttc" id="anamespacecanvas__ity_html_a4d285f5b6403d2455e1550ff00b66a68a8f0245e8899461d131e1e435f8a0d7fb"><div class="ttname"><a href="namespacecanvas__ity.html#a4d285f5b6403d2455e1550ff00b66a68a8f0245e8899461d131e1e435f8a0d7fb">canvas_ity::ideographic</a></div><div class="ttdeci">@ ideographic</div><div class="ttdef"><b>Definition</b> canvas_ity.hpp:206</div></div>
<div class="ttc" id="anamespacecanvas__ity_html_a4d285f5b6403d2455e1550ff00b66a68a9a249647210b2d2559a66e7aa00dcd4b"><div class="ttname"><a href="namespacecanvas__ity.html#a4d285f5b6403d2455e1550ff00b66a68a9a249647210b2d2559a66e7aa00dcd4b">canvas_ity::top</a></div><div class="ttdeci">@ top</div><div class="ttdef"><b>Definition</b> canvas_ity.hpp:202</div></div>
<div class="ttc" id="anamespacecanvas__ity_html_a4d285f5b6403d2455e1550ff00b66a68a9bb9d7bbd943523e378fd235f23cb243"><div class="ttname"><a href="namespacecanvas__ity.html#a4d285f5b6403d2455e1550ff00b66a68a9bb9d7bbd943523e378fd235f23cb243">canvas_ity::bottom</a></div><div class="ttdeci">@ bottom</div><div class="ttdef"><b>Definition</b> canvas_ity.hpp:204</div></div>
<div class="ttc" id="anamespacecanvas__ity_html_a64892b31b00c006299d47bb71542b765"><div class="ttname"><a href="namespacecanvas__ity.html#a64892b31b00c006299d47bb71542b765">canvas_ity::align_style</a></div><div class="ttdeci">align_style</div><div class="ttdef"><b>Definition</b> canvas_ity.hpp:192</div></div>
<div class="ttc" id="anamespacecanvas__ity_html_a64892b31b00c006299d47bb71542b765a0c8aa9e531a998845378db44119460de"><div class="ttname"><a href="namespacecanvas__ity.html#a64892b31b00c006299d47bb71542b765a0c8aa9e531a998845378db44119460de">canvas_ity::leftward</a></div><div class="ttdeci">@ leftward</div><div class="ttdef"><b>Definition</b> canvas_ity.hpp:193</div></div>
<div class="ttc" id="anamespacecanvas__ity_html_a64892b31b00c006299d47bb71542b765a151ed2cf28f1c8b6fd3f4bdefbdd5f45"><div class="ttname"><a href="namespacecanvas__ity.html#a64892b31b00c006299d47bb71542b765a151ed2cf28f1c8b6fd3f4bdefbdd5f45">canvas_ity::rightward</a></div><div class="ttdeci">@ rightward</div><div class="ttdef"><b>Definition</b> canvas_ity.hpp:194</div></div>
<div class="ttc" id="anamespacecanvas__ity_html_a64892b31b00c006299d47bb71542b765a5db08d7fa14da6c1e37ae6aaad87a53d"><div class="ttname"><a href="namespacecanvas__ity.html#a64892b31b00c006299d47bb71542b765a5db08d7fa14da6c1e37ae6aaad87a53d">canvas_ity::center</a></div><div class="ttdeci">@ center</div><div class="ttdef"><b>Definition</b> canvas_ity.hpp:195</div></div>
<div class="ttc" id="anamespacecanvas__ity_html_a64892b31b00c006299d47bb71542b765a9cf9c0ad231023d5663cf9fb19993567"><div class="ttname"><a href="namespacecanvas__ity.html#a64892b31b00c006299d47bb71542b765a9cf9c0ad231023d5663cf9fb19993567">canvas_ity::start</a></div><div class="ttdeci">@ start</div><div class="ttdef"><b>Definition</b> canvas_ity.hpp:196</div></div>
<div class="ttc" id="anamespacecanvas__ity_html_a64892b31b00c006299d47bb71542b765ad5800f9a6ff0499528d888aafa6c0d31"><div class="ttname"><a href="namespacecanvas__ity.html#a64892b31b00c006299d47bb71542b765ad5800f9a6ff0499528d888aafa6c0d31">canvas_ity::ending</a></div><div class="ttdeci">@ ending</div><div class="ttdef"><b>Definition</b> canvas_ity.hpp:197</div></div>
<div class="ttc" id="anamespacecanvas__ity_html_a89843026830c0d4312f395e2e8c5992a"><div class="ttname"><a href="namespacecanvas__ity.html#a89843026830c0d4312f395e2e8c5992a">canvas_ity::composite_operation</a></div><div class="ttdeci">composite_operation</div><div class="ttdef"><b>Definition</b> canvas_ity.hpp:148</div></div>
<div class="ttc" id="anamespacecanvas__ity_html_a89843026830c0d4312f395e2e8c5992aa0591c61522e13a6472da43c12112e230"><div class="ttname"><a href="namespacecanvas__ity.html#a89843026830c0d4312f395e2e8c5992aa0591c61522e13a6472da43c12112e230">canvas_ity::exclusive_or</a></div><div class="ttdeci">@ exclusive_or</div><div class="ttdef"><b>Definition</b> canvas_ity.hpp:165</div></div>
<div class="ttc" id="anamespacecanvas__ity_html_a89843026830c0d4312f395e2e8c5992aa1551281f28c69c640f9778deebe6b2a7"><div class="ttname"><a href="namespacecanvas__ity.html#a89843026830c0d4312f395e2e8c5992aa1551281f28c69c640f9778deebe6b2a7">canvas_ity::source_out</a></div><div class="ttdeci">@ source_out</div><div class="ttdef"><b>Definition</b> canvas_ity.hpp:151</div></div>
<div class="ttc" id="anamespacecanvas__ity_html_a89843026830c0d4312f395e2e8c5992aa195106cf44a7a88a2348a13ae9e5e438"><div class="ttname"><a href="namespacecanvas__ity.html#a89843026830c0d4312f395e2e8c5992aa195106cf44a7a88a2348a13ae9e5e438">canvas_ity::lighter</a></div><div class="ttdeci">@ lighter</div><div class="ttdef"><b>Definition</b> canvas_ity.hpp:160</div></div>
<div class="ttc" id="anamespacecanvas__ity_html_a89843026830c0d4312f395e2e8c5992aa1e08030289f7c45d56752efe751fd4fb"><div class="ttname"><a href="namespacecanvas__ity.html#a89843026830c0d4312f395e2e8c5992aa1e08030289f7c45d56752efe751fd4fb">canvas_ity::source_over</a></div><div class="ttdeci">@ source_over</div><div class="ttdef"><b>Definition</b> canvas_ity.hpp:164</div></div>
<div class="ttc" id="anamespacecanvas__ity_html_a89843026830c0d4312f395e2e8c5992aa5463ab8f1b6e223c9e071b27376bb0da"><div class="ttname"><a href="namespacecanvas__ity.html#a89843026830c0d4312f395e2e8c5992aa5463ab8f1b6e223c9e071b27376bb0da">canvas_ity::destination_out</a></div><div class="ttdeci">@ destination_out</div><div class="ttdef"><b>Definition</b> canvas_ity.hpp:162</div></div>
<div class="ttc" id="anamespacecanvas__ity_html_a89843026830c0d4312f395e2e8c5992aa5c1f47394970225031b247173b4dd7ee"><div class="ttname"><a href="namespacecanvas__ity.html#a89843026830c0d4312f395e2e8c5992aa5c1f47394970225031b247173b4dd7ee">canvas_ity::source_atop</a></div><div class="ttdeci">@ source_atop</div><div class="ttdef"><b>Definition</b> canvas_ity.hpp:163</div></div>
<div class="ttc" id="anamespacecanvas__ity_html_a89843026830c0d4312f395e2e8c5992aa8f5afcc68d756a07d374c7fe1af78f09"><div class="ttname"><a href="namespacecanvas__ity.html#a89843026830c0d4312f395e2e8c5992aa8f5afcc68d756a07d374c7fe1af78f09">canvas_ity::source_copy</a></div><div class="ttdeci">@ source_copy</div><div class="ttdef"><b>Definition</b> canvas_ity.hpp:150</div></div>
<div class="ttc" id="anamespacecanvas__ity_html_a89843026830c0d4312f395e2e8c5992aaa2d7c8a56d9df52c6373bd2c9592a403"><div class="ttname"><a href="namespacecanvas__ity.html#a89843026830c0d4312f395e2e8c5992aaa2d7c8a56d9df52c6373bd2c9592a403">canvas_ity::destination_atop</a></div><div class="ttdeci">@ destination_atop</div><div class="ttdef"><b>Definition</b> canvas_ity.hpp:153</div></div>
<div class="ttc" id="anamespacecanvas__ity_html_a89843026830c0d4312f395e2e8c5992aab83cd4ceae74b73a482787c8482c6aa3"><div class="ttname"><a href="namespacecanvas__ity.html#a89843026830c0d4312f395e2e8c5992aab83cd4ceae74b73a482787c8482c6aa3">canvas_ity::source_in</a></div><div class="ttdeci">@ source_in</div><div class="ttdef"><b>Definition</b> canvas_ity.hpp:149</div></div>
<div class="ttc" id="anamespacecanvas__ity_html_a89843026830c0d4312f395e2e8c5992aac7fda6c2cdffd9c9bd2a1f4dbdfcbc92"><div class="ttname"><a href="namespacecanvas__ity.html#a89843026830c0d4312f395e2e8c5992aac7fda6c2cdffd9c9bd2a1f4dbdfcbc92">canvas_ity::destination_over</a></div><div class="ttdeci">@ destination_over</div><div class="ttdef"><b>Definition</b> canvas_ity.hpp:161</div></div>
<div class="ttc" id="anamespacecanvas__ity_html_a89843026830c0d4312f395e2e8c5992aadaf44bae777164af214e1897cb0a22a5"><div class="ttname"><a href="namespacecanvas__ity.html#a89843026830c0d4312f395e2e8c5992aadaf44bae777164af214e1897cb0a22a5">canvas_ity::destination_in</a></div><div class="ttdeci">@ destination_in</div><div class="ttdef"><b>Definition</b> canvas_ity.hpp:152</div></div>
<div class="ttc" id="anamespacecanvas__ity_html_ac31761ebfc503cc7b7e5a9d359fa4431"><div class="ttname"><a href="namespacecanvas__ity.html#ac31761ebfc503cc7b7e5a9d359fa4431">canvas_ity::cap_style</a></div><div class="ttdeci">cap_style</div><div class="ttdef"><b>Definition</b> canvas_ity.hpp:168</div></div>
<div class="ttc" id="anamespacecanvas__ity_html_ac31761ebfc503cc7b7e5a9d359fa4431a78585210f45e24334663fc46ac0c576f"><div class="ttname"><a href="namespacecanvas__ity.html#ac31761ebfc503cc7b7e5a9d359fa4431a78585210f45e24334663fc46ac0c576f">canvas_ity::square</a></div><div class="ttdeci">@ square</div><div class="ttdef"><b>Definition</b> canvas_ity.hpp:170</div></div>
<div class="ttc" id="anamespacecanvas__ity_html_ac31761ebfc503cc7b7e5a9d359fa4431a949e82fed800d1871e0e5d7426b62277"><div class="ttname"><a href="namespacecanvas__ity.html#ac31761ebfc503cc7b7e5a9d359fa4431a949e82fed800d1871e0e5d7426b62277">canvas_ity::circle</a></div><div class="ttdeci">@ circle</div><div class="ttdef"><b>Definition</b> canvas_ity.hpp:171</div></div>
<div class="ttc" id="anamespacecanvas__ity_html_ac31761ebfc503cc7b7e5a9d359fa4431aed96d21acb9c340b362bbb6e414fac7a"><div class="ttname"><a href="namespacecanvas__ity.html#ac31761ebfc503cc7b7e5a9d359fa4431aed96d21acb9c340b362bbb6e414fac7a">canvas_ity::butt</a></div><div class="ttdeci">@ butt</div><div class="ttdef"><b>Definition</b> canvas_ity.hpp:169</div></div>
<div class="ttc" id="anamespacecanvas__ity_html_ac351ff9340ea3c0b196f8788ddfa0f1a"><div class="ttname"><a href="namespacecanvas__ity.html#ac351ff9340ea3c0b196f8788ddfa0f1a">canvas_ity::join_style</a></div><div class="ttdeci">join_style</div><div class="ttdef"><b>Definition</b> canvas_ity.hpp:174</div></div>
<div class="ttc" id="anamespacecanvas__ity_html_ac351ff9340ea3c0b196f8788ddfa0f1aa10b6beb5c0a396ea09bbac8b03c9e696"><div class="ttname"><a href="namespacecanvas__ity.html#ac351ff9340ea3c0b196f8788ddfa0f1aa10b6beb5c0a396ea09bbac8b03c9e696">canvas_ity::miter</a></div><div class="ttdeci">@ miter</div><div class="ttdef"><b>Definition</b> canvas_ity.hpp:175</div></div>
<div class="ttc" id="anamespacecanvas__ity_html_ac351ff9340ea3c0b196f8788ddfa0f1aa273a90f2160e164f7eef29d6a35ea71e"><div class="ttname"><a href="namespacecanvas__ity.html#ac351ff9340ea3c0b196f8788ddfa0f1aa273a90f2160e164f7eef29d6a35ea71e">canvas_ity::bevel</a></div><div class="ttdeci">@ bevel</div><div class="ttdef"><b>Definition</b> canvas_ity.hpp:176</div></div>
<div class="ttc" id="anamespacecanvas__ity_html_ac351ff9340ea3c0b196f8788ddfa0f1aa50e8eb43e66a9878174a8cf7c3557a34"><div class="ttname"><a href="namespacecanvas__ity.html#ac351ff9340ea3c0b196f8788ddfa0f1aa50e8eb43e66a9878174a8cf7c3557a34">canvas_ity::rounded</a></div><div class="ttdeci">@ rounded</div><div class="ttdef"><b>Definition</b> canvas_ity.hpp:177</div></div>
<div class="ttc" id="anamespacecanvas__ity_html_ad73c575b59800b5698624c6545d925b1"><div class="ttname"><a href="namespacecanvas__ity.html#ad73c575b59800b5698624c6545d925b1">canvas_ity::repetition_style</a></div><div class="ttdeci">repetition_style</div><div class="ttdef"><b>Definition</b> canvas_ity.hpp:185</div></div>
<div class="ttc" id="anamespacecanvas__ity_html_ad73c575b59800b5698624c6545d925b1a00167bf403bc6b0368c6b979ef5f8e07"><div class="ttname"><a href="namespacecanvas__ity.html#ad73c575b59800b5698624c6545d925b1a00167bf403bc6b0368c6b979ef5f8e07">canvas_ity::repeat_y</a></div><div class="ttdeci">@ repeat_y</div><div class="ttdef"><b>Definition</b> canvas_ity.hpp:188</div></div>
<div class="ttc" id="anamespacecanvas__ity_html_ad73c575b59800b5698624c6545d925b1a17b822bfdfba59ca705c9fbea739b6ad"><div class="ttname"><a href="namespacecanvas__ity.html#ad73c575b59800b5698624c6545d925b1a17b822bfdfba59ca705c9fbea739b6ad">canvas_ity::repeat</a></div><div class="ttdeci">@ repeat</div><div class="ttdef"><b>Definition</b> canvas_ity.hpp:186</div></div>
<div class="ttc" id="anamespacecanvas__ity_html_ad73c575b59800b5698624c6545d925b1aab666ca31f27c30c052505212678d6b8"><div class="ttname"><a href="namespacecanvas__ity.html#ad73c575b59800b5698624c6545d925b1aab666ca31f27c30c052505212678d6b8">canvas_ity::repeat_x</a></div><div class="ttdeci">@ repeat_x</div><div class="ttdef"><b>Definition</b> canvas_ity.hpp:187</div></div>
<div class="ttc" id="anamespacecanvas__ity_html_ad73c575b59800b5698624c6545d925b1acbb7a5d0c043275cb4e1d12cae36a345"><div class="ttname"><a href="namespacecanvas__ity.html#ad73c575b59800b5698624c6545d925b1acbb7a5d0c043275cb4e1d12cae36a345">canvas_ity::no_repeat</a></div><div class="ttdeci">@ no_repeat</div><div class="ttdef"><b>Definition</b> canvas_ity.hpp:189</div></div>
<div class="ttc" id="anamespacecanvas__ity_html_aefffbe6bf29b56f35ecb44b2b2aaa302"><div class="ttname"><a href="namespacecanvas__ity.html#aefffbe6bf29b56f35ecb44b2b2aaa302">canvas_ity::pixel_runs</a></div><div class="ttdeci">std::vector&lt; pixel_run &gt; pixel_runs</div><div class="ttdef"><b>Definition</b> canvas_ity.hpp:273</div></div>
<div class="ttc" id="anamespacedetail_1_1dragonbox_html_a55ee9571cc13bd8f6efffbdf22c6931f"><div class="ttname"><a href="namespacedetail_1_1dragonbox.html#a55ee9571cc13bd8f6efffbdf22c6931f">detail::dragonbox::divisor</a></div><div class="ttdeci">uint32_t divisor</div><div class="ttdef"><b>Definition</b> format-inl.h:268</div></div>
<div class="ttc" id="anamespacedetail_html_a7c8bc5fb5ef4750d192614dd7f0cf396"><div class="ttname"><a href="namespacedetail.html#a7c8bc5fb5ef4750d192614dd7f0cf396">detail::first</a></div><div class="ttdeci">const T &amp; first(const T &amp;value, const Tail &amp;...)</div><div class="ttdef"><b>Definition</b> compile.h:179</div></div>
<div class="ttc" id="anamespacelitehtml_html_a0ffa29477d59c5b5e76956561eb10a94"><div class="ttname"><a href="namespacelitehtml.html#a0ffa29477d59c5b5e76956561eb10a94">litehtml::pi</a></div><div class="ttdeci">const float pi</div><div class="ttdef"><b>Definition</b> gradient.cpp:350</div></div>
<div class="ttc" id="anamespacelitehtml_html_a6a98390caf97aa8e2f13dae367482ce0"><div class="ttname"><a href="namespacelitehtml.html#a6a98390caf97aa8e2f13dae367482ce0">litehtml::operator&lt;</a></div><div class="ttdeci">bool operator&lt;(const css_selector &amp;v1, const css_selector &amp;v2)</div><div class="ttdef"><b>Definition</b> css_selector.h:237</div></div>
<div class="ttc" id="anamespacelitehtml_html_a6f952703aa655217919dcdcfc641e4a2"><div class="ttname"><a href="namespacelitehtml.html#a6f952703aa655217919dcdcfc641e4a2">litehtml::at</a></div><div class="ttdeci">const T &amp; at(const vector&lt; T &gt; &amp;vec, int index)</div><div class="ttdef"><b>Definition</b> html.h:50</div></div>
<div class="ttc" id="anamespacelitehtml_html_a8ddaff9e5b881cd89aade1489f211890"><div class="ttname"><a href="namespacelitehtml.html#a8ddaff9e5b881cd89aade1489f211890">litehtml::encoding</a></div><div class="ttdeci">encoding</div><div class="ttdef"><b>Definition</b> encodings.h:9</div></div>
<div class="ttc" id="anamespacelitehtml_html_a9c340138591e7b47c6f4c266d0074bae"><div class="ttname"><a href="namespacelitehtml.html#a9c340138591e7b47c6f4c266d0074bae">litehtml::operator+=</a></div><div class="ttdeci">vector&lt; T &gt; &amp; operator+=(vector&lt; T &gt; &amp;vec, const vector&lt; T &gt; &amp;x)</div><div class="ttdef"><b>Definition</b> html.h:88</div></div>
<div class="ttc" id="anamespacelitehtml_html_ab711d815656d45400e7c3d6830fc74e1"><div class="ttname"><a href="namespacelitehtml.html#ab711d815656d45400e7c3d6830fc74e1">litehtml::visibility</a></div><div class="ttdeci">visibility</div><div class="ttdef"><b>Definition</b> types.h:624</div></div>
<div class="ttc" id="anamespacelitehtml_html_ac2e9e9b4147860e0fc5e76e887824433"><div class="ttname"><a href="namespacelitehtml.html#ac2e9e9b4147860e0fc5e76e887824433">litehtml::end</a></div><div class="ttdeci">bool end(const css_token_vector &amp;tokens, int index)</div><div class="ttdef"><b>Definition</b> gradient.cpp:78</div></div>
<div class="ttc" id="anamespacelitehtml_html_ad2b7f7ce0ff04797df9c7233760d9c80"><div class="ttname"><a href="namespacelitehtml.html#ad2b7f7ce0ff04797df9c7233760d9c80">litehtml::text_align</a></div><div class="ttdeci">text_align</div><div class="ttdef"><b>Definition</b> types.h:572</div></div>
<div class="ttc" id="anamespacesign_html"><div class="ttname"><a href="namespacesign.html">sign</a></div><div class="ttdef"><b>Definition</b> core.h:2689</div></div>
<div class="ttc" id="anamespacespdlog_1_1details_1_1os_html_aa8e51fe363f1c951f14fffea69ab19ca"><div class="ttname"><a href="namespacespdlog_1_1details_1_1os.html#aa8e51fe363f1c951f14fffea69ab19ca">spdlog::details::os::now</a></div><div class="ttdeci">SPDLOG_INLINE spdlog::log_clock::time_point now() SPDLOG_NOEXCEPT</div><div class="ttdef"><b>Definition</b> os-inl.h:76</div></div>
<div class="ttc" id="anamespacespdlog_html_ab7004914a7898ecdf8dc0014e49aa6f6"><div class="ttname"><a href="namespacespdlog.html#ab7004914a7898ecdf8dc0014e49aa6f6">spdlog::log</a></div><div class="ttdeci">void log(source_loc source, level::level_enum lvl, format_string_t&lt; Args... &gt; fmt, Args &amp;&amp;... args)</div><div class="ttdef"><b>Definition</b> spdlog.h:145</div></div>
<div class="ttc" id="astructcanvas__ity_1_1affine__matrix_html"><div class="ttname"><a href="structcanvas__ity_1_1affine__matrix.html">canvas_ity::affine_matrix</a></div><div class="ttdef"><b>Definition</b> canvas_ity.hpp:223</div></div>
<div class="ttc" id="astructcanvas__ity_1_1affine__matrix_html_a06279a73c160cc47458ff2f08f25b566"><div class="ttname"><a href="structcanvas__ity_1_1affine__matrix.html#a06279a73c160cc47458ff2f08f25b566">canvas_ity::affine_matrix::a</a></div><div class="ttdeci">float a</div><div class="ttdef"><b>Definition</b> canvas_ity.hpp:224</div></div>
<div class="ttc" id="astructcanvas__ity_1_1affine__matrix_html_a3abbeddf9bbf1b7c7d81c2b0339c4123"><div class="ttname"><a href="structcanvas__ity_1_1affine__matrix.html#a3abbeddf9bbf1b7c7d81c2b0339c4123">canvas_ity::affine_matrix::b</a></div><div class="ttdeci">float b</div><div class="ttdef"><b>Definition</b> canvas_ity.hpp:224</div></div>
<div class="ttc" id="astructcanvas__ity_1_1affine__matrix_html_a6702d95c040b895c87a2152a6a8609b6"><div class="ttname"><a href="structcanvas__ity_1_1affine__matrix.html#a6702d95c040b895c87a2152a6a8609b6">canvas_ity::affine_matrix::e</a></div><div class="ttdeci">float e</div><div class="ttdef"><b>Definition</b> canvas_ity.hpp:224</div></div>
<div class="ttc" id="astructcanvas__ity_1_1affine__matrix_html_aa59db5a3cdec4569f31143c0cc74242d"><div class="ttname"><a href="structcanvas__ity_1_1affine__matrix.html#aa59db5a3cdec4569f31143c0cc74242d">canvas_ity::affine_matrix::f</a></div><div class="ttdeci">float f</div><div class="ttdef"><b>Definition</b> canvas_ity.hpp:224</div></div>
<div class="ttc" id="astructcanvas__ity_1_1affine__matrix_html_ac8fa9558e05f63f452296d1ef2aba39a"><div class="ttname"><a href="structcanvas__ity_1_1affine__matrix.html#ac8fa9558e05f63f452296d1ef2aba39a">canvas_ity::affine_matrix::d</a></div><div class="ttdeci">float d</div><div class="ttdef"><b>Definition</b> canvas_ity.hpp:224</div></div>
<div class="ttc" id="astructcanvas__ity_1_1affine__matrix_html_ae34446b5fed7e778e2a62a436e47f12e"><div class="ttname"><a href="structcanvas__ity_1_1affine__matrix.html#ae34446b5fed7e778e2a62a436e47f12e">canvas_ity::affine_matrix::c</a></div><div class="ttdeci">float c</div><div class="ttdef"><b>Definition</b> canvas_ity.hpp:224</div></div>
<div class="ttc" id="astructcanvas__ity_1_1bezier__path_html"><div class="ttname"><a href="structcanvas__ity_1_1bezier__path.html">canvas_ity::bezier_path</a></div><div class="ttdef"><b>Definition</b> canvas_ity.hpp:259</div></div>
<div class="ttc" id="astructcanvas__ity_1_1bezier__path_html_a1b9a6aa5d044117cf45d1e193c09c9c6"><div class="ttname"><a href="structcanvas__ity_1_1bezier__path.html#a1b9a6aa5d044117cf45d1e193c09c9c6">canvas_ity::bezier_path::points</a></div><div class="ttdeci">std::vector&lt; xy &gt; points</div><div class="ttdef"><b>Definition</b> canvas_ity.hpp:260</div></div>
<div class="ttc" id="astructcanvas__ity_1_1bezier__path_html_aa9c8932defdc8f64781d16e72fef19a3"><div class="ttname"><a href="structcanvas__ity_1_1bezier__path.html#aa9c8932defdc8f64781d16e72fef19a3">canvas_ity::bezier_path::subpaths</a></div><div class="ttdeci">std::vector&lt; subpath_data &gt; subpaths</div><div class="ttdef"><b>Definition</b> canvas_ity.hpp:261</div></div>
<div class="ttc" id="astructcanvas__ity_1_1font__face_html"><div class="ttname"><a href="structcanvas__ity_1_1font__face.html">canvas_ity::font_face</a></div><div class="ttdef"><b>Definition</b> canvas_ity.hpp:248</div></div>
<div class="ttc" id="astructcanvas__ity_1_1font__face_html_a16fbf4a8de00a34df30326cadc78c8c6"><div class="ttname"><a href="structcanvas__ity_1_1font__face.html#a16fbf4a8de00a34df30326cadc78c8c6">canvas_ity::font_face::maxp</a></div><div class="ttdeci">int maxp</div><div class="ttdef"><b>Definition</b> canvas_ity.hpp:250</div></div>
<div class="ttc" id="astructcanvas__ity_1_1font__face_html_a3a90e69c33234ccde6923be3056750ec"><div class="ttname"><a href="structcanvas__ity_1_1font__face.html#a3a90e69c33234ccde6923be3056750ec">canvas_ity::font_face::data</a></div><div class="ttdeci">std::vector&lt; unsigned char &gt; data</div><div class="ttdef"><b>Definition</b> canvas_ity.hpp:249</div></div>
<div class="ttc" id="astructcanvas__ity_1_1font__face_html_a4e4fb482b9b9b7eec91997680b30cd25"><div class="ttname"><a href="structcanvas__ity_1_1font__face.html#a4e4fb482b9b9b7eec91997680b30cd25">canvas_ity::font_face::hhea</a></div><div class="ttdeci">int hhea</div><div class="ttdef"><b>Definition</b> canvas_ity.hpp:250</div></div>
<div class="ttc" id="astructcanvas__ity_1_1font__face_html_a62ca6aac39a43f0e1f8794e1feb63321"><div class="ttname"><a href="structcanvas__ity_1_1font__face.html#a62ca6aac39a43f0e1f8794e1feb63321">canvas_ity::font_face::loca</a></div><div class="ttdeci">int loca</div><div class="ttdef"><b>Definition</b> canvas_ity.hpp:250</div></div>
<div class="ttc" id="astructcanvas__ity_1_1font__face_html_a75fb403a4159fe65601fb200d2692cda"><div class="ttname"><a href="structcanvas__ity_1_1font__face.html#a75fb403a4159fe65601fb200d2692cda">canvas_ity::font_face::os_2</a></div><div class="ttdeci">int os_2</div><div class="ttdef"><b>Definition</b> canvas_ity.hpp:250</div></div>
<div class="ttc" id="astructcanvas__ity_1_1font__face_html_aae90819c2cb1ab8241bfee97d14602d0"><div class="ttname"><a href="structcanvas__ity_1_1font__face.html#aae90819c2cb1ab8241bfee97d14602d0">canvas_ity::font_face::hmtx</a></div><div class="ttdeci">int hmtx</div><div class="ttdef"><b>Definition</b> canvas_ity.hpp:250</div></div>
<div class="ttc" id="astructcanvas__ity_1_1font__face_html_abc046249f63b83f8168e447240f3e226"><div class="ttname"><a href="structcanvas__ity_1_1font__face.html#abc046249f63b83f8168e447240f3e226">canvas_ity::font_face::cmap</a></div><div class="ttdeci">int cmap</div><div class="ttdef"><b>Definition</b> canvas_ity.hpp:250</div></div>
<div class="ttc" id="astructcanvas__ity_1_1font__face_html_ac8800d40f09123ed5287bbf390a49971"><div class="ttname"><a href="structcanvas__ity_1_1font__face.html#ac8800d40f09123ed5287bbf390a49971">canvas_ity::font_face::glyf</a></div><div class="ttdeci">int glyf</div><div class="ttdef"><b>Definition</b> canvas_ity.hpp:250</div></div>
<div class="ttc" id="astructcanvas__ity_1_1font__face_html_acfdadcc7998b631ce831be49b7cc22d9"><div class="ttname"><a href="structcanvas__ity_1_1font__face.html#acfdadcc7998b631ce831be49b7cc22d9">canvas_ity::font_face::head</a></div><div class="ttdeci">int head</div><div class="ttdef"><b>Definition</b> canvas_ity.hpp:250</div></div>
<div class="ttc" id="astructcanvas__ity_1_1font__face_html_ae9187b1026b81d08dd5000c7b8c246c2"><div class="ttname"><a href="structcanvas__ity_1_1font__face.html#ae9187b1026b81d08dd5000c7b8c246c2">canvas_ity::font_face::scale</a></div><div class="ttdeci">float scale</div><div class="ttdef"><b>Definition</b> canvas_ity.hpp:251</div></div>
<div class="ttc" id="astructcanvas__ity_1_1line__path_html"><div class="ttname"><a href="structcanvas__ity_1_1line__path.html">canvas_ity::line_path</a></div><div class="ttdef"><b>Definition</b> canvas_ity.hpp:264</div></div>
<div class="ttc" id="astructcanvas__ity_1_1line__path_html_a27efd4b0dec6d85e4ba861c34bacdbf4"><div class="ttname"><a href="structcanvas__ity_1_1line__path.html#a27efd4b0dec6d85e4ba861c34bacdbf4">canvas_ity::line_path::points</a></div><div class="ttdeci">std::vector&lt; xy &gt; points</div><div class="ttdef"><b>Definition</b> canvas_ity.hpp:265</div></div>
<div class="ttc" id="astructcanvas__ity_1_1line__path_html_acfec22d114fac137ae0a70af069874d8"><div class="ttname"><a href="structcanvas__ity_1_1line__path.html#acfec22d114fac137ae0a70af069874d8">canvas_ity::line_path::subpaths</a></div><div class="ttdeci">std::vector&lt; subpath_data &gt; subpaths</div><div class="ttdef"><b>Definition</b> canvas_ity.hpp:266</div></div>
<div class="ttc" id="astructcanvas__ity_1_1paint__brush_html"><div class="ttname"><a href="structcanvas__ity_1_1paint__brush.html">canvas_ity::paint_brush</a></div><div class="ttdef"><b>Definition</b> canvas_ity.hpp:227</div></div>
<div class="ttc" id="astructcanvas__ity_1_1paint__brush_html_a05aced1e2f17c9a4d33e9cc67179a197"><div class="ttname"><a href="structcanvas__ity_1_1paint__brush.html#a05aced1e2f17c9a4d33e9cc67179a197">canvas_ity::paint_brush::end</a></div><div class="ttdeci">xy end</div><div class="ttdef"><b>Definition</b> canvas_ity.hpp:240</div></div>
<div class="ttc" id="astructcanvas__ity_1_1paint__brush_html_a05d02189a4fe8dd52777f920384923ba"><div class="ttname"><a href="structcanvas__ity_1_1paint__brush.html#a05d02189a4fe8dd52777f920384923ba">canvas_ity::paint_brush::start</a></div><div class="ttdeci">xy start</div><div class="ttdef"><b>Definition</b> canvas_ity.hpp:240</div></div>
<div class="ttc" id="astructcanvas__ity_1_1paint__brush_html_a070cede44796fdac87cad5b006d6c241"><div class="ttname"><a href="structcanvas__ity_1_1paint__brush.html#a070cede44796fdac87cad5b006d6c241">canvas_ity::paint_brush::height</a></div><div class="ttdeci">int height</div><div class="ttdef"><b>Definition</b> canvas_ity.hpp:244</div></div>
<div class="ttc" id="astructcanvas__ity_1_1paint__brush_html_a1468351f01cd8e09261c676485cef558"><div class="ttname"><a href="structcanvas__ity_1_1paint__brush.html#a1468351f01cd8e09261c676485cef558">canvas_ity::paint_brush::css_radius</a></div><div class="ttdeci">xy css_radius</div><div class="ttdef"><b>Definition</b> canvas_ity.hpp:242</div></div>
<div class="ttc" id="astructcanvas__ity_1_1paint__brush_html_a1fe790128ae84fd93604d8ccd56f0f3d"><div class="ttname"><a href="structcanvas__ity_1_1paint__brush.html#a1fe790128ae84fd93604d8ccd56f0f3d">canvas_ity::paint_brush::angle</a></div><div class="ttdeci">float angle</div><div class="ttdef"><b>Definition</b> canvas_ity.hpp:243</div></div>
<div class="ttc" id="astructcanvas__ity_1_1paint__brush_html_a213a6de70bf42a63030b25ae45232f4d"><div class="ttname"><a href="structcanvas__ity_1_1paint__brush.html#a213a6de70bf42a63030b25ae45232f4d">canvas_ity::paint_brush::end_radius</a></div><div class="ttdeci">float end_radius</div><div class="ttdef"><b>Definition</b> canvas_ity.hpp:241</div></div>
<div class="ttc" id="astructcanvas__ity_1_1paint__brush_html_a2cba23a419c5a91d9ae967330d4d7b1a"><div class="ttname"><a href="structcanvas__ity_1_1paint__brush.html#a2cba23a419c5a91d9ae967330d4d7b1a">canvas_ity::paint_brush::width</a></div><div class="ttdeci">int width</div><div class="ttdef"><b>Definition</b> canvas_ity.hpp:244</div></div>
<div class="ttc" id="astructcanvas__ity_1_1paint__brush_html_a6201452e6cf4813c62f3c3086d930872"><div class="ttname"><a href="structcanvas__ity_1_1paint__brush.html#a6201452e6cf4813c62f3c3086d930872">canvas_ity::paint_brush::start_radius</a></div><div class="ttdeci">float start_radius</div><div class="ttdef"><b>Definition</b> canvas_ity.hpp:241</div></div>
<div class="ttc" id="astructcanvas__ity_1_1paint__brush_html_a6932b9c4b42f56d33e170708fff251a6"><div class="ttname"><a href="structcanvas__ity_1_1paint__brush.html#a6932b9c4b42f56d33e170708fff251a6">canvas_ity::paint_brush::repetition</a></div><div class="ttdeci">repetition_style repetition</div><div class="ttdef"><b>Definition</b> canvas_ity.hpp:245</div></div>
<div class="ttc" id="astructcanvas__ity_1_1paint__brush_html_a91d8bc53347a4c08c8ab4ed077d21a0e"><div class="ttname"><a href="structcanvas__ity_1_1paint__brush.html#a91d8bc53347a4c08c8ab4ed077d21a0e">canvas_ity::paint_brush::stops</a></div><div class="ttdeci">std::vector&lt; float &gt; stops</div><div class="ttdef"><b>Definition</b> canvas_ity.hpp:238</div></div>
<div class="ttc" id="astructcanvas__ity_1_1paint__brush_html_aab538f72fb3bbde3bf9917383c320718"><div class="ttname"><a href="structcanvas__ity_1_1paint__brush.html#aab538f72fb3bbde3bf9917383c320718">canvas_ity::paint_brush::colors</a></div><div class="ttdeci">std::vector&lt; rgba &gt; colors</div><div class="ttdef"><b>Definition</b> canvas_ity.hpp:237</div></div>
<div class="ttc" id="astructcanvas__ity_1_1paint__brush_html_ab6686ae3436f145ab241196f2337e010"><div class="ttname"><a href="structcanvas__ity_1_1paint__brush.html#ab6686ae3436f145ab241196f2337e010">canvas_ity::paint_brush::types</a></div><div class="ttdeci">types</div><div class="ttdef"><b>Definition</b> canvas_ity.hpp:229</div></div>
<div class="ttc" id="astructcanvas__ity_1_1paint__brush_html_ab6686ae3436f145ab241196f2337e010a9441d4b111a1ff0bf1b075834adb9937"><div class="ttname"><a href="structcanvas__ity_1_1paint__brush.html#ab6686ae3436f145ab241196f2337e010a9441d4b111a1ff0bf1b075834adb9937">canvas_ity::paint_brush::radial</a></div><div class="ttdeci">@ radial</div><div class="ttdef"><b>Definition</b> canvas_ity.hpp:233</div></div>
<div class="ttc" id="astructcanvas__ity_1_1paint__brush_html_ab6686ae3436f145ab241196f2337e010acee0286b8cd79b2f387c15a5d1462aaf"><div class="ttname"><a href="structcanvas__ity_1_1paint__brush.html#ab6686ae3436f145ab241196f2337e010acee0286b8cd79b2f387c15a5d1462aaf">canvas_ity::paint_brush::pattern</a></div><div class="ttdeci">@ pattern</div><div class="ttdef"><b>Definition</b> canvas_ity.hpp:231</div></div>
<div class="ttc" id="astructcanvas__ity_1_1paint__brush_html_ab6686ae3436f145ab241196f2337e010ad3adc95a76cdcb1c12fb911b9ae31d67"><div class="ttname"><a href="structcanvas__ity_1_1paint__brush.html#ab6686ae3436f145ab241196f2337e010ad3adc95a76cdcb1c12fb911b9ae31d67">canvas_ity::paint_brush::conic</a></div><div class="ttdeci">@ conic</div><div class="ttdef"><b>Definition</b> canvas_ity.hpp:235</div></div>
<div class="ttc" id="astructcanvas__ity_1_1paint__brush_html_ab6686ae3436f145ab241196f2337e010ad457f51ef368f0241a8f41b510298fd9"><div class="ttname"><a href="structcanvas__ity_1_1paint__brush.html#ab6686ae3436f145ab241196f2337e010ad457f51ef368f0241a8f41b510298fd9">canvas_ity::paint_brush::linear</a></div><div class="ttdeci">@ linear</div><div class="ttdef"><b>Definition</b> canvas_ity.hpp:232</div></div>
<div class="ttc" id="astructcanvas__ity_1_1paint__brush_html_ab6686ae3436f145ab241196f2337e010aed9f68685c6e52ea8d0b31f8dc882a6e"><div class="ttname"><a href="structcanvas__ity_1_1paint__brush.html#ab6686ae3436f145ab241196f2337e010aed9f68685c6e52ea8d0b31f8dc882a6e">canvas_ity::paint_brush::css_radial</a></div><div class="ttdeci">@ css_radial</div><div class="ttdef"><b>Definition</b> canvas_ity.hpp:234</div></div>
<div class="ttc" id="astructcanvas__ity_1_1paint__brush_html_ab6686ae3436f145ab241196f2337e010afba9224071f073610edf89517f965566"><div class="ttname"><a href="structcanvas__ity_1_1paint__brush.html#ab6686ae3436f145ab241196f2337e010afba9224071f073610edf89517f965566">canvas_ity::paint_brush::color</a></div><div class="ttdeci">@ color</div><div class="ttdef"><b>Definition</b> canvas_ity.hpp:230</div></div>
<div class="ttc" id="astructcanvas__ity_1_1paint__brush_html_aecc3ff18e6d5469aa2f29f5b9f5e1965"><div class="ttname"><a href="structcanvas__ity_1_1paint__brush.html#aecc3ff18e6d5469aa2f29f5b9f5e1965">canvas_ity::paint_brush::hints</a></div><div class="ttdeci">std::vector&lt; std::optional&lt; float &gt; &gt; hints</div><div class="ttdef"><b>Definition</b> canvas_ity.hpp:239</div></div>
<div class="ttc" id="astructcanvas__ity_1_1paint__brush_html_aff0e7b3da803021f501dd60016e10748"><div class="ttname"><a href="structcanvas__ity_1_1paint__brush.html#aff0e7b3da803021f501dd60016e10748">canvas_ity::paint_brush::type</a></div><div class="ttdeci">enum canvas_ity::paint_brush::types type</div></div>
<div class="ttc" id="astructcanvas__ity_1_1pixel__run_html"><div class="ttname"><a href="structcanvas__ity_1_1pixel__run.html">canvas_ity::pixel_run</a></div><div class="ttdef"><b>Definition</b> canvas_ity.hpp:269</div></div>
<div class="ttc" id="astructcanvas__ity_1_1pixel__run_html_a5560517a8c77d18a5ffd3868ebc7fa9e"><div class="ttname"><a href="structcanvas__ity_1_1pixel__run.html#a5560517a8c77d18a5ffd3868ebc7fa9e">canvas_ity::pixel_run::delta</a></div><div class="ttdeci">float delta</div><div class="ttdef"><b>Definition</b> canvas_ity.hpp:271</div></div>
<div class="ttc" id="astructcanvas__ity_1_1pixel__run_html_a766e19a6125b9497fd1c5c1072d1056a"><div class="ttname"><a href="structcanvas__ity_1_1pixel__run.html#a766e19a6125b9497fd1c5c1072d1056a">canvas_ity::pixel_run::x</a></div><div class="ttdeci">unsigned short x</div><div class="ttdef"><b>Definition</b> canvas_ity.hpp:270</div></div>
<div class="ttc" id="astructcanvas__ity_1_1pixel__run_html_a7bae9c68613cc4abf809afadd97a1377"><div class="ttname"><a href="structcanvas__ity_1_1pixel__run.html#a7bae9c68613cc4abf809afadd97a1377">canvas_ity::pixel_run::y</a></div><div class="ttdeci">unsigned short y</div><div class="ttdef"><b>Definition</b> canvas_ity.hpp:270</div></div>
<div class="ttc" id="astructcanvas__ity_1_1rgba_html"><div class="ttname"><a href="structcanvas__ity_1_1rgba.html">canvas_ity::rgba</a></div><div class="ttdef"><b>Definition</b> canvas_ity.hpp:217</div></div>
<div class="ttc" id="astructcanvas__ity_1_1rgba_html_a53e2d564e8a8ff73275b1f5b24f869e8"><div class="ttname"><a href="structcanvas__ity_1_1rgba.html#a53e2d564e8a8ff73275b1f5b24f869e8">canvas_ity::rgba::r</a></div><div class="ttdeci">float r</div><div class="ttdef"><b>Definition</b> canvas_ity.hpp:218</div></div>
<div class="ttc" id="astructcanvas__ity_1_1rgba_html_a540901a530f85de9d40b2fe04c7edfb1"><div class="ttname"><a href="structcanvas__ity_1_1rgba.html#a540901a530f85de9d40b2fe04c7edfb1">canvas_ity::rgba::rgba</a></div><div class="ttdeci">rgba(float, float, float, float)</div></div>
<div class="ttc" id="astructcanvas__ity_1_1rgba_html_a56d4a13f86fa2eafafdb5d631e1dadfc"><div class="ttname"><a href="structcanvas__ity_1_1rgba.html#a56d4a13f86fa2eafafdb5d631e1dadfc">canvas_ity::rgba::a</a></div><div class="ttdeci">float a</div><div class="ttdef"><b>Definition</b> canvas_ity.hpp:218</div></div>
<div class="ttc" id="astructcanvas__ity_1_1rgba_html_a61252cb52bbfb855b4930884bede8f69"><div class="ttname"><a href="structcanvas__ity_1_1rgba.html#a61252cb52bbfb855b4930884bede8f69">canvas_ity::rgba::g</a></div><div class="ttdeci">float g</div><div class="ttdef"><b>Definition</b> canvas_ity.hpp:218</div></div>
<div class="ttc" id="astructcanvas__ity_1_1rgba_html_a794764cb2c96ca696e26001627599714"><div class="ttname"><a href="structcanvas__ity_1_1rgba.html#a794764cb2c96ca696e26001627599714">canvas_ity::rgba::rgba</a></div><div class="ttdeci">rgba()</div></div>
<div class="ttc" id="astructcanvas__ity_1_1rgba_html_a91502f52205899f0d7fd672c984ec627"><div class="ttname"><a href="structcanvas__ity_1_1rgba.html#a91502f52205899f0d7fd672c984ec627">canvas_ity::rgba::b</a></div><div class="ttdeci">float b</div><div class="ttdef"><b>Definition</b> canvas_ity.hpp:218</div></div>
<div class="ttc" id="astructcanvas__ity_1_1subpath__data_html"><div class="ttname"><a href="structcanvas__ity_1_1subpath__data.html">canvas_ity::subpath_data</a></div><div class="ttdef"><b>Definition</b> canvas_ity.hpp:254</div></div>
<div class="ttc" id="astructcanvas__ity_1_1subpath__data_html_a0b74d04aba5d58c4669dfd5cd48f08ce"><div class="ttname"><a href="structcanvas__ity_1_1subpath__data.html#a0b74d04aba5d58c4669dfd5cd48f08ce">canvas_ity::subpath_data::closed</a></div><div class="ttdeci">bool closed</div><div class="ttdef"><b>Definition</b> canvas_ity.hpp:256</div></div>
<div class="ttc" id="astructcanvas__ity_1_1subpath__data_html_add70c6c4d216df681fad6a70fd2dd287"><div class="ttname"><a href="structcanvas__ity_1_1subpath__data.html#add70c6c4d216df681fad6a70fd2dd287">canvas_ity::subpath_data::count</a></div><div class="ttdeci">size_t count</div><div class="ttdef"><b>Definition</b> canvas_ity.hpp:255</div></div>
<div class="ttc" id="astructcanvas__ity_1_1xy_html"><div class="ttname"><a href="structcanvas__ity_1_1xy.html">canvas_ity::xy</a></div><div class="ttdef"><b>Definition</b> canvas_ity.hpp:211</div></div>
<div class="ttc" id="astructcanvas__ity_1_1xy_html_a663baa6faebf350489bcfd135a380503"><div class="ttname"><a href="structcanvas__ity_1_1xy.html#a663baa6faebf350489bcfd135a380503">canvas_ity::xy::xy</a></div><div class="ttdeci">xy(float, float)</div></div>
<div class="ttc" id="astructcanvas__ity_1_1xy_html_a99cf5c3eb0d1ae13332f9f074d9584f1"><div class="ttname"><a href="structcanvas__ity_1_1xy.html#a99cf5c3eb0d1ae13332f9f074d9584f1">canvas_ity::xy::x</a></div><div class="ttdeci">float x</div><div class="ttdef"><b>Definition</b> canvas_ity.hpp:212</div></div>
<div class="ttc" id="astructcanvas__ity_1_1xy_html_aebf5cabb01fddadd60cc071dcc3cbcf0"><div class="ttname"><a href="structcanvas__ity_1_1xy.html#aebf5cabb01fddadd60cc071dcc3cbcf0">canvas_ity::xy::y</a></div><div class="ttdeci">float y</div><div class="ttdef"><b>Definition</b> canvas_ity.hpp:212</div></div>
<div class="ttc" id="astructcanvas__ity_1_1xy_html_afe6453e0ff3b67e444997a64ebb6ef6d"><div class="ttname"><a href="structcanvas__ity_1_1xy.html#afe6453e0ff3b67e444997a64ebb6ef6d">canvas_ity::xy::xy</a></div><div class="ttdeci">xy()</div></div>
<div class="ttc" id="astructcolor_html"><div class="ttname"><a href="structcolor.html">color</a></div><div class="ttdef"><b>Definition</b> Bitmap.h:10</div></div>
<div class="ttc" id="astructcolor_html_a09936f14d9a1791aea4f418eb5dbf13b"><div class="ttname"><a href="structcolor.html#a09936f14d9a1791aea4f418eb5dbf13b">color::a</a></div><div class="ttdeci">byte a</div><div class="ttdef"><b>Definition</b> Bitmap.h:11</div></div>
<div class="ttc" id="astructcolor_html_a54c0fe3a59d6f43a47d365c545de1693"><div class="ttname"><a href="structcolor.html#a54c0fe3a59d6f43a47d365c545de1693">color::b</a></div><div class="ttdeci">byte b</div><div class="ttdef"><b>Definition</b> Bitmap.h:11</div></div>
<div class="ttc" id="astructcolor_html_abdd01e7f85b6d9af6f95b50efa25675a"><div class="ttname"><a href="structcolor.html#abdd01e7f85b6d9af6f95b50efa25675a">color::r</a></div><div class="ttdeci">byte r</div><div class="ttdef"><b>Definition</b> Bitmap.h:11</div></div>
<div class="ttc" id="astructcolor_html_acf7ab1f06261eb6f6faa2be62e426261"><div class="ttname"><a href="structcolor.html#acf7ab1f06261eb6f6faa2be62e426261">color::g</a></div><div class="ttdeci">byte g</div><div class="ttdef"><b>Definition</b> Bitmap.h:11</div></div>
<div class="ttc" id="astructdata_html"><div class="ttname"><a href="structdata.html">data</a></div><div class="ttdef"><b>Definition</b> format.h:1901</div></div>
<div class="ttc" id="atag__strings_8h_html_a21ad0bd836b90d08f4cf640b4c298e7c"><div class="ttname"><a href="tag__strings_8h.html#a21ad0bd836b90d08f4cf640b4c298e7c">b</a></div><div class="ttdeci">b</div><div class="ttdef"><b>Definition</b> tag_strings.h:61</div></div>
<div class="ttc" id="atag__strings_8h_html_a4124bc0a9335c27f086f24ba207a4912"><div class="ttname"><a href="tag__strings_8h.html#a4124bc0a9335c27f086f24ba207a4912">a</a></div><div class="ttdeci">a</div><div class="ttdef"><b>Definition</b> tag_strings.h:43</div></div>
<div class="ttc" id="atag__strings_8h_html_a42cb5f5737262947250c709931232c69"><div class="ttname"><a href="tag__strings_8h.html#a42cb5f5737262947250c709931232c69">image</a></div><div class="ttdeci">image</div><div class="ttdef"><b>Definition</b> tag_strings.h:74</div></div>
<div class="ttc" id="atag__strings_8h_html_a4329d2992f02e00a6e706a5443269afc"><div class="ttname"><a href="tag__strings_8h.html#a4329d2992f02e00a6e706a5443269afc">area</a></div><div class="ttdeci">area</div><div class="ttdef"><b>Definition</b> tag_strings.h:87</div></div>
<div class="ttc" id="atag__strings_8h_html_a434acd167ada209c34621739b6b8c583"><div class="ttname"><a href="tag__strings_8h.html#a434acd167ada209c34621739b6b8c583">head</a></div><div class="ttdeci">head</div><div class="ttdef"><b>Definition</b> tag_strings.h:5</div></div>
<div class="ttc" id="atag__strings_8h_html_a4676578af881b39f9fb1d101298d1778"><div class="ttname"><a href="tag__strings_8h.html#a4676578af881b39f9fb1d101298d1778">span</a></div><div class="ttdeci">span</div><div class="ttdef"><b>Definition</b> tag_strings.h:69</div></div>
<div class="ttc" id="atag__strings_8h_html_a8277d5a773fad745b5c98c8c498f9a05"><div class="ttname"><a href="tag__strings_8h.html#a8277d5a773fad745b5c98c8c498f9a05">font</a></div><div class="ttdeci">annotation font</div><div class="ttdef"><b>Definition</b> tag_strings.h:148</div></div>
<div class="ttc" id="atag__strings_8h_html_afa9e9838abb44338f7cbe41dc6f846d4"><div class="ttname"><a href="tag__strings_8h.html#afa9e9838abb44338f7cbe41dc6f846d4">canvas</a></div><div class="ttdeci">canvas</div><div class="ttdef"><b>Definition</b> tag_strings.h:85</div></div>
<div class="ttc" id="atag__strings_8h_html_afccde767bad748fa7ca78d8d025fb7ab"><div class="ttname"><a href="tag__strings_8h.html#afccde767bad748fa7ca78d8d025fb7ab">table</a></div><div class="ttdeci">annotation table</div><div class="ttdef"><b>Definition</b> tag_strings.h:100</div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_c5da75fdc1d6c57999112ed830c87a3c.html">vendor</a></li><li class="navelem"><a class="el" href="dir_5499e648b2258ea93e8a6343b313b5fe.html">litehtml</a></li><li class="navelem"><a class="el" href="dir_e86f5dea86c294b4717e997b4c2d7554.html">containers</a></li><li class="navelem"><a class="el" href="dir_26932fa1f3104c7caa9e7e2c461b9308.html">test</a></li><li class="navelem"><a class="el" href="canvas__ity_8hpp.html">canvas_ity.hpp</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8 </li>
  </ul>
</div>
</body>
</html>
